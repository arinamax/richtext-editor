var RU=Object.defineProperty;var _U=(cn,Ot,An)=>Ot in cn?RU(cn,Ot,{enumerable:!0,configurable:!0,writable:!0,value:An}):cn[Ot]=An;var m8=(cn,Ot,An)=>(_U(cn,typeof Ot!="symbol"?Ot+"":Ot,An),An);(function(){const Ot=document.createElement("link").relList;if(Ot&&Ot.supports&&Ot.supports("modulepreload"))return;for(const Xt of document.querySelectorAll('link[rel="modulepreload"]'))Ln(Xt);new MutationObserver(Xt=>{for(const yr of Xt)if(yr.type==="childList")for(const ar of yr.addedNodes)ar.tagName==="LINK"&&ar.rel==="modulepreload"&&Ln(ar)}).observe(document,{childList:!0,subtree:!0});function An(Xt){const yr={};return Xt.integrity&&(yr.integrity=Xt.integrity),Xt.referrerPolicy&&(yr.referrerPolicy=Xt.referrerPolicy),Xt.crossOrigin==="use-credentials"?yr.credentials="include":Xt.crossOrigin==="anonymous"?yr.credentials="omit":yr.credentials="same-origin",yr}function Ln(Xt){if(Xt.ep)return;Xt.ep=!0;const yr=An(Xt);fetch(Xt.href,yr)}})();class BU{constructor(Ot){m8(this,"trimmedApiUrl","");this.editorSDK=Ot,Ot.onInit(()=>{let An=Ot.getContext().apiUrl;An.endsWith("/")&&(An=An.substring(0,An.length-1)),An.endsWith("/api")&&(An=An.substring(0,An.length-4)),this.trimmedApiUrl=An})}get appName(){return this.editorSDK.getContext().appName}get accessToken(){return this.editorSDK.getContext().user.accessToken}get apiUrl(){return this.trimmedApiUrl}contentUrl(Ot){return`${this.apiUrl}${Ot._links.self.href}`}assetUrl(Ot){return`${this.apiUrl}${Ot._links.content.href}`}async upload(Ot){const An=`${this.apiUrl}/api/apps/${this.appName}/assets`,Ln=this.accessToken;try{const Xt=new FormData;return Xt.append("file",Ot),await(await fetch(An,{method:"POST",headers:{Authorization:`Bearer ${Ln}`},body:Xt})).json()}catch{return null}}}var SB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function MU(cn){return cn&&cn.__esModule&&Object.prototype.hasOwnProperty.call(cn,"default")?cn.default:cn}var h8={exports:{}};(function(cn){(function(){var Ot=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},An=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Ln=function(e,n){var a=Array.prototype.slice.call(e);return a.sort(n)},Xt=function(e,n){return yr(function(a,i){return e.eq(n(a),n(i))})},yr=function(e){return{eq:e}},ar=yr(function(e,n){return e===n}),Ar=ar,no=function(e){return yr(function(n,a){if(n.length!==a.length)return!1;for(var i=n.length,s=0;s<i;s++)if(!e.eq(n[s],a[s]))return!1;return!0})},So=function(e,n){return Xt(no(e),function(a){return Ln(a,n)})},fo=function(e){return yr(function(n,a){var i=Object.keys(n),s=Object.keys(a);if(!So(Ar).eq(i,s))return!1;for(var f=i.length,g=0;g<f;g++){var b=i[g];if(!e.eq(n[b],a[b]))return!1}return!0})},Tn=yr(function(e,n){if(e===n)return!0;var a=Ot(e),i=Ot(n);return a!==i?!1:An(a)?e===n:a==="array"?no(Tn).eq(e,n):a==="object"?fo(Tn).eq(e,n):!1}),or=function(e){var n=typeof e;return e===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},za=function(e){return function(n){return or(n)===e}},Ht=function(e){return function(n){return typeof n===e}},at=function(e){return function(n){return e===n}},cr=za("string"),Ct=za("object"),_n=za("array"),ye=at(null),Lt=Ht("boolean"),Bt=at(void 0),Vr=function(e){return e==null},Rn=function(e){return!Vr(e)},Mt=Ht("function"),kn=Ht("number"),Tt=function(){},vo=function(e,n){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return e(n.apply(null,a))}},ue=function(e,n){return function(a){return e(n(a))}},W=function(e){return function(){return e}},gt=function(e){return e},nr=function(e,n){return e===n};function et(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var f=n.concat(i);return e.apply(null,f)}}var Ur=function(e){return function(n){return!e(n)}},qn=function(e){return function(){throw new Error(e)}},D=function(e){return e()},ia=function(e){e()},ut=W(!1),Et=W(!0),xo=function(){return wi},wi=function(){var e=function(i){return i()},n=gt,a={fold:function(i,s){return i()},isSome:ut,isNone:Et,getOr:n,getOrThunk:e,getOrDie:function(i){throw new Error(i||"error: getOrDie called on none.")},getOrNull:W(null),getOrUndefined:W(void 0),or:n,orThunk:e,map:xo,each:Tt,bind:xo,exists:ut,forall:Et,filter:function(){return xo()},toArray:function(){return[]},toString:W("none()")};return a}(),Un=function(e){var n=W(e),a=function(){return s},i=function(f){return f(e)},s={fold:function(f,g){return g(e)},isSome:Et,isNone:ut,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:a,orThunk:a,map:function(f){return Un(f(e))},each:function(f){f(e)},bind:i,exists:i,forall:i,filter:function(f){return f(e)?s:wi},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return s},Ca=function(e){return e==null?wi:Un(e)},ee={some:Un,none:xo,from:Ca},ni=Array.prototype.slice,nt=Array.prototype.indexOf,kt=Array.prototype.push,Ci=function(e,n){return nt.call(e,n)},Fr=function(e,n){var a=Ci(e,n);return a===-1?ee.none():ee.some(a)},tn=function(e,n){return Ci(e,n)>-1},Wr=function(e,n){for(var a=0,i=e.length;a<i;a++){var s=e[a];if(n(s,a))return!0}return!1},Hn=function(e,n){for(var a=e.length,i=new Array(a),s=0;s<a;s++){var f=e[s];i[s]=n(f,s)}return i},ft=function(e,n){for(var a=0,i=e.length;a<i;a++){var s=e[a];n(s,a)}},lr=function(e,n){for(var a=e.length-1;a>=0;a--){var i=e[a];n(i,a)}},Va=function(e,n){for(var a=[],i=[],s=0,f=e.length;s<f;s++){var g=e[s],b=n(g,s)?a:i;b.push(g)}return{pass:a,fail:i}},jt=function(e,n){for(var a=[],i=0,s=e.length;i<s;i++){var f=e[i];n(f,i)&&a.push(f)}return a},Jr=function(e,n,a){return lr(e,function(i,s){a=n(a,i,s)}),a},jr=function(e,n,a){return ft(e,function(i,s){a=n(a,i,s)}),a},an=function(e,n,a){for(var i=0,s=e.length;i<s;i++){var f=e[i];if(n(f,i))return ee.some(f);if(a(f,i))break}return ee.none()},ua=function(e,n){return an(e,n,ut)},Si=function(e,n){for(var a=0,i=e.length;a<i;a++){var s=e[a];if(n(s,a))return ee.some(a)}return ee.none()},rs=function(e){for(var n=[],a=0,i=e.length;a<i;++a){if(!_n(e[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+e);kt.apply(n,e[a])}return n},nu=function(e,n){return rs(Hn(e,n))},Li=function(e,n){for(var a=0,i=e.length;a<i;++a){var s=e[a];if(n(s,a)!==!0)return!1}return!0},To=function(e){var n=ni.call(e,0);return n.reverse(),n},bu=function(e,n){return jt(e,function(a){return!tn(n,a)})},Go=function(e,n){for(var a={},i=0,s=e.length;i<s;i++){var f=e[i];a[String(f)]=n(f,i)}return a},sa=function(e,n){var a=ni.call(e,0);return a.sort(n),a},ta=function(e,n){return n>=0&&n<e.length?ee.some(e[n]):ee.none()},Ua=function(e){return ta(e,0)},Gr=function(e){return ta(e,e.length-1)},kr=Mt(Array.from)?Array.from:function(e){return ni.call(e)},Po=function(e,n){for(var a=0;a<e.length;a++){var i=n(e[a],a);if(i.isSome())return i}return ee.none()},xi=Object.keys,ro=Object.hasOwnProperty,Zn=function(e,n){for(var a=xi(e),i=0,s=a.length;i<s;i++){var f=a[i],g=e[f];n(g,f)}},mo=function(e,n){return No(e,function(a,i){return{k:i,v:n(a,i)}})},No=function(e,n){var a={};return Zn(e,function(i,s){var f=n(i,s);a[f.k]=f.v}),a},$o=function(e){return function(n,a){e[a]=n}},Gt=function(e,n,a,i){var s={};return Zn(e,function(f,g){(n(f,g)?a:i)(f,g)}),s},hr=function(e,n){var a={},i={};return Gt(e,n,$o(a),$o(i)),{t:a,f:i}},ha=function(e,n){var a={};return Gt(e,n,$o(a),Tt),a},Ti=function(e,n){var a=[];return Zn(e,function(i,s){a.push(n(i,s))}),a},Es=function(e){return Ti(e,gt)},pr=function(e,n){return $n(e,n)?ee.from(e[n]):ee.none()},$n=function(e,n){return ro.call(e,n)},ko=function(e,n){return $n(e,n)&&e[n]!==void 0&&e[n]!==null},as=function(e,n,a){return a===void 0&&(a=Tn),fo(a).eq(e,n)},qo=Array.isArray,ri=function(e){if(qo(e))return e;for(var n=[],a=0,i=e.length;a<i;a++)n[a]=e[a];return n},ai=function(e,n,a){var i,s;if(!e)return!1;if(a=a||e,e.length!==void 0){for(i=0,s=e.length;i<s;i++)if(n.call(a,e[i],i,e)===!1)return!1}else for(i in e)if($n(e,i)&&n.call(a,e[i],i,e)===!1)return!1;return!0},$u=function(e,n){var a=[];return ai(e,function(i,s){a.push(n(i,s,e))}),a},Hi=function(e,n){var a=[];return ai(e,function(i,s){(!n||n(i,s,e))&&a.push(i)}),a},oi=function(e,n){if(e){for(var a=0,i=e.length;a<i;a++)if(e[a]===n)return a}return-1},zu=function(e,n,a,i){for(var s=Bt(a)?e[0]:a,f=0;f<e.length;f++)s=n.call(i,s,e[f],f);return s},Er=function(e,n,a){var i,s;for(i=0,s=e.length;i<s;i++)if(n.call(a,e[i],i,e))return i;return-1},Vi=function(e){return e[e.length-1]},Jt=function(){return Jt=Object.assign||function(n){for(var a,i=1,s=arguments.length;i<s;i++){a=arguments[i];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(n[f]=a[f])}return n},Jt.apply(this,arguments)};function Us(e,n){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(a[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(a[i[s]]=e[i[s]]);return a}function Ko(e,n,a){if(a||arguments.length===2)for(var i=0,s=n.length,f;i<s;i++)(f||!(i in n))&&(f||(f=Array.prototype.slice.call(n,0,i)),f[i]=n[i]);return e.concat(f||Array.prototype.slice.call(n))}var ru=function(e){var n=!1,a;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n||(n=!0,a=e.apply(null,i)),a}},Xo=function(e,n,a,i){var s=e.isiOS()&&/ipad/i.test(a)===!0,f=e.isiOS()&&!s,g=e.isiOS()||e.isAndroid(),b=g||i("(pointer:coarse)"),w=s||!f&&g&&i("(min-device-width:768px)"),O=f||g&&!w,N=n.isSafari()&&e.isiOS()&&/safari/i.test(a)===!1,z=!O&&!w&&!N;return{isiPad:W(s),isiPhone:W(f),isTablet:W(w),isPhone:W(O),isTouch:W(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:W(N),isDesktop:W(z)}},au=function(e,n){for(var a=0;a<e.length;a++){var i=e[a];if(i.test(n))return i}},Ws=function(e,n){var a=au(e,n);if(!a)return{major:0,minor:0};var i=function(s){return Number(n.replace(a,"$"+s))};return Q(i(1),i(2))},Ui=function(e,n){var a=String(n).toLowerCase();return e.length===0?js():Ws(e,a)},js=function(){return Q(0,0)},Q=function(e,n){return{major:e,minor:n}},be={nu:Q,detect:Ui,unknown:js},re=function(e,n){return Po(n.brands,function(a){var i=a.brand.toLowerCase();return ua(e,function(s){var f;return i===((f=s.brand)===null||f===void 0?void 0:f.toLowerCase())}).map(function(s){return{current:s.name,version:be.nu(parseInt(a.version,10),0)}})})},Te=function(e,n){var a=String(n).toLowerCase();return ua(e,function(i){return i.search(a)})},dt=function(e,n){return Te(e,n).map(function(a){var i=be.detect(a.versionRegexes,n);return{current:a.name,version:i}})},zt=function(e,n){return Te(e,n).map(function(a){var i=be.detect(a.versionRegexes,n);return{current:a.name,version:i}})},mn=function(e,n){return e.substring(n)},wn=function(e,n,a){return n===""||e.length>=n.length&&e.substr(a,a+n.length)===n},wr=function(e,n){return rr(e,n)?mn(e,n.length):e},Cr=function(e,n){return e.indexOf(n)!==-1},rr=function(e,n){return wn(e,n,0)},Oa=function(e){return function(n){return n.replace(e,"")}},Sa=Oa(/^\s+|\s+$/g),yu=Oa(/^\s+/g),ao=Oa(/\s+$/g),Wi=function(e){return e.length>0},Iu=function(e){return!Wi(e)},pa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xa=function(e){return function(n){return Cr(n,e)}},Xe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Cr(e,"edge/")&&Cr(e,"chrome")&&Cr(e,"safari")&&Cr(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,pa],search:function(e){return Cr(e,"chrome")&&!Cr(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Cr(e,"msie")||Cr(e,"trident")}},{name:"Opera",versionRegexes:[pa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xa("firefox")},{name:"Safari",versionRegexes:[pa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Cr(e,"safari")||Cr(e,"mobile/"))&&Cr(e,"applewebkit")}}],Ya=[{name:"Windows",search:xa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Cr(e,"iphone")||Cr(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:xa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xa("linux"),versionRegexes:[]},{name:"Solaris",search:xa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:xa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fu={browsers:W(Xe),oses:W(Ya)},Xc="Edge",Gs="Chrome",Qn="IE",bc="Opera",Lu="Firefox",Aa="Safari",qs=function(){return ii({current:void 0,version:be.unknown()})},ii=function(e){var n=e.current,a=e.version,i=function(s){return function(){return n===s}};return{current:n,version:a,isEdge:i(Xc),isChrome:i(Gs),isIE:i(Qn),isOpera:i(bc),isFirefox:i(Lu),isSafari:i(Aa)}},ki={unknown:qs,nu:ii,edge:W(Xc),chrome:W(Gs),ie:W(Qn),opera:W(bc),firefox:W(Lu),safari:W(Aa)},qr="Windows",Ks="iOS",Os="Android",As="Linux",yc="OSX",ou="Solaris",wu="FreeBSD",wc="ChromeOS",iu=function(){return Ei({current:void 0,version:be.unknown()})},Ei=function(e){var n=e.current,a=e.version,i=function(s){return function(){return n===s}};return{current:n,version:a,isWindows:i(qr),isiOS:i(Ks),isAndroid:i(Os),isOSX:i(yc),isLinux:i(As),isSolaris:i(ou),isFreeBSD:i(wu),isChromeOS:i(wc)}},V={unknown:iu,nu:Ei,windows:W(qr),ios:W(Ks),android:W(Os),linux:W(As),osx:W(yc),solaris:W(ou),freebsd:W(wu),chromeos:W(wc)},ce=function(e,n,a){var i=Fu.browsers(),s=Fu.oses(),f=n.bind(function(w){return re(i,w)}).orThunk(function(){return dt(i,e)}).fold(ki.unknown,ki.nu),g=zt(s,e).fold(V.unknown,V.nu),b=Xo(g,f,e,a);return{browser:f,os:g,deviceType:b}},Se={detect:ce},Fe=function(e){return window.matchMedia(e).matches},ot=ru(function(){return Se.detect(navigator.userAgent,ee.from(navigator.userAgentData),Fe)}),Ut=function(){return ot()},Or=navigator.userAgent,Nr=Ut(),zn=Nr.browser,ca=Nr.os,ba=Nr.deviceType,os=/WebKit/.test(Or)&&!zn.isEdge(),Eo="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,Hu=Or.indexOf("Windows Phone")!==-1,Qt={opera:zn.isOpera(),webkit:os,ie:zn.isIE()||zn.isEdge()?zn.version.major:!1,gecko:zn.isFirefox(),mac:ca.isOSX()||ca.isiOS(),iOS:ba.isiPad()||ba.isiPhone(),android:ca.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:zn.isIE()?document.documentMode||7:10,fileApi:Eo,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!zn.isIE(),desktop:ba.isDesktop(),windowsPhone:Hu,browser:{current:zn.current,version:zn.version,isChrome:zn.isChrome,isEdge:zn.isEdge,isFirefox:zn.isFirefox,isIE:zn.isIE,isOpera:zn.isOpera,isSafari:zn.isSafari},os:{current:ca.current,version:ca.version,isAndroid:ca.isAndroid,isChromeOS:ca.isChromeOS,isFreeBSD:ca.isFreeBSD,isiOS:ca.isiOS,isLinux:ca.isLinux,isOSX:ca.isOSX,isSolaris:ca.isSolaris,isWindows:ca.isWindows},deviceType:{isDesktop:ba.isDesktop,isiPad:ba.isiPad,isiPhone:ba.isiPhone,isPhone:ba.isPhone,isTablet:ba.isTablet,isTouch:ba.isTouch,isWebView:ba.isWebView}},Yc=/^\s*|\s*$/g,af=function(e){return e==null?"":(""+e).replace(Yc,"")},Sr=function(e,n){return n?n==="array"&&qo(e)?!0:typeof e===n:e!==void 0},of=function(e,n,a){var i;for(e=e||[],n=n||",",typeof e=="string"&&(e=e.split(n)),a=a||{},i=e.length;i--;)a[e[i]]={};return a},kl=$n,Yf=function(e,n,a){var i=this,s,f,g,b=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);var w=e[3].match(/(^|\.)(\w+)$/i)[2],O=i.createNS(e[3].replace(/\.\w+$/,""),a);if(!O[w]){if(e[2]==="static"){O[w]=n,this.onCreate&&this.onCreate(e[2],e[3],O[w]);return}n[w]||(n[w]=function(){},b=1),O[w]=n[w],i.extend(O[w].prototype,n),e[5]&&(s=i.resolve(e[5]).prototype,f=e[5].match(/\.(\w+)$/i)[1],g=O[w],b?O[w]=function(){return s[f].apply(this,arguments)}:O[w]=function(){return this.parent=s[f],g.apply(this,arguments)},O[w].prototype[w]=O[w],i.each(s,function(N,z){O[w].prototype[z]=s[z]}),i.each(n,function(N,z){s[z]?O[w].prototype[z]=function(){return this.parent=s[z],N.apply(this,arguments)}:z!==w&&(O[w].prototype[z]=N)})),i.each(n.static,function(N,z){O[w][z]=N})}},Lr=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i++){var s=n[i];for(var f in s)if($n(s,f)){var g=s[f];g!==void 0&&(e[f]=g)}}return e},uu=function(e,n,a,i){i=i||this,e&&(a&&(e=e[a]),ai(e,function(s,f){if(n.call(i,s,f,a)===!1)return!1;uu(s,n,a,i)}))},Qv=function(e,n){var a,i;for(n=n||window,e=e.split("."),a=0;a<e.length;a++)i=e[a],n[i]||(n[i]={}),n=n[i];return n},Vu=function(e,n){var a,i;for(n=n||window,e=e.split("."),a=0,i=e.length;a<i&&(n=n[e[a]],!!n);a++);return n},Ia=function(e,n){return!e||Sr(e,"array")?e:$u(e.split(n||","),af)},Xs=function(e){var n=Qt.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e},Ne={trim:af,isArray:qo,is:Sr,toArray:ri,makeMap:of,each:ai,map:$u,grep:Hi,inArray:oi,hasOwn:kl,extend:Lr,create:Yf,walk:uu,createNS:Qv,resolve:Vu,explode:Ia,_addCacheSuffix:Xs},Jc=function(e,n){var a=n||document,i=a.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Ds(i.childNodes[0])},Fa=function(e,n){var a=n||document,i=a.createElement(e);return Ds(i)},Jf=function(e,n){var a=n||document,i=a.createTextNode(e);return Ds(i)},Ds=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},_=function(e,n,a){return ee.from(e.dom.elementFromPoint(n,a)).map(Ds)},M={fromHtml:Jc,fromTag:Fa,fromText:Jf,fromDom:Ds,fromPoint:_},T=function(e,n){var a=[],i=function(f){return a.push(f),n(f)},s=n(e);do s=s.bind(i);while(s.isSome());return a},I=function(e,n,a){return(e.compareDocumentPosition(n)&a)!==0},ae=function(e,n){return I(e,n,Node.DOCUMENT_POSITION_CONTAINED_BY)},fe=8,De=9,st=11,dn=1,Cn=3,xt=function(e,n){var a=e.dom;if(a.nodeType!==dn)return!1;var i=a;if(i.matches!==void 0)return i.matches(n);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(n);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(n);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},on=function(e){return e.nodeType!==dn&&e.nodeType!==De&&e.nodeType!==st||e.childElementCount===0},Vn=function(e,n){var a=n===void 0?document:n.dom;return on(a)?[]:Hn(a.querySelectorAll(e),M.fromDom)},Kn=function(e,n){var a=n===void 0?document:n.dom;return on(a)?ee.none():ee.from(a.querySelector(e)).map(M.fromDom)},gn=function(e,n){return e.dom===n.dom},Ta=function(e,n){var a=e.dom,i=n.dom;return a===i?!1:a.contains(i)},fn=function(e,n){return ae(e.dom,n.dom)},Hr=function(e,n){return Ut().browser.isIE()?fn(e,n):Ta(e,n)};typeof window<"u"||Function("return this;")();var va=function(e){var n=e.dom.nodeName;return n.toLowerCase()},su=function(e){return e.dom.nodeType},Mn=function(e){return function(n){return su(n)===e}},is=function(e){return su(e)===fe||va(e)==="#comment"},Da=Mn(dn),La=Mn(Cn),wp=Mn(De),ui=Mn(st),_g=function(e){return function(n){return Da(n)&&va(n)===e}},Cc=function(e){return M.fromDom(e.dom.ownerDocument)},pn=function(e){return wp(e)?e:Cc(e)},us=function(e){return M.fromDom(pn(e).dom.documentElement)},Wa=function(e){return M.fromDom(pn(e).dom.defaultView)},ja=function(e){return ee.from(e.dom.parentNode).map(M.fromDom)},zo=function(e,n){for(var a=Mt(n)?n:ut,i=e.dom,s=[];i.parentNode!==null&&i.parentNode!==void 0;){var f=i.parentNode,g=M.fromDom(f);if(s.push(g),a(g)===!0)break;i=f}return s},go=function(e){var n=function(a){return jt(a,function(i){return!gn(e,i)})};return ja(e).map(cu).map(n).getOr([])},uf=function(e){return ee.from(e.dom.previousSibling).map(M.fromDom)},Rs=function(e){return ee.from(e.dom.nextSibling).map(M.fromDom)},_r=function(e){return To(T(e,uf))},ya=function(e){return T(e,Rs)},cu=function(e){return Hn(e.dom.childNodes,M.fromDom)},Zc=function(e,n){var a=e.dom.childNodes;return ee.from(a[n]).map(M.fromDom)},Oo=function(e){return Zc(e,0)},ss=function(e){return Zc(e,e.dom.childNodes.length-1)},Cp=function(e){return e.dom.childNodes.length},sf=function(e){var n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return M.fromDom(n)},na=function(e){return ui(e)&&Rn(e.dom.host)},Ys=Mt(Element.prototype.attachShadow)&&Mt(Node.prototype.getRootNode),El=W(Ys),Cu=Ys?function(e){return M.fromDom(e.dom.getRootNode())}:pn,Ja=function(e){return na(e)?e:sf(pn(e))},Ol=function(e){var n=Cu(e);return na(n)?ee.some(n):ee.none()},Qc=function(e){return M.fromDom(e.dom.host)},ji=function(e){if(El()&&Rn(e.target)){var n=M.fromDom(e.target);if(Da(n)&&Su(n)&&e.composed&&e.composedPath){var a=e.composedPath();if(a)return Ua(a)}}return ee.from(e.target)},Su=function(e){return Rn(e.dom.shadowRoot)},Oi=function(e,n){var a=ja(e);a.each(function(i){i.dom.insertBefore(n.dom,e.dom)})},Zf=function(e,n){var a=Rs(e);a.fold(function(){var i=ja(e);i.each(function(s){Io(s,n)})},function(i){Oi(i,n)})},Js=function(e,n){var a=Oo(e);a.fold(function(){Io(e,n)},function(i){e.dom.insertBefore(n.dom,i.dom)})},Io=function(e,n){e.dom.appendChild(n.dom)},ed=function(e,n){Oi(e,n),Io(n,e)},Sp=function(e,n){ft(n,function(a){Oi(e,a)})},cf=function(e,n){ft(n,function(a){Io(e,a)})},lf=function(e){e.dom.textContent="",ft(cu(e),function(n){Za(n)})},Za=function(e){var n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},ff=function(e){var n=cu(e);n.length>0&&Sp(e,n),Za(e)},vf=function(e){var n=La(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;var a=n.ownerDocument;return Ol(M.fromDom(n)).fold(function(){return a.body.contains(n)},ue(vf,Qc))},Gi=function(e,n){var a=function(i,s){return Gi(e+i,n+s)};return{left:e,top:n,translate:a}},el=Gi,df=function(e){var n=e.getBoundingClientRect();return el(n.left,n.top)},tl=function(e,n){return e!==void 0?e:n!==void 0?n:0},_a=function(e){var n=e.dom.ownerDocument,a=n.body,i=n.defaultView,s=n.documentElement;if(a===e.dom)return el(a.offsetLeft,a.offsetTop);var f=tl(i==null?void 0:i.pageYOffset,s.scrollTop),g=tl(i==null?void 0:i.pageXOffset,s.scrollLeft),b=tl(s.clientTop,a.clientTop),w=tl(s.clientLeft,a.clientLeft);return Uu(e).translate(g-w,f-b)},Uu=function(e){var n=e.dom,a=n.ownerDocument,i=a.body;return i===n?el(i.offsetLeft,i.offsetTop):vf(e)?df(n):el(0,0)},fm=function(e){var n=e!==void 0?e.dom:document,a=n.body.scrollLeft||n.documentElement.scrollLeft,i=n.body.scrollTop||n.documentElement.scrollTop;return el(a,i)},cs=function(e,n,a){var i=a!==void 0?a.dom:document,s=i.defaultView;s&&s.scrollTo(e,n)},vm=function(e,n){var a=Ut().browser.isSafari();a&&Mt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},xp=function(e){var n=e===void 0?window:e;return Ut().browser.isFirefox()?ee.none():ee.from(n.visualViewport)},Bg=function(e,n,a,i){return{x:e,y:n,width:a,height:i,right:e+a,bottom:n+i}},mf=function(e){var n=e===void 0?window:e,a=n.document,i=fm(M.fromDom(a));return xp(n).fold(function(){var s=n.document.documentElement,f=s.clientWidth,g=s.clientHeight;return Bg(i.left,i.top,f,g)},function(s){return Bg(Math.max(s.pageLeft,i.left),Math.max(s.pageTop,i.top),s.width,s.height)})},gf=function(e){return function(n){return!!n&&n.nodeType===e}},Al=function(e){return!!e&&!Object.getPrototypeOf(e)},Sn=gf(1),_s=function(e){var n=e.map(function(a){return a.toLowerCase()});return function(a){if(a&&a.nodeName){var i=a.nodeName.toLowerCase();return tn(n,i)}return!1}},xu=function(e,n){var a=n.toLowerCase().split(" ");return function(i){if(Sn(i))for(var s=0;s<a.length;s++){var f=i.ownerDocument.defaultView.getComputedStyle(i,null),g=f?f.getPropertyValue(e):null;if(g===a[s])return!0}return!1}},qi=function(e){return function(n){return Sn(n)&&n.hasAttribute(e)}},Bs=function(e,n){return function(a){return Sn(a)&&a.getAttribute(e)===n}},oo=function(e){return Sn(e)&&e.hasAttribute("data-mce-bogus")},Fo=function(e){return Sn(e)&&e.getAttribute("data-mce-bogus")==="all"},ho=function(e){return Sn(e)&&e.tagName==="TABLE"},Dl=function(e){return function(n){return!!(Sn(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e))}},Ai=_s(["textarea","input"]),Pt=gf(3),hf=gf(8),Mg=gf(9),In=gf(11),ra=_s(["br"]),dm=_s(["img"]),Sc=Dl("true"),Ra=Dl("false"),mm=_s(["td","th"]),Wu=_s(["video","audio","object","embed"]),td=function(e,n,a){return a===void 0&&(a=nr),e.exists(function(i){return a(i,n)})},Wn=function(e){for(var n=[],a=function(s){n.push(s)},i=0;i<e.length;i++)e[i].each(a);return n},lu=function(e,n,a){return e.isSome()&&n.isSome()?ee.some(a(e.getOrDie(),n.getOrDie())):ee.none()},Wb=function(e,n,a,i){return e.isSome()&&n.isSome()&&a.isSome()?ee.some(i(e.getOrDie(),n.getOrDie(),a.getOrDie())):ee.none()},jb=function(e,n){return e?ee.some(n):ee.none()},Ba=function(e){return e.style!==void 0&&Mt(e.style.getPropertyValue)},gm=function(e,n,a){if(cr(a)||Lt(a)||kn(a))e.setAttribute(n,a+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",a,":: Element ",e),new Error("Attribute value was not simple")},E=function(e,n,a){gm(e.dom,n,a)},$=function(e,n){var a=e.dom;Zn(n,function(i,s){gm(a,s,i)})},H=function(e,n){var a=e.dom.getAttribute(n);return a===null?void 0:a},te=function(e,n){return ee.from(H(e,n))},we=function(e,n){var a=e.dom;return a&&a.hasAttribute?a.hasAttribute(n):!1},$e=function(e,n){e.dom.removeAttribute(n)},Wt=function(e){return jr(e.dom.attributes,function(n,a){return n[a.name]=a.value,n},{})},En=function(e,n,a){if(!cr(a))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",a,":: Element ",e),new Error("CSS value must be a string: "+a);Ba(e)&&e.style.setProperty(n,a)},ir=function(e,n){var a=e.dom;Zn(n,function(i,s){En(a,s,i)})},jn=function(e,n){var a=e.dom,i=window.getComputedStyle(a),s=i.getPropertyValue(n);return s===""&&!vf(e)?la(a,n):s},la=function(e,n){return Ba(e)?e.style.getPropertyValue(n):""},Di=function(e,n){var a=e.dom,i=la(a,n);return ee.from(i).filter(function(s){return s.length>0})},Ga=function(e){var n={},a=e.dom;if(Ba(a))for(var i=0;i<a.style.length;i++){var s=a.style.item(i);n[s]=a.style[s]}return n},hT=function(e){return e.dom.offsetWidth},ow=Ut().browser,iw=function(e){return ua(e,Da)},pT=function(e){return ow.isFirefox()&&va(e)==="table"?iw(cu(e)).filter(function(n){return va(n)==="caption"}).bind(function(n){return iw(ya(n)).map(function(a){var i=a.dom.offsetTop,s=n.dom.offsetTop,f=n.dom.offsetHeight;return i<=s?-f:0})}).getOr(0):0},nl=function(e,n){return e.children&&tn(e.children,n)},Pg=function(e,n,a){var i=0,s=0,f=e.ownerDocument;if(a=a||e,n){if(a===e&&n.getBoundingClientRect&&jn(M.fromDom(e),"position")==="static"){var g=n.getBoundingClientRect();return i=g.left+(f.documentElement.scrollLeft||e.scrollLeft)-f.documentElement.clientLeft,s=g.top+(f.documentElement.scrollTop||e.scrollTop)-f.documentElement.clientTop,{x:i,y:s}}for(var b=n;b&&b!==a&&b.nodeType&&!nl(b,a);){var w=b;i+=w.offsetLeft||0,s+=w.offsetTop||0,b=w.offsetParent}for(b=n.parentNode;b&&b!==a&&b.nodeType&&!nl(b,a);)i-=b.scrollLeft||0,s-=b.scrollTop||0,b=b.parentNode;s+=pT(M.fromDom(n))}return{x:i,y:s}},ju={},hm={exports:ju};(function(e,n,a,i){(function(s,f){typeof n=="object"&&typeof a<"u"?a.exports=f():typeof e=="function"&&e.amd?e(f):(s=typeof globalThis<"u"?globalThis:s||self,s.EphoxContactWrapper=f())})(this,function(){var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof SB<"u"?SB:typeof self<"u"?self:{},f={exports:{}};(function(O){(function(N){var z=setTimeout;function F(){}function q(se,xe){return function(){se.apply(xe,arguments)}}function G(se){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof se!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Ce(se,this)}function X(se,xe){for(;se._state===3;)se=se._value;if(se._state===0){se._deferreds.push(xe);return}se._handled=!0,G._immediateFn(function(){var Be=se._state===1?xe.onFulfilled:xe.onRejected;if(Be===null){(se._state===1?J:ie)(xe.promise,se._value);return}var Je;try{Je=Be(se._value)}catch(rn){ie(xe.promise,rn);return}J(xe.promise,Je)})}function J(se,xe){try{if(xe===se)throw new TypeError("A promise cannot be resolved with itself.");if(xe&&(typeof xe=="object"||typeof xe=="function")){var Be=xe.then;if(xe instanceof G){se._state=3,se._value=xe,oe(se);return}else if(typeof Be=="function"){Ce(q(Be,xe),se);return}}se._state=1,se._value=xe,oe(se)}catch(Je){ie(se,Je)}}function ie(se,xe){se._state=2,se._value=xe,oe(se)}function oe(se){se._state===2&&se._deferreds.length===0&&G._immediateFn(function(){se._handled||G._unhandledRejectionFn(se._value)});for(var xe=0,Be=se._deferreds.length;xe<Be;xe++)X(se,se._deferreds[xe]);se._deferreds=null}function ve(se,xe,Be){this.onFulfilled=typeof se=="function"?se:null,this.onRejected=typeof xe=="function"?xe:null,this.promise=Be}function Ce(se,xe){var Be=!1;try{se(function(Je){Be||(Be=!0,J(xe,Je))},function(Je){Be||(Be=!0,ie(xe,Je))})}catch(Je){if(Be)return;Be=!0,ie(xe,Je)}}G.prototype.catch=function(se){return this.then(null,se)},G.prototype.then=function(se,xe){var Be=new this.constructor(F);return X(this,new ve(se,xe,Be)),Be},G.all=function(se){var xe=Array.prototype.slice.call(se);return new G(function(Be,Je){if(xe.length===0)return Be([]);var rn=xe.length;function At(hn,rt){try{if(rt&&(typeof rt=="object"||typeof rt=="function")){var Dt=rt.then;if(typeof Dt=="function"){Dt.call(rt,function(tt){At(hn,tt)},Je);return}}xe[hn]=rt,--rn===0&&Be(xe)}catch(tt){Je(tt)}}for(var Ye=0;Ye<xe.length;Ye++)At(Ye,xe[Ye])})},G.resolve=function(se){return se&&typeof se=="object"&&se.constructor===G?se:new G(function(xe){xe(se)})},G.reject=function(se){return new G(function(xe,Be){Be(se)})},G.race=function(se){return new G(function(xe,Be){for(var Je=0,rn=se.length;Je<rn;Je++)se[Je].then(xe,Be)})},G._immediateFn=typeof setImmediate=="function"?function(se){setImmediate(se)}:function(se){z(se,0)},G._unhandledRejectionFn=function(xe){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",xe)},G._setImmediateFn=function(xe){G._immediateFn=xe},G._setUnhandledRejectionFn=function(xe){G._unhandledRejectionFn=xe},O.exports?O.exports=G:N.Promise||(N.Promise=G)})(s)})(f);var g=f.exports,b=function(){return typeof window<"u"?window:Function("return this;")()}(),w={boltExport:b.Promise||g};return w})})(void 0,ju,hm);var Gb=hm.exports.boltExport,Ng=function(e){var n=ee.none(),a=[],i=function(O){return Ng(function(N){s(function(z){N(O(z))})})},s=function(O){g()?w(O):a.push(O)},f=function(O){g()||(n=ee.some(O),b(a),a=[])},g=function(){return n.isSome()},b=function(O){ft(O,w)},w=function(O){n.each(function(N){setTimeout(function(){O(N)},0)})};return e(f),{get:s,map:i,isReady:g}},Tp=function(e){return Ng(function(n){n(e)})},uw={nu:Ng,pure:Tp},bT=function(e){setTimeout(function(){throw e},0)},rl=function(e){var n=function(w){e().then(w,bT)},a=function(w){return rl(function(){return e().then(w)})},i=function(w){return rl(function(){return e().then(function(O){return w(O).toPromise()})})},s=function(w){return rl(function(){return e().then(function(){return w.toPromise()})})},f=function(){return uw.nu(n)},g=function(){var w=null;return rl(function(){return w===null&&(w=e()),w})},b=e;return{map:a,bind:i,anonBind:s,toLazy:f,toCached:g,toPromise:b,get:n}},$g=function(e){return rl(function(){return new Gb(e)})},yT=function(e){return rl(function(){return Gb.resolve(e)})},qb={nu:$g,pure:yT},wT=function(e,n){return n(function(a){var i=[],s=0,f=function(g){return function(b){i[g]=b,s++,s>=e.length&&a(i)}};e.length===0?a([]):ft(e,function(g,b){g.get(f(b))})})},CT=function(e){return wT(e,qb.nu)},pm=function(e){var n=function(z){return pm(e)},a=function(z){return pm(e)},i=function(z){return pm(z(e))},s=function(z){return pm(e)},f=function(z){z(e)},g=function(z){return z(e)},b=function(z,F){return F(e)},w=function(z){return z(e)},O=function(z){return z(e)},N=function(){return ee.some(e)};return{isValue:Et,isError:ut,getOr:W(e),getOrThunk:W(e),getOrDie:W(e),or:n,orThunk:a,fold:b,map:i,mapError:s,each:f,bind:g,exists:w,forall:O,toOptional:N}},zg=function(e){var n=function(O){return O()},a=function(){return qn(String(e))()},i=gt,s=function(O){return O()},f=function(O){return zg(e)},g=function(O){return zg(O(e))},b=function(O){return zg(e)},w=function(O,N){return O(e)};return{isValue:ut,isError:Et,getOr:gt,getOrThunk:n,getOrDie:a,or:i,orThunk:s,fold:w,map:f,mapError:g,each:Tt,bind:b,exists:ut,forall:Et,toOptional:ee.none}},sw=function(e,n){return e.fold(function(){return zg(n)},pm)},cw={value:pm,error:zg,fromOption:sw},ls=function(e){if(!_n(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");var n=[],a={};return ft(e,function(i,s){var f=xi(i);if(f.length!==1)throw new Error("one and only one name per case");var g=f[0],b=i[g];if(a[g]!==void 0)throw new Error("duplicate key detected:"+g);if(g==="cata")throw new Error("cannot have a case named cata (sorry)");if(!_n(b))throw new Error("case arguments must be an array");n.push(g),a[g]=function(){for(var w=[],O=0;O<arguments.length;O++)w[O]=arguments[O];var N=w.length;if(N!==b.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+b.length+" ("+b+"), got "+N);var z=function(F){var q=xi(F);if(n.length!==q.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+q.join(","));var G=Li(n,function(X){return tn(q,X)});if(!G)throw new Error("Not all branches were specified when using match. Specified: "+q.join(", ")+`
Required: `+n.join(", "));return F[g].apply(null,w)};return{fold:function(){for(var F=[],q=0;q<arguments.length;q++)F[q]=arguments[q];if(F.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+F.length);var G=F[s];return G.apply(null,w)},match:z,log:function(F){console.log(F,{constructors:n,constructor:g,params:w})}}}}),a},Yt={generate:ls};Yt.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var pf=function(e){return e.fold(gt,gt)};function Ig(e,n,a,i,s){return e(a,i)?ee.some(a):Mt(s)&&s(a)?ee.none():n(a,i,s)}var Qf=function(e,n,a){for(var i=e.dom,s=Mt(a)?a:ut;i.parentNode;){i=i.parentNode;var f=M.fromDom(i);if(n(f))return ee.some(f);if(s(f))break}return ee.none()},bm=function(e,n,a){var i=function(s,f){return f(s)};return Ig(i,Qf,e,n,a)},Kb=function(e,n){var a=e.dom;return a.parentNode?xc(M.fromDom(a.parentNode),function(i){return!gn(e,i)&&n(i)}):ee.none()},xc=function(e,n){var a=function(s){return n(M.fromDom(s))},i=ua(e.dom.childNodes,a);return i.map(M.fromDom)},nd=function(e,n,a){return Qf(e,function(i){return xt(i,n)},a)},ym=function(e,n){return Kn(n,e)},io=function(e,n,a){var i=function(s,f){return xt(s,f)};return Ig(i,nd,e,n,a)},si=window.Promise?window.Promise:Gb,Fg,Rl=function(e,n){for(var a=window.requestAnimationFrame,i=["ms","moz","webkit"],s=function(g){window.setTimeout(g,0)},f=0;f<i.length&&!a;f++)a=window[i[f]+"RequestAnimationFrame"];a||(a=s),a(e,n)},Lg=function(e,n){return typeof n!="number"&&(n=0),setTimeout(e,n)},kp=function(e,n){return typeof n!="number"&&(n=1),setInterval(e,n)},Ep=function(e){return clearTimeout(e)},ST=function(e){return clearInterval(e)},wm=function(e,n){var a,i=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];clearTimeout(a),a=Lg(function(){e.apply(this,s)},n)};return i.stop=function(){clearTimeout(a)},i},Ki={requestAnimationFrame:function(e,n){if(Fg){Fg.then(e);return}Fg=new si(function(a){n||(n=document.body),Rl(a,n)}).then(e)},setTimeout:Lg,setInterval:kp,setEditorTimeout:function(e,n,a){return Lg(function(){e.removed||n()},a)},setEditorInterval:function(e,n,a){var i=kp(function(){e.removed?clearInterval(i):n()},a);return i},debounce:wm,throttle:wm,clearInterval:ST,clearTimeout:Ep},lw=function(e,n){n===void 0&&(n={});var a=0,i={},s=M.fromDom(e),f=pn(s),g=n.maxLoadTime||5e3,b=function(J){n.referrerPolicy=J},w=function(J){Io(Ja(s),J)},O=function(J){var ie=Ja(s);ym(ie,"#"+J).each(Za)},N=function(J){return pr(i,J).getOrThunk(function(){return{id:"mce-u"+a++,passed:[],failed:[],count:0}})},z=function(J,ie,oe){var ve,Ce=Ne._addCacheSuffix(J),se=N(Ce);i[Ce]=se,se.count++;var xe=function(rt,Dt){for(var tt=rt.length;tt--;)rt[tt]();se.status=Dt,se.passed=[],se.failed=[],ve&&(ve.onload=null,ve.onerror=null,ve=null)},Be=function(){return xe(se.passed,2)},Je=function(){return xe(se.failed,3)},rn=function(rt,Dt){rt()||(Date.now()-hn<g?Ki.setTimeout(Dt):Je())},At=function(){rn(function(){for(var rt=e.styleSheets,Dt=rt.length;Dt--;){var tt=rt[Dt],pt=tt.ownerNode;if(pt&&pt.id===ve.id)return Be(),!0}return!1},At)};if(ie&&se.passed.push(ie),oe&&se.failed.push(oe),se.status!==1){if(se.status===2){Be();return}if(se.status===3){Je();return}se.status=1;var Ye=M.fromTag("link",f.dom);$(Ye,{rel:"stylesheet",type:"text/css",id:se.id});var hn=Date.now();n.contentCssCors&&E(Ye,"crossOrigin","anonymous"),n.referrerPolicy&&E(Ye,"referrerpolicy",n.referrerPolicy),ve=Ye.dom,ve.onload=At,ve.onerror=Je,w(Ye),E(Ye,"href",Ce)}},F=function(J){return qb.nu(function(ie){z(J,vo(ie,W(cw.value(J))),vo(ie,W(cw.error(J))))})},q=function(J,ie,oe){CT(Hn(J,F)).get(function(ve){var Ce=Va(ve,function(se){return se.isValue()});Ce.fail.length>0?oe(Ce.fail.map(pf)):ie(Ce.pass.map(pf))})},G=function(J){var ie=Ne._addCacheSuffix(J);pr(i,ie).each(function(oe){var ve=--oe.count;ve===0&&(delete i[ie],O(oe.id))})},X=function(J){ft(J,function(ie){G(ie)})};return{load:z,loadAll:q,unload:G,unloadAll:X,_setReferrerPolicy:b}},Ha=function(){var e=new WeakMap,n=function(a,i){var s=Cu(a),f=s.dom;return ee.from(e.get(f)).getOrThunk(function(){var g=lw(f,i);return e.set(f,g),g})};return{forElement:n}},Tc=Ha(),zr=function(){function e(n,a){this.node=n,this.rootNode=a,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return e.prototype.current=function(){return this.node},e.prototype.next=function(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node},e.prototype.prev=function(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node},e.prototype.prev2=function(n){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",n),this.node},e.prototype.findSibling=function(n,a,i,s){var f,g;if(n){if(!s&&n[a])return n[a];if(n!==this.rootNode){if(f=n[i],f)return f;for(g=n.parentNode;g&&g!==this.rootNode;g=g.parentNode)if(f=g[i],f)return f}}},e.prototype.findPreviousNode=function(n,a,i,s){var f,g,b;if(n){if(f=n[i],this.rootNode&&f===this.rootNode)return;if(f){if(!s){for(b=f[a];b;b=b[a])if(!b[a])return b}return f}if(g=n.parentNode,g&&g!==this.rootNode)return g}},e}(),ev=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Zs=["td","th"],xT=["thead","tbody","tfoot"],Lo=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Tu=["h1","h2","h3","h4","h5","h6"],fw=["li","dd","dt"],He=["ul","ol","dl"],Gu=["pre","script","textarea","style"],bf=function(e){var n;return function(a){return n=n||Go(e,Et),$n(n,va(a))}},xn=bf(Tu),Ms=bf(ev),TT=function(e){return va(e)==="table"},fu=function(e){return Da(e)&&!Ms(e)},Cm=function(e){return Da(e)&&va(e)==="br"},_l=bf(Lo),kc=bf(He),Xi=bf(fw),Br=bf(xT),al=bf(Zs),rd=bf(Gu),da=function(e,n,a){return nd(e,n,a).isSome()},tv="\uFEFF",fs=" ",vs=function(e){return e===tv},kT=function(e){return e.replace(/\uFEFF/g,"")},he=tv,ku=vs,ol=kT,Sm=Sn,Ps=Pt,aa=function(e){return Ps(e)&&(e=e.parentNode),Sm(e)&&e.hasAttribute("data-mce-caret")},ma=function(e){return Ps(e)&&ku(e.data)},qu=function(e){return aa(e)||ma(e)},yf=function(e){return e.firstChild!==e.lastChild||!ra(e.firstChild)},Xb=function(e,n){var a=e.ownerDocument,i=a.createTextNode(he),s=e.parentNode;if(n){var f=e.previousSibling;if(Ps(f)){if(qu(f))return f;if(Vg(f))return f.splitText(f.data.length-1)}s.insertBefore(i,e)}else{var f=e.nextSibling;if(Ps(f)){if(qu(f))return f;if(Hg(f))return f.splitText(1),f}e.nextSibling?s.insertBefore(i,e.nextSibling):s.appendChild(i)}return i},nn=function(e){var n=e.container();return Pt(n)?n.data.charAt(e.offset())===he||e.isAtStart()&&ma(n.previousSibling):!1},Op=function(e){var n=e.container();return Pt(n)?n.data.charAt(e.offset()-1)===he||e.isAtEnd()&&ma(n.nextSibling):!1},Ns=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},vw=function(e,n,a){var i=n.ownerDocument,s=i.createElement(e);s.setAttribute("data-mce-caret",a?"before":"after"),s.setAttribute("data-mce-bogus","all"),s.appendChild(Ns());var f=n.parentNode;return a?f.insertBefore(s,n):n.nextSibling?f.insertBefore(s,n.nextSibling):f.appendChild(s),s},Hg=function(e){return Ps(e)&&e.data[0]===he},Vg=function(e){return Ps(e)&&e.data[e.data.length-1]===he},Yb=function(e){var n=e.getElementsByTagName("br"),a=n[n.length-1];oo(a)&&a.parentNode.removeChild(a)},Jb=function(e){return e&&e.hasAttribute("data-mce-caret")?(Yb(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},Bl=function(e){return aa(e.startContainer)},wf=Sc,ET=Ra,Zb=ra,OT=Pt,dw=_s(["script","style","textarea"]),Ug=_s(["img","input","textarea","hr","iframe","video","audio","object","embed"]),xm=_s(["table"]),mw=qu,Ml=function(e){return mw(e)?!1:OT(e)?!dw(e.parentNode):Ug(e)||Zb(e)||xm(e)||Qb(e)},Tm=function(e){return Sn(e)&&e.getAttribute("unselectable")==="true"},Qb=function(e){return Tm(e)===!1&&ET(e)},gw=function(e,n){for(e=e.parentNode;e&&e!==n;e=e.parentNode){if(Qb(e))return!1;if(wf(e))return!0}return!0},AT=function(e){return Qb(e)?jr(kr(e.getElementsByTagName("*")),function(n,a){return n||wf(a)},!1)!==!0:!1},DT=function(e){return Ug(e)||AT(e)},Ao=function(e,n){return Ml(e)&&gw(e,n)},Pl=/^[ \t\r\n]*$/,Ec=function(e){return Pl.test(e)},nv=function(e,n){var a=M.fromDom(n),i=M.fromDom(e);return da(i,"pre,code",et(gn,a))},hw=function(e,n){return Pt(e)&&Ec(e.data)&&nv(e,n)===!1},Oc=function(e){return Sn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))},ad=function(e,n){return Ml(e)&&hw(e,n)===!1||Oc(e)||e0(e)},e0=qi("data-mce-bookmark"),t0=qi("data-mce-bogus"),Cf=Bs("data-mce-bogus","all"),Qs=function(e,n){var a=0;if(ad(e,e))return!1;var i=e.firstChild;if(!i)return!0;var s=new zr(i,e);do{if(n){if(Cf(i)){i=s.next(!0);continue}if(t0(i)){i=s.next();continue}}if(ra(i)){a++,i=s.next();continue}if(ad(i,e))return!1;i=s.next()}while(i);return a<=1},Ri=function(e,n){return n===void 0&&(n=!0),Qs(e.dom,n)},Ap=function(e){return e.nodeName.toLowerCase()==="span"},n0=function(e,n){return Rn(e)&&(ad(e,n)||fu(M.fromDom(e)))},od=function(e,n){var a=new zr(e,n).prev(!1),i=new zr(e,n).next(!1),s=Bt(a)||n0(a,n),f=Bt(i)||n0(i,n);return s&&f},km=function(e){return Ap(e)&&e.getAttribute("data-mce-type")==="bookmark"},Em=function(e,n){return Pt(e)&&e.data.length>0&&od(e,n)},RT=function(e){return Sn(e)?e.childNodes.length>0:!1},Om=function(e){return In(e)||Mg(e)},r0=function(e,n,a){var i=a||n;if(Sn(n)&&km(n))return n;for(var s=n.childNodes,f=s.length-1;f>=0;f--)r0(e,s[f],i);if(Sn(n)){var g=n.childNodes;g.length===1&&km(g[0])&&n.parentNode.insertBefore(g[0],n)}return!Om(n)&&!ad(n,i)&&!RT(n)&&!Em(n,i)&&e.remove(n),n},_T=Ne.makeMap,qa=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Dp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rv=/[<>&\"\']/g,a0=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,o0={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ec={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},$s={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},id=function(e){var n=M.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},av=function(e,n){var a,i,s,f={};if(e){for(e=e.split(","),n=n||10,a=0;a<e.length;a+=2)i=String.fromCharCode(parseInt(e[a],n)),ec[i]||(s="&"+e[a+1]+";",f[i]=s,f[s]=i);return f}},Rp=av("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Wg=function(e,n){return e.replace(n?qa:Dp,function(a){return ec[a]||a})},i0=function(e){return(""+e).replace(rv,function(n){return ec[n]||n})},ud=function(e,n){return e.replace(n?qa:Dp,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":ec[a]||"&#"+a.charCodeAt(0)+";"})},_p=function(e,n,a){return a=a||Rp,e.replace(n?qa:Dp,function(i){return ec[i]||a[i]||i})},BT=function(e,n){var a=av(n)||Rp,i=function(g,b){return g.replace(b?qa:Dp,function(w){return ec[w]!==void 0?ec[w]:a[w]!==void 0?a[w]:w.length>1?"&#"+((w.charCodeAt(0)-55296)*1024+(w.charCodeAt(1)-56320)+65536)+";":"&#"+w.charCodeAt(0)+";"})},s=function(g,b){return _p(g,b,a)},f=_T(e.replace(/\+/g,","));return f.named&&f.numeric?i:f.named?n?s:_p:f.numeric?ud:Wg},u0=function(e){return e.replace(a0,function(n,a){return a?(a.charAt(0).toLowerCase()==="x"?a=parseInt(a.substr(1),16):a=parseInt(a,10),a>65535?(a-=65536,String.fromCharCode(55296+(a>>10),56320+(a&1023))):o0[a]||String.fromCharCode(a)):$s[n]||Rp[n]||id(n)})},zs={encodeRaw:Wg,encodeAllRaw:i0,encodeNumeric:ud,encodeNamed:_p,getEncodeFunc:BT,decode:u0},ds={},Am={},Ac=Ne.makeMap,vu=Ne.each,Bp=Ne.extend,Sf=Ne.explode,pw=Ne.inArray,_i=function(e,n){return e=Ne.trim(e),e?e.split(n||" "):[]},bw=function(e){var n={},a,i,s,f,g,b,w=function(N,z,F){var q,G,X,J=function(oe,ve){var Ce={},se,xe;for(se=0,xe=oe.length;se<xe;se++)Ce[oe[se]]=ve||{};return Ce};F=F||[],z=z||"",typeof F=="string"&&(F=_i(F));var ie=_i(N);for(q=ie.length;q--;)G=_i([a,z].join(" ")),X={attributes:J(G),attributesOrder:G,children:J(F,Am)},n[ie[q]]=X},O=function(N,z){var F,q,G,X,J=_i(N);F=J.length;for(var ie=_i(z);F--;)for(q=n[J[F]],G=0,X=ie.length;G<X;G++)q.attributes[ie[G]]={},q.attributesOrder.push(ie[G])};return ds[e]?ds[e]:(a="id accesskey class dir lang style tabindex title role",i="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(a+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",i+=" article aside details dialog figure main header footer hgroup section nav",s+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(a+=" xml:lang",b="acronym applet basefont big font strike tt",s=[s,b].join(" "),vu(_i(b),function(N){w(N,"",s)}),g="center dir isindex noframes",i=[i,g].join(" "),f=[i,s].join(" "),vu(_i(g),function(N){w(N,"",f)})),f=f||[i,s].join(" "),w("html","manifest","head body"),w("head","","base command link meta noscript script style title"),w("title hr noscript br"),w("base","href target"),w("link","href rel media hreflang type sizes hreflang"),w("meta","name http-equiv content charset"),w("style","media type scoped"),w("script","src async defer type charset"),w("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",f),w("address dt dd div caption","",f),w("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s),w("blockquote","cite",f),w("ol","reversed start type","li"),w("ul","","li"),w("li","value",f),w("dl","","dt dd"),w("a","href target rel media hreflang type",s),w("q","cite",s),w("ins del","cite datetime",f),w("img","src sizes srcset alt usemap ismap width height"),w("iframe","src name width height",f),w("embed","src type width height"),w("object","data type typemustmatch name usemap form width height",[f,"param"].join(" ")),w("param","name value"),w("map","name",[f,"area"].join(" ")),w("area","alt coords shape href target rel media hreflang type"),w("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),w("colgroup","span","col"),w("col","span"),w("tbody thead tfoot","","tr"),w("tr","","td th"),w("td","colspan rowspan headers",f),w("th","colspan rowspan headers scope abbr",f),w("form","accept-charset action autocomplete enctype method name novalidate target",f),w("fieldset","disabled form name",[f,"legend"].join(" ")),w("label","form for",s),w("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),w("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?f:s),w("select","disabled form multiple name required size","option optgroup"),w("optgroup","disabled label","option"),w("option","disabled label selected value"),w("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),w("menu","type label",[f,"li"].join(" ")),w("noscript","",f),e!=="html4"&&(w("wbr"),w("ruby","",[s,"rt rp"].join(" ")),w("figcaption","",f),w("mark rt rp summary bdi","",s),w("canvas","width height",f),w("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[f,"track source"].join(" ")),w("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[f,"track source"].join(" ")),w("picture","","img source"),w("source","src srcset type media sizes"),w("track","kind src srclang label default"),w("datalist","",[s,"option"].join(" ")),w("article section nav aside main header footer","",f),w("hgroup","","h1 h2 h3 h4 h5 h6"),w("figure","",[f,"figcaption"].join(" ")),w("time","datetime",s),w("dialog","open",f),w("command","type label icon disabled checked radiogroup command"),w("output","for form name",s),w("progress","value max",s),w("meter","value min max low high optimum",s),w("details","open",[f,"summary"].join(" ")),w("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(O("script","language xml:space"),O("style","xml:space"),O("object","declare classid code codebase codetype archive standby align border hspace vspace"),O("embed","align name hspace vspace"),O("param","valuetype type"),O("a","charset name rev shape coords"),O("br","clear"),O("applet","codebase archive code object alt name width height align hspace vspace"),O("img","name longdesc align border hspace vspace"),O("iframe","longdesc frameborder marginwidth marginheight scrolling align"),O("font basefont","size color face"),O("input","usemap align"),O("select"),O("textarea"),O("h1 h2 h3 h4 h5 h6 div p legend caption","align"),O("ul","type compact"),O("li","type"),O("ol dl menu dir","compact"),O("pre","width xml:space"),O("hr","align noshade size width"),O("isindex","prompt"),O("table","summary width frame rules cellspacing cellpadding align bgcolor"),O("col","width align char charoff valign"),O("colgroup","width align char charoff valign"),O("thead","align char charoff valign"),O("tr","align char charoff valign bgcolor"),O("th","axis align char charoff valign nowrap bgcolor width height"),O("form","accept"),O("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),O("tfoot","align char charoff valign"),O("tbody","align char charoff valign"),O("area","nohref"),O("body","background bgcolor text link vlink alink")),e!=="html4"&&(O("input button select textarea","autofocus"),O("input textarea","placeholder"),O("a","download"),O("link script img","crossorigin"),O("img","loading"),O("iframe","sandbox seamless allowfullscreen loading")),vu(_i("a form meter progress dfn"),function(N){n[N]&&delete n[N].children[N]}),delete n.caption.children.table,delete n.script,ds[e]=n,n)},jg=function(e,n){var a;return e&&(a={},typeof e=="string"&&(e={"*":e}),vu(e,function(i,s){a[s]=a[s.toUpperCase()]=n==="map"?Ac(i,/[, ]/):Sf(i,/[, ]/)})),a},er=function(e){var n={},a={},i=[],s={},f={},g=function(Ke,Ee,Ze){var Oe=e[Ke];return Oe?Oe=Ac(Oe,/[, ]/,Ac(Oe.toUpperCase(),/[, ]/)):(Oe=ds[Ke],Oe||(Oe=Ac(Ee," ",Ac(Ee.toUpperCase()," ")),Oe=Bp(Oe,Ze),ds[Ke]=Oe)),Oe};e=e||{};var b=bw(e.schema);e.verify_html===!1&&(e.valid_elements="*[*]");var w=jg(e.valid_styles),O=jg(e.invalid_styles,"map"),N=jg(e.valid_classes,"map"),z=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),F=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),q=g("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),G=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),X="td th iframe video audio object script code",J=g("non_empty_elements",X+" pre",q),ie=g("move_caret_before_on_enter_elements",X+" table",q),oe=g("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ve=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",oe),Ce=g("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");vu((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(Ke){f[Ke]=new RegExp("</"+Ke+"[^>]*>","gi")});var se=function(Ke){return new RegExp("^"+Ke.replace(/([?+*])/g,".$1")+"$")},xe=function(Ke){var Ee,Ze,Oe,Ft,mt,vn,tr,Na,Qu,ks,Cl,es,ts,ti,lm,tu,Sl,Xv,Ka=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,wa=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,jo=/[*?+]/;if(Ke){var tf=_i(Ke,",");for(n["@"]&&(tu=n["@"].attributes,Sl=n["@"].attributesOrder),Ee=0,Ze=tf.length;Ee<Ze;Ee++)if(mt=Ka.exec(tf[Ee]),mt){if(ti=mt[1],Qu=mt[2],lm=mt[3],Na=mt[5],es={},ts=[],vn={attributes:es,attributesOrder:ts},ti==="#"&&(vn.paddEmpty=!0),ti==="-"&&(vn.removeEmpty=!0),mt[4]==="!"&&(vn.removeEmptyAttrs=!0),tu&&(Zn(tu,function(Yv,nf){es[nf]=Yv}),ts.push.apply(ts,Sl)),Na){for(Na=_i(Na,"|"),Oe=0,Ft=Na.length;Oe<Ft;Oe++)if(mt=wa.exec(Na[Oe]),mt){if(tr={},Cl=mt[1],ks=mt[2].replace(/[\\:]:/g,":"),ti=mt[3],Xv=mt[4],Cl==="!"&&(vn.attributesRequired=vn.attributesRequired||[],vn.attributesRequired.push(ks),tr.required=!0),Cl==="-"){delete es[ks],ts.splice(pw(ts,ks),1);continue}ti&&(ti==="="&&(vn.attributesDefault=vn.attributesDefault||[],vn.attributesDefault.push({name:ks,value:Xv}),tr.defaultValue=Xv),ti===":"&&(vn.attributesForced=vn.attributesForced||[],vn.attributesForced.push({name:ks,value:Xv}),tr.forcedValue=Xv),ti==="<"&&(tr.validValues=Ac(Xv,"?"))),jo.test(ks)?(vn.attributePatterns=vn.attributePatterns||[],tr.pattern=se(ks),vn.attributePatterns.push(tr)):(es[ks]||ts.push(ks),es[ks]=tr)}}!tu&&Qu==="@"&&(tu=es,Sl=ts),lm&&(vn.outputName=Qu,n[lm]=vn),jo.test(Qu)?(vn.pattern=se(Qu),i.push(vn)):n[Qu]=vn}}},Be=function(Ke){n={},i=[],xe(Ke),vu(b,function(Ee,Ze){a[Ze]=Ee.children})},Je=function(Ke){var Ee=/^(~)?(.+)$/;Ke&&(ds.text_block_elements=ds.block_elements=null,vu(_i(Ke,","),function(Ze){var Oe=Ee.exec(Ze),Ft=Oe[1]==="~",mt=Ft?"span":"div",vn=Oe[2];if(a[vn]=a[mt],s[vn]=mt,Ft||(ve[vn.toUpperCase()]={},ve[vn]={}),!n[vn]){var tr=n[mt];tr=Bp({},tr),delete tr.removeEmptyAttrs,delete tr.removeEmpty,n[vn]=tr}vu(a,function(Na,Qu){Na[mt]&&(a[Qu]=Na=Bp({},a[Qu]),Na[vn]=Na[mt])})}))},rn=function(Ke){var Ee=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;ds[e.schema]=null,Ke&&vu(_i(Ke,","),function(Ze){var Oe=Ee.exec(Ze),Ft,mt;Oe&&(mt=Oe[1],mt?Ft=a[Oe[2]]:Ft=a[Oe[2]]={"#comment":{}},Ft=a[Oe[2]],vu(_i(Oe[3],"|"),function(vn){mt==="-"?delete Ft[vn]:Ft[vn]={}}))})},At=function(Ke){var Ee=n[Ke],Ze;if(Ee)return Ee;for(Ze=i.length;Ze--;)if(Ee=i[Ze],Ee.pattern.test(Ke))return Ee};e.valid_elements?Be(e.valid_elements):(vu(b,function(Ke,Ee){n[Ee]={attributes:Ke.attributes,attributesOrder:Ke.attributesOrder},a[Ee]=Ke.children}),e.schema!=="html5"&&vu(_i("strong/b em/i"),function(Ke){var Ee=_i(Ke,"/");n[Ee[1]].outputName=Ee[0]}),vu(_i("ol ul sub sup blockquote span font a table tbody strong em b i"),function(Ke){n[Ke]&&(n[Ke].removeEmpty=!0)}),vu(_i("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(Ke){n[Ke].paddEmpty=!0}),vu(_i("span"),function(Ke){n[Ke].removeEmptyAttrs=!0})),Je(e.custom_elements),rn(e.valid_children),xe(e.extended_valid_elements),rn("+ol[ul|ol],+ul[ul|ol]"),vu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(Ke,Ee){n[Ee]&&(n[Ee].parentsRequired=_i(Ke))}),e.invalid_elements&&vu(Sf(e.invalid_elements),function(Ke){n[Ke]&&delete n[Ke]}),At("span")||xe("span[!data-mce-type|*]");var Ye=W(w),hn=W(O),rt=W(N),Dt=W(G),tt=W(ve),pt=W(oe),_t=W(Ce),qe=W(q),$t=W(F),Bn=W(J),Xr=W(ie),br=W(z),Bo=W(f),lo=function(Ke,Ee){var Ze=a[Ke.toLowerCase()];return!!(Ze&&Ze[Ee.toLowerCase()])},Vs=function(Ke,Ee){var Ze,Oe,Ft=At(Ke);if(Ft)if(Ee){if(Ft.attributes[Ee])return!0;if(Ze=Ft.attributePatterns,Ze){for(Oe=Ze.length;Oe--;)if(Ze[Oe].pattern.test(Ke))return!0}}else return!0;return!1},pc=W(s);return{children:a,elements:n,getValidStyles:Ye,getValidClasses:rt,getBlockElements:tt,getInvalidStyles:hn,getShortEndedElements:qe,getTextBlockElements:pt,getTextInlineElements:_t,getBoolAttrs:Dt,getElementRule:At,getSelfClosingElements:$t,getNonEmptyElements:Bn,getMoveCaretBeforeOnEnterElements:Xr,getWhiteSpaceElements:br,getSpecialElements:Bo,isValidChild:lo,isValid:Vs,getCustomElements:pc,addValidElements:xe,setValidElements:Be,addCustomElements:Je,addValidChildren:rn}},un=function(e,n,a,i){var s=function(f){return f=parseInt(f,10).toString(16),f.length>1?f:"0"+f};return"#"+s(n)+s(a)+s(i)},xf=function(e,n){var a=this,i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,b,w={},O,N,z=tv;e=e||{},n&&(O=n.getValidStyles(),N=n.getInvalidStyles());var F=(`\\" \\' \\; \\: ; : `+z).split(" ");for(b=0;b<F.length;b++)w[F[b]]=z+b,w[z+b]=F[b];return{toHex:function(q){return q.replace(i,un)},parse:function(q){var G={},X,J,ie,oe,ve=e.url_converter,Ce=e.url_converter_scope||a,se=function(rt,Dt,tt){var pt=G[rt+"-top"+Dt];if(pt){var _t=G[rt+"-right"+Dt];if(_t){var qe=G[rt+"-bottom"+Dt];if(qe){var $t=G[rt+"-left"+Dt];if($t){var Bn=[pt,_t,qe,$t];for(b=Bn.length-1;b--&&Bn[b]===Bn[b+1];);b>-1&&tt||(G[rt+Dt]=b===-1?Bn[0]:Bn.join(" "),delete G[rt+"-top"+Dt],delete G[rt+"-right"+Dt],delete G[rt+"-bottom"+Dt],delete G[rt+"-left"+Dt])}}}}},xe=function(rt){var Dt=G[rt],tt;if(Dt){for(Dt=Dt.split(" "),tt=Dt.length;tt--;)if(Dt[tt]!==Dt[0])return!1;return G[rt]=Dt[0],!0}},Be=function(rt,Dt,tt,pt){xe(Dt)&&xe(tt)&&xe(pt)&&(G[rt]=G[Dt]+" "+G[tt]+" "+G[pt],delete G[Dt],delete G[tt],delete G[pt])},Je=function(rt){return oe=!0,w[rt]},rn=function(rt,Dt){return oe&&(rt=rt.replace(/\uFEFF[0-9]/g,function(tt){return w[tt]})),Dt||(rt=rt.replace(/\\([\'\";:])/g,"$1")),rt},At=function(rt){return String.fromCharCode(parseInt(rt.slice(1),16))},Ye=function(rt){return rt.replace(/\\[0-9a-f]+/gi,At)},hn=function(rt,Dt,tt,pt,_t,qe){if(_t=_t||qe,_t)return _t=rn(_t),"'"+_t.replace(/\'/g,"\\'")+"'";if(Dt=rn(Dt||tt||pt),!e.allow_script_urls){var $t=Dt.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test($t)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test($t))return""}return ve&&(Dt=ve.call(Ce,Dt,"style")),"url('"+Dt.replace(/\'/g,"\\'")+"')"};if(q){for(q=q.replace(/[\u0000-\u001F]/g,""),q=q.replace(/\\[\"\';:\uFEFF]/g,Je).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(rt){return rt.replace(/[;:]/g,Je)});X=f.exec(q);)if(f.lastIndex=X.index+X[0].length,J=X[1].replace(g,"").toLowerCase(),ie=X[2].replace(g,""),J&&ie){if(J=Ye(J),ie=Ye(ie),J.indexOf(z)!==-1||J.indexOf('"')!==-1||!e.allow_script_urls&&(J==="behavior"||/expression\s*\(|\/\*|\*\//.test(ie)))continue;J==="font-weight"&&ie==="700"?ie="bold":(J==="color"||J==="background-color")&&(ie=ie.toLowerCase()),ie=ie.replace(i,un),ie=ie.replace(s,hn),G[J]=oe?rn(ie,!0):ie}se("border","",!0),se("border","-width"),se("border","-color"),se("border","-style"),se("padding",""),se("margin",""),Be("border","border-width","border-style","border-color"),G.border==="medium none"&&delete G.border,G["border-image"]==="none"&&delete G["border-image"]}return G},serialize:function(q,G){var X="",J=function(oe){var ve,Ce=O[oe];if(Ce)for(var se=0,xe=Ce.length;se<xe;se++)oe=Ce[se],ve=q[oe],ve&&(X+=(X.length>0?" ":"")+oe+": "+ve+";")},ie=function(oe,ve){var Ce=N["*"];return Ce&&Ce[oe]?!1:(Ce=N[ve],!(Ce&&Ce[oe]))};return G&&O?(J("*"),J(G)):Zn(q,function(oe,ve){oe&&(!N||ie(ve,G))&&(X+=(X.length>0?" ":"")+ve+": "+oe+";")}),X}}},s0={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Dc=function(e){return e instanceof Event||Mt(e.initEvent)},yw=function(e){return e.isDefaultPrevented===Et||e.isDefaultPrevented===ut},ga=function(e){return Vr(e.preventDefault)||Dc(e)},c0=function(e,n){var a=n??{};for(var i in e)$n(s0,i)||(a[i]=e[i]);return Rn(a.composedPath)&&(a.composedPath=function(){return e.composedPath()}),a},Gg=function(e,n,a,i){var s,f=c0(n,i);return f.type=e,Vr(f.target)&&(f.target=(s=f.srcElement)!==null&&s!==void 0?s:a),ga(n)&&(f.preventDefault=function(){f.defaultPrevented=!0,f.isDefaultPrevented=Et,Mt(n.preventDefault)?n.preventDefault():Dc(n)&&(n.returnValue=!1)},f.stopPropagation=function(){f.cancelBubble=!0,f.isPropagationStopped=Et,Mt(n.stopPropagation)?n.stopPropagation():Dc(n)&&(n.cancelBubble=!0)},f.stopImmediatePropagation=function(){f.isImmediatePropagationStopped=Et,f.stopPropagation()},yw(f)||(f.isDefaultPrevented=f.defaultPrevented===!0?Et:ut,f.isPropagationStopped=f.cancelBubble===!0?Et:ut,f.isImmediatePropagationStopped=ut)),f},Mp="mce-data-",We=/^(?:mouse|contextmenu)|click/,qg=function(e,n,a,i){e.addEventListener?e.addEventListener(n,a,i||!1):e.attachEvent&&e.attachEvent("on"+n,a)},Dm=function(e,n,a,i){e.removeEventListener?e.removeEventListener(n,a,i||!1):e.detachEvent&&e.detachEvent("on"+n,a)},Rm=function(e){return Rn(e)&&We.test(e.type)},sd=function(e,n){var a=Gg(e.type,e,document,n);if(Rm(e)&&Bt(e.pageX)&&!Bt(e.clientX)){var i=a.target.ownerDocument||document,s=i.documentElement,f=i.body,g=a;g.pageX=e.clientX+(s&&s.scrollLeft||f&&f.scrollLeft||0)-(s&&s.clientLeft||f&&f.clientLeft||0),g.pageY=e.clientY+(s&&s.scrollTop||f&&f.scrollTop||0)-(s&&s.clientTop||f&&f.clientTop||0)}return Bt(a.metaKey)&&(a.metaKey=!1),a},cd=function(e,n,a){var i=e.document,s={type:"ready"};if(a.domLoaded){n(s);return}var f=function(){return i.readyState==="complete"||i.readyState==="interactive"&&i.body},g=function(){Dm(e,"DOMContentLoaded",g),Dm(e,"load",g),a.domLoaded||(a.domLoaded=!0,n(s)),e=null};f()?g():qg(e,"DOMContentLoaded",g),a.domLoaded||qg(e,"load",g)},ov=function(){function e(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Mp+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return e.prototype.bind=function(n,a,i,s){var f=this,g,b,w,O,N,z,F,q=window,G=function(J){f.executeHandlers(sd(J||q.event),g)};if(!(!n||n.nodeType===3||n.nodeType===8)){n[f.expando]?g=n[f.expando]:(g=f.count++,n[f.expando]=g,f.events[g]={}),s=s||n;var X=a.split(" ");for(w=X.length;w--;){if(O=X[w],z=G,N=F=!1,O==="DOMContentLoaded"&&(O="ready"),f.domLoaded&&O==="ready"&&n.readyState==="complete"){i.call(s,sd({type:O}));continue}f.hasMouseEnterLeave||(N=f.mouseEnterLeave[O],N&&(z=function(J){var ie=J.currentTarget,oe=J.relatedTarget;if(oe&&ie.contains)oe=ie.contains(oe);else for(;oe&&oe!==ie;)oe=oe.parentNode;oe||(J=sd(J||q.event),J.type=J.type==="mouseout"?"mouseleave":"mouseenter",J.target=ie,f.executeHandlers(J,g))})),!f.hasFocusIn&&(O==="focusin"||O==="focusout")&&(F=!0,N=O==="focusin"?"focus":"blur",z=function(J){J=sd(J||q.event),J.type=J.type==="focus"?"focusin":"focusout",f.executeHandlers(J,g)}),b=f.events[g][O],b?O==="ready"&&f.domLoaded?i(sd({type:O})):b.push({func:i,scope:s}):(f.events[g][O]=b=[{func:i,scope:s}],b.fakeName=N,b.capture=F,b.nativeHandler=z,O==="ready"?cd(n,z,f):qg(n,N||O,z,F))}return n=b=null,i}},e.prototype.unbind=function(n,a,i){var s,f,g,b,w;if(!n||n.nodeType===3||n.nodeType===8)return this;var O=n[this.expando];if(O){if(w=this.events[O],a){var N=a.split(" ");for(f=N.length;f--;)if(b=N[f],s=w[b],s){if(i){for(g=s.length;g--;)if(s[g].func===i){var z=s.nativeHandler,F=s.fakeName,q=s.capture;s=s.slice(0,g).concat(s.slice(g+1)),s.nativeHandler=z,s.fakeName=F,s.capture=q,w[b]=s}}(!i||s.length===0)&&(delete w[b],Dm(n,s.fakeName||b,s.nativeHandler,s.capture))}}else Zn(w,function(G,X){Dm(n,G.fakeName||X,G.nativeHandler,G.capture)}),w={};for(b in w)if($n(w,b))return this;delete this.events[O];try{delete n[this.expando]}catch{n[this.expando]=null}}return this},e.prototype.fire=function(n,a,i){var s;if(!n||n.nodeType===3||n.nodeType===8)return this;var f=sd({type:a,target:n},i);do s=n[this.expando],s&&this.executeHandlers(f,s),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow;while(n&&!f.isPropagationStopped());return this},e.prototype.clean=function(n){var a,i;if(!n||n.nodeType===3||n.nodeType===8)return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName)for(this.unbind(n),i=n.getElementsByTagName("*"),a=i.length;a--;)n=i[a],n[this.expando]&&this.unbind(n);return this},e.prototype.destroy=function(){this.events={}},e.prototype.cancel=function(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1},e.prototype.executeHandlers=function(n,a){var i=this.events[a],s=i&&i[n.type];if(s)for(var f=0,g=s.length;f<g;f++){var b=s[f];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}},e.Event=new e,e}(),uo,ka,Tf,Ma,ms,l0,Rc,Pp,Ku,il,kf,ci,Np,Yi,li,_m,MT,Kg,Do="sizzle"+-new Date,Nt=window.document,tc=0,PT=0,ww=g0(),Bm=g0(),Cw=g0(),Xg=function(e,n){return e===n&&(il=!0),0},Nl="undefined",ld=1<<31,f0={}.hasOwnProperty,ul=[],NT=ul.pop,fd=ul.push,$l=ul.push,iv=ul.slice,vd=ul.indexOf||function(e){for(var n=0,a=this.length;n<a;n++)if(this[n]===e)return n;return-1},Sw="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",po="[\\x20\\t\\r\\n\\f]",uv="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",dd="\\["+po+"*("+uv+")(?:"+po+"*([*^$|!~]?=)"+po+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+uv+"))|)"+po+"*\\]",gs=":("+uv+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+dd+")*)|.*)\\)|)",fi=new RegExp("^"+po+"+|((?:^|[^\\\\])(?:\\\\.)*)"+po+"+$","g"),$T=new RegExp("^"+po+"*,"+po+"*"),zT=new RegExp("^"+po+"*([>+~]|"+po+")"+po+"*"),IT=new RegExp("="+po+`*([^\\]'"]*?)`+po+"*\\]","g"),xw=new RegExp(gs),_c=new RegExp("^"+uv+"$"),$p={ID:new RegExp("^#("+uv+")"),CLASS:new RegExp("^\\.("+uv+")"),TAG:new RegExp("^("+uv+"|[*])"),ATTR:new RegExp("^"+dd),PSEUDO:new RegExp("^"+gs),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+po+"*(even|odd|(([+-]|)(\\d*)n|)"+po+"*(?:([+-]|)"+po+"*(\\d+)|))"+po+"*\\)|)","i"),bool:new RegExp("^(?:"+Sw+")$","i"),needsContext:new RegExp("^"+po+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+po+"*((?:-\\d)?\\d*)"+po+"*\\)|)(?=[^-]|$)","i")},Mm=/^(?:input|select|textarea|button)$/i,FT=/^h\d$/i,v0=/^[^{]+\{\s*\[native \w/,Tw=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,d0=/[+~]/,m0=/'|\\/g,sv=new RegExp("\\\\([\\da-f]{1,6}"+po+"?|("+po+")|.)","ig"),cv=function(e,n,a){var i="0x"+n-65536;return i!==i||a?n:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)};try{$l.apply(ul=iv.call(Nt.childNodes),Nt.childNodes),ul[Nt.childNodes.length].nodeType}catch{$l={apply:ul.length?function(n,a){fd.apply(n,iv.call(a))}:function(n,a){for(var i=n.length,s=0;n[i++]=a[s++];);n.length=i-1}}}var fa=function(e,n,a,i){var s,f,g,b,w,O,N,z,F,q;if((n?n.ownerDocument||n:Nt)!==ci&&kf(n),n=n||ci,a=a||[],!e||typeof e!="string")return a;if((b=n.nodeType)!==1&&b!==9)return[];if(Yi&&!i){if(s=Tw.exec(e))if(g=s[1]){if(b===9)if(f=n.getElementById(g),f&&f.parentNode){if(f.id===g)return a.push(f),a}else return a;else if(n.ownerDocument&&(f=n.ownerDocument.getElementById(g))&&Kg(n,f)&&f.id===g)return a.push(f),a}else{if(s[2])return $l.apply(a,n.getElementsByTagName(e)),a;if((g=s[3])&&uo.getElementsByClassName)return $l.apply(a,n.getElementsByClassName(g)),a}if(uo.qsa&&(!li||!li.test(e))){if(z=N=Do,F=n,q=b===9&&e,b===1&&n.nodeName.toLowerCase()!=="object"){for(O=ms(e),(N=n.getAttribute("id"))?z=N.replace(m0,"\\$&"):n.setAttribute("id",z),z="[id='"+z+"'] ",w=O.length;w--;)O[w]=z+Yg(O[w]);F=d0.test(e)&&Bc(n.parentNode)||n,q=O.join(",")}if(q)try{return $l.apply(a,F.querySelectorAll(q)),a}catch{}finally{N||n.removeAttribute("id")}}}return Rc(e.replace(fi,"$1"),n,a,i)};function g0(){var e=[];function n(a,i){return e.push(a+" ")>ka.cacheLength&&delete n[e.shift()],n[a+" "]=i}return n}function nc(e){return e[Do]=!0,e}function h0(e,n){var a=n&&e,i=a&&e.nodeType===1&&n.nodeType===1&&(~n.sourceIndex||ld)-(~e.sourceIndex||ld);if(i)return i;if(a){for(;a=a.nextSibling;)if(a===n)return-1}return e?1:-1}function LT(e){return function(n){var a=n.nodeName.toLowerCase();return a==="input"&&n.type===e}}function HT(e){return function(n){var a=n.nodeName.toLowerCase();return(a==="input"||a==="button")&&n.type===e}}function Eu(e){return nc(function(n){return n=+n,nc(function(a,i){for(var s,f=e([],a.length,n),g=f.length;g--;)a[s=f[g]]&&(a[s]=!(i[s]=a[s]))})})}function Bc(e){return e&&typeof e.getElementsByTagName!==Nl&&e}uo=fa.support={},Ma=fa.isXML=function(e){var n=e&&(e.ownerDocument||e).documentElement;return n?n.nodeName!=="HTML":!1},kf=fa.setDocument=function(e){var n,a=e?e.ownerDocument||e:Nt,i=a.defaultView;function s(f){try{return f.top}catch{}return null}return a===ci||a.nodeType!==9||!a.documentElement?ci:(ci=a,Np=a.documentElement,Yi=!Ma(a),i&&i!==s(i)&&(i.addEventListener?i.addEventListener("unload",function(){kf()},!1):i.attachEvent&&i.attachEvent("onunload",function(){kf()})),uo.attributes=!0,uo.getElementsByTagName=!0,uo.getElementsByClassName=v0.test(a.getElementsByClassName),uo.getById=!0,ka.find.ID=function(f,g){if(typeof g.getElementById!==Nl&&Yi){var b=g.getElementById(f);return b&&b.parentNode?[b]:[]}},ka.filter.ID=function(f){var g=f.replace(sv,cv);return function(b){return b.getAttribute("id")===g}},ka.find.TAG=uo.getElementsByTagName?function(f,g){if(typeof g.getElementsByTagName!==Nl)return g.getElementsByTagName(f)}:function(f,g){var b,w=[],O=0,N=g.getElementsByTagName(f);if(f==="*"){for(;b=N[O++];)b.nodeType===1&&w.push(b);return w}return N},ka.find.CLASS=uo.getElementsByClassName&&function(f,g){if(Yi)return g.getElementsByClassName(f)},_m=[],li=[],uo.disconnectedMatch=!0,li=li.length&&new RegExp(li.join("|")),_m=_m.length&&new RegExp(_m.join("|")),n=v0.test(Np.compareDocumentPosition),Kg=n||v0.test(Np.contains)?function(f,g){var b=f.nodeType===9?f.documentElement:f,w=g&&g.parentNode;return f===w||!!(w&&w.nodeType===1&&(b.contains?b.contains(w):f.compareDocumentPosition&&f.compareDocumentPosition(w)&16))}:function(f,g){if(g){for(;g=g.parentNode;)if(g===f)return!0}return!1},Xg=n?function(f,g){if(f===g)return il=!0,0;var b=!f.compareDocumentPosition-!g.compareDocumentPosition;return b||(b=(f.ownerDocument||f)===(g.ownerDocument||g)?f.compareDocumentPosition(g):1,b&1||!uo.sortDetached&&g.compareDocumentPosition(f)===b?f===a||f.ownerDocument===Nt&&Kg(Nt,f)?-1:g===a||g.ownerDocument===Nt&&Kg(Nt,g)?1:Ku?vd.call(Ku,f)-vd.call(Ku,g):0:b&4?-1:1)}:function(f,g){if(f===g)return il=!0,0;var b,w=0,O=f.parentNode,N=g.parentNode,z=[f],F=[g];if(!O||!N)return f===a?-1:g===a?1:O?-1:N?1:Ku?vd.call(Ku,f)-vd.call(Ku,g):0;if(O===N)return h0(f,g);for(b=f;b=b.parentNode;)z.unshift(b);for(b=g;b=b.parentNode;)F.unshift(b);for(;z[w]===F[w];)w++;return w?h0(z[w],F[w]):z[w]===Nt?-1:F[w]===Nt?1:0},a)},fa.matches=function(e,n){return fa(e,null,null,n)},fa.matchesSelector=function(e,n){if((e.ownerDocument||e)!==ci&&kf(e),n=n.replace(IT,"='$1']"),uo.matchesSelector&&Yi&&(!_m||!_m.test(n))&&(!li||!li.test(n)))try{var a=MT.call(e,n);if(a||uo.disconnectedMatch||e.document&&e.document.nodeType!==11)return a}catch{}return fa(n,ci,null,[e]).length>0},fa.contains=function(e,n){return(e.ownerDocument||e)!==ci&&kf(e),Kg(e,n)},fa.attr=function(e,n){(e.ownerDocument||e)!==ci&&kf(e);var a=ka.attrHandle[n.toLowerCase()],i=a&&f0.call(ka.attrHandle,n.toLowerCase())?a(e,n,!Yi):void 0;return i!==void 0?i:uo.attributes||!Yi?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null},fa.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},fa.uniqueSort=function(e){var n,a=[],i=0,s=0;if(il=!uo.detectDuplicates,Ku=!uo.sortStable&&e.slice(0),e.sort(Xg),il){for(;n=e[s++];)n===e[s]&&(i=a.push(s));for(;i--;)e.splice(a[i],1)}return Ku=null,e},Tf=fa.getText=function(e){var n,a="",i=0,s=e.nodeType;if(s){if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)a+=Tf(e)}else if(s===3||s===4)return e.nodeValue}else for(;n=e[i++];)a+=Tf(n);return a},ka=fa.selectors={cacheLength:50,createPseudo:nc,match:$p,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(sv,cv),e[3]=(e[3]||e[4]||e[5]||"").replace(sv,cv),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||fa.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&fa.error(e[0]),e},PSEUDO:function(e){var n,a=!e[6]&&e[2];return $p.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":a&&xw.test(a)&&(n=ms(a,!0))&&(n=a.indexOf(")",a.length-n)-a.length)&&(e[0]=e[0].slice(0,n),e[2]=a.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var n=e.replace(sv,cv).toLowerCase();return e==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===n}},CLASS:function(e){var n=ww[e+" "];return n||(n=new RegExp("(^|"+po+")"+e+"("+po+"|$)"))&&ww(e,function(a){return n.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!==Nl&&a.getAttribute("class")||"")})},ATTR:function(e,n,a){return function(i){var s=fa.attr(i,e);return s==null?n==="!=":n?(s+="",n==="="?s===a:n==="!="?s!==a:n==="^="?a&&s.indexOf(a)===0:n==="*="?a&&s.indexOf(a)>-1:n==="$="?a&&s.slice(-a.length)===a:n==="~="?(" "+s+" ").indexOf(a)>-1:n==="|="?s===a||s.slice(0,a.length+1)===a+"-":!1):!0}},CHILD:function(e,n,a,i,s){var f=e.slice(0,3)!=="nth",g=e.slice(-4)!=="last",b=n==="of-type";return i===1&&s===0?function(w){return!!w.parentNode}:function(w,O,N){var z,F,q,G,X,J,ie=f!==g?"nextSibling":"previousSibling",oe=w.parentNode,ve=b&&w.nodeName.toLowerCase(),Ce=!N&&!b;if(oe){if(f){for(;ie;){for(q=w;q=q[ie];)if(b?q.nodeName.toLowerCase()===ve:q.nodeType===1)return!1;J=ie=e==="only"&&!J&&"nextSibling"}return!0}if(J=[g?oe.firstChild:oe.lastChild],g&&Ce){for(F=oe[Do]||(oe[Do]={}),z=F[e]||[],X=z[0]===tc&&z[1],G=z[0]===tc&&z[2],q=X&&oe.childNodes[X];q=++X&&q&&q[ie]||(G=X=0)||J.pop();)if(q.nodeType===1&&++G&&q===w){F[e]=[tc,X,G];break}}else if(Ce&&(z=(w[Do]||(w[Do]={}))[e])&&z[0]===tc)G=z[1];else for(;(q=++X&&q&&q[ie]||(G=X=0)||J.pop())&&!((b?q.nodeName.toLowerCase()===ve:q.nodeType===1)&&++G&&(Ce&&((q[Do]||(q[Do]={}))[e]=[tc,G]),q===w)););return G-=s,G===i||G%i===0&&G/i>=0}}},PSEUDO:function(e,n){var a,i=ka.pseudos[e]||ka.setFilters[e.toLowerCase()]||fa.error("unsupported pseudo: "+e);return i[Do]?i(n):i.length>1?(a=[e,e,"",n],ka.setFilters.hasOwnProperty(e.toLowerCase())?nc(function(s,f){for(var g,b=i(s,n),w=b.length;w--;)g=vd.call(s,b[w]),s[g]=!(f[g]=b[w])}):function(s){return i(s,0,a)}):i}},pseudos:{not:nc(function(e){var n=[],a=[],i=l0(e.replace(fi,"$1"));return i[Do]?nc(function(s,f,g,b){for(var w,O=i(s,null,b,[]),N=s.length;N--;)(w=O[N])&&(s[N]=!(f[N]=w))}):function(s,f,g){return n[0]=s,i(n,null,g,a),n[0]=null,!a.pop()}}),has:nc(function(e){return function(n){return fa(e,n).length>0}}),contains:nc(function(e){return e=e.replace(sv,cv),function(n){return(n.textContent||n.innerText||Tf(n)).indexOf(e)>-1}}),lang:nc(function(e){return _c.test(e||"")||fa.error("unsupported lang: "+e),e=e.replace(sv,cv).toLowerCase(),function(n){var a;do if(a=Yi?n.lang:n.getAttribute("xml:lang")||n.getAttribute("lang"))return a=a.toLowerCase(),a===e||a.indexOf(e+"-")===0;while((n=n.parentNode)&&n.nodeType===1);return!1}}),target:function(e){var n=window.location&&window.location.hash;return n&&n.slice(1)===e.id},root:function(e){return e===Np},focus:function(e){return e===ci.activeElement&&(!ci.hasFocus||ci.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var n=e.nodeName.toLowerCase();return n==="input"&&!!e.checked||n==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!ka.pseudos.empty(e)},header:function(e){return FT.test(e.nodeName)},input:function(e){return Mm.test(e.nodeName)},button:function(e){var n=e.nodeName.toLowerCase();return n==="input"&&e.type==="button"||n==="button"},text:function(e){var n;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()==="text")},first:Eu(function(){return[0]}),last:Eu(function(e,n){return[n-1]}),eq:Eu(function(e,n,a){return[a<0?a+n:a]}),even:Eu(function(e,n){for(var a=0;a<n;a+=2)e.push(a);return e}),odd:Eu(function(e,n){for(var a=1;a<n;a+=2)e.push(a);return e}),lt:Eu(function(e,n,a){for(var i=a<0?a+n:a;--i>=0;)e.push(i);return e}),gt:Eu(function(e,n,a){for(var i=a<0?a+n:a;++i<n;)e.push(i);return e})}},ka.pseudos.nth=ka.pseudos.eq,ft(["radio","checkbox","file","password","image"],function(e){ka.pseudos[e]=LT(e)}),ft(["submit","reset"],function(e){ka.pseudos[e]=HT(e)});function p0(){}p0.prototype=ka.filters=ka.pseudos,ka.setFilters=new p0,ms=fa.tokenize=function(e,n){var a,i,s,f,g,b,w,O=Bm[e+" "];if(O)return n?0:O.slice(0);for(g=e,b=[],w=ka.preFilter;g;){(!a||(i=$T.exec(g)))&&(i&&(g=g.slice(i[0].length)||g),b.push(s=[])),a=!1,(i=zT.exec(g))&&(a=i.shift(),s.push({value:a,type:i[0].replace(fi," ")}),g=g.slice(a.length));for(f in ka.filter)ka.filter.hasOwnProperty(f)&&(i=$p[f].exec(g))&&(!w[f]||(i=w[f](i)))&&(a=i.shift(),s.push({value:a,type:f,matches:i}),g=g.slice(a.length));if(!a)break}return n?g.length:g?fa.error(e):Bm(e,b).slice(0)};function Yg(e){for(var n=0,a=e.length,i="";n<a;n++)i+=e[n].value;return i}function Pm(e,n,a){var i=n.dir,s=a&&i==="parentNode",f=PT++;return n.first?function(g,b,w){for(;g=g[i];)if(g.nodeType===1||s)return e(g,b,w)}:function(g,b,w){var O,N,z=[tc,f];if(w){for(;g=g[i];)if((g.nodeType===1||s)&&e(g,b,w))return!0}else for(;g=g[i];)if(g.nodeType===1||s){if(N=g[Do]||(g[Do]={}),(O=N[i])&&O[0]===tc&&O[1]===f)return z[2]=O[2];if(N[i]=z,z[2]=e(g,b,w))return!0}}}function b0(e){return e.length>1?function(n,a,i){for(var s=e.length;s--;)if(!e[s](n,a,i))return!1;return!0}:e[0]}function kw(e,n,a){for(var i=0,s=n.length;i<s;i++)fa(e,n[i],a);return a}function lv(e,n,a,i,s){for(var f,g=[],b=0,w=e.length,O=n!=null;b<w;b++)(f=e[b])&&(!a||a(f,i,s))&&(g.push(f),O&&n.push(b));return g}function y0(e,n,a,i,s,f){return i&&!i[Do]&&(i=y0(i)),s&&!s[Do]&&(s=y0(s,f)),nc(function(g,b,w,O){var N,z,F,q=[],G=[],X=b.length,J=g||kw(n||"*",w.nodeType?[w]:w,[]),ie=e&&(g||!n)?lv(J,q,e,w,O):J,oe=a?s||(g?e:X||i)?[]:b:ie;if(a&&a(ie,oe,w,O),i)for(N=lv(oe,G),i(N,[],w,O),z=N.length;z--;)(F=N[z])&&(oe[G[z]]=!(ie[G[z]]=F));if(g){if(s||e){if(s){for(N=[],z=oe.length;z--;)(F=oe[z])&&N.push(ie[z]=F);s(null,oe=[],N,O)}for(z=oe.length;z--;)(F=oe[z])&&(N=s?vd.call(g,F):q[z])>-1&&(g[N]=!(b[N]=F))}}else oe=lv(oe===b?oe.splice(X,oe.length):oe),s?s(null,b,oe,O):$l.apply(b,oe)})}function w0(e){for(var n,a,i,s=e.length,f=ka.relative[e[0].type],g=f||ka.relative[" "],b=f?1:0,w=Pm(function(z){return z===n},g,!0),O=Pm(function(z){return vd.call(n,z)>-1},g,!0),N=[function(z,F,q){var G=!f&&(q||F!==Pp)||((n=F).nodeType?w(z,F,q):O(z,F,q));return n=null,G}];b<s;b++)if(a=ka.relative[e[b].type])N=[Pm(b0(N),a)];else{if(a=ka.filter[e[b].type].apply(null,e[b].matches),a[Do]){for(i=++b;i<s&&!ka.relative[e[i].type];i++);return y0(b>1&&b0(N),b>1&&Yg(e.slice(0,b-1).concat({value:e[b-2].type===" "?"*":""})).replace(fi,"$1"),a,b<i&&w0(e.slice(b,i)),i<s&&w0(e=e.slice(i)),i<s&&Yg(e))}N.push(a)}return b0(N)}function zp(e,n){var a=n.length>0,i=e.length>0,s=function(f,g,b,w,O){var N,z,F,q=0,G="0",X=f&&[],J=[],ie=Pp,oe=f||i&&ka.find.TAG("*",O),ve=tc+=ie==null?1:Math.random()||.1,Ce=oe.length;for(O&&(Pp=g!==ci&&g);G!==Ce&&(N=oe[G])!=null;G++){if(i&&N){for(z=0;F=e[z++];)if(F(N,g,b)){w.push(N);break}O&&(tc=ve)}a&&((N=!F&&N)&&q--,f&&X.push(N))}if(q+=G,a&&G!==q){for(z=0;F=n[z++];)F(X,J,g,b);if(f){if(q>0)for(;G--;)X[G]||J[G]||(J[G]=NT.call(w));J=lv(J)}$l.apply(w,J),O&&!f&&J.length>0&&q+n.length>1&&fa.uniqueSort(w)}return O&&(tc=ve,Pp=ie),X};return a?nc(s):s}l0=fa.compile=function(e,n){var a,i=[],s=[],f=Cw[e+" "];if(!f){for(n||(n=ms(e)),a=n.length;a--;)f=w0(n[a]),f[Do]?i.push(f):s.push(f);f=Cw(e,zp(s,i)),f.selector=e}return f},Rc=fa.select=function(e,n,a,i){var s,f,g,b,w,O=typeof e=="function"&&e,N=!i&&ms(e=O.selector||e);if(a=a||[],N.length===1){if(f=N[0]=N[0].slice(0),f.length>2&&(g=f[0]).type==="ID"&&uo.getById&&n.nodeType===9&&Yi&&ka.relative[f[1].type]){if(n=(ka.find.ID(g.matches[0].replace(sv,cv),n)||[])[0],n)O&&(n=n.parentNode);else return a;e=e.slice(f.shift().value.length)}for(s=$p.needsContext.test(e)?0:f.length;s--&&(g=f[s],!ka.relative[b=g.type]);)if((w=ka.find[b])&&(i=w(g.matches[0].replace(sv,cv),d0.test(f[0].type)&&Bc(n.parentNode)||n))){if(f.splice(s,1),e=i.length&&Yg(f),!e)return $l.apply(a,i),a;break}}return(O||l0(e,N))(i,n,!Yi,a,d0.test(e)&&Bc(n.parentNode)||n),a},uo.sortStable=Do.split("").sort(Xg).join("")===Do,uo.detectDuplicates=!!il,kf(),uo.sortDetached=!0;var Ip=document,md=Array.prototype.push,Ew=Array.prototype.slice,vi=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,sl=ov.Event,Ro=Ne.makeMap("children,contents,next,prev"),Ou=function(e){return typeof e<"u"},Ef=function(e){return typeof e=="string"},zl=function(e){return e&&e===e.window},C0=function(e,n){n=n||Ip;var a=n.createElement("div"),i=n.createDocumentFragment();a.innerHTML=e;for(var s;s=a.firstChild;)i.appendChild(s);return i},hs=function(e,n,a,i){var s;if(Ef(n))n=C0(n,bo(e[0]));else if(n.length&&!n.nodeType){if(n=Pn.makeArray(n),i)for(s=n.length-1;s>=0;s--)hs(e,n[s],a,i);else for(s=0;s<n.length;s++)hs(e,n[s],a,i);return e}if(n.nodeType)for(s=e.length;s--;)a.call(e[s],n);return e},Nm=function(e,n){return e&&n&&(" "+e.className+" ").indexOf(" "+n+" ")!==-1},Ow=function(e,n,a){var i,s;return n=Pn(n)[0],e.each(function(){var f=this;(!a||i!==f.parentNode)&&(i=f.parentNode,s=n.cloneNode(!1),f.parentNode.insertBefore(s,f)),s.appendChild(f)}),e},VT=Ne.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),UT=Ne.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),WT={for:"htmlFor",class:"className",readonly:"readOnly"},jT={float:"cssFloat"},S0={},Fp={},Is=function(e,n){return new Pn.fn.init(e,n)},Aw=function(e,n){var a;if(n.indexOf)return n.indexOf(e);for(a=n.length;a--;)if(n[a]===e)return a;return-1},fv=/^\s*|\s*$/g,Jg=function(e){return e==null?"":(""+e).replace(fv,"")},cl=function(e,n){var a,i,s,f;if(e)if(a=e.length,a===void 0){for(i in e)if(e.hasOwnProperty(i)&&(f=e[i],n.call(f,i,f)===!1))break}else for(s=0;s<a&&(f=e[s],n.call(f,s,f)!==!1);s++);return e},rc=function(e,n){var a=[];return cl(e,function(i,s){n(s,i)&&a.push(s)}),a},bo=function(e){return e?e.nodeType===9?e:e.ownerDocument:Ip};Is.fn=Is.prototype={constructor:Is,selector:"",context:null,length:0,init:function(e,n){var a=this,i,s;if(!e)return a;if(e.nodeType)return a.context=a[0]=e,a.length=1,a;if(n&&n.nodeType)a.context=n;else{if(n)return Pn(e).attr(n);a.context=n=document}if(Ef(e))if(a.selector=e,e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=vi.exec(e),i)if(i[1])for(s=C0(e,bo(n)).firstChild;s;)md.call(a,s),s=s.nextSibling;else{if(s=bo(n).getElementById(i[2]),!s)return a;if(s.id!==i[2])return a.find(e);a.length=1,a[0]=s}else return Pn(n).find(e);else this.add(e,!1);return a},toArray:function(){return Ne.toArray(this)},add:function(e,n){var a=this,i,s;if(Ef(e))return a.add(Pn(e));if(n!==!1)for(i=Pn.unique(a.toArray().concat(Pn.makeArray(e))),a.length=i.length,s=0;s<i.length;s++)a[s]=i[s];else md.apply(a,Pn.makeArray(e));return a},attr:function(e,n){var a=this,i;if(typeof e=="object")cl(e,function(s,f){a.attr(s,f)});else if(Ou(n))this.each(function(){var s;if(this.nodeType===1){if(s=S0[e],s&&s.set){s.set(this,n);return}n===null?this.removeAttribute(e,2):this.setAttribute(e,n,2)}});else{if(a[0]&&a[0].nodeType===1){if(i=S0[e],i&&i.get)return i.get(a[0],e);if(UT[e])return a.prop(e)?e:void 0;n=a[0].getAttribute(e,2),n===null&&(n=void 0)}return n}return a},removeAttr:function(e){return this.attr(e,null)},prop:function(e,n){var a=this;if(e=WT[e]||e,typeof e=="object")cl(e,function(i,s){a.prop(i,s)});else if(Ou(n))this.each(function(){this.nodeType===1&&(this[e]=n)});else return a[0]&&a[0].nodeType&&e in a[0]?a[0][e]:n;return a},css:function(e,n){var a=this,i,s,f=function(b){return b.replace(/-(\D)/g,function(w,O){return O.toUpperCase()})},g=function(b){return b.replace(/[A-Z]/g,function(w){return"-"+w})};if(typeof e=="object")cl(e,function(b,w){a.css(b,w)});else if(Ou(n))e=f(e),typeof n=="number"&&!VT[e]&&(n=n.toString()+"px"),a.each(function(){var b=this.style;if(s=Fp[e],s&&s.set){s.set(this,n);return}try{this.style[jT[e]||e]=n}catch{}(n===null||n==="")&&(b.removeProperty?b.removeProperty(g(e)):b.removeAttribute(e))});else{if(i=a[0],s=Fp[e],s&&s.get)return s.get(i);if(i.ownerDocument.defaultView)try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(g(e))}catch{return}else return i.currentStyle?i.currentStyle[f(e)]:""}return a},remove:function(){for(var e=this,n,a=this.length;a--;)n=e[a],sl.clean(n),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){for(var e=this,n,a=this.length;a--;)for(n=e[a];n.firstChild;)n.removeChild(n.firstChild);return this},html:function(e){var n=this,a;if(Ou(e)){a=n.length;try{for(;a--;)n[a].innerHTML=e}catch{Pn(n[a]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var n=this,a;if(Ou(e)){for(a=n.length;a--;)"innerText"in n[a]?n[a].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return hs(this,arguments,function(e){(this.nodeType===1||this.host&&this.host.nodeType===1)&&this.appendChild(e)})},prepend:function(){return hs(this,arguments,function(e){(this.nodeType===1||this.host&&this.host.nodeType===1)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?hs(e,arguments,function(n){this.parentNode.insertBefore(n,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?hs(e,arguments,function(n){this.parentNode.insertBefore(n,this.nextSibling)},!0):e},appendTo:function(e){return Pn(e).append(this),this},prependTo:function(e){return Pn(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Ow(this,e)},wrapAll:function(e){return Ow(this,e,!0)},wrapInner:function(e){return this.each(function(){Pn(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){Pn(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),Pn(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,n){var a=this;return typeof e!="string"||(e.indexOf(" ")!==-1?cl(e.split(" "),function(){a.toggleClass(this,n)}):a.each(function(i,s){var f=Nm(s,e);if(f!==n){var g=s.className;f?s.className=Jg((" "+g+" ").replace(" "+e+" "," ")):s.className+=g?" "+e:e}})),a},hasClass:function(e){return Nm(this[0],e)},each:function(e){return cl(this,e)},on:function(e,n){return this.each(function(){sl.bind(this,e,n)})},off:function(e,n){return this.each(function(){sl.unbind(this,e,n)})},trigger:function(e){return this.each(function(){typeof e=="object"?sl.fire(this,e.type,e):sl.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return Pn(Ew.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var n,a,i=[];for(n=0,a=this.length;n<a;n++)Pn.find(e,this[n],i);return Pn(i)},filter:function(e){return Pn(typeof e=="function"?rc(this.toArray(),function(n,a){return e(a,n)}):Pn.filter(e,this.toArray()))},closest:function(e){var n=[];return e instanceof Pn&&(e=e[0]),this.each(function(a,i){for(;i;){if(typeof e=="string"&&Pn(i).is(e)){n.push(i);break}else if(i===e){n.push(i);break}i=i.parentNode}}),Pn(n)},offset:function(e){var n,a,i,s=0,f=0,g;return e?this.css(e):(n=this[0],n&&(a=n.ownerDocument,i=a.documentElement,n.getBoundingClientRect&&(g=n.getBoundingClientRect(),s=g.left+(i.scrollLeft||a.body.scrollLeft)-i.clientLeft,f=g.top+(i.scrollTop||a.body.scrollTop)-i.clientTop)),{left:s,top:f})},push:md,sort:Array.prototype.sort,splice:Array.prototype.splice},Ne.extend(Is,{extend:Ne.extend,makeArray:function(e){return zl(e)||e.nodeType?[e]:Ne.toArray(e)},inArray:Aw,isArray:Ne.isArray,each:cl,trim:Jg,grep:rc,find:fa,expr:fa.selectors,unique:fa.uniqueSort,text:fa.getText,contains:fa.contains,filter:function(e,n,a){var i=n.length;for(a&&(e=":not("+e+")");i--;)n[i].nodeType!==1&&n.splice(i,1);return n.length===1?n=Pn.find.matchesSelector(n[0],e)?[n[0]]:[]:n=Pn.find.matches(e,n),n}});var Fs=function(e,n,a){var i=[],s=e[n];for(typeof a!="string"&&a instanceof Pn&&(a=a[0]);s&&s.nodeType!==9&&!(a!==void 0&&(s===a||typeof a=="string"&&Pn(s).is(a)));)s.nodeType===1&&i.push(s),s=s[n];return i},vv=function(e,n,a,i){var s=[];for(i instanceof Pn&&(i=i[0]);e;e=e[n])if(!(a&&e.nodeType!==a)){if(i!==void 0&&(e===i||typeof i=="string"&&Pn(e).is(i)))break;s.push(e)}return s},x0=function(e,n,a){for(e=e[n];e;e=e[n])if(e.nodeType===a)return e;return null};cl({parent:function(e){var n=e.parentNode;return n&&n.nodeType!==11?n:null},parents:function(e){return Fs(e,"parentNode")},next:function(e){return x0(e,"nextSibling",1)},prev:function(e){return x0(e,"previousSibling",1)},children:function(e){return vv(e.firstChild,"nextSibling",1)},contents:function(e){return Ne.toArray((e.nodeName==="iframe"?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,n){Is.fn[e]=function(a){var i=this,s=[];i.each(function(){var g=n.call(s,this,a,s);g&&(Pn.isArray(g)?s.push.apply(s,g):s.push(g))}),this.length>1&&(Ro[e]||(s=Pn.unique(s)),e.indexOf("parents")===0&&(s=s.reverse()));var f=Pn(s);return a?f.filter(a):f}}),cl({parentsUntil:function(e,n){return Fs(e,"parentNode",n)},nextUntil:function(e,n){return vv(e,"nextSibling",1,n).slice(1)},prevUntil:function(e,n){return vv(e,"previousSibling",1,n).slice(1)}},function(e,n){Is.fn[e]=function(a,i){var s=this,f=[];s.each(function(){var b=n.call(f,this,a,f);b&&(Pn.isArray(b)?f.push.apply(f,b):f.push(b))}),this.length>1&&(f=Pn.unique(f),(e.indexOf("parents")===0||e==="prevUntil")&&(f=f.reverse()));var g=Pn(f);return i?g.filter(i):g}}),Is.fn.is=function(e){return!!e&&this.filter(e).length>0},Is.fn.init.prototype=Is.fn,Is.overrideDefaults=function(e){var n,a=function(i,s){return n=n||e(),arguments.length===0&&(i=n.element),s||(s=n.context),new a.fn.init(i,s)};return Pn.extend(a,this),a},Is.attrHooks=S0,Is.cssHooks=Fp;var Pn=Is,Zg=Ne.each,GT=Ne.grep,Lp=Qt.ie,Hp=/^([a-z0-9],?)+$/i,qT=function(e,n,a){var i=n.keep_values,s={set:function(g,b,w){n.url_converter&&b!==null&&(b=n.url_converter.call(n.url_converter_scope||a(),b,w,g[0])),g.attr("data-mce-"+w,b).attr(w,b)},get:function(g,b){return g.attr("data-mce-"+b)||g.attr(b)}},f={style:{set:function(g,b){if(b!==null&&typeof b=="object"){g.css(b);return}i&&g.attr("data-mce-style",b),b!==null&&typeof b=="string"?(g.removeAttr("style"),g.css(e.parse(b))):g.attr("style",b)},get:function(g){var b=g.attr("data-mce-style")||g.attr("style");return b=e.serialize(e.parse(b),g[0].nodeName),b}}};return i&&(f.href=f.src=s),f},_o=function(e,n){var a=n.attr("style"),i=e.serialize(e.parse(a),n[0].nodeName);i||(i=null),n.attr("data-mce-style",i)},du=function(e,n){var a=0,i,s;if(e)for(i=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)s=e.nodeType,!(n&&s===3&&(s===i||!e.nodeValue.length))&&(a++,i=s);return a},Ea=function(e,n){n===void 0&&(n={});var a={},i=window,s={},f=0,g=!0,b=!0,w=Tc.forElement(M.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),O=[],N=n.schema?n.schema:er({}),z=xf({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),F=n.ownEvents?new ov:ov.Event,q=N.getBlockElements(),G=Pn.overrideDefaults(function(){return{context:e,element:bp.getRoot()}}),X=function(de){if(typeof de=="string")return!!q[de];if(de){var Ae=de.nodeType;if(Ae)return!!(Ae===1&&q[de.nodeName])}return!1},J=function(de){return de&&e&&cr(de)?e.getElementById(de):de},ie=function(de){return G(typeof de=="string"?J(de):de)},oe=function(de,Ae,it){var ht,Nn,Pr=ie(de);return Pr.length&&(ht=gO[Ae],ht&&ht.get?Nn=ht.get(Pr,Ae):Nn=Pr.attr(Ae)),typeof Nn>"u"&&(Nn=it||""),Nn},ve=function(de){var Ae=J(de);return Ae?Ae.attributes:[]},Ce=function(de,Ae,it){it===""&&(it=null);var ht=ie(de),Nn=ht.attr(Ae);if(ht.length){var Pr=gO[Ae];Pr&&Pr.set?Pr.set(ht,it,Ae):ht.attr(Ae,it),Nn!==it&&n.onSetAttrib&&n.onSetAttrib({attrElm:ht,attrName:Ae,attrValue:it})}},se=function(de,Ae){if(!Lp||de.nodeType!==1||Ae)return de.cloneNode(Ae);var it=e.createElement(de.nodeName);return Zg(ve(de),function(ht){Ce(it,ht.nodeName,oe(de,ht.nodeName))}),it},xe=function(){return n.root_element||e.body},Be=function(de){var Ae=mf(de);return{x:Ae.x,y:Ae.y,w:Ae.width,h:Ae.height}},Je=function(de,Ae){return Pg(e.body,J(de),Ae)},rn=function(de,Ae,it){var ht=cr(Ae)?ie(de).css(Ae,it):ie(de).css(Ae);n.update_styles&&_o(z,ht)},At=function(de,Ae){var it=ie(de).css(Ae);n.update_styles&&_o(z,it)},Ye=function(de,Ae,it){var ht=ie(de);return it?ht.css(Ae):(Ae=Ae.replace(/-(\D)/g,function(Nn,Pr){return Pr.toUpperCase()}),Ae==="float"&&(Ae=Qt.browser.isIE()?"styleFloat":"cssFloat"),ht[0]&&ht[0].style?ht[0].style[Ae]:void 0)},hn=function(de){var Ae,it;return de=J(de),Ae=Ye(de,"width"),it=Ye(de,"height"),Ae.indexOf("px")===-1&&(Ae=0),it.indexOf("px")===-1&&(it=0),{w:parseInt(Ae,10)||de.offsetWidth||de.clientWidth,h:parseInt(it,10)||de.offsetHeight||de.clientHeight}},rt=function(de){de=J(de);var Ae=Je(de),it=hn(de);return{x:Ae.x,y:Ae.y,w:it.w,h:it.h}},Dt=function(de,Ae){var it;if(!de)return!1;if(!Array.isArray(de)){if(Ae==="*")return de.nodeType===1;if(Hp.test(Ae)){var ht=Ae.toLowerCase().split(/,/),Nn=de.nodeName.toLowerCase();for(it=ht.length-1;it>=0;it--)if(ht[it]===Nn)return!0;return!1}if(de.nodeType&&de.nodeType!==1)return!1}var Pr=Array.isArray(de)?de:[de];return fa(Ae,Pr[0].ownerDocument||Pr[0],null,Pr).length>0},tt=function(de,Ae,it,ht){var Nn=[],Pr,$a=J(de);for(ht=ht===void 0,it=it||(xe().nodeName!=="BODY"?xe().parentNode:null),Ne.is(Ae,"string")&&(Pr=Ae,Ae==="*"?Ae=function(Dg){return Dg.nodeType===1}:Ae=function(Dg){return Dt(Dg,Pr)});$a&&!($a===it||Vr($a.nodeType)||Mg($a)||In($a));){if(!Ae||typeof Ae=="function"&&Ae($a))if(ht)Nn.push($a);else return[$a];$a=$a.parentNode}return ht?Nn:null},pt=function(de,Ae,it){var ht=tt(de,Ae,it,!1);return ht&&ht.length>0?ht[0]:null},_t=function(de,Ae,it){var ht=Ae;if(de){for(typeof Ae=="string"&&(ht=function(Nn){return Dt(Nn,Ae)}),de=de[it];de;de=de[it])if(typeof ht=="function"&&ht(de))return de}return null},qe=function(de,Ae){return _t(de,Ae,"nextSibling")},$t=function(de,Ae){return _t(de,Ae,"previousSibling")},Bn=function(de,Ae){return fa(de,J(Ae)||n.root_element||e,[])},Xr=function(de,Ae,it){var ht,Nn=typeof de=="string"?J(de):de;if(!Nn)return!1;if(Ne.isArray(Nn)&&(Nn.length||Nn.length===0))return ht=[],Zg(Nn,function($a,Dg){$a&&ht.push(Ae.call(it,typeof $a=="string"?J($a):$a,Dg))}),ht;var Pr=it||this;return Ae.call(Pr,Nn)},br=function(de,Ae){ie(de).each(function(it,ht){Zg(Ae,function(Nn,Pr){Ce(ht,Pr,Nn)})})},Bo=function(de,Ae){var it=ie(de);Lp?it.each(function(ht,Nn){if(Nn.canHaveHTML!==!1){for(;Nn.firstChild;)Nn.removeChild(Nn.firstChild);try{Nn.innerHTML="<br>"+Ae,Nn.removeChild(Nn.firstChild)}catch{Pn("<div></div>").html("<br>"+Ae).contents().slice(1).appendTo(Nn)}return Ae}}):it.html(Ae)},lo=function(de,Ae,it,ht,Nn){return Xr(de,function(Pr){var $a=typeof Ae=="string"?e.createElement(Ae):Ae;return br($a,it),ht&&(typeof ht!="string"&&ht.nodeType?$a.appendChild(ht):typeof ht=="string"&&Bo($a,ht)),Nn?$a:Pr.appendChild($a)})},Vs=function(de,Ae,it){return lo(e.createElement(de),de,Ae,it,!0)},pc=zs.decode,Ke=zs.encodeAllRaw,Ee=function(de,Ae,it){var ht="",Nn;ht+="<"+de;for(Nn in Ae)ko(Ae,Nn)&&(ht+=" "+Nn+'="'+Ke(Ae[Nn])+'"');return typeof it<"u"?ht+">"+it+"</"+de+">":ht+" />"},Ze=function(de){var Ae,it=e.createElement("div"),ht=e.createDocumentFragment();for(ht.appendChild(it),de&&(it.innerHTML=de);Ae=it.firstChild;)ht.appendChild(Ae);return ht.removeChild(it),ht},Oe=function(de,Ae){var it=ie(de);return Ae?it.each(function(){for(var ht;ht=this.firstChild;)ht.nodeType===3&&ht.data.length===0?this.removeChild(ht):this.parentNode.insertBefore(ht,this)}).remove():it.remove(),it.length>1?it.toArray():it[0]},Ft=function(de){return Xr(de,function(Ae){var it,ht=Ae.attributes;for(it=ht.length-1;it>=0;it--)Ae.removeAttributeNode(ht.item(it))})},mt=function(de){return z.parse(de)},vn=function(de,Ae){return z.serialize(de,Ae)},tr=function(de){var Ae,it;if(bp!==Ea.DOM&&e===document){if(a[de])return;a[de]=!0}it=e.getElementById("mceDefaultStyles"),it||(it=e.createElement("style"),it.id="mceDefaultStyles",it.type="text/css",Ae=e.getElementsByTagName("head")[0],Ae.firstChild?Ae.insertBefore(it,Ae.firstChild):Ae.appendChild(it)),it.styleSheet?it.styleSheet.cssText+=de:it.appendChild(e.createTextNode(de))},Na=function(de){de||(de=""),ft(de.split(","),function(Ae){s[Ae]=!0,w.load(Ae,Tt)})},Qu=function(de,Ae,it){ie(de).toggleClass(Ae,it).each(function(){this.className===""&&Pn(this).attr("class",null)})},ks=function(de,Ae){ie(de).addClass(Ae)},Cl=function(de,Ae){Qu(de,Ae,!1)},es=function(de,Ae){return ie(de).hasClass(Ae)},ts=function(de){ie(de).show()},ti=function(de){ie(de).hide()},lm=function(de){return ie(de).css("display")==="none"},tu=function(de){return(de||"mce_")+f++},Sl=function(de){var Ae=typeof de=="string"?J(de):de;return Sn(Ae)?Ae.outerHTML:Pn("<div></div>").append(Pn(Ae).clone()).html()},Xv=function(de,Ae){ie(de).each(function(){try{if("outerHTML"in this){this.outerHTML=Ae;return}}catch{}Oe(Pn(this).html(Ae),!0)})},Ka=function(de,Ae){var it=J(Ae);return Xr(de,function(ht){var Nn=it.parentNode,Pr=it.nextSibling;return Pr?Nn.insertBefore(ht,Pr):Nn.appendChild(ht),ht})},wa=function(de,Ae,it){return Xr(Ae,function(ht){return Ne.is(ht,"array")&&(de=de.cloneNode(!0)),it&&Zg(GT(ht.childNodes),function(Nn){de.appendChild(Nn)}),ht.parentNode.replaceChild(de,ht)})},jo=function(de,Ae){var it;return de.nodeName!==Ae.toUpperCase()&&(it=Vs(Ae),Zg(ve(de),function(ht){Ce(it,ht.nodeName,oe(de,ht.nodeName))}),wa(it,de,!0)),it||de},tf=function(de,Ae){for(var it=de,ht;it;){for(ht=Ae;ht&&it!==ht;)ht=ht.parentNode;if(it===ht)break;it=it.parentNode}return!it&&de.ownerDocument?de.ownerDocument.documentElement:it},Yv=function(de){return z.toHex(Ne.trim(de))},nf=function(de){if(Sn(de)){var Ae=de.nodeName.toLowerCase()==="a"&&!oe(de,"href")&&oe(de,"id");if(oe(de,"name")||oe(de,"data-mce-bookmark")||Ae)return!0}return!1},Gf=function(de,Ae){var it,ht,Nn=0;if(nf(de))return!1;if(de=de.firstChild,de){var Pr=new zr(de,de.parentNode),$a=N?N.getWhiteSpaceElements():{};Ae=Ae||(N?N.getNonEmptyElements():null);do{if(it=de.nodeType,Sn(de)){var Dg=de.getAttribute("data-mce-bogus");if(Dg){de=Pr.next(Dg==="all");continue}if(ht=de.nodeName.toLowerCase(),Ae&&Ae[ht]){if(ht==="br"){Nn++,de=Pr.next();continue}return!1}if(nf(de))return!1}if(it===8||it===3&&!Ec(de.nodeValue)||it===3&&de.parentNode&&$a[de.parentNode.nodeName]&&Ec(de.nodeValue))return!1;de=Pr.next()}while(de)}return Nn<=1},ew=function(){return e.createRange()},P6=function(de,Ae,it){var ht=ew(),Nn,Pr,$a;if(de&&Ae)return ht.setStart(de.parentNode,du(de)),ht.setEnd(Ae.parentNode,du(Ae)),Nn=ht.extractContents(),ht=ew(),ht.setStart(Ae.parentNode,du(Ae)+1),ht.setEnd(de.parentNode,du(de)+1),Pr=ht.extractContents(),$a=de.parentNode,$a.insertBefore(r0(bp,Nn),de),it?$a.insertBefore(it,de):$a.insertBefore(Ae,de),$a.insertBefore(r0(bp,Pr),de),Oe(de),it||Ae},tB=function(de,Ae,it,ht){if(Ne.isArray(de)){for(var Nn=de.length,Pr=[];Nn--;)Pr[Nn]=tB(de[Nn],Ae,it,ht);return Pr}n.collect&&(de===e||de===i)&&O.push([de,Ae,it,ht]);var $a=F.bind(de,Ae,it,ht||bp);return $a},tw=function(de,Ae,it){if(Ne.isArray(de)){for(var ht=de.length,Nn=[];ht--;)Nn[ht]=tw(de[ht],Ae,it);return Nn}else{if(O.length>0&&(de===e||de===i))for(var ht=O.length;ht--;){var Pr=O[ht];de===Pr[0]&&(!Ae||Ae===Pr[1])&&(!it||it===Pr[2])&&F.unbind(Pr[0],Pr[1],Pr[2])}return F.unbind(de,Ae,it)}},nB=function(de,Ae,it){return F.fire(de,Ae,it)},mO=function(de){if(de&&Sn(de)){var Ae=de.getAttribute("data-mce-contenteditable");return Ae&&Ae!=="inherit"?Ae:de.contentEditable!=="inherit"?de.contentEditable:null}else return null},N6=function(de){for(var Ae=xe(),it=null;de&&de!==Ae&&(it=mO(de),it===null);de=de.parentNode);return it},rB=function(){if(O.length>0)for(var de=O.length;de--;){var Ae=O[de];F.unbind(Ae[0],Ae[1],Ae[2])}Zn(s,function(it,ht){w.unload(ht),delete s[ht]}),fa.setDocument&&fa.setDocument()},$6=function(de,Ae){if(Lp){for(;de;){if(Ae===de)return!0;de=de.parentNode}return!1}else return de===Ae||Ae.contains(de)},z6=function(de){return"startContainer: "+de.startContainer.nodeName+", startOffset: "+de.startOffset+", endContainer: "+de.endContainer.nodeName+", endOffset: "+de.endOffset},bp={doc:e,settings:n,win:i,files:s,stdMode:g,boxModel:b,styleSheetLoader:w,boundEvents:O,styles:z,schema:N,events:F,isBlock:X,$:G,$$:ie,root:null,clone:se,getRoot:xe,getViewPort:Be,getRect:rt,getSize:hn,getParent:pt,getParents:tt,get:J,getNext:qe,getPrev:$t,select:Bn,is:Dt,add:lo,create:Vs,createHTML:Ee,createFragment:Ze,remove:Oe,setStyle:rn,getStyle:Ye,setStyles:At,removeAllAttribs:Ft,setAttrib:Ce,setAttribs:br,getAttrib:oe,getPos:Je,parseStyle:mt,serializeStyle:vn,addStyle:tr,loadCSS:Na,addClass:ks,removeClass:Cl,hasClass:es,toggleClass:Qu,show:ts,hide:ti,isHidden:lm,uniqueId:tu,setHTML:Bo,getOuterHTML:Sl,setOuterHTML:Xv,decode:pc,encode:Ke,insertAfter:Ka,replace:wa,rename:jo,findCommonAncestor:tf,toHex:Yv,run:Xr,getAttribs:ve,isEmpty:Gf,createRng:ew,nodeIndex:du,split:P6,bind:tB,unbind:tw,fire:nB,getContentEditable:mO,getContentEditableParent:N6,destroy:rB,isChildOf:$6,dumpRng:z6},gO=qT(z,n,W(bp));return bp};Ea.DOM=Ea(document),Ea.nodeIndex=du;var Dw=Ea.DOM,T0=Ne.each,gd=Ne.grep,Rw=0,hd=1,$m=2,_w=3,Il=function(){function e(n){n===void 0&&(n={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=n}return e.prototype._setReferrerPolicy=function(n){this.settings.referrerPolicy=n},e.prototype.loadScript=function(n,a,i){var s=Dw,f,g=function(){s.remove(O),f&&(f.onerror=f.onload=f=null)},b=function(){g(),a()},w=function(){g(),Mt(i)?i():typeof console<"u"&&console.log&&console.log("Failed to load script: "+n)},O=s.uniqueId();f=document.createElement("script"),f.id=O,f.type="text/javascript",f.src=Ne._addCacheSuffix(n),this.settings.referrerPolicy&&s.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy),f.onload=b,f.onerror=w,(document.getElementsByTagName("head")[0]||document.body).appendChild(f)},e.prototype.isDone=function(n){return this.states[n]===$m},e.prototype.markDone=function(n){this.states[n]=$m},e.prototype.add=function(n,a,i,s){var f=this.states[n];this.queue.push(n),f===void 0&&(this.states[n]=Rw),a&&(this.scriptLoadedCallbacks[n]||(this.scriptLoadedCallbacks[n]=[]),this.scriptLoadedCallbacks[n].push({success:a,failure:s,scope:i||this}))},e.prototype.load=function(n,a,i,s){return this.add(n,a,i,s)},e.prototype.remove=function(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]},e.prototype.loadQueue=function(n,a,i){this.loadScripts(this.queue,n,a,i)},e.prototype.loadScripts=function(n,a,i,s){var f=this,g=[],b=function(O,N){T0(f.scriptLoadedCallbacks[N],function(z){Mt(z[O])&&z[O].call(z.scope)}),f.scriptLoadedCallbacks[N]=void 0};f.queueLoadedCallbacks.push({success:a,failure:s,scope:i||this});var w=function(){var O=gd(n);if(n.length=0,T0(O,function(z){if(f.states[z]===$m){b("success",z);return}if(f.states[z]===_w){b("failure",z);return}f.states[z]!==hd&&(f.states[z]=hd,f.loading++,f.loadScript(z,function(){f.states[z]=$m,f.loading--,b("success",z),w()},function(){f.states[z]=_w,f.loading--,g.push(z),b("failure",z),w()}))}),!f.loading){var N=f.queueLoadedCallbacks.slice(0);f.queueLoadedCallbacks.length=0,T0(N,function(z){g.length===0?Mt(z.success)&&z.success.call(z.scope):Mt(z.failure)&&z.failure.call(z.scope,g)})}};w()},e.ScriptLoader=new e,e}(),Au=function(e){var n=e,a=function(){return n},i=function(s){n=s};return{get:a,set:i}},KT=function(e){return Ct(e)&&$n(e,"raw")},XT=function(e){return _n(e)&&e.length>1},pd={},k0=Au("en"),dv=function(){return pr(pd,k0.get())},bd=function(){return mo(pd,function(e){return Jt({},e)})},E0=function(e){e&&k0.set(e)},YT=function(){return k0.get()},JT=function(e,n){var a=pd[e];a||(pd[e]=a={}),Zn(n,function(i,s){a[s.toLowerCase()]=i})},yd=function(e){var n=dv().getOr({}),a=function(w){return Mt(w)?Object.prototype.toString.call(w):i(w)?"":""+w},i=function(w){return w===""||w===null||w===void 0},s=function(w){var O=a(w);return pr(n,O.toLowerCase()).map(a).getOr(O)},f=function(w){return w.replace(/{context:\w+}$/,"")};if(i(e))return"";if(KT(e))return a(e.raw);if(XT(e)){var g=e.slice(1),b=s(e[0]).replace(/\{([0-9]+)\}/g,function(w,O){return $n(g,O)?a(g[O]):w});return f(b)}return f(s(e))},wd=function(){return dv().bind(function(e){return pr(e,"_dir")}).exists(function(e){return e==="rtl"})},Vp=function(e){return $n(pd,e)},Yn={getData:bd,setCode:E0,getCode:YT,add:JT,translate:yd,isRtl:wd,hasCode:Vp},oa=function(){var e=[],n={},a={},i=[],s=function(X,J){var ie=jt(i,function(oe){return oe.name===X&&oe.state===J});ft(ie,function(oe){return oe.callback()})},f=function(X){if(a[X])return a[X].instance},g=function(X){var J;return a[X]&&(J=a[X].dependencies),J||[]},b=function(X,J){oa.languageLoad!==!1&&G(X,function(){var ie=Yn.getCode(),oe=","+(J||"")+",";!ie||J&&oe.indexOf(","+ie+",")===-1||Il.ScriptLoader.add(n[X]+"/langs/"+ie+".js")},"loaded")},w=function(X,J,ie){var oe=J;return e.push(oe),a[X]={instance:oe,dependencies:ie},s(X,"added"),oe},O=function(X){delete n[X],delete a[X]},N=function(X,J){return typeof J=="object"?J:typeof X=="string"?{prefix:"",resource:J,suffix:""}:{prefix:X.prefix,resource:J,suffix:X.suffix}},z=function(X,J){var ie=n[X];ft(J,function(oe){Il.ScriptLoader.add(ie+"/"+oe)})},F=function(X,J,ie,oe){var ve=g(X);ft(ve,function(Ce){var se=N(J,Ce);q(se.resource,se,void 0,void 0)}),ie&&(oe?ie.call(oe):ie.call(Il))},q=function(X,J,ie,oe,ve){if(!n[X]){var Ce=typeof J=="string"?J:J.prefix+J.resource+J.suffix;Ce.indexOf("/")!==0&&Ce.indexOf("://")===-1&&(Ce=oa.baseURL+"/"+Ce),n[X]=Ce.substring(0,Ce.lastIndexOf("/"));var se=function(){s(X,"loaded"),F(X,J,ie,oe)};a[X]?se():Il.ScriptLoader.add(Ce,se,oe,ve)}},G=function(X,J,ie){ie===void 0&&(ie="added"),$n(a,X)&&ie==="added"||$n(n,X)&&ie==="loaded"?J():i.push({name:X,state:ie,callback:J})};return{items:e,urls:n,lookup:a,_listeners:i,get:f,dependencies:g,requireLangPack:b,add:w,remove:O,createUrl:N,addComponents:z,load:q,waitFor:G}};oa.languageLoad=!0,oa.baseURL="",oa.PluginManager=oa(),oa.ThemeManager=oa();var Cd=function(e){var n=Au(ee.none()),a=function(){return n.get().each(e)},i=function(){a(),n.set(ee.none())},s=function(){return n.get().isSome()},f=function(){return n.get()},g=function(b){a(),n.set(ee.some(b))};return{clear:i,isSet:s,get:f,set:g}},mv=function(){var e=Cd(Tt),n=function(a){return e.get().each(a)};return Jt(Jt({},e),{on:n})},Zr=function(e,n){var a=null,i=function(){ye(a)||(clearTimeout(a),a=null)},s=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];ye(a)&&(a=setTimeout(function(){a=null,e.apply(null,f)},n))};return{cancel:i,throttle:s}},Up=function(e,n){var a=null,i=function(){ye(a)||(clearTimeout(a),a=null)},s=function(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];i(),a=setTimeout(function(){a=null,e.apply(null,f)},n)};return{cancel:i,throttle:s}},Wp=function(e,n){var a=H(e,n);return a===void 0||a===""?[]:a.split(" ")},di=function(e,n,a){var i=Wp(e,n),s=i.concat([a]);return E(e,n,s.join(" ")),!0},gv=function(e,n,a){var i=jt(Wp(e,n),function(s){return s!==a});return i.length>0?E(e,n,i.join(" ")):$e(e,n),!1},jp=function(e){return e.dom.classList!==void 0},ZT=function(e){return Wp(e,"class")},QT=function(e,n){return di(e,"class",n)},Gp=function(e,n){return gv(e,"class",n)},zm=function(e,n){jp(e)?e.dom.classList.add(n):QT(e,n)},O0=function(e){var n=jp(e)?e.dom.classList:ZT(e);n.length===0&&$e(e,"class")},qp=function(e,n){if(jp(e)){var a=e.dom.classList;a.remove(n)}else Gp(e,n);O0(e)},Im=function(e,n){return jp(e)&&e.dom.classList.contains(n)},Kp=function(e,n){var a=[];return ft(cu(e),function(i){n(i)&&(a=a.concat([i])),a=a.concat(Kp(i,n))}),a},Xu=function(e,n){return Vn(n,e)},Sd=W("mce-annotation"),Fl=W("data-mce-annotation"),Yu=W("data-mce-annotation-uid"),Bw=function(e,n){var a=e.selection.getRng(),i=M.fromDom(a.startContainer),s=M.fromDom(e.getBody()),f=n.fold(function(){return"."+Sd()},function(O){return"["+Fl()+'="'+O+'"]'}),g=Zc(i,a.startOffset).getOr(i),b=io(g,f,function(O){return gn(O,s)}),w=function(O,N){return we(O,N)?ee.some(H(O,N)):ee.none()};return b.bind(function(O){return w(O,""+Yu()).bind(function(N){return w(O,""+Fl()).map(function(z){var F=A0(e,N);return{uid:N,name:z,elements:F}})})})},Bi=function(e){return Da(e)&&Im(e,Sd())},A0=function(e,n){var a=M.fromDom(e.getBody());return Xu(a,"["+Yu()+'="'+n+'"]')},Of=function(e,n){var a=M.fromDom(e.getBody()),i=Xu(a,"["+Fl()+'="'+n+'"]'),s={};return ft(i,function(f){var g=H(f,Yu()),b=pr(s,g).getOr([]);s[g]=b.concat([f])}),s},D0=function(e,n){var a=Au({}),i=function(){return{listeners:[],previous:mv()}},s=function(N,z){f(N,function(F){return z(F),F})},f=function(N,z){var F=a.get(),q=pr(F,N).getOrThunk(i),G=z(q);F[N]=G,a.set(F)},g=function(N,z,F){s(N,function(q){ft(q.listeners,function(G){return G(!0,N,{uid:z,nodes:Hn(F,function(X){return X.dom})})})})},b=function(N){s(N,function(z){ft(z.listeners,function(F){return F(!1,N)})})},w=Up(function(){var N=a.get(),z=sa(xi(N));ft(z,function(F){f(F,function(q){var G=q.previous.get();return Bw(e,ee.some(F)).fold(function(){G.isSome()&&(b(F),q.previous.clear())},function(X){var J=X.uid,ie=X.name,oe=X.elements;td(G,J)||(g(ie,J,oe),q.previous.set(J))}),{previous:q.previous,listeners:q.listeners}})})},30);e.on("remove",function(){w.cancel()}),e.on("NodeChange",function(){w.throttle()});var O=function(N,z){f(N,function(F){return{previous:F.previous,listeners:F.listeners.concat([z])}})};return{addListener:O}},R0=function(e,n){var a=function(i){return ee.from(i.attr(Fl())).bind(n.lookup)};e.on("init",function(){e.serializer.addNodeFilter("span",function(i){ft(i,function(s){a(s).each(function(f){f.persistent===!1&&s.unwrap()})})})})},Mw=function(){var e={},n=function(i,s){e[i]={name:i,settings:s}},a=function(i){return pr(e,i).map(function(s){return s.settings})};return{register:n,lookup:a}},Xp=0,Fm=function(e){var n=new Date,a=n.getTime(),i=Math.floor(Math.random()*1e9);return Xp++,e+"_"+i+Xp+String(a)},_0=function(e,n){ft(n,function(a){zm(e,a)})},ek=function(e,n){var a=n||document,i=a.createElement("div");return i.innerHTML=e,cu(M.fromDom(i))},tk=function(e){return Hn(e,M.fromDom)},Ji=function(e){return e.dom.innerHTML},Ho=function(e,n){var a=Cc(e),i=a.dom,s=M.fromDom(i.createDocumentFragment()),f=ek(n,i);cf(s,f),lf(e),Io(e,s)},mu=function(e,n){return M.fromDom(e.dom.cloneNode(n))},mi=function(e){return mu(e,!1)},Ju=function(e){return mu(e,!0)},Mi=function(e,n,a){a===void 0&&(a=ut);var i=new zr(e,n),s=function(f){var g;do g=i[f]();while(g&&!Pt(g)&&!a(g));return ee.from(g).filter(Pt)};return{current:function(){return ee.from(i.current()).filter(Pt)},next:function(){return s("next")},prev:function(){return s("prev")},prev2:function(){return s("prev2")}}},Yp=function(e,n){var a=n||function(g){return e.isBlock(g)||ra(g)||Ra(g)},i=function(g,b,w,O){if(Pt(g)){var N=O(g,b,g.data);if(N!==-1)return ee.some({container:g,offset:N})}return w().bind(function(z){return i(z.container,z.offset,w,O)})},s=function(g,b,w,O){var N=Mi(g,O,a);return i(g,b,function(){return N.prev().map(function(z){return{container:z,offset:z.length}})},w).getOrNull()},f=function(g,b,w,O){var N=Mi(g,O,a);return i(g,b,function(){return N.next().map(function(z){return{container:z,offset:0}})},w).getOrNull()};return{backwards:s,forwards:f}},hv=Math.round,pv=function(e){return e?{left:hv(e.left),top:hv(e.top),bottom:hv(e.bottom),right:hv(e.right),width:hv(e.width),height:hv(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},B0=function(e,n){return e=pv(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Pw=function(e,n){return e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right},Jp=function(e,n,a){return e>=0&&e<=Math.min(n.height,a.height)/2},Af=function(e,n){var a=Math.min(n.height/2,e.height/2);return e.bottom-a<n.top?!0:e.top>n.bottom?!1:Jp(n.top-e.bottom,e,n)},bv=function(e,n){return e.top>n.bottom?!0:e.bottom<n.top?!1:Jp(n.bottom-e.top,e,n)},Nw=function(e,n,a){return n>=e.left&&n<=e.right&&a>=e.top&&a<=e.bottom},nk=function(e,n,a){return Math.min(Math.max(e,n),a)},Zp=function(e){var n=e.startContainer,a=e.startOffset;return n.hasChildNodes()&&e.endOffset===a+1?n.childNodes[a]:null},Du=function(e,n){if(Sn(e)&&e.hasChildNodes()){var a=e.childNodes,i=nk(n,0,a.length-1);return a[i]}else return e},Qp=function(e,n){if(!(n<0&&Sn(e)&&e.hasChildNodes()))return Du(e,n)},Vo=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),$w=function(e){return typeof e=="string"&&e.charCodeAt(0)>=768&&Vo.test(e)},rk=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(a){for(var i=0;i<e.length;i++)if(e[i](a))return!0;return!1}},M0=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(a){for(var i=0;i<e.length;i++)if(!e[i](a))return!1;return!0}},zw=Sn,Iw=Ml,vt=xu("display","block table"),ak=xu("float","left right"),so=M0(zw,Iw,Ur(ak)),P0=Ur(xu("white-space","pre pre-line pre-wrap")),xd=Pt,e1=ra,ps=Ea.nodeIndex,Lm=Qp,Qg=function(e){return"createRange"in e?e.createRange():Ea.DOM.createRng()},t1=function(e){return e&&/[\r\n\t ]/.test(e)},Ll=function(e){return!!e.setStart&&!!e.setEnd},eh=function(e){var n=e.startContainer,a=e.startOffset;if(t1(e.toString())&&P0(n.parentNode)&&Pt(n)){var i=n.data;if(t1(i[a-1])||t1(i[a+1]))return!0}return!1},n1=function(e){var n=e.ownerDocument,a=Qg(n),i=n.createTextNode(fs),s=e.parentNode;s.insertBefore(i,e),a.setStart(i,0),a.setEnd(i,1);var f=pv(a.getBoundingClientRect());return s.removeChild(i),f},bs=function(e){var n=e.startContainer,a=e.endContainer,i=e.startOffset,s=e.endOffset;if(n===a&&Pt(a)&&i===0&&s===1){var f=e.cloneRange();return f.setEndAfter(a),Df(f)}else return null},Mc=function(e){return e.left===0&&e.right===0&&e.top===0&&e.bottom===0},Df=function(e){var n,a=e.getClientRects();return a.length>0?n=pv(a[0]):n=pv(e.getBoundingClientRect()),!Ll(e)&&e1(e)&&Mc(n)?n1(e):Mc(n)&&Ll(e)?bs(e):n},Uo=function(e,n){var a=B0(e,n);return a.width=1,a.right=a.left+1,a},N0=function(e){var n=[],a=function(w){w.height!==0&&(n.length>0&&Pw(w,n[n.length-1])||n.push(w))},i=function(w,O){var N=Qg(w.ownerDocument);if(O<w.data.length){if($w(w.data[O]))return n;if($w(w.data[O-1])&&(N.setStart(w,O),N.setEnd(w,O+1),!eh(N)))return a(Uo(Df(N),!1)),n}O>0&&(N.setStart(w,O-1),N.setEnd(w,O),eh(N)||a(Uo(Df(N),!1))),O<w.data.length&&(N.setStart(w,O),N.setEnd(w,O+1),eh(N)||a(Uo(Df(N),!0)))},s=e.container(),f=e.offset();if(xd(s))return i(s,f),n;if(zw(s))if(e.isAtEnd()){var g=Lm(s,f);xd(g)&&i(g,g.data.length),so(g)&&!e1(g)&&a(Uo(Df(g),!1))}else{var g=Lm(s,f);if(xd(g)&&i(g,0),so(g)&&e.isAtEnd())return a(Uo(Df(g),!1)),n;var b=Lm(e.container(),e.offset()-1);so(b)&&!e1(b)&&(vt(b)||vt(g)||!so(g))&&a(Uo(Df(b),!1)),so(g)&&a(Uo(Df(g),!0))}return n},Re=function(e,n,a){var i=function(){return xd(e),n===0},s=function(){return xd(e)?n>=e.data.length:n>=e.childNodes.length},f=function(){var N=Qg(e.ownerDocument);return N.setStart(e,n),N.setEnd(e,n),N},g=function(){return a||(a=N0(Re(e,n))),a},b=function(){return g().length>0},w=function(N){return N&&e===N.container()&&n===N.offset()},O=function(N){return Lm(e,N?n-1:n)};return{container:W(e),offset:W(n),toRange:f,getClientRects:g,isVisible:b,isAtStart:i,isAtEnd:s,isEqual:w,getNode:O}};Re.fromRangeStart=function(e){return Re(e.startContainer,e.startOffset)},Re.fromRangeEnd=function(e){return Re(e.endContainer,e.endOffset)},Re.after=function(e){return Re(e.parentNode,ps(e)+1)},Re.before=function(e){return Re(e.parentNode,ps(e))},Re.isAbove=function(e,n){return lu(Ua(n.getClientRects()),Gr(e.getClientRects()),Af).getOr(!1)},Re.isBelow=function(e,n){return lu(Gr(n.getClientRects()),Ua(e.getClientRects()),bv).getOr(!1)},Re.isAtStart=function(e){return e?e.isAtStart():!1},Re.isAtEnd=function(e){return e?e.isAtEnd():!1},Re.isTextPosition=function(e){return e?Pt(e.container()):!1},Re.isElementPosition=function(e){return Re.isTextPosition(e)===!1};var yv=function(e,n){Pt(n)&&n.data.length===0&&e.remove(n)},th=function(e,n,a){n.insertNode(a),yv(e,a.previousSibling),yv(e,a.nextSibling)},Hm=function(e,n,a){var i=ee.from(a.firstChild),s=ee.from(a.lastChild);n.insertNode(a),i.each(function(f){return yv(e,f.previousSibling)}),s.each(function(f){return yv(e,f.nextSibling)})},wv=function(e,n,a){In(a)?Hm(e,n,a):th(e,n,a)},ll=Pt,$0=oo,z0=Ea.nodeIndex,r1=function(e){var n=e.parentNode;return $0(n)?r1(n):n},a1=function(e){return e?zu(e.childNodes,function(n,a){return $0(a)&&a.nodeName!=="BR"?n=n.concat(a1(a)):n.push(a),n},[]):[]},Fw=function(e,n){for(;(e=e.previousSibling)&&ll(e);)n+=e.data.length;return n},I0=function(e){return function(n){return e===n}},F0=function(e){var n,a;n=a1(r1(e)),a=Er(n,I0(e),e),n=n.slice(0,a+1);var i=zu(n,function(s,f,g){return ll(f)&&ll(n[g-1])&&s++,s},0);return n=Hi(n,_s([e.nodeName])),a=Er(n,I0(e),e),a-i},L0=function(e){var n;return ll(e)?n="text()":n=e.nodeName.toLowerCase(),n+"["+F0(e)+"]"},H0=function(e,n,a){var i=[];for(n=n.parentNode;n!==e&&!(a&&a(n));n=n.parentNode)i.push(n);return i},V0=function(e,n){var a,i,s=[],f,g,b;return a=n.container(),i=n.offset(),ll(a)?f=Fw(a,i):(g=a.childNodes,i>=g.length?(f="after",i=g.length-1):f="before",a=g[i]),s.push(L0(a)),b=H0(e,a),b=Hi(b,Ur(oo)),s=s.concat($u(b,function(w){return L0(w)})),s.reverse().join("/")+","+f},Td=function(e,n,a){var i=a1(e);return i=Hi(i,function(s,f){return!ll(s)||!ll(i[f-1])}),i=Hi(i,_s([n])),i[a]},ok=function(e,n){for(var a=e,i=0,s;ll(a);){if(s=a.data.length,n>=i&&n<=i+s){e=a,n=n-i;break}if(!ll(a.nextSibling)){e=a,n=s;break}i+=s,a=a.nextSibling}return ll(e)&&n>e.data.length&&(n=e.data.length),Re(e,n)},Lw=function(e,n){var a;if(!n)return null;var i=n.split(","),s=i[0].split("/");a=i.length>1?i[1]:"before";var f=zu(s,function(g,b){var w=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return w?(w[1]==="text()"&&(w[1]="#text"),Td(g,w[1],parseInt(w[2],10))):null},e);return f?ll(f)?ok(f,parseInt(a,10)):(a==="after"?a=z0(f)+1:a=z0(f),Re(f.parentNode,a)):null},o1=Ra,nh=function(e,n,a){var i,s;for(s=e(n.data.slice(0,a)).length,i=n.previousSibling;i&&Pt(i);i=i.previousSibling)s+=e(i.data).length;return s},i1=function(e,n,a,i,s){var f=i[s?"startContainer":"endContainer"],g=i[s?"startOffset":"endOffset"],b=[],w,O=0,N=e.getRoot();for(Pt(f)?b.push(a?nh(n,f,g):g):(w=f.childNodes,g>=w.length&&w.length&&(O=1,g=Math.max(0,w.length-1)),b.push(e.nodeIndex(w[g],a)+O));f&&f!==N;f=f.parentNode)b.push(e.nodeIndex(f,a));return b},u1=function(e,n,a,i){var s=n.dom,f={};return f.start=i1(s,e,a,i,!0),n.isCollapsed()||(f.end=i1(s,e,a,i,!1)),Bl(i)&&(f.isFakeCaret=!0),f},s1=function(e,n,a){var i=0;return Ne.each(e.select(n),function(s){if(s.getAttribute("data-mce-bogus")!=="all"){if(s===a)return!1;i++}}),i},kd=function(e,n){var a,i,s,f=n?"start":"end";a=e[f+"Container"],i=e[f+"Offset"],Sn(a)&&a.nodeName==="TR"&&(s=a.childNodes,a=s[Math.min(n?i:i-1,s.length-1)],a&&(i=n?0:a.childNodes.length,e["set"+(n?"Start":"End")](a,i)))},Hw=function(e){return kd(e,!0),kd(e,!1),e},Qa=function(e,n){var a;if(Sn(e)&&(e=Du(e,n),o1(e)))return e;if(qu(e)&&(Pt(e)&&aa(e)&&(e=e.parentNode),a=e.previousSibling,o1(a)||(a=e.nextSibling,o1(a))))return a},c1=function(e){return Qa(e.startContainer,e.startOffset)||Qa(e.endContainer,e.endOffset)},co=function(e,n,a){var i=a.getNode(),s=i?i.nodeName:null,f=a.getRng();if(o1(i)||s==="IMG")return{name:s,index:s1(a.dom,s,i)};var g=c1(f);return g?(s=g.tagName,{name:s,index:s1(a.dom,s,g)}):u1(e,a,n,f)},l1=function(e){var n=e.getRng();return{start:V0(e.dom.getRoot(),Re.fromRangeStart(n)),end:V0(e.dom.getRoot(),Re.fromRangeEnd(n))}},Vm=function(e){return{rng:e.getRng()}},f1=function(e,n,a){var i={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return a?e.create("span",i,"&#xFEFF;"):e.create("span",i)},Um=function(e,n){var a=e.dom,i=e.getRng(),s=a.uniqueId(),f=e.isCollapsed(),g=e.getNode(),b=g.nodeName;if(b==="IMG")return{name:b,index:s1(a,b,g)};var w=Hw(i.cloneRange());if(!f){w.collapse(!1);var O=f1(a,s+"_end",n);wv(a,w,O)}i=Hw(i),i.collapse(!0);var N=f1(a,s+"_start",n);return wv(a,i,N),e.moveToBookmark({id:s,keep:!0}),{id:s}},Vw=function(e,n,a){return n===2?co(ol,a,e):n===3?l1(e):n?Vm(e):Um(e,!1)},Uw=et(co,gt,!0),ik=Ea.DOM,uk="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow",Ww=function(e,n,a){var i=e.getParam(n,a);if(i.indexOf("=")!==-1){var s=e.getParam(n,"","hash");return pr(s,e.id).getOr(a)}else return i},v1=function(e){return e.getParam("iframe_attrs",{})},d1=function(e){return e.getParam("doctype","<!DOCTYPE html>")},sk=function(e){return e.getParam("document_base_url","")},jw=function(e){return Ww(e,"body_id","tinymce")},U0=function(e){return Ww(e,"body_class","")},Gw=function(e){return e.getParam("content_security_policy","")},ck=function(e){return e.getParam("br_in_pre",!0)},Pi=function(e){if(e.getParam("force_p_newlines",!1))return"p";var n=e.getParam("forced_root_block","p");return n===!1?"":n===!0?"p":n},Ed=function(e){return e.getParam("forced_root_block_attrs",{})},W0=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},qw=function(e){return e.getParam("no_newline_selector","")},Wm=function(e){return e.getParam("keep_styles",!0)},Kw=function(e){return e.getParam("end_container_on_empty_block",!1)},lk=function(e){return Ne.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))},rh=function(e){return Ne.explode(e.getParam("font_size_classes",""))},ah=function(e){return e.getParam("images_dataimg_filter",Et,"function")},Cv=function(e){return e.getParam("automatic_uploads",!0,"boolean")},m1=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},g1=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},h1=function(e){return e.getParam("icons","","string")},fk=function(e){return e.getParam("icons_url","","string")},Rf=function(e){return e.getParam("images_upload_url","","string")},p1=function(e){return e.getParam("images_upload_base_path","","string")},vk=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},Sv=function(e){return e.getParam("images_upload_handler",null,"function")},xv=function(e){return e.getParam("content_css_cors",!1,"boolean")},Xw=function(e){return e.getParam("referrer_policy","","string")},oh=function(e){return e.getParam("language","en","string")},j0=function(e){return e.getParam("language_url","","string")},b1=function(e){return e.getParam("indent_use_margin",!1)},gi=function(e){return e.getParam("indentation","40px","string")},dk=function(e){var n=e.getParam("content_css");return cr(n)?Hn(n.split(","),Sa):_n(n)?n:n===!1||e.inline?[]:["default"]},y1=function(e){var n=e.getParam("font_css",[]);return _n(n)?n:Hn(n.split(","),Sa)},Yw=function(e){return e.getParam("directionality",Yn.isRtl()?"rtl":void 0)},mk=function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},Pc=function(e){var n=e.getParam("object_resizing");return n===!1||Qt.iOS?!1:cr(n)?n:"table,img,figure.image,div,video,iframe"},_f=function(e){return e.getParam("resize_img_proportional",!0,"boolean")},gk=function(e){return e.getParam("placeholder",ik.getAttrib(e.getElement(),"placeholder"),"string")},G0=function(e){return e.getParam("event_root")},q0=function(e){return e.getParam("service_message")},Od=function(e){return e.getParam("theme")},Jw=function(e){return e.getParam("validate")},jm=function(e){return e.getParam("inline_boundaries")!==!1},hk=function(e){return e.getParam("formats")},pk=function(e){var n=e.getParam("preview_styles",uk);return cr(n)?n:""},bk=function(e){return e.getParam("format_empty_lines",!1,"boolean")},Gm=function(e){return e.getParam("custom_ui_selector","","string")},Ad=function(e){return e.getParam("theme_url")},K0=function(e){return e.getParam("inline")},Zw=function(e){return e.getParam("hidden_input")},yk=function(e){return e.getParam("submit_patch")},Qw=function(e){return e.getParam("encoding")==="xml"},eC=function(e){return e.getParam("add_form_submit_trigger")},X0=function(e){return e.getParam("add_unload_trigger")},wk=function(e){return Pi(e)!==""},w1=function(e){return e.getParam("custom_undo_redo_levels",0,"number")},Ck=function(e){return e.getParam("disable_nodechange")},ih=function(e){return e.getParam("readonly")},Sk=function(e){return e.getParam("content_css_cors")},Y0=function(e){return e.getParam("plugins","","string")},xk=function(e){return e.getParam("external_plugins")},tC=function(e){return e.getParam("block_unsupported_drop",!0,"boolean")},Tk=function(e){return e.getParam("visual",!0,"boolean")},qm=function(e){return e.getParam("visual_table_class","mce-item-table","string")},nC=function(e){return e.getParam("visual_anchor_class","mce-item-anchor","string")},kk=function(e){return e.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")},J0=Sn,Z0=Pt,C1=function(e){var n=e.parentNode;n&&n.removeChild(e)},rC=function(e){var n=ol(e);return{count:e.length-n.length,text:n}},aC=function(e){for(var n;(n=e.data.lastIndexOf(he))!==-1;)e.deleteData(n,1)},Km=function(e,n){return Dd(e),n},oC=function(e,n){var a=rC(e.data.substr(0,n.offset())),i=rC(e.data.substr(n.offset())),s=a.text+i.text;return s.length>0?(aC(e),Re(e,n.offset()-a.count)):n},iC=function(e,n){var a=n.container(),i=Fr(kr(a.childNodes),e).map(function(s){return s<n.offset()?Re(a,n.offset()-1):n}).getOr(n);return Dd(e),i},Ek=function(e,n){return Z0(e)&&n.container()===e?oC(e,n):Km(e,n)},Ok=function(e,n){return n.container()===e.parentNode?iC(e,n):Km(e,n)},Q0=function(e,n){return Re.isTextPosition(n)?Ek(e,n):Ok(e,n)},Dd=function(e){J0(e)&&qu(e)&&(yf(e)?e.removeAttribute("data-mce-caret"):C1(e)),Z0(e)&&(aC(e),e.data.length===0&&C1(e))},S1=Ut().browser,uC=Ra,x1=Wu,sC=mm,Ak="*[contentEditable=false],video,audio,embed,object",ey=function(e,n,a){var i=B0(n.getBoundingClientRect(),a),s,f;if(e.tagName==="BODY"){var g=e.ownerDocument.documentElement;s=e.scrollLeft||g.scrollLeft,f=e.scrollTop||g.scrollTop}else{var b=e.getBoundingClientRect();s=e.scrollLeft-b.left,f=e.scrollTop-b.top}i.left+=s,i.right+=s,i.top+=f,i.bottom+=f,i.width=1;var w=n.offsetWidth-n.clientWidth;return w>0&&(a&&(w*=-1),i.left+=w,i.right+=w),i},Dk=function(e){for(var n=Xu(M.fromDom(e),Ak),a=0;a<n.length;a++){var i=n[a].dom,s=i.previousSibling;if(Vg(s)){var f=s.data;f.length===1?s.parentNode.removeChild(s):s.deleteData(f.length-1,1)}if(s=i.nextSibling,Hg(s)){var f=s.data;f.length===1?s.parentNode.removeChild(s):s.deleteData(0,1)}}},cC=function(e,n,a,i){var s=mv(),f,g,b=Pi(e),w=b.length>0?b:"p",O=function(X,J){var ie;if(N(),sC(J))return null;if(a(J)){g=vw(w,J,X);var oe=ey(n,J,X);Pn(g).css("top",oe.top);var ve=Pn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(Jt({},oe)).appendTo(n)[0];s.set({caret:ve,element:J,before:X}),X&&Pn(ve).addClass("mce-visual-caret-before"),z(),ie=J.ownerDocument.createRange(),ie.setStart(g,0),ie.setEnd(g,0)}else return g=Xb(J,X),ie=J.ownerDocument.createRange(),Yo(g.nextSibling)?(ie.setStart(g,0),ie.setEnd(g,0)):(ie.setStart(g,1),ie.setEnd(g,1)),ie;return ie},N=function(){Dk(n),g&&(Dd(g),g=null),s.on(function(X){Pn(X.caret).remove(),s.clear()}),f&&(Ki.clearInterval(f),f=void 0)},z=function(){f=Ki.setInterval(function(){i()?Pn("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden"):Pn("div.mce-visual-caret",n).addClass("mce-visual-caret-hidden")},500)},F=function(){s.on(function(X){var J=ey(n,X.element,X.before);Pn(X.caret).css(Jt({},J))})},q=function(){return Ki.clearInterval(f)},G=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:O,hide:N,getCss:G,reposition:F,destroy:q}},Rd=function(){return S1.isIE()||S1.isEdge()||S1.isFirefox()},Yo=function(e){return uC(e)||x1(e)},Tv=function(e){return Yo(e)||ho(e)&&Rd()},T1=Ra,Rk=Wu,lC=xu("display","block table table-cell table-caption list-item"),fC=qu,ty=aa,ny=Sn,ys=Ml,Bf=function(e){return e>0},_d=function(e){return e<0},uh=function(e,n){for(var a;a=e(n);)if(!ty(a))return a;return null},Bd=function(e,n,a,i,s){var f=new zr(e,i),g=T1(e)||ty(e);if(_d(n)){if(g&&(e=uh(f.prev.bind(f),!0),a(e)))return e;for(;e=uh(f.prev.bind(f),s);)if(a(e))return e}if(Bf(n)){if(g&&(e=uh(f.next.bind(f),!0),a(e)))return e;for(;e=uh(f.next.bind(f),s);)if(a(e))return e}return null},Hl=function(e,n){for(;e&&e!==n;){if(lC(e))return e;e=e.parentNode}return null},Nc=function(e,n,a){return Hl(e.container(),a)===Hl(n.container(),a)},Xm=function(e,n){if(!n)return null;var a=n.container(),i=n.offset();return ny(a)?a.childNodes[i+e]:null},ry=function(e,n){var a=n.ownerDocument.createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},vC=function(e,n,a){return Hl(n,e)===Hl(a,e)},k1=function(e,n,a){for(var i=e?"previousSibling":"nextSibling";a&&a!==n;){var s=a[i];if(fC(s)&&(s=s[i]),T1(s)||Rk(s)){if(vC(n,s,a))return s;break}if(ys(s))break;a=a.parentNode}return null},Md=et(ry,!0),Mf=et(ry,!1),E1=function(e,n,a){var i,s=et(k1,!0,n),f=et(k1,!1,n),g=a.startContainer,b=a.startOffset;if(aa(g)){ny(g)||(g=g.parentNode);var w=g.getAttribute("data-mce-caret");if(w==="before"&&(i=g.nextSibling,Tv(i)))return Md(i);if(w==="after"&&(i=g.previousSibling,Tv(i)))return Mf(i)}if(!a.collapsed)return a;if(Pt(g)){if(fC(g)){if(e===1){if(i=f(g),i)return Md(i);if(i=s(g),i)return Mf(i)}if(e===-1){if(i=s(g),i)return Mf(i);if(i=f(g),i)return Md(i)}return a}if(Vg(g)&&b>=g.data.length-1)return e===1&&(i=f(g),i)?Md(i):a;if(Hg(g)&&b<=1)return e===-1&&(i=s(g),i)?Mf(i):a;if(b===g.data.length)return i=f(g),i?Md(i):a;if(b===0)return i=s(g),i?Mf(i):a}return a},ay=function(e,n){return ee.from(Xm(e?0:-1,n)).filter(T1)},hi=function(e,n,a){var i=E1(e,n,a);return e===-1?Re.fromRangeStart(i):Re.fromRangeEnd(i)},kv=function(e){return ee.from(e.getNode()).map(M.fromDom)},dC=function(e){return ee.from(e.getNode(!0)).map(M.fromDom)},oy=function(e,n){for(;n=e(n);)if(n.isVisible())return n;return n},O1=function(e,n){var a=Nc(e,n);return!a&&ra(e.getNode())?!0:a},Ni;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ni||(Ni={}));var _k=Ra,Vl=Pt,mC=Sn,iy=ra,Ev=Ml,gC=DT,A1=Ao,hC=function(e,n){for(var a=[];e&&e!==n;)a.push(e),e=e.parentNode;return a},uy=function(e,n){return e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null},pC=function(e,n){if(Bf(e)){if(Ev(n.previousSibling)&&!Vl(n.previousSibling))return Re.before(n);if(Vl(n))return Re(n,0)}if(_d(e)){if(Ev(n.nextSibling)&&!Vl(n.nextSibling))return Re.after(n);if(Vl(n))return Re(n,n.data.length)}return _d(e)?iy(n)?Re.before(n):Re.after(n):Re.before(n)},Bk=function(e,n){var a=n.nextSibling;return a&&Ev(a)?Vl(a)?Re(a,0):Re.before(a):sy(Ni.Forwards,Re.after(n),e)},sy=function(e,n,a){var i,s,f,g;if(!mC(a)||!n)return null;if(n.isEqual(Re.after(a))&&a.lastChild){if(g=Re.after(a.lastChild),_d(e)&&Ev(a.lastChild)&&mC(a.lastChild))return iy(a.lastChild)?Re.before(a.lastChild):g}else g=n;var b=g.container(),w=g.offset();if(Vl(b)){if(_d(e)&&w>0)return Re(b,--w);if(Bf(e)&&w<b.length)return Re(b,++w);i=b}else{if(_d(e)&&w>0&&(s=uy(b,w-1),Ev(s)))return!gC(s)&&(f=Bd(s,e,A1,s),f)?Vl(f)?Re(f,f.data.length):Re.after(f):Vl(s)?Re(s,s.data.length):Re.before(s);if(Bf(e)&&w<b.childNodes.length&&(s=uy(b,w),Ev(s)))return iy(s)?Bk(a,s):!gC(s)&&(f=Bd(s,e,A1,s),f)?Vl(f)?Re(f,0):Re.before(f):Vl(s)?Re(s,0):Re.after(s);i=s||g.getNode()}if((Bf(e)&&g.isAtEnd()||_d(e)&&g.isAtStart())&&(i=Bd(i,e,Et,a,!0),A1(i,a)))return pC(e,i);s=Bd(i,e,A1,a);var O=Vi(jt(hC(b,a),_k));return O&&(!s||!O.contains(s))?(Bf(e)?g=Re.after(O):g=Re.before(O),g):s?pC(e,s):null},fl=function(e){return{next:function(n){return sy(Ni.Forwards,n,e)},prev:function(n){return sy(Ni.Backwards,n,e)}}},D1=function(e,n,a){var i=e?Re.before(a):Re.after(a);return Zi(e,n,i)},Ru=function(e){return ra(e)?Re.before(e):Re.after(e)},sh=function(e){return Re.isTextPosition(e)?e.offset()===0:Ml(e.getNode())},ch=function(e){if(Re.isTextPosition(e)){var n=e.container();return e.offset()===n.data.length}else return Ml(e.getNode(!0))},cy=function(e,n){return!Re.isTextPosition(e)&&!Re.isTextPosition(n)&&e.getNode()===n.getNode(!0)},Mk=function(e){return!Re.isTextPosition(e)&&ra(e.getNode())},bC=function(e,n,a){return e?!cy(n,a)&&!Mk(n)&&ch(n)&&sh(a):!cy(a,n)&&sh(n)&&ch(a)},Zi=function(e,n,a){var i=fl(n);return ee.from(e?i.next(a):i.prev(a))},Pd=function(e,n,a){return Zi(e,n,a).bind(function(i){return Nc(a,i,n)&&bC(e,a,i)?Zi(e,n,i):ee.some(i)})},lh=function(e,n,a,i){return Pd(e,n,a).bind(function(s){return i(s)?lh(e,n,s,i):ee.some(s)})},ac=function(e,n){var a=e?n.firstChild:n.lastChild;return Pt(a)?ee.some(Re(a,e?0:a.data.length)):a?Ml(a)?ee.some(e?Re.before(a):Ru(a)):D1(e,n,a):ee.none()},oc=et(Zi,!0),ic=et(Zi,!1),_u=et(ac,!0),vl=et(ac,!1),R1="_mce_caret",uc=function(e){return Sn(e)&&e.id===R1},dl=function(e,n){for(;n&&n!==e;){if(n.id===R1)return n;n=n.parentNode}return null},Pk=function(e){return cr(e.start)},Nk=function(e){return $n(e,"rng")},yC=function(e){return $n(e,"id")},wC=function(e){return $n(e,"name")},CC=function(e){return Ne.isArray(e.start)},SC=function(e,n){return Sn(n)&&e.isBlock(n)&&!n.innerHTML&&!Qt.ie&&(n.innerHTML='<br data-mce-bogus="1" />'),n},$k=function(e,n){var a,i=e.createRng();return a=Lw(e.getRoot(),n.start),i.setStart(a.container(),a.offset()),a=Lw(e.getRoot(),n.end),i.setEnd(a.container(),a.offset()),i},zk=function(e,n){var a=e.ownerDocument.createTextNode(he);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},xC=function(e){return e.hasChildNodes()===!1},Ik=function(e,n){return vl(e).fold(ut,function(a){return n.setStart(a.container(),a.offset()),n.setEnd(a.container(),a.offset()),!0})},ly=function(e,n,a){return xC(n)&&dl(e,n)?(zk(n,a),!0):!1},TC=function(e,n,a,i){var s=a[n?"start":"end"],f,g,b,w,O=e.getRoot();if(s){for(b=s[0],g=O,f=s.length-1;f>=1;f--){if(w=g.childNodes,ly(O,g,i))return!0;if(s[f]>w.length-1)return ly(O,g,i)?!0:Ik(g,i);g=w[s[f]]}g.nodeType===3&&(b=Math.min(s[0],g.nodeValue.length)),g.nodeType===1&&(b=Math.min(s[0],g.childNodes.length)),n?i.setStart(g,b):i.setEnd(g,b)}return!0},fy=function(e){return Pt(e)&&e.data.length>0},kC=function(e,n,a){var i=e.get(a.id+"_"+n),s,f,g,b,w=a.keep,O,N;if(i){if(s=i.parentNode,n==="start"?(w?i.hasChildNodes()?(s=i.firstChild,f=1):fy(i.nextSibling)?(s=i.nextSibling,f=0):fy(i.previousSibling)?(s=i.previousSibling,f=i.previousSibling.data.length):(s=i.parentNode,f=e.nodeIndex(i)+1):f=e.nodeIndex(i),O=s,N=f):(w?i.hasChildNodes()?(s=i.firstChild,f=1):fy(i.previousSibling)?(s=i.previousSibling,f=i.previousSibling.data.length):(s=i.parentNode,f=e.nodeIndex(i)):f=e.nodeIndex(i),O=s,N=f),!w){for(b=i.previousSibling,g=i.nextSibling,Ne.each(Ne.grep(i.childNodes),function(z){Pt(z)&&(z.nodeValue=z.nodeValue.replace(/\uFEFF/g,""))});i=e.get(a.id+"_"+n);)e.remove(i,!0);b&&g&&b.nodeType===g.nodeType&&Pt(b)&&!Qt.opera&&(f=b.nodeValue.length,b.appendData(g.nodeValue),e.remove(g),O=b,N=f)}return ee.some(Re(O,N))}else return ee.none()},Fk=function(e,n){var a=e.createRng();return TC(e,!0,n,a)&&TC(e,!1,n,a)?ee.some(a):ee.none()},Lk=function(e,n){var a=kC(e,"start",n),i=kC(e,"end",n);return lu(a,i.or(a),function(s,f){var g=e.createRng();return g.setStart(SC(e,s.container()),s.offset()),g.setEnd(SC(e,f.container()),f.offset()),g})},Hk=function(e,n){return ee.from(e.select(n.name)[n.index]).map(function(a){var i=e.createRng();return i.selectNode(a),i})},fr=function(e,n){var a=e.dom;if(n){if(CC(n))return Fk(a,n);if(Pk(n))return ee.some($k(a,n));if(yC(n))return Lk(a,n);if(wC(n))return Hk(a,n);if(Nk(n))return ee.some(n.rng)}return ee.none()},Nd=function(e,n,a){return Vw(e,n,a)},Ym=function(e,n){fr(e,n).each(function(a){e.setRng(a)})},ws=function(e){return Sn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"},Vk=function(e){return function(n){return e===n}},Ov=Vk(fs),Jm=function(e){return e!==""&&` \f
\r	\v`.indexOf(e)!==-1},fh=function(e){return!Jm(e)&&!Ov(e)},Zm=function(e){return!!e.nodeType},EC=function(e){return e&&/^(IMG)$/.test(e.nodeName)},OC=function(e,n,a){var i=a.startOffset,s=a.startContainer;if(!(s===a.endContainer&&EC(s.childNodes[i]))&&Sn(s)){var f=s.childNodes,g=void 0;i<f.length?(s=f[i],g=new zr(s,e.getParent(s,e.isBlock))):(s=f[f.length-1],g=new zr(s,e.getParent(s,e.isBlock)),g.next(!0));for(var b=g.current();b;b=g.next())if(Pt(b)&&!my(b)){a.setStart(b,0),n.setRng(a);return}}},vy=function(e,n,a){if(e){var i=n?"nextSibling":"previousSibling";for(e=a?e:e[i];e;e=e[i])if(Sn(e)||!my(e))return e}},dy=function(e,n){return Zm(n)&&(n=n.nodeName),!!e.schema.getTextBlockElements()[n.toLowerCase()]},$d=function(e,n,a){return e.schema.isValidChild(n,a)},my=function(e,n){if(n===void 0&&(n=!1),Rn(e)&&Pt(e)){var a=n?e.data.replace(/ /g," "):e.data;return Ec(a)}else return!1},Uk=function(e){return Rn(e)&&Pt(e)&&e.length===0},Ul=function(e,n){return Mt(e)?e=e(n):Rn(n)&&(e=e.replace(/%(\w+)/g,function(a,i){return n[i]||a})),e},gy=function(e,n){return e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()},_1=function(e,n,a){return(a==="color"||a==="backgroundColor")&&(n=e.toHex(n)),a==="fontWeight"&&n===700&&(n="bold"),a==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+n},B1=function(e,n,a){return _1(e,e.getStyle(n,a),a)},AC=function(e,n){var a;return e.getParent(n,function(i){return a=e.getStyle(i,"text-decoration"),a&&a!=="none"}),a},Qm=function(e,n,a){return e.getParents(n,a,e.getRoot())},DC=function(e,n){var a=function(i){var s=function(f){return f.length>1&&f.charAt(0)==="%"};return Wr(["styles","attributes"],function(f){return pr(i,f).exists(function(g){var b=_n(g)?g:Es(g);return Wr(b,s)})})};return Wr(e.formatter.get(n),a)},RC=function(e,n,a){var i=["inline","block","selector","attributes","styles","classes"],s=function(f){return ha(f,function(g,b){return Wr(i,function(w){return w===b})})};return Wr(e.formatter.get(n),function(f){var g=s(f);return Wr(e.formatter.get(a),function(b){var w=s(b);return as(g,w)})})},ml=function(e){return ko(e,"block")},Ls=function(e){return ko(e,"selector")},$i=function(e){return ko(e,"inline")},_C=function(e){return Ls(e)&&$i(e)&&td(pr(e,"mixed"),!0)},hy=function(e){return Ls(e)&&e.expand!==!1&&!$i(e)},eg=ws,BC=Qm,MC=my,PC=dy,M1=function(e){return ra(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},P1=function(e,n){for(var a=n;a;){if(Sn(a)&&e.getContentEditable(a))return e.getContentEditable(a)==="false"?a:n;a=a.parentNode}return n},NC=function(e,n,a,i){for(var s=n.data,f=a;e?f>=0:f<s.length;e?f--:f++)if(i(s.charAt(f)))return e?f+1:f;return-1},yt=function(e,n,a){return NC(e,n,a,function(i){return Ov(i)||Jm(i)})},Jo=function(e,n,a){return NC(e,n,a,fh)},zd=function(e,n,a,i,s,f){var g,b=e.getParent(a,e.isBlock)||n,w=function(N,z,F){var q=Yp(e),G=s?q.backwards:q.forwards;return ee.from(G(N,z,function(X,J){return eg(X.parentNode)?-1:(g=X,F(s,X,J))},b))},O=w(a,i,yt);return O.bind(function(N){return f?w(N.container,N.offset+(s?-1:0),Jo):ee.some(N)}).orThunk(function(){return g?ee.some({container:g,offset:s?0:g.length}):ee.none()})},Zo=function(e,n,a,i,s){Pt(i)&&Iu(i.data)&&i[s]&&(i=i[s]);for(var f=BC(e,i),g=0;g<f.length;g++)for(var b=0;b<n.length;b++){var w=n[b];if(!(Rn(w.collapsed)&&w.collapsed!==a.collapsed)&&Ls(w)&&e.is(f[g],w.selector))return f[g]}return i},sc=function(e,n,a,i){var s=a,f=e.dom,g=f.getRoot(),b=n[0];if(ml(b)&&(s=b.wrapper?null:f.getParent(a,b.block,g)),!s){var w=f.getParent(a,"LI,TD,TH");s=f.getParent(Pt(a)?a.parentNode:a,function(O){return O!==g&&PC(e,O)},w)}if(s&&ml(b)&&b.wrapper&&(s=BC(f,s,"ul,ol").reverse()[0]||s),!s)for(s=a;s[i]&&!f.isBlock(s[i])&&(s=s[i],!gy(s,"br")););return s||a},py=function(e,n,a,i){var s=a.parentNode;return Rn(a[i])?!1:s===n||Vr(s)||e.isBlock(s)?!0:py(e,n,s,i)},Id=function(e,n,a,i,s){var f=a,g=s?"previousSibling":"nextSibling",b=e.getRoot();if(Pt(a)&&!MC(a)&&(s?i>0:i<a.data.length))return a;for(;;){if(!n[0].block_expand&&e.isBlock(f))return f;for(var w=f[g];w;w=w[g]){var O=Pt(w)&&!py(e,b,w,g);if(!eg(w)&&!M1(w)&&!MC(w,O))return f}if(f===b||f.parentNode===b){a=f;break}f=f.parentNode}return a},N1=function(e){return eg(e.parentNode)||eg(e)},tg=function(e,n,a,i){i===void 0&&(i=!1);var s=n.startContainer,f=n.startOffset,g=n.endContainer,b=n.endOffset,w=e.dom,O=a[0];if(Sn(s)&&s.hasChildNodes()&&(s=Du(s,f),Pt(s)&&(f=0)),Sn(g)&&g.hasChildNodes()&&(g=Du(g,n.collapsed?b:b-1),Pt(g)&&(b=g.nodeValue.length)),s=P1(w,s),g=P1(w,g),N1(s)&&(s=eg(s)?s:s.parentNode,n.collapsed?s=s.previousSibling||s:s=s.nextSibling||s,Pt(s)&&(f=n.collapsed?s.length:0)),N1(g)&&(g=eg(g)?g:g.parentNode,n.collapsed?g=g.nextSibling||g:g=g.previousSibling||g,Pt(g)&&(b=n.collapsed?0:g.length)),n.collapsed){var N=zd(w,e.getBody(),s,f,!0,i);N.each(function(F){var q=F.container,G=F.offset;s=q,f=G});var z=zd(w,e.getBody(),g,b,!1,i);z.each(function(F){var q=F.container,G=F.offset;g=q,b=G})}return($i(O)||O.block_expand)&&((!$i(O)||!Pt(s)||f===0)&&(s=Id(w,a,s,f,!0)),(!$i(O)||!Pt(g)||b===g.nodeValue.length)&&(g=Id(w,a,g,b,!1))),hy(O)&&(s=Zo(w,a,n,s,"previousSibling"),g=Zo(w,a,n,g,"nextSibling")),(ml(O)||Ls(O))&&(s=sc(e,a,s,"previousSibling"),g=sc(e,a,g,"nextSibling"),ml(O)&&(w.isBlock(s)||(s=Id(w,a,s,f,!0)),w.isBlock(g)||(g=Id(w,a,g,b,!1)))),Sn(s)&&(f=w.nodeIndex(s),s=s.parentNode),Sn(g)&&(b=w.nodeIndex(g)+1,g=g.parentNode),{startContainer:s,startOffset:f,endContainer:g,endOffset:b}},Fd=function(e,n,a){var i=n.startOffset,s=Du(n.startContainer,i),f=n.endOffset,g=Du(n.endContainer,f-1),b=function(X){var J=X[0];Pt(J)&&J===s&&i>=J.data.length&&X.splice(0,1);var ie=X[X.length-1];return f===0&&X.length>0&&ie===g&&Pt(ie)&&X.splice(X.length-1,1),X},w=function(X,J,ie){for(var oe=[];X&&X!==ie;X=X[J])oe.push(X);return oe},O=function(X,J){return e.getParent(X,function(ie){return ie.parentNode===J},J)},N=function(X,J,ie){for(var oe=ie?"nextSibling":"previousSibling",ve=X,Ce=ve.parentNode;ve&&ve!==J;ve=Ce){Ce=ve.parentNode;var se=w(ve===X?ve:ve[oe],oe);se.length&&(ie||se.reverse(),a(b(se)))}};if(s===g)return a(b([s]));var z=e.findCommonAncestor(s,g);if(e.isChildOf(s,g))return N(s,z,!0);if(e.isChildOf(g,s))return N(g,z);var F=O(s,z)||s,q=O(g,z)||g;N(s,F,!0);var G=w(F===s?F:F.nextSibling,"nextSibling",q===g?q.nextSibling:q);G.length&&a(b(G)),N(g,q)},vh=function(e){var n=[];if(e)for(var a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));return n},Wk=function(e){return nu(e,function(n){var a=Zp(n);return a?[M.fromDom(a)]:[]})},jk=function(e){return vh(e).length>1},by=function(e){return jt(Wk(e),al)},yy=function(e){return Xu(e,"td[data-mce-selected],th[data-mce-selected]")},$C=function(e,n){var a=yy(n);return a.length>0?a:by(e)},Ld=function(e){return $C(vh(e.selection.getSel()),M.fromDom(e.getBody()))},$c=function(e,n){return nd(e,"table",n)},dh=function(e){var n=e.startContainer,a=e.startOffset;return Pt(n)?a===0?ee.some(M.fromDom(n)):ee.none():ee.from(n.childNodes[a]).map(M.fromDom)},wy=function(e){var n=e.endContainer,a=e.endOffset;return Pt(n)?a===n.data.length?ee.some(M.fromDom(n)):ee.none():ee.from(n.childNodes[a-1]).map(M.fromDom)},Hd=function(e){return Oo(e).fold(W([e]),function(n){return[e].concat(Hd(n))})},mh=function(e){return ss(e).fold(W([e]),function(n){return va(n)==="br"?uf(n).map(function(a){return[e].concat(mh(a))}).getOr([]):[e].concat(mh(n))})},gh=function(e,n){return lu(dh(n),wy(n),function(a,i){var s=ua(Hd(e),et(gn,a)),f=ua(mh(e),et(gn,i));return s.isSome()&&f.isSome()}).getOr(!1)},Wl=function(e,n,a,i){var s=a,f=new zr(a,s),g=ha(e.schema.getMoveCaretBeforeOnEnterElements(),function(b,w){return!tn(["td","th","table"],w.toLowerCase())});do{if(Pt(a)&&Ne.trim(a.nodeValue).length!==0){i?n.setStart(a,0):n.setEnd(a,a.nodeValue.length);return}if(g[a.nodeName]){i?n.setStartBefore(a):a.nodeName==="BR"?n.setEndBefore(a):n.setEndAfter(a);return}}while(a=i?f.next():f.prev());s.nodeName==="BODY"&&(i?n.setStart(s,0):n.setEnd(s,s.childNodes.length))},cc=function(e){var n=e.selection.getSel();return n&&n.rangeCount>0},Av=function(e,n){var a=Ld(e);a.length>0?ft(a,function(i){var s=i.dom,f=e.dom.createRng();f.setStartBefore(s),f.setEndAfter(s),n(f,!0)}):n(e.selection.getRng(),!1)},Vd=function(e,n,a){var i=Um(e,n);a(i),e.moveToBookmark(i)},hh=function(e,n){var a=function(f){if(!e(f))throw new Error("Can only get "+n+" value of a "+n+" node");return i(f).getOr("")},i=function(f){return e(f)?ee.from(f.dom.nodeValue):ee.none()},s=function(f,g){if(!e(f))throw new Error("Can only set raw "+n+" value of a "+n+" node");f.dom.nodeValue=g};return{get:a,getOption:i,set:s}},$1=hh(La,"text"),ph=function(e){return $1.get(e)},Cy=function(e){return La(e)&&ph(e)===he},Gk=function(e,n,a,i){return ja(n).fold(function(){return"skipping"},function(s){return i==="br"||Cy(n)?"valid":Bi(n)?"existing":uc(n.dom)?"caret":!$d(e,a,i)||!$d(e,va(s),a)?"invalid-child":"valid"})},z1=function(e,n){var a=tg(e,n,[{inline:"span"}]);n.setStart(a.startContainer,a.startOffset),n.setEnd(a.endContainer,a.endOffset),e.selection.setRng(n)},pi=function(e,n,a,i){var s=n.uid,f=s===void 0?Fm("mce-annotation"):s,g=Us(n,["uid"]),b=M.fromTag("span",e);zm(b,Sd()),E(b,""+Yu(),f),E(b,""+Fl(),a);var w=i(f,g),O=w.attributes,N=O===void 0?{}:O,z=w.classes,F=z===void 0?[]:z;return $(b,N),_0(b,F),b},Hs=function(e,n,a,i,s){var f=[],g=pi(e.getDoc(),s,a,i),b=mv(),w=function(){b.clear()},O=function(){return b.get().getOrThunk(function(){var q=mi(g);return f.push(q),b.set(q),q})},N=function(q){ft(q,z)},z=function(q){var G=Gk(e,q,"span",va(q));switch(G){case"invalid-child":{w();var X=cu(q);N(X),w();break}case"valid":{var J=O();ed(q,J);break}}},F=function(q){var G=Hn(q,M.fromDom);N(G)};return Fd(e.dom,n,function(q){w(),F(q)}),f},zc=function(e,n,a,i){e.undoManager.transact(function(){var s=e.selection,f=s.getRng(),g=Ld(e).length>0;if(f.collapsed&&!g&&z1(e,f),s.getRng().collapsed&&!g){var b=pi(e.getDoc(),i,n,a.decorate);Ho(b,fs),s.getRng().insertNode(b.dom),s.select(b.dom)}else Vd(s,!1,function(){Av(e,function(w){Hs(e,w,n,a.decorate,i)})})})},gl=function(e){var n=Mw();R0(e,n);var a=D0(e);return{register:function(i,s){n.register(i,s)},annotate:function(i,s){n.lookup(i).each(function(f){zc(e,i,f,s)})},annotationChanged:function(i,s){a.addListener(i,s)},remove:function(i){Bw(e,ee.some(i)).each(function(s){var f=s.elements;ft(f,ff)})},getAll:function(i){var s=Of(e,i);return mo(s,function(f){return Hn(f,function(g){return g.dom})})}}},jl=function(e){return{getBookmark:et(Nd,e),moveToBookmark:et(Ym,e)}};jl.isBookmarkNode=ws;var Dv=function(e,n){for(;n&&n!==e;){if(Sc(n)||Ra(n))return n;n=n.parentNode}return null},ng=function(e,n,a){if(a.collapsed)return!1;if(Qt.browser.isIE()&&a.startOffset===a.endOffset-1&&a.startContainer===a.endContainer){var i=a.startContainer.childNodes[a.startOffset];if(Sn(i))return Wr(i.getClientRects(),function(s){return Nw(s,e,n)})}return Wr(a.getClientRects(),function(s){return Nw(s,e,n)})},zC=function(e,n){return e.fire("PreProcess",n)},bh=function(e,n){return e.fire("PostProcess",n)},qk=function(e){return e.fire("remove")},Sy=function(e){return e.fire("detach")},IC=function(e,n){return e.fire("SwitchMode",{mode:n})},FC=function(e,n,a,i,s){e.fire("ObjectResizeStart",{target:n,width:a,height:i,origin:s})},xy=function(e,n,a,i,s){e.fire("ObjectResized",{target:n,width:a,height:i,origin:s})},Ty=function(e){return e.fire("PreInit")},Qr=function(e){return e.fire("PostRender")},Gl=function(e){return e.fire("Init")},LC=function(e,n){return e.fire("PlaceholderToggle",{state:n})},ky=function(e,n,a){return e.fire(n,a)},Ey=function(e,n,a,i){return e.fire("FormatApply",{format:n,node:a,vars:i})},yh=function(e,n,a,i){return e.fire("FormatRemove",{format:n,node:a,vars:i})},ln={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||ln.metaKeyPressed(e)},metaKeyPressed:function(e){return Qt.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Oy=Ra,HC=function(e,n){var a="data-mce-selected",i=n.dom,s=Ne.each,f,g,b,w,O,N,z,F,q,G,X,J,ie,oe,ve,Ce=n.getDoc(),se=document,xe=Math.abs,Be=Math.round,Je=n.getBody(),rn,At,Ye={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},hn=function(Oe){return Oe&&(Oe.nodeName==="IMG"||n.dom.is(Oe,"figure.image"))},rt=function(Oe){return Wu(Oe)||i.hasClass(Oe,"mce-preview-object")},Dt=function(Oe,Ft){if(Oe.type==="longpress"||Oe.type.indexOf("touch")===0){var mt=Oe.touches[0];return hn(Oe.target)&&!ng(mt.clientX,mt.clientY,Ft)}else return hn(Oe.target)&&!ng(Oe.clientX,Oe.clientY,Ft)},tt=function(Oe){var Ft=Oe.target;Dt(Oe,n.selection.getRng())&&!Oe.isDefaultPrevented()&&n.selection.select(Ft)},pt=function(Oe){return i.is(Oe,"figure.image")?[Oe.querySelector("img")]:i.hasClass(Oe,"mce-preview-object")&&Rn(Oe.firstElementChild)?[Oe,Oe.firstElementChild]:[Oe]},_t=function(Oe){var Ft=Pc(n);return!Ft||Oe.getAttribute("data-mce-resize")==="false"||Oe===n.getBody()?!1:i.hasClass(Oe,"mce-preview-object")?xt(M.fromDom(Oe.firstElementChild),Ft):xt(M.fromDom(Oe),Ft)},qe=function(Oe){return rt(Oe)?i.create("img",{src:Qt.transparentSrc}):Oe.cloneNode(!0)},$t=function(Oe,Ft,mt){if(Rn(mt)){var vn=pt(Oe);ft(vn,function(tr){tr.style[Ft]||!n.schema.isValid(tr.nodeName.toLowerCase(),Ft)?i.setStyle(tr,Ft,mt):i.setAttrib(tr,Ft,""+mt)})}},Bn=function(Oe,Ft,mt){$t(Oe,"width",Ft),$t(Oe,"height",mt)},Xr=function(Oe){var Ft,mt,vn,tr,Na;Ft=Oe.screenX-N,mt=Oe.screenY-z,oe=Ft*w[2]+G,ve=mt*w[3]+X,oe=oe<5?5:oe,ve=ve<5?5:ve,(hn(f)||rt(f))&&_f(n)!==!1?vn=!ln.modifierPressed(Oe):vn=ln.modifierPressed(Oe),vn&&(xe(Ft)>xe(mt)?(ve=Be(oe*J),oe=Be(ve/J)):(oe=Be(ve/J),ve=Be(oe*J))),Bn(g,oe,ve),tr=w.startPos.x+Ft,Na=w.startPos.y+mt,tr=tr>0?tr:0,Na=Na>0?Na:0,i.setStyles(b,{left:tr,top:Na,display:"block"}),b.innerHTML=oe+" &times; "+ve,w[2]<0&&g.clientWidth<=oe&&i.setStyle(g,"left",F+(G-oe)),w[3]<0&&g.clientHeight<=ve&&i.setStyle(g,"top",q+(X-ve)),Ft=Je.scrollWidth-rn,mt=Je.scrollHeight-At,Ft+mt!==0&&i.setStyles(b,{left:tr-Ft,top:Na-mt}),ie||(FC(n,f,G,X,"corner-"+w.name),ie=!0)},br=function(){var Oe=ie;ie=!1,Oe&&($t(f,"width",oe),$t(f,"height",ve)),i.unbind(Ce,"mousemove",Xr),i.unbind(Ce,"mouseup",br),se!==Ce&&(i.unbind(se,"mousemove",Xr),i.unbind(se,"mouseup",br)),i.remove(g),i.remove(b),i.remove(O),Bo(f),Oe&&(xy(n,f,oe,ve,"corner-"+w.name),i.setAttrib(f,"style",i.getAttrib(f,"style"))),n.nodeChanged()},Bo=function(Oe){Ke();var Ft=i.getPos(Oe,Je),mt=Ft.x,vn=Ft.y,tr=Oe.getBoundingClientRect(),Na=tr.width||tr.right-tr.left,Qu=tr.height||tr.bottom-tr.top;f!==Oe&&(lo(),f=Oe,oe=ve=0);var ks=n.fire("ObjectSelected",{target:Oe}),Cl=i.getAttrib(f,a,"1");_t(Oe)&&!ks.isDefaultPrevented()?s(Ye,function(es,ts){var ti,lm=function(tu){var Sl=pt(f)[0];N=tu.screenX,z=tu.screenY,G=Sl.clientWidth,X=Sl.clientHeight,J=X/G,w=es,w.name=ts,w.startPos={x:Na*es[0]+mt,y:Qu*es[1]+vn},rn=Je.scrollWidth,At=Je.scrollHeight,O=i.add(Je,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),i.setStyles(O,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=qe(f),i.addClass(g,"mce-clonedresizable"),i.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",i.setStyles(g,{left:mt,top:vn,margin:0}),Bn(g,Na,Qu),g.removeAttribute(a),Je.appendChild(g),i.bind(Ce,"mousemove",Xr),i.bind(Ce,"mouseup",br),se!==Ce&&(i.bind(se,"mousemove",Xr),i.bind(se,"mouseup",br)),b=i.add(Je,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},G+" &times; "+X)};ti=i.get("mceResizeHandle"+ts),ti&&i.remove(ti),ti=i.add(Je,"div",{id:"mceResizeHandle"+ts,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ts+"-resize; margin:0; padding:0"}),Qt.ie===11&&(ti.contentEditable=!1),i.bind(ti,"mousedown",function(tu){tu.stopImmediatePropagation(),tu.preventDefault(),lm(tu)}),es.elm=ti,i.setStyles(ti,{left:Na*es[0]+mt-ti.offsetWidth/2,top:Qu*es[1]+vn-ti.offsetHeight/2})}):lo(),i.getAttrib(f,a)||f.setAttribute(a,Cl)},lo=function(){Ke(),f&&f.removeAttribute(a),Zn(Ye,function(Oe,Ft){var mt=i.get("mceResizeHandle"+Ft);mt&&(i.unbind(mt),i.remove(mt))})},Vs=function(Oe){var Ft,mt,vn=function(tr,Na){if(tr)do if(tr===Na)return!0;while(tr=tr.parentNode)};if(!(ie||n.removed)){if(s(i.select("img[data-mce-selected],hr[data-mce-selected]"),function(tr){tr.removeAttribute(a)}),mt=Oe.type==="mousedown"?Oe.target:e.getNode(),mt=i.$(mt).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],vn(mt,Je)&&(Ee(),Ft=e.getStart(!0),vn(Ft,mt)&&vn(e.getEnd(!0),mt))){Bo(mt);return}lo()}},pc=function(Oe){return Oy(Dv(n.getBody(),Oe))},Ke=function(){Zn(Ye,function(Oe){Oe.elm&&(i.unbind(Oe.elm),delete Oe.elm)})},Ee=function(){try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};n.on("init",function(){if(Ee(),Qt.browser.isIE()||Qt.browser.isEdge()){n.on("mousedown click",function(mt){var vn=mt.target,tr=vn.nodeName;!ie&&/^(TABLE|IMG|HR)$/.test(tr)&&!pc(vn)&&(mt.button!==2&&n.selection.select(vn,tr==="TABLE"),mt.type==="mousedown"&&n.nodeChanged())});var Oe=function(mt){var vn=function(tr){Ki.setEditorTimeout(n,function(){return n.selection.select(tr)})};if(pc(mt.target)||Wu(mt.target)){mt.preventDefault(),vn(mt.target);return}/^(TABLE|IMG|HR)$/.test(mt.target.nodeName)&&(mt.preventDefault(),mt.target.tagName==="IMG"&&vn(mt.target))};i.bind(Je,"mscontrolselect",Oe),n.on("remove",function(){return i.unbind(Je,"mscontrolselect",Oe)})}var Ft=Ki.throttle(function(mt){n.composing||Vs(mt)});n.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",Ft),n.on("keyup compositionend",function(mt){f&&f.nodeName==="TABLE"&&Ft(mt)}),n.on("hide blur",lo),n.on("contextmenu longpress",tt,!0)}),n.on("remove",Ke);var Ze=function(){f=g=O=null};return{isResizable:_t,showResizeRect:Bo,hideResizeRect:lo,updateResizeRect:Vs,destroy:Ze}},Kk=function(e){return Sc(e)||Ra(e)},VC=function(e,n,a){for(;e&&e!==n;){if(a(e))return e;e=e.parentNode}return null},UC=function(e,n,a){var i,s=a.elementFromPoint(e,n),f=a.body.createTextRange();if((!s||s.tagName==="HTML")&&(s=a.body),f.moveToElementText(s),i=Ne.toArray(f.getClientRects()),i=i.sort(function(g,b){return g=Math.abs(Math.max(g.top-n,g.bottom-n)),b=Math.abs(Math.max(b.top-n,b.bottom-n)),g-b}),i.length>0){n=(i[0].bottom+i[0].top)/2;try{return f.moveToPoint(e,n),f.collapse(!0),f}catch{}}return null},Ay=function(e,n){var a=e&&e.parentElement?e.parentElement():null;return Ra(VC(a,n,Kk))?null:e},Dy=function(e,n,a){var i,s,f=a;if(f.caretPositionFromPoint)s=f.caretPositionFromPoint(e,n),s&&(i=a.createRange(),i.setStart(s.offsetNode,s.offset),i.collapse(!0));else if(f.caretRangeFromPoint)i=f.caretRangeFromPoint(e,n);else if(f.body.createTextRange){i=f.body.createTextRange();try{i.moveToPoint(e,n),i.collapse(!0)}catch{i=UC(e,n,a)}return Ay(i,a.body)}return i},I1=function(e,n){return e&&n&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset},Xk=function(e,n,a){for(;e&&e!==n;){if(a(e))return e;e=e.parentNode}return null},WC=function(e,n,a){return Xk(e,n,a)!==null},Yk=function(e,n,a){return WC(e,n,function(i){return i.nodeName===a})},Cs=function(e){return e&&e.nodeName==="TABLE"},Bu=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Rv=function(e,n){return qu(e)&&WC(e,n,uc)===!1},jC=function(e,n,a){for(var i=new zr(n,e.getParent(n.parentNode,e.isBlock)||e.getRoot());n=i[a?"prev":"next"]();)if(ra(n))return!0},Jk=function(e,n){return e.previousSibling&&e.previousSibling.nodeName===n},GC=function(e,n){for(;n&&n!==e;){if(Ra(n))return!0;n=n.parentNode}return!1},Jn=function(e,n,a,i,s){var f,g=e.getRoot(),b,w=e.schema.getNonEmptyElements(),O=e.getParent(s.parentNode,e.isBlock)||g;if(i&&ra(s)&&n&&e.isEmpty(O))return ee.some(Re(s.parentNode,e.nodeIndex(s)));for(var N=new zr(s,O);b=N[i?"prev":"next"]();){if(e.getContentEditableParent(b)==="false"||Rv(b,g))return ee.none();if(Pt(b)&&b.nodeValue.length>0)return Yk(b,g,"A")===!1?ee.some(Re(b,i?b.nodeValue.length:0)):ee.none();if(e.isBlock(b)||w[b.nodeName.toLowerCase()])return ee.none();f=b}return a&&f?ee.some(Re(f,0)):ee.none()},qC=function(e,n,a,i){var s,f,g=e.getRoot(),b,w,O=!1;s=i[(a?"start":"end")+"Container"],f=i[(a?"start":"end")+"Offset"];var N=Sn(s)&&f===s.childNodes.length,z=e.schema.getNonEmptyElements();if(w=a,qu(s))return ee.none();if(Sn(s)&&f>s.childNodes.length-1&&(w=!1),Mg(s)&&(s=g,f=0),s===g){if(w&&(b=s.childNodes[f>0?f-1:0],b&&(qu(b)||z[b.nodeName]||Cs(b))))return ee.none();if(s.hasChildNodes()){if(f=Math.min(!w&&f>0?f-1:f,s.childNodes.length-1),s=s.childNodes[f],f=Pt(s)&&N?s.data.length:0,!n&&s===g.lastChild&&Cs(s)||GC(g,s)||qu(s))return ee.none();if(s.hasChildNodes()&&Cs(s)===!1){b=s;var F=new zr(s,g);do{if(Ra(b)||qu(b)){O=!1;break}if(Pt(b)&&b.nodeValue.length>0){f=w?0:b.nodeValue.length,s=b,O=!0;break}if(z[b.nodeName.toLowerCase()]&&!Bu(b)){f=e.nodeIndex(b),s=b.parentNode,w||f++,O=!0;break}}while(b=w?F.next():F.prev())}}}return n&&(Pt(s)&&f===0&&Jn(e,N,n,!0,s).each(function(q){s=q.container(),f=q.offset(),O=!0}),Sn(s)&&(b=s.childNodes[f],b||(b=s.childNodes[f-1]),b&&ra(b)&&!Jk(b,"A")&&!jC(e,b,!1)&&!jC(e,b,!0)&&Jn(e,N,n,!0,b).each(function(q){s=q.container(),f=q.offset(),O=!0}))),w&&!n&&Pt(s)&&f===s.nodeValue.length&&Jn(e,N,n,!1,s).each(function(q){s=q.container(),f=q.offset(),O=!0}),O?ee.some(Re(s,f)):ee.none()},wh=function(e,n){var a=n.collapsed,i=n.cloneRange(),s=Re.fromRangeStart(n);return qC(e,a,!0,i).each(function(f){(!a||!Re.isAbove(s,f))&&i.setStart(f.container(),f.offset())}),a||qC(e,a,!1,i).each(function(f){i.setEnd(f.container(),f.offset())}),a&&i.collapse(!0),I1(n,i)?ee.none():ee.some(i)},rg=function(e,n){return e.splitText(n)},F1=function(e){var n=e.startContainer,a=e.startOffset,i=e.endContainer,s=e.endOffset;return n===i&&Pt(n)?a>0&&a<n.nodeValue.length&&(i=rg(n,a),n=i.previousSibling,s>a?(s=s-a,n=i=rg(i,s).previousSibling,s=i.nodeValue.length,a=0):s=0):(Pt(n)&&a>0&&a<n.nodeValue.length&&(n=rg(n,a),a=0),Pt(i)&&s>0&&s<i.nodeValue.length&&(i=rg(i,s).previousSibling,s=i.nodeValue.length)),{startContainer:n,startOffset:a,endContainer:i,endOffset:s}},ag=function(e){var n=function(s,f){return Fd(e,s,f)},a=F1,i=function(s){return wh(e,s).fold(ut,function(f){return s.setStart(f.startContainer,f.startOffset),s.setEnd(f.endContainer,f.endOffset),!0})};return{walk:n,split:a,normalize:i}};ag.compareRanges=I1,ag.getCaretRangeFromPoint=Dy,ag.getSelectedNode=Zp,ag.getNode=Du;var og=function(e,n){var a=function(b,w){if(!kn(w)&&!w.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+w);var O=b.dom;Ba(O)&&(O.style[e]=w+"px")},i=function(b){var w=n(b);if(w<=0||w===null){var O=jn(b,e);return parseFloat(O)||0}return w},s=i,f=function(b,w){return jr(w,function(O,N){var z=jn(b,N),F=z===void 0?0:parseInt(z,10);return isNaN(F)?O:O+F},0)},g=function(b,w,O){var N=f(b,O),z=w>N?w-N:0;return z};return{set:a,get:i,getOuter:s,aggregate:f,max:g}},Zk=og("height",function(e){var n=e.dom;return vf(e)?n.getBoundingClientRect().height:n.offsetHeight}),Qk=function(e){return Zk.get(e)},Ry=function(e,n){var a=e.view(n);return a.fold(W([]),function(i){var s=e.owner(i),f=Ry(e,s);return[i].concat(f)})},_y=function(e,n){var a=n.owner(e);return Ry(n,a)},Ud=function(e){var n,a=e.dom===document?ee.none():ee.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement);return a.map(M.fromDom)},L1=function(e){return pn(e)},KC=Object.freeze({__proto__:null,view:Ud,owner:L1}),e4=function(e){var n=M.fromDom(document),a=fm(n),i=_y(e,KC),s=Uu(e),f=Jr(i,function(g,b){var w=Uu(b);return{left:g.left+w.left,top:g.top+w.top}},{left:0,top:0});return el(f.left+s.left+a.left,f.top+s.top+a.top)},By=function(e){return va(e)==="textarea"},t4=function(e,n){var a=e.fire("ScrollIntoView",n);return a.isDefaultPrevented()},Ch=function(e,n){e.fire("AfterScrollIntoView",n)},My=function(e,n){var a=cu(e);if(a.length===0||By(e))return{element:e,offset:n};if(n<a.length&&!By(a[n]))return{element:a[n],offset:0};var i=a[a.length-1];return By(i)?{element:e,offset:n}:va(i)==="img"?{element:i,offset:1}:La(i)?{element:i,offset:ph(i).length}:{element:i,offset:cu(i).length}},Zt=function(e,n){var a=_a(e),i=Qk(e);return{element:e,bottom:a.top+i,height:i,pos:a,cleanup:n}},XC=function(e,n){var a=My(e,n),i=M.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+he+"</span>");return Oi(a.element,i),Zt(i,function(){return Za(i)})},n4=function(e){return Zt(M.fromDom(e),Tt)},YC=function(e,n,a,i){r4(e,function(s,f){return Mu(e,n,a,i)},a)},ig=function(e,n,a,i,s){var f={elm:i.element.dom,alignToTop:s};if(!t4(e,f)){var g=fm(n).top;a(n,g,i,s),Ch(e,f)}},Mu=function(e,n,a,i){var s=M.fromDom(e.getBody()),f=M.fromDom(e.getDoc());hT(s);var g=XC(M.fromDom(a.startContainer),a.startOffset);ig(e,f,n,g,i),g.cleanup()},Sh=function(e,n,a,i){var s=M.fromDom(e.getDoc());ig(e,s,a,n4(n),i)},r4=function(e,n,a){var i=a.startContainer,s=a.startOffset,f=a.endContainer,g=a.endOffset;n(M.fromDom(i),M.fromDom(f));var b=e.dom.createRng();b.setStart(i,s),b.setEnd(f,g),e.selection.setRng(a)},Py=function(e,n,a,i){var s=e.pos;if(a)cs(s.left,s.top,i);else{var f=s.top-n+e.height;cs(s.left,f,i)}},H1=function(e,n,a,i,s){var f=a+n,g=i.pos.top,b=i.bottom,w=b-g>=a;if(g<n)Py(i,a,s!==!1,e);else if(g>f){var O=w?s!==!1:s===!0;Py(i,a,O,e)}else b>f&&!w&&Py(i,a,s===!0,e)},JC=function(e,n,a,i){var s=e.dom.defaultView.innerHeight;H1(e,n,s,a,i)},ZC=function(e,n,a,i){var s=e.dom.defaultView.innerHeight;H1(e,n,s,a,i);var f=e4(a.element),g=mf(window);f.top<g.y?vm(a.element,i!==!1):f.top>g.bottom&&vm(a.element,i===!0)},QC=function(e,n,a){return YC(e,JC,n,a)},eS=function(e,n,a){return Sh(e,n,JC,a)},Pf=function(e,n,a){return YC(e,ZC,n,a)},a4=function(e,n,a){return Sh(e,n,ZC,a)},o4=function(e,n,a){var i=e.inline?eS:a4;i(e,n,a)},ug=function(e,n,a){var i=e.inline?QC:Pf;i(e,n,a)},i4=function(){return M.fromDom(document)},u4=function(e){return e.dom.focus()},Mr=function(e){var n=Cu(e).dom;return e.dom===n.activeElement},sg=function(e){return e===void 0&&(e=i4()),ee.from(e.dom.activeElement).map(M.fromDom)},_v=function(e){return sg(Cu(e)).filter(function(n){return e.dom.contains(n.dom)})},ql=function(e,n,a,i){return{start:e,soffset:n,finish:a,foffset:i}},Bv={create:ql},gu=Yt.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),V1=function(e,n,a,i){return e.fold(n,a,i)},xh=function(e){return e.fold(gt,gt,gt)},cg=gu.before,Mv=gu.on,s4=gu.after,tS={before:cg,on:Mv,after:s4,cata:V1,getStart:xh},U1=Yt.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),c4=function(e){return U1.exact(e.start,e.soffset,e.finish,e.foffset)},ur=function(e){return e.match({domRange:function(n){return M.fromDom(n.startContainer)},relative:function(n,a){return tS.getStart(n)},exact:function(n,a,i,s){return n}})},Ic=U1.domRange,lg=U1.relative,nS=U1.exact,Th=function(e){var n=ur(e);return Wa(n)},vr=Bv.create,Ny={domRange:Ic,relative:lg,exact:nS,exactFromRange:c4,getWin:Th,range:vr},rS=Ut().browser,kh=function(e,n){var a=La(n)?ph(n).length:cu(n).length+1;return e>a?a:e<0?0:e},aS=function(e){return Ny.range(e.start,kh(e.soffset,e.start),e.finish,kh(e.foffset,e.finish))},Eh=function(e,n){return!Al(n.dom)&&(Hr(e,n)||gn(e,n))},Nf=function(e){return function(n){return Eh(e,n.start)&&Eh(e,n.finish)}},$y=function(e){return e.inline===!0||rS.isIE()},oS=function(e){return Ny.range(M.fromDom(e.startContainer),e.startOffset,M.fromDom(e.endContainer),e.endOffset)},l4=function(e){var n=e.getSelection(),a=!n||n.rangeCount===0?ee.none():ee.from(n.getRangeAt(0));return a.map(oS)},f4=function(e){var n=Wa(e);return l4(n.dom).filter(Nf(e))},Pv=function(e,n){return ee.from(n).filter(Nf(e)).map(aS)},Wd=function(e){var n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),ee.some(n)}catch{return ee.none()}},fg=function(e){var n=$y(e)?f4(M.fromDom(e.getBody())):ee.none();e.bookmark=n.isSome()?n:e.bookmark},iS=function(e,n){var a=M.fromDom(e.getBody()),i=$y(e)?ee.from(n):ee.none(),s=i.map(oS).filter(Nf(a));e.bookmark=s.isSome()?s:e.bookmark},zy=function(e){var n=e.bookmark?e.bookmark:ee.none();return n.bind(function(a){return Pv(M.fromDom(e.getBody()),a)}).bind(Wd)},v4=function(e){zy(e).each(function(n){return e.selection.setRng(n)})},W1=function(e){var n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1},j1={isEditorUIElement:W1},Iy=function(e){return e.type==="nodechange"&&e.selectionChange},d4=function(e,n){var a=function(){n.throttle()};Ea.DOM.bind(document,"mouseup",a),e.on("remove",function(){Ea.DOM.unbind(document,"mouseup",a)})},Fy=function(e){e.on("focusout",function(){fg(e)})},G1=function(e,n){e.on("mouseup touchend",function(a){n.throttle()})},q1=function(e,n){var a=Ut().browser;a.isIE()?Fy(e):G1(e,n),e.on("keyup NodeChange",function(i){Iy(i)||fg(e)})},Ly=function(e){var n=Zr(function(){fg(e)},0);e.on("init",function(){e.inline&&d4(e,n),q1(e,n)}),e.on("remove",function(){n.cancel()})},jd,K1=Ea.DOM,Hy=function(e){return j1.isEditorUIElement(e)},X1=function(e){var n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Oh=function(e,n){var a=Gm(e),i=K1.getParent(n,function(s){return Hy(s)||(a?e.dom.is(s,a):!1)});return i!==null},uS=function(e){try{var n=Cu(M.fromDom(e.getElement()));return sg(n).fold(function(){return document.body},function(a){return a.dom})}catch{return document.body}},m4=function(e,n){var a=n.editor;Ly(a),a.on("focusin",function(){var i=e.focusedEditor;i!==a&&(i&&i.fire("blur",{focusedEditor:a}),e.setActive(a),e.focusedEditor=a,a.fire("focus",{blurredEditor:i}),a.focus(!0))}),a.on("focusout",function(){Ki.setEditorTimeout(a,function(){var i=e.focusedEditor;!Oh(a,uS(a))&&i===a&&(a.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),jd||(jd=function(i){var s=e.activeEditor;s&&ji(i).each(function(f){f.ownerDocument===document&&f!==document.body&&!Oh(s,f)&&e.focusedEditor===s&&(s.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})},K1.bind(document,"focusin",jd))},sS=function(e,n){e.focusedEditor===n.editor&&(e.focusedEditor=null),e.activeEditor||(K1.unbind(document,"focusin",jd),jd=null)},cS=function(e){e.on("AddEditor",et(m4,e)),e.on("RemoveEditor",et(sS,e))},Vy=function(e,n){return e.dom.getParent(n,function(a){return e.dom.getContentEditable(a)==="true"})},lS=function(e){return e.collapsed?ee.from(Du(e.startContainer,e.startOffset)).map(M.fromDom):ee.none()},fS=function(e,n){return lS(n).bind(function(a){return Br(a)?ee.some(a):Hr(e,a)===!1?ee.some(e):ee.none()})},Uy=function(e,n){fS(M.fromDom(e.getBody()),n).bind(function(a){return _u(a.dom)}).fold(function(){e.selection.normalize()},function(a){return e.selection.setRng(a.toRange())})},Wy=function(e){if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},g4=function(e){return Mr(e)||_v(e).isSome()},h4=function(e){return e.iframeElement&&Mr(M.fromDom(e.iframeElement))},vg=function(e){var n=e.getBody();return n&&g4(M.fromDom(n))},p4=function(e){var n=Cu(M.fromDom(e.getElement()));return sg(n).filter(function(a){return!X1(a.dom)&&Oh(e,a.dom)}).isSome()},Nv=function(e){return e.inline?vg(e):h4(e)},vS=function(e){return Nv(e)||p4(e)},Gd=function(e){var n=e.selection,a=e.getBody(),i=n.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&Nv(e)===!1&&zy(e).each(function(f){e.selection.setRng(f),i=f});var s=Vy(e,n.getNode());if(e.$.contains(a,s)){Wy(s),Uy(e,i),Y1(e);return}e.inline||(Qt.opera||Wy(a),e.getWin().focus()),(Qt.gecko||e.inline)&&(Wy(a),Uy(e,i)),Y1(e)},Y1=function(e){return e.editorManager.setActive(e)},dS=function(e,n){e.removed||(n?Y1(e):Gd(e))},jy=function(e,n,a,i,s){var f=a?n.startContainer:n.endContainer,g=a?n.startOffset:n.endOffset;return ee.from(f).map(M.fromDom).map(function(b){return!i||!n.collapsed?Zc(b,s(b,g)).getOr(b):b}).bind(function(b){return Da(b)?ee.some(b):ja(b).filter(Da)}).map(function(b){return b.dom}).getOr(e)},Ah=function(e,n,a){return jy(e,n,!0,a,function(i,s){return Math.min(Cp(i),s)})},Gy=function(e,n,a){return jy(e,n,!1,a,function(i,s){return s>0?s-1:s})},qd=function(e,n){for(var a=e;e&&Pt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||a},Dh=function(e,n){var a,i,s;if(!n)return e;i=n.startContainer,s=n.endContainer;var f=n.startOffset,g=n.endOffset;return a=n.commonAncestorContainer,!n.collapsed&&(i===s&&g-f<2&&i.hasChildNodes()&&(a=i.childNodes[f]),i.nodeType===3&&s.nodeType===3&&(i.length===f?i=qd(i.nextSibling,!0):i=i.parentNode,g===0?s=qd(s.previousSibling,!1):s=s.parentNode,i&&i===s))?i:a&&a.nodeType===3?a.parentNode:a},b4=function(e,n,a,i){var s,f=[],g=e.getRoot();if(a=e.getParent(a||Ah(g,n,n.collapsed),e.isBlock),i=e.getParent(i||Gy(g,n,n.collapsed),e.isBlock),a&&a!==g&&f.push(a),a&&i&&a!==i){s=a;for(var b=new zr(a,g);(s=b.next())&&s!==i;)e.isBlock(s)&&f.push(s)}return i&&a!==i&&i!==g&&f.push(i),f},mS=function(e,n,a){return ee.from(n).map(function(i){var s=e.nodeIndex(i),f=e.createRng();return f.setStart(i.parentNode,s),f.setEnd(i.parentNode,s+1),a&&(Wl(e,f,i,!0),Wl(e,f,i,!1)),f})},dg=function(e,n){return Hn(n,function(a){var i=e.fire("GetSelectionRange",{range:a});return i.range!==a?i.range:a})},y4={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Rh=function(e,n,a){var i=a?"lastChild":"firstChild",s=a?"prev":"next";if(e[i])return e[i];if(e!==n){var f=e[s];if(f)return f;for(var g=e.parent;g&&g!==n;g=g.parent)if(f=g[s],f)return f}},_h=function(e){if(!Ec(e.value))return!1;var n=e.parent;return!(n&&(n.name!=="span"||n.attr("style"))&&/^[ ]+$/.test(e.value))},gS=function(e){var n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n},lc=function(){function e(n,a){this.name=n,this.type=a,a===1&&(this.attributes=[],this.attributes.map={})}return e.create=function(n,a){var i=new e(n,y4[n]||1);return a&&Zn(a,function(s,f){i.attr(f,s)}),i},e.prototype.replace=function(n){var a=this;return n.parent&&n.remove(),a.insert(n,a),a.remove(),a},e.prototype.attr=function(n,a){var i=this,s;if(typeof n!="string")return n!=null&&Zn(n,function(g,b){i.attr(b,g)}),i;if(s=i.attributes){if(a!==void 0){if(a===null){if(n in s.map){delete s.map[n];for(var f=s.length;f--;)if(s[f].name===n)return s.splice(f,1),i}return i}if(n in s.map){for(var f=s.length;f--;)if(s[f].name===n){s[f].value=a;break}}else s.push({name:n,value:a});return s.map[n]=a,i}return s.map[n]}},e.prototype.clone=function(){var n=this,a=new e(n.name,n.type),i;if(i=n.attributes){var s=[];s.map={};for(var f=0,g=i.length;f<g;f++){var b=i[f];b.name!=="id"&&(s[s.length]={name:b.name,value:b.value},s.map[b.name]=b.value)}a.attributes=s}return a.value=n.value,a.shortEnded=n.shortEnded,a},e.prototype.wrap=function(n){var a=this;return a.parent.insert(n,a),n.append(a),a},e.prototype.unwrap=function(){for(var n=this,a=n.firstChild;a;){var i=a.next;n.insert(a,n,!0),a=i}n.remove()},e.prototype.remove=function(){var n=this,a=n.parent,i=n.next,s=n.prev;return a&&(a.firstChild===n?(a.firstChild=i,i&&(i.prev=null)):s.next=i,a.lastChild===n?(a.lastChild=s,s&&(s.next=null)):i.prev=s,n.parent=n.next=n.prev=null),n},e.prototype.append=function(n){var a=this;n.parent&&n.remove();var i=a.lastChild;return i?(i.next=n,n.prev=i,a.lastChild=n):a.lastChild=a.firstChild=n,n.parent=a,n},e.prototype.insert=function(n,a,i){n.parent&&n.remove();var s=a.parent||this;return i?(a===s.firstChild?s.firstChild=n:a.prev.next=n,n.prev=a.prev,n.next=a,a.prev=n):(a===s.lastChild?s.lastChild=n:a.next.prev=n,n.next=a.next,n.prev=a,a.next=n),n.parent=s,n},e.prototype.getAll=function(n){for(var a=this,i=[],s=a.firstChild;s;s=Rh(s,a))s.name===n&&i.push(s);return i},e.prototype.children=function(){for(var n=this,a=[],i=n.firstChild;i;i=i.next)a.push(i);return a},e.prototype.empty=function(){var n=this;if(n.firstChild){for(var a=[],i=n.firstChild;i;i=Rh(i,n))a.push(i);for(var s=a.length;s--;){var i=a[s];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n},e.prototype.isEmpty=function(n,a,i){a===void 0&&(a={});var s=this,f=s.firstChild;if(gS(s))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||gS(f))return!1}if(f.type===8||f.type===3&&!_h(f)||f.type===3&&f.parent&&a[f.parent.name]&&Ec(f.value)||i&&i(f))return!1}while(f=Rh(f,s));return!0},e.prototype.walk=function(n){return Rh(this,null,n)},e}(),qy=function(e){for(var n=/data:[^;]+;base64,([a-z0-9\+\/=\s]+)/gi,a=[],i={},s=Fm("img"),f,g=0,b=0;f=n.exec(e);){var w=f[0],O=s+"_"+b++;i[O]=w,g<f.index&&a.push(e.substr(g,f.index-g)),a.push(O),g=f.index+w.length}var N=new RegExp(s+"_[0-9]+","g");return g===0?{prefix:s,uris:i,html:e,re:N}:(g<e.length&&a.push(e.substr(g)),{prefix:s,uris:i,html:a.join(""),re:N})},J1=function(e,n){return e.replace(n.re,function(a){return pr(n.uris,a).getOr(a)})},w4=function(e){var n=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return n?ee.some({type:n[1],data:decodeURIComponent(n[2])}):ee.none()},Ky=Ne.each,hS=Ne.trim,Z1="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Bh={ftp:21,http:80,https:443,mailto:25},Xy=["img","video"],pS=function(e,n){return Rn(e)?!e:Rn(n)?!tn(Xy,n):!0},bS=function(e,n,a){return e.allow_html_data_urls?!1:/^data:image\//i.test(n)?pS(e.allow_svg_data_urls,a)&&/^data:image\/svg\+xml/i.test(n):/^data:/i.test(n)},$f=function(){function e(n,a){n=hS(n),this.settings=a||{};var i=this.settings.base_uri,s=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){s.source=n;return}var f=n.indexOf("//")===0;if(n.indexOf("/")===0&&!f&&(n=(i&&i.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){var g=this.settings.base_uri?this.settings.base_uri.path:new e(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")n="//mce_host"+s.toAbsPath(g,n);else{var b=/([^#?]*)([#?]?.*)/.exec(n);n=(i&&i.protocol||"http")+"://mce_host"+s.toAbsPath(g,b[1])+b[2]}}n=n.replace(/@@/g,"(mce_at)");var w=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);Ky(Z1,function(O,N){var z=w[N];z&&(z=z.replace(/\(mce_at\)/g,"@@")),s[O]=z}),i&&(s.protocol||(s.protocol=i.protocol),s.userInfo||(s.userInfo=i.userInfo),!s.port&&s.host==="mce_host"&&(s.port=i.port),(!s.host||s.host==="mce_host")&&(s.host=i.host),s.source=""),f&&(s.protocol="")}return e.parseDataUri=function(n){var a,i=decodeURIComponent(n).split(","),s=/data:([^;]+)/.exec(i[0]);return s&&(a=s[1]),{type:a,data:i[1]}},e.isDomSafe=function(n,a,i){if(i===void 0&&(i={}),i.allow_script_urls)return!0;var s=zs.decode(n).replace(/[\s\u0000-\u001F]+/g,"");try{s=decodeURIComponent(s)}catch{s=unescape(s)}return/((java|vb)script|mhtml):/i.test(s)?!1:!bS(i,s,a)},e.getDocumentBaseUrl=function(n){var a;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?a=n.href:a=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/")),a},e.prototype.setPath=function(n){var a=/^(.*?)\/?(\w+)?$/.exec(n);this.path=a[0],this.directory=a[1],this.file=a[2],this.source="",this.getURI()},e.prototype.toRelative=function(n){var a;if(n==="./")return n;var i=new e(n,{base_uri:this});if(i.host!=="mce_host"&&this.host!==i.host&&i.host||this.port!==i.port||this.protocol!==i.protocol&&i.protocol!=="")return i.getURI();var s=this.getURI(),f=i.getURI();return s===f||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===f?s:(a=this.toRelPath(this.path,i.path),i.query&&(a+="?"+i.query),i.anchor&&(a+="#"+i.anchor),a)},e.prototype.toAbsolute=function(n,a){var i=new e(n,{base_uri:this});return i.getURI(a&&this.isSameOrigin(i))},e.prototype.isSameOrigin=function(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;var a=Bh[this.protocol];if(a&&(this.port||a)==(n.port||a))return!0}return!1},e.prototype.toRelPath=function(n,a){var i=0,s="",f,g,b=n.substring(0,n.lastIndexOf("/")).split("/"),w=a.split("/");if(b.length>=w.length){for(f=0,g=b.length;f<g;f++)if(f>=w.length||b[f]!==w[f]){i=f+1;break}}if(b.length<w.length){for(f=0,g=w.length;f<g;f++)if(f>=b.length||b[f]!==w[f]){i=f+1;break}}if(i===1)return a;for(f=0,g=b.length-(i-1);f<g;f++)s+="../";for(f=i-1,g=w.length;f<g;f++)f!==i-1?s+="/"+w[f]:s+=w[f];return s},e.prototype.toAbsPath=function(n,a){var i,s=0,f=[],g,b=/\/$/.test(a)?"/":"",w=n.split("/"),O=a.split("/");for(Ky(w,function(N){N&&f.push(N)}),w=f,i=O.length-1,f=[];i>=0;i--)if(!(O[i].length===0||O[i]===".")){if(O[i]===".."){s++;continue}if(s>0){s--;continue}f.push(O[i])}return i=w.length-s,i<=0?g=To(f).join("/"):g=w.slice(0,i).join("/")+"/"+To(f).join("/"),g.indexOf("/")!==0&&(g="/"+g),b&&g.lastIndexOf("/")!==g.length-1&&(g+=b),g},e.prototype.getURI=function(n){n===void 0&&(n=!1);var a;return(!this.source||n)&&(a="",n||(this.protocol?a+=this.protocol+"://":a+="//",this.userInfo&&(a+=this.userInfo+"@"),this.host&&(a+=this.host),this.port&&(a+=":"+this.port)),this.path&&(a+=this.path),this.query&&(a+="?"+this.query),this.anchor&&(a+="#"+this.anchor),this.source=a),this.source},e}(),Q1=Ne.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),C4=function(e){return e.indexOf("data-")===0||e.indexOf("aria-")===0},Yy=function(e,n,a){for(var i=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,s=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,f=e.getShortEndedElements(),g=1,b=a;g!==0;)for(i.lastIndex=b;;){var w=i.exec(n);if(w===null)return b;if(w[1]==="!"){rr(w[2],"--")?b=Jy(n,!1,w.index+3):b=Jy(n,!0,w.index+1);break}else{s.lastIndex=i.lastIndex;var O=s.exec(n);if(ye(O)||O.index!==i.lastIndex)continue;w[1]==="/"?g-=1:$n(f,w[2])||(g+=1),b=i.lastIndex+O[0].length;break}}return b},S4=function(e,n){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n))},Jy=function(e,n,a){a===void 0&&(a=0);var i=e.toLowerCase();if(i.indexOf("[if ",a)!==-1&&S4(i,a)){var s=i.indexOf("[endif]",a);return i.indexOf(">",s)}else if(n){var f=i.indexOf(">",a);return f!==-1?f:i.length}else{var g=/--!?>/g;g.lastIndex=a;var b=g.exec(e);return b?b.index+b[0].length:i.length}},mg=function(e,n){var a=e.exec(n);if(a){var i=a[1],s=a[2];return typeof i=="string"&&i.toLowerCase()==="data-mce-bogus"?s:null}else return null},eb=function(e,n){var a;n===void 0&&(n=er()),e=e||{};var i=(a=e.document)!==null&&a!==void 0?a:document,s=i.createElement("form");e.fix_self_closing!==!1&&(e.fix_self_closing=!0);var f=e.comment?e.comment:Tt,g=e.cdata?e.cdata:Tt,b=e.text?e.text:Tt,w=e.start?e.start:Tt,O=e.end?e.end:Tt,N=e.pi?e.pi:Tt,z=e.doctype?e.doctype:Tt,F=function(G,X){X===void 0&&(X="html");for(var J=G.html,ie,oe=0,ve,Ce,se=[],xe,Be,Je,rn,At,Ye,hn,rt,Dt,tt,pt,_t,qe,$t,Bn,Xr,br,Bo=0,lo=zs.decode,Vs=Ne.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),pc=X==="html"?0:1,Ke=function(Ka){var wa,jo;for(wa=se.length;wa--&&se[wa].name!==Ka;);if(wa>=0){for(jo=se.length-1;jo>=wa;jo--)Ka=se[jo],Ka.valid&&O(Ka.name);se.length=wa}},Ee=function(Ka,wa){return b(J1(Ka,G),wa)},Ze=function(Ka){Ka!==""&&(Ka.charAt(0)===">"&&(Ka=" "+Ka),!e.allow_conditional_comments&&Ka.substr(0,3).toLowerCase()==="[if"&&(Ka=" "+Ka),f(J1(Ka,G)))},Oe=function(Ka){return J1(Ka,G)},Ft=function(Ka,wa){var jo=Ka||"",tf=!rr(jo,"--"),Yv=Jy(J,tf,wa);return Ka=J.substr(wa,Yv-wa),Ze(tf?jo+Ka:Ka),Yv+1},mt=function(Ka,wa,jo,tf,Yv){if(wa=wa.toLowerCase(),jo=Oe(wa in ks?wa:lo(jo||tf||Yv||"")),Cl&&!At&&C4(wa)===!1){var nf=pt[wa];if(!nf&&_t){for(var Gf=_t.length;Gf--&&(nf=_t[Gf],!nf.pattern.test(wa)););Gf===-1&&(nf=null)}if(!nf||nf.validValues&&!(jo in nf.validValues))return}var ew=wa==="name"||wa==="id";ew&&Ka in Q1&&(jo in i||jo in s)||Vs[wa]&&!$f.isDomSafe(jo,Ka,e)||At&&(wa in Vs||wa.indexOf("on")===0)||(xe.map[wa]=jo,xe.push({name:wa,value:jo}))},vn=new RegExp(`<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\\s*|\\/)>))`,"g"),tr=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,Na=n.getShortEndedElements(),Qu=e.self_closing_elements||n.getSelfClosingElements(),ks=n.getBoolAttrs(),Cl=e.validate,es=e.remove_internals,ts=e.fix_self_closing,ti=n.getSpecialElements(),lm=J+">";ie=vn.exec(lm);){var tu=ie[0];if(oe<ie.index&&Ee(lo(J.substr(oe,ie.index-oe))),ve=ie[7])ve=ve.toLowerCase(),ve.charAt(0)===":"&&(ve=ve.substr(1)),Ke(ve);else if(ve=ie[8]){if(ie.index+tu.length>J.length){Ee(lo(J.substr(ie.index))),oe=ie.index+tu.length;continue}ve=ve.toLowerCase(),ve.charAt(0)===":"&&(ve=ve.substr(1)),Ye=ve in Na,ts&&Qu[ve]&&se.length>0&&se[se.length-1].name===ve&&Ke(ve);var Sl=mg(tr,ie[9]);if(Sl!==null){if(Sl==="all"){oe=Yy(n,J,vn.lastIndex),vn.lastIndex=oe;continue}rt=!1}if(!Cl||(hn=n.getElementRule(ve))){if(rt=!0,Cl&&(pt=hn.attributes,_t=hn.attributePatterns),(tt=ie[9])?(At=tt.indexOf("data-mce-type")!==-1,At&&es&&(rt=!1),xe=[],xe.map={},tt.replace(tr,function(Ka,wa,jo,tf,Yv){return mt(ve,wa,jo,tf,Yv),""})):(xe=[],xe.map={}),Cl&&!At){if(qe=hn.attributesRequired,$t=hn.attributesDefault,Bn=hn.attributesForced,Xr=hn.removeEmptyAttrs,Xr&&!xe.length&&(rt=!1),Bn)for(Be=Bn.length;Be--;)Dt=Bn[Be],rn=Dt.name,br=Dt.value,br==="{$uid}"&&(br="mce_"+Bo++),xe.map[rn]=br,xe.push({name:rn,value:br});if($t)for(Be=$t.length;Be--;)Dt=$t[Be],rn=Dt.name,rn in xe.map||(br=Dt.value,br==="{$uid}"&&(br="mce_"+Bo++),xe.map[rn]=br,xe.push({name:rn,value:br}));if(qe){for(Be=qe.length;Be--&&!(qe[Be]in xe.map););Be===-1&&(rt=!1)}if(Dt=xe.map["data-mce-bogus"]){if(Dt==="all"){oe=Yy(n,J,vn.lastIndex),vn.lastIndex=oe;continue}rt=!1}}rt&&w(ve,xe,Ye)}else rt=!1;if(Ce=ti[ve]){Ce.lastIndex=oe=ie.index+tu.length,(ie=Ce.exec(J))?(rt&&(Je=J.substr(oe,ie.index-oe)),oe=ie.index+ie[0].length):(Je=J.substr(oe),oe=J.length),rt&&(Je.length>0&&Ee(Je,!0),O(ve)),vn.lastIndex=oe;continue}Ye||(!tt||tt.indexOf("/")!==tt.length-1?se.push({name:ve,valid:rt}):rt&&O(ve))}else if(ve=ie[1])Ze(ve);else if(ve=ie[2]){var Xv=pc===1||e.preserve_cdata||se.length>0&&n.isValidChild(se[se.length-1].name,"#cdata");if(Xv)g(ve);else{oe=Ft("",ie.index+2),vn.lastIndex=oe;continue}}else if(ve=ie[3])z(ve);else if((ve=ie[4])||tu==="<!"){oe=Ft(ve,ie.index+tu.length),vn.lastIndex=oe;continue}else if(ve=ie[5])if(pc===1)N(ve,ie[6]);else{oe=Ft("?",ie.index+2),vn.lastIndex=oe;continue}oe=ie.index+tu.length}for(oe<J.length&&Ee(lo(J.substr(oe))),Be=se.length-1;Be>=0;Be--)ve=se[Be],ve.valid&&O(ve.name)},q=function(G,X){X===void 0&&(X="html"),F(qy(G),X)};return{parse:q}};eb.findEndTag=Yy;var x4=function(e,n){var a=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(a,"")},yS=function(e,n){for(var a=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,i=e.schema,s=x4(e.getTempAttrs(),n),f=i.getShortEndedElements(),g;g=a.exec(s);){var b=a.lastIndex,w=g[0].length,O=void 0;f[g[1]]?O=b:O=eb.findEndTag(i,s,b),s=s.substring(0,b-w)+s.substring(O),a.lastIndex=b-w}return ol(s)},Zy=yS,Qy=function(e,n){var a=Pi(e),i=new RegExp("^(<"+a+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+a+`>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(i,"")},T4=function(e,n){return Jt(Jt({},e),{format:n,get:!0,getInner:!0})},tb=function(e,n,a,i){var s=T4(n,a),f=n.no_events?s:e.fire("BeforeGetContent",s),g;return f.format==="raw"?g=Ne.trim(Zy(e.serializer,i.innerHTML)):f.format==="text"?g=e.dom.isEmpty(i)?"":ol(i.innerText||i.textContent):f.format==="tree"?g=e.serializer.serialize(i,f):g=Qy(e,e.serializer.serialize(i,f)),!tn(["text","tree"],f.format)&&!rd(M.fromDom(i))?f.content=Ne.trim(g):f.content=g,f.no_events?f.content:e.fire("GetContent",f).content},wS=function(e,n,a){return ee.from(e.getBody()).fold(W(n.format==="tree"?new lc("body",11):""),function(i){return tb(e,n,a,i)})},CS=Ne.each,SS=function(e){var n=function(a,i){if(a.nodeName!==i.nodeName)return!1;var s=function(g){var b={};return CS(e.getAttribs(g),function(w){var O=w.nodeName.toLowerCase();O.indexOf("_")!==0&&O!=="style"&&O.indexOf("data-")!==0&&(b[O]=e.getAttrib(g,O))}),b},f=function(g,b){var w,O;for(O in g)if($n(g,O)){if(w=b[O],typeof w>"u"||g[O]!==w)return!1;delete b[O]}for(O in b)if($n(b,O))return!1;return!0};return!f(s(a),s(i))||!f(e.parseStyle(e.getAttrib(a,"style")),e.parseStyle(e.getAttrib(i,"style")))?!1:!ws(a)&&!ws(i)};return{compare:n}},Mh=Ne.makeMap,Ph=function(e){var n=[];e=e||{};var a=e.indent,i=Mh(e.indent_before||""),s=Mh(e.indent_after||""),f=zs.getEncodeFunc(e.entity_encoding||"raw",e.entities),g=e.element_format==="html";return{start:function(b,w,O){var N,z,F,q;if(a&&i[b]&&n.length>0&&(q=n[n.length-1],q.length>0&&q!==`
`&&n.push(`
`)),n.push("<",b),w)for(N=0,z=w.length;N<z;N++)F=w[N],n.push(" ",F.name,'="',f(F.value,!0),'"');!O||g?n[n.length]=">":n[n.length]=" />",O&&a&&s[b]&&n.length>0&&(q=n[n.length-1],q.length>0&&q!==`
`&&n.push(`
`))},end:function(b){var w;n.push("</",b,">"),a&&s[b]&&n.length>0&&(w=n[n.length-1],w.length>0&&w!==`
`&&n.push(`
`))},text:function(b,w){b.length>0&&(n[n.length]=w?b:f(b))},cdata:function(b){n.push("<![CDATA[",b,"]]>")},comment:function(b){n.push("<!--",b,"-->")},pi:function(b,w){w?n.push("<?",b," ",f(w),"?>"):n.push("<?",b,"?>"),a&&n.push(`
`)},doctype:function(b){n.push("<!DOCTYPE",b,">",a?`
`:"")},reset:function(){n.length=0},getContent:function(){return n.join("").replace(/\n$/,"")}}},Kd=function(e,n){n===void 0&&(n=er());var a=Ph(e);e=e||{},e.validate="validate"in e?e.validate:!0;var i=function(s){var f=e.validate,g={3:function(w){a.text(w.value,w.raw)},8:function(w){a.comment(w.value)},7:function(w){a.pi(w.name,w.value)},10:function(w){a.doctype(w.value)},4:function(w){a.cdata(w.value)},11:function(w){if(w=w.firstChild)do b(w);while(w=w.next)}};a.reset();var b=function(w){var O=g[w.type];if(O)O(w);else{var N=w.name,z=w.shortEnded,F=w.attributes;if(f&&F&&F.length>1){var q=[];q.map={};var G=n.getElementRule(w.name);if(G){for(var X=0,J=G.attributesOrder.length;X<J;X++){var ie=G.attributesOrder[X];if(ie in F.map){var oe=F.map[ie];q.map[ie]=oe,q.push({name:ie,value:oe})}}for(var X=0,J=F.length;X<J;X++){var ie=F[X].name;if(!(ie in q.map)){var oe=F.map[ie];q.map[ie]=oe,q.push({name:ie,value:oe})}}F=q}}if(a.start(w.name,F,z),!z){if(w=w.firstChild)do b(w);while(w=w.next);a.end(N)}}};return s.type===1&&!e.inner?b(s):g[11](s),a.getContent()};return{serialize:i}},xS=new Set;(function(){var e=["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"];ft(e,function(n){xS.add(n)})})();var TS=["font","text-decoration","text-emphasis"],nb=function(e,n){return xi(e.parseStyle(e.getAttrib(n,"style")))},rb=function(e){return xS.has(e)},e2=function(e,n){return Li(nb(e,n),function(a){return!rb(a)})},t2=function(e){return jt(e,function(n){return Wr(TS,function(a){return rr(n,a)})})},kS=function(e,n,a){var i=nb(e,n),s=nb(e,a),f=function(g){var b=e.getStyle(n,g),w=e.getStyle(a,g);return Wi(b)&&Wi(w)&&b!==w};return Wr(i,function(g){var b=function(O){return Wr(O,function(N){return N===g})};if(!b(s)&&b(TS)){var w=t2(s);return Wr(w,f)}else return f(g)})},Kl=function(e,n,a){return ee.from(a.container()).filter(Pt).exists(function(i){var s=e?0:-1;return n(i.data.charAt(a.offset()+s))})},n2=et(Kl,!0,Jm),Fc=et(Kl,!1,Jm),k4=function(e){var n=e.container();return Pt(n)&&(n.data.length===0||ku(n.data)&&jl.isBookmarkNode(n.parentNode))},zf=function(e,n){return function(a){return ee.from(Xm(e?0:-1,a)).filter(n).isSome()}},ES=function(e){return dm(e)&&jn(M.fromDom(e),"display")==="block"},OS=function(e){return Ra(e)&&!Fo(e)},E4=zf(!0,ES),O4=zf(!1,ES),gg=zf(!0,Wu),hg=zf(!1,Wu),ab=zf(!0,ho),AS=zf(!1,ho),$v=zf(!0,OS),zv=zf(!1,OS),DS=function(e){for(var n=[],a=e.dom;a;)n.push(M.fromDom(a)),a=a.lastChild;return n},Nh=function(e){var n=Xu(e,"br"),a=jt(DS(e).slice(-1),Cm);n.length===a.length&&ft(a,Za)},Xd=function(e){lf(e),Io(e,M.fromHtml('<br data-mce-bogus="1">'))},sn=function(e){ss(e).each(function(n){uf(n).each(function(a){Ms(e)&&Cm(n)&&Ms(a)&&Za(n)})})},r2=function(e){return e.slice(0,-1)},ob=function(e,n,a){return Hr(n,e)?r2(zo(e,function(i){return a(i)||gn(i,n)})):[]},a2=function(e,n){return ob(e,n,ut)},If=function(e,n){return[e].concat(a2(e,n))},ib=function(e,n,a){return lh(e,n,a,k4)},$h=function(e,n){return ua(If(M.fromDom(n.container()),e),Ms)},ub=function(e,n,a){return ib(e,n.dom,a).forall(function(i){return $h(n,a).fold(function(){return Nc(i,a,n.dom)===!1},function(s){return Nc(i,a,n.dom)===!1&&Hr(s,M.fromDom(i.container()))})})},o2=function(e,n,a){return $h(n,a).fold(function(){return ib(e,n.dom,a).forall(function(i){return Nc(i,a,n.dom)===!1})},function(i){return ib(e,i.dom,a).isNone()})},i2=et(o2,!1),On=et(o2,!0),RS=et(ub,!1),Fn=et(ub,!0),_S=function(e){return kv(e).exists(Cm)},zh=function(e,n,a){var i=jt(If(M.fromDom(a.container()),n),Ms),s=Ua(i).getOr(n);return Zi(e,s.dom,a).filter(_S)},sb=function(e,n){return kv(n).exists(Cm)||zh(!0,e,n).isSome()},Iv=function(e,n){return dC(n).exists(Cm)||zh(!1,e,n).isSome()},u2=et(zh,!1),cb=et(zh,!0),Ih=function(e){return Re.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},BS=function(e,n){var a=jt(If(M.fromDom(n.container()),e),Ms);return Ua(a).getOr(e)},bn=function(e,n){return Ih(n)?Fc(n):Fc(n)||ic(BS(e,n).dom,n).exists(Fc)},MS=function(e,n){return Ih(n)?n2(n):n2(n)||oc(BS(e,n).dom,n).exists(n2)},PS=function(e){return tn(["pre","pre-wrap"],e)},pg=function(e){return kv(e).bind(function(n){return bm(n,Da)}).exists(function(n){return PS(jn(n,"white-space"))})},Yd=function(e,n){return ic(e.dom,n).isNone()},NS=function(e,n){return oc(e.dom,n).isNone()},$S=function(e,n){return Yd(e,n)||NS(e,n)||i2(e,n)||On(e,n)||Iv(e,n)||sb(e,n)},s2=function(e,n){return pg(n)?!1:$S(e,n)||bn(e,n)||MS(e,n)},lb=function(e,n){return pg(n)?!1:i2(e,n)||RS(e,n)||Iv(e,n)||bn(e,n)},zS=function(e){var n=e.container(),a=e.offset();return Pt(n)&&a<n.data.length?Re(n,a+1):e},fb=function(e,n){return pg(n)?!1:On(e,n)||Fn(e,n)||sb(e,n)||MS(e,n)},IS=function(e,n){return lb(e,n)||fb(e,zS(n))},FS=function(e,n){return Ov(e.charAt(n))},A4=function(e){var n=e.container();return Pt(n)&&Cr(n.data,fs)},D4=function(e){var n=e.split("");return Hn(n,function(a,i){return Ov(a)&&i>0&&i<n.length-1&&fh(n[i-1])&&fh(n[i+1])?" ":a}).join("")},R4=function(e,n){var a=n.data,i=Re(n,0);return FS(a,0)&&!IS(e,i)?(n.data=" "+a.slice(1),!0):!1},_4=function(e){var n=e.data,a=D4(n);return a!==n?(e.data=a,!0):!1},LS=function(e,n){var a=n.data,i=Re(n,a.length-1);return FS(a,a.length-1)&&!IS(e,i)?(n.data=a.slice(0,-1)+" ",!0):!1},c2=function(e,n){return ee.some(n).filter(A4).bind(function(a){var i=a.container(),s=R4(e,i)||_4(i)||LS(e,i);return s?ee.some(a):ee.none()})},dr=function(e){var n=M.fromDom(e.getBody());e.selection.isCollapsed()&&c2(n,Re.fromRangeStart(e.selection.getRng())).each(function(a){e.selection.setRng(a.toRange())})},HS=function(e,n,a){var i=jr(e,function(s,f){return Jm(f)||Ov(f)?s.previousCharIsSpace||s.str===""&&n||s.str.length===e.length-1&&a?{previousCharIsSpace:!1,str:s.str+fs}:{previousCharIsSpace:!0,str:s.str+" "}:{previousCharIsSpace:!1,str:s.str+f}},{previousCharIsSpace:!1,str:""});return i.str},Fh=function(e,n,a){if(a!==0){var i=M.fromDom(e),s=Qf(i,Ms).getOr(i),f=e.data.slice(n,n+a),g=n+a>=e.data.length&&fb(s,Re(e,e.data.length)),b=n===0&&lb(s,Re(e,0));e.replaceData(n,a,HS(f,b,g))}},Lh=function(e,n){var a=e.data.slice(n),i=a.length-yu(a).length;Fh(e,n,i)},vb=function(e,n){var a=e.data.slice(0,n),i=a.length-ao(a).length;Fh(e,n-i,i)},db=function(e,n,a,i){i===void 0&&(i=!0);var s=ao(e.data).length,f=i?e:n,g=i?n:e;return i?f.appendData(g.data):f.insertData(0,g.data),Za(M.fromDom(g)),a&&Lh(f,s),f},VS=function(e,n){var a=e.container(),i=e.offset();return Re.isTextPosition(e)===!1&&a===n.parentNode&&i>Re.before(n).offset()},US=function(e,n){return VS(n,e)?Re(n.container(),n.offset()-1):n},u=function(e){return Pt(e)?Re(e,0):Re.before(e)},l=function(e){return Pt(e)?Re(e,e.data.length):Re.after(e)},d=function(e){return Ml(e.previousSibling)?ee.some(l(e.previousSibling)):e.previousSibling?vl(e.previousSibling):ee.none()},h=function(e){return Ml(e.nextSibling)?ee.some(u(e.nextSibling)):e.nextSibling?_u(e.nextSibling):ee.none()},y=function(e,n){var a=Re.before(n.previousSibling?n.previousSibling:n.parentNode);return ic(e,a).fold(function(){return oc(e,Re.after(n))},ee.some)},x=function(e,n){return oc(e,Re.after(n)).fold(function(){return ic(e,Re.before(n))},ee.some)},A=function(e,n){return d(n).orThunk(function(){return h(n)}).orThunk(function(){return y(e,n)})},P=function(e,n){return h(n).orThunk(function(){return d(n)}).orThunk(function(){return x(e,n)})},j=function(e,n,a){return e?P(n,a):A(n,a)},Y=function(e,n,a){return j(e,n,a).map(et(US,a))},le=function(e,n,a){a.fold(function(){e.focus()},function(i){e.selection.setRng(i.toRange(),n)})},Me=function(e){return function(n){return n.dom===e}},Qe=function(e,n){return n&&$n(e.schema.getBlockElements(),va(n))},Ve=function(e){if(Ri(e)){var n=M.fromHtml('<br data-mce-bogus="1">');return lf(e),Io(e,n),ee.some(Re.before(n.dom))}else return ee.none()},Pe=function(e,n,a){var i=uf(e).filter(La),s=Rs(e).filter(La);return Za(e),Wb(i,s,n,function(f,g,b){var w=f.dom,O=g.dom,N=w.data.length;return db(w,O,a),b.container()===O?Re(w,N):b}).orThunk(function(){return a&&(i.each(function(f){return vb(f.dom,f.dom.length)}),s.each(function(f){return Lh(f.dom,0)})),n})},lt=function(e,n){return $n(e.schema.getTextInlineElements(),va(n))},ct=function(e,n,a,i){i===void 0&&(i=!0);var s=Y(n,e.getBody(),a.dom),f=Qf(a,et(Qe,e),Me(e.getBody())),g=Pe(a,s,lt(e,a));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(Ve).fold(function(){i&&le(e,n,g)},function(b){i&&le(e,n,ee.some(b))})},qt=function(e){return function(n){return gn(e,n)}},xr=function(e){return Xu(e,"td,th")},en=function(e,n){var a=function(O){return $c(M.fromDom(O),n)},i=a(e.startContainer),s=a(e.endContainer),f=i.isSome(),g=s.isSome(),b=lu(i,s,gn).getOr(!1),w=!b&&f&&g;return{startTable:i,endTable:s,isStartInTable:f,isEndInTable:g,isSameTable:b,isMultiTable:w}},yn=function(e,n){return{start:e,end:n}},sr=function(e,n,a){return{rng:e,table:n,cells:a}},Gn=Yt.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),eo=function(e,n){return io(M.fromDom(e),"td,th",n)},Qo=function(e){return!gn(e.start,e.end)},hu=function(e,n){return $c(e.start,n).bind(function(a){return $c(e.end,n).bind(function(i){return jb(gn(a,i),a)})})},Dr=function(e,n){return!Qo(e)&&hu(e,n).exists(function(a){var i=a.dom.rows;return i.length===1&&i[0].cells.length===1})},Dn=function(e,n){var a=eo(e.startContainer,n),i=eo(e.endContainer,n);return lu(a,i,yn)},mr=function(e){return function(n){return $c(n,e).bind(function(a){return Gr(xr(a)).map(function(i){return yn(n,i)})})}},Kr=function(e){return function(n){return $c(n,e).bind(function(a){return Ua(xr(a)).map(function(i){return yn(i,n)})})}},Pa=function(e){return function(n){return hu(n,e).map(function(a){return sr(n,a,xr(a))})}},Xl=function(e,n,a,i){if(a.collapsed||!e.forall(Qo))return ee.none();if(n.isSameTable){var s=e.bind(Pa(i));return ee.some({start:s,end:s})}else{var f=eo(a.startContainer,i),g=eo(a.endContainer,i),b=f.bind(mr(i)).bind(Pa(i)),w=g.bind(Kr(i)).bind(Pa(i));return ee.some({start:b,end:w})}},Ir=function(e,n){return Si(e,function(a){return gn(a,n)})},Ss=function(e){return lu(Ir(e.cells,e.rng.start),Ir(e.cells,e.rng.end),function(n,a){return e.cells.slice(n,a+1)})},zi=function(e,n,a){return e.exists(function(i){return Dr(i,a)&&gh(i.start,n)})},Hh=function(e,n){var a=n.startTable,i=n.endTable,s=e.cloneRange();return a.each(function(f){return s.setStartAfter(f.dom)}),i.each(function(f){return s.setEndBefore(f.dom)}),s},Jd=function(e,n,a,i){return Xl(e,n,a,i).bind(function(s){var f=s.start,g=s.end;return f.or(g)}).bind(function(s){var f=n.isSameTable,g=Ss(s).getOr([]);if(f&&s.cells.length===g.length)return ee.some(Gn.fullTable(s.table));if(g.length>0){if(f)return ee.some(Gn.partialTable(g,ee.none()));var b=Hh(a,n);return ee.some(Gn.partialTable(g,ee.some(Jt(Jt({},n),{rng:b}))))}else return ee.none()})},hl=function(e,n,a,i){return Xl(e,n,a,i).bind(function(s){var f=s.start,g=s.end,b=f.bind(Ss).getOr([]),w=g.bind(Ss).getOr([]);if(b.length>0&&w.length>0){var O=Hh(a,n);return ee.some(Gn.multiTable(b,w,O))}else return ee.none()})},fc=function(e,n){var a=qt(e),i=Dn(n,a),s=en(n,a);return zi(i,n,a)?i.map(function(f){return Gn.singleCellTable(n,f.start)}):s.isMultiTable?hl(i,s,n,a):Jd(i,s,n,a)},pl=function(e){var n=is(e)?uf(e):ss(e);return n.bind(pl).orThunk(function(){return ee.some(e)})},Vh=function(e){return ft(e,function(n){$e(n,"contenteditable"),Xd(n)})},bg=function(e,n){return ee.from(e.dom.getParent(n,e.dom.isBlock)).map(M.fromDom)},Uh=function(e,n,a){a.each(function(i){n?Za(i):(Xd(i),e.selection.setCursorLocation(i.dom,0))})},Zd=function(e,n,a,i){var s=a.cloneRange();i?(s.setStart(a.startContainer,a.startOffset),s.setEndAfter(n.dom.lastChild)):(s.setStartBefore(n.dom.firstChild),s.setEnd(a.endContainer,a.endOffset)),gb(e,s,n,!1)},Lc=function(e){var n=Ld(e),a=M.fromDom(e.selection.getNode());mm(a.dom)&&Ri(a)?e.selection.setCursorLocation(a.dom,0):e.selection.collapse(!0),n.length>1&&Wr(n,function(i){return gn(i,a)})&&E(a,"data-mce-selected","1")},Qd=function(e,n,a){var i=e.selection.getRng(),s=a.bind(function(f){var g=f.rng,b=f.isStartInTable,w=bg(e,b?g.endContainer:g.startContainer);g.deleteContents(),Uh(e,b,w.filter(Ri));var O=b?n[0]:n[n.length-1];return Zd(e,O,i,b),Ri(O)?ee.none():ee.some(b?n.slice(1):n.slice(0,-1))}).getOr(n);return Vh(s),Lc(e),!0},mb=function(e,n,a,i){var s=e.selection.getRng(),f=n[0],g=a[a.length-1];Zd(e,f,s,!0),Zd(e,g,s,!1);var b=Ri(f)?n:n.slice(1),w=Ri(g)?a:a.slice(0,-1);return Vh(b.concat(w)),i.deleteContents(),Lc(e),!0},gb=function(e,n,a,i){i===void 0&&(i=!0),n.deleteContents();var s=pl(a).getOr(a),f=M.fromDom(e.dom.getParent(s.dom,e.dom.isBlock));if(Ri(f)&&(Xd(f),i&&e.selection.setCursorLocation(f.dom,0)),!gn(a,f)){var g=td(ja(f),a)?[]:go(f);ft(g.concat(cu(a)),function(b){!gn(b,f)&&!Hr(b,f)&&Ri(b)&&Za(b)})}return!0},Wh=function(e,n){return ct(e,!1,n),!0},TO=function(e,n,a){return fc(n,a).map(function(i){return i.fold(et(gb,e),et(Wh,e),et(Qd,e),et(mb,e))})},TB=function(e,n){return Hc(e,n)},kB=function(e,n,a,i){return Pu(n,i).fold(function(){return TO(e,n,a)},function(s){return TB(e,s)}).getOr(!1)},em=function(e,n,a){var i=M.fromDom(e.getBody()),s=e.selection.getRng();return a.length!==0?Qd(e,a,ee.none()):kB(e,i,s,n)},kO=function(e,n){return ua(If(n,e),al)},Pu=function(e,n){return ua(If(n,e),_g("caption"))},$r=function(e,n,a,i,s){return Pd(a,e.getBody(),s).bind(function(f){return kO(n,M.fromDom(f.getNode())).map(function(g){return gn(g,i)===!1})})},Hc=function(e,n){return Xd(n),e.selection.setCursorLocation(n.dom,0),ee.some(!0)},EB=function(e,n,a,i){return _u(e.dom).bind(function(s){return vl(e.dom).map(function(f){return n?a.isEqual(s)&&i.isEqual(f):a.isEqual(f)&&i.isEqual(s)})}).getOr(!0)},EO=function(e,n){return Hc(e,n)},B4=function(e,n,a){return Pu(e,M.fromDom(a.getNode())).map(function(i){return gn(i,n)===!1})},M4=function(e,n,a,i,s){return Pd(a,e.getBody(),s).bind(function(f){return EB(i,a,s,f)?EO(e,i):B4(n,i,f)}).or(ee.some(!0))},OO=function(e,n,a,i){var s=Re.fromRangeStart(e.selection.getRng());return kO(a,i).bind(function(f){return Ri(f)?Hc(e,f):$r(e,a,n,f,s)}).getOr(!1)},AO=function(e,n,a,i){var s=Re.fromRangeStart(e.selection.getRng());return Ri(i)?Hc(e,i):M4(e,a,n,i,s)},DO=function(e,n){return e?ab(n):AS(n)},OB=function(e,n){var a=Re.fromRangeStart(e.selection.getRng());return DO(n,a)||Zi(n,e.getBody(),a).exists(function(i){return DO(n,i)})},P4=function(e,n,a){var i=M.fromDom(e.getBody());return Pu(i,a).fold(function(){return OO(e,n,i,a)||OB(e,n)},function(s){return AO(e,n,i,s).getOr(!1)})},l2=function(e,n){var a=M.fromDom(e.selection.getStart(!0)),i=Ld(e);return e.selection.isCollapsed()&&i.length===0?P4(e,n,a):em(e,a,i)},Ff=function(e,n,a,i){var s=document.createRange();return s.setStart(e,n),s.setEnd(a,i),s},AB=function(e){var n=Re.fromRangeStart(e),a=Re.fromRangeEnd(e),i=e.commonAncestorContainer;return Zi(!1,i,a).map(function(s){return!Nc(n,a,i)&&Nc(n,s,i)?Ff(n.container(),n.offset(),s.container(),s.offset()):e}).getOr(e)},N4=function(e){return e.collapsed?e:AB(e)},DB=function(e){return e.firstChild&&e.firstChild===e.lastChild},$4=function(e){return e.name==="br"||e.value===fs},RB=function(e,n){var a=e.getBlockElements();return a[n.name]&&DB(n)&&$4(n.firstChild)},_B=function(e,n){var a=e.getNonEmptyElements();return n&&(n.isEmpty(a)||RB(e,n))},z4=function(e,n){var a=n.firstChild,i=n.lastChild;return a&&a.name==="meta"&&(a=a.next),i&&i.attr("id")==="mce_marker"&&(i=i.prev),_B(e,i)&&(i=i.prev),!a||a!==i?!1:a.name==="ul"||a.name==="ol"},BB=function(e){var n=e.firstChild,a=e.lastChild;return n&&n.nodeName==="META"&&n.parentNode.removeChild(n),a&&a.id==="mce_marker"&&a.parentNode.removeChild(a),e},MB=function(e,n,a){var i=n.serialize(a),s=e.createFragment(i);return BB(s)},RO=function(e){return jt(e.childNodes,function(n){return n.nodeName==="LI"})},PB=function(e){return e.data===fs||ra(e)},NB=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&PB(e.firstChild)},WS=function(e){return!e.firstChild||NB(e)},$B=function(e){return e.length>0&&WS(e[e.length-1])?e.slice(0,-1):e},jS=function(e,n){var a=e.getParent(n,e.isBlock);return a&&a.nodeName==="LI"?a:null},_O=function(e,n){return!!jS(e,n)},I4=function(e,n){var a=n.cloneRange(),i=n.cloneRange();return a.setStartBefore(e),i.setEndAfter(e),[a.cloneContents(),i.cloneContents()]},zB=function(e,n){var a=Re.before(e),i=fl(n),s=i.next(a);return s?s.toRange():null},BO=function(e,n){var a=Re.after(e),i=fl(n),s=i.prev(a);return s?s.toRange():null},F4=function(e,n,a,i){var s=I4(e,i),f=e.parentNode;return f.insertBefore(s[0],e),Ne.each(n,function(g){f.insertBefore(g,e)}),f.insertBefore(s[1],e),f.removeChild(e),BO(n[n.length-1],a)},IB=function(e,n,a){var i=e.parentNode;return Ne.each(n,function(s){i.insertBefore(s,e)}),zB(e,a)},FB=function(e,n,a,i){return i.insertAfter(n.reverse(),e),BO(n[0],a)},f2=function(e,n,a,i){var s=MB(n,e,i),f=jS(n,a.startContainer),g=$B(RO(s.firstChild)),b=1,w=2,O=n.getRoot(),N=function(z){var F=Re.fromRangeStart(a),q=fl(n.getRoot()),G=z===b?q.prev(F):q.next(F);return G?jS(n,G.getNode())!==f:!0};return N(b)?IB(f,g,O):N(w)?FB(f,g,O,n):F4(f,g,O,a)},L4=function(e,n,a){var i=M.fromDom(e.getRoot());return lb(i,Re.fromRangeStart(n))?a=a.replace(/^ /,"&nbsp;"):a=a.replace(/^&nbsp;/," "),fb(i,Re.fromRangeEnd(n))?a=a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a=a.replace(/&nbsp;(<br( \/)?>)?$/," "),a},H4=mm,LB=function(e,n,a){if(a!==null){var i=e.getParent(n.endContainer,H4);return a===i&&gh(M.fromDom(a),n)}else return!1},MO=function(e,n,a){if(a.getAttribute("data-mce-bogus")==="all")a.parentNode.insertBefore(e.dom.createFragment(n),a);else{var i=a.firstChild,s=a.lastChild;!i||i===s&&i.nodeName==="BR"?e.dom.setHTML(a,n):e.selection.setContent(n)}},PO=function(e,n){ee.from(e.getParent(n,"td,th")).map(M.fromDom).each(sn)},HB=function(e,n){var a=e.schema.getTextInlineElements(),i=e.dom;if(n){var s=e.getBody(),f=SS(i);Ne.each(i.select("*[data-mce-fragment]"),function(g){var b=Rn(a[g.nodeName.toLowerCase()]);if(b&&e2(i,g))for(var w=g.parentNode;Rn(w)&&w!==s;w=w.parentNode){var O=kS(i,g,w);if(O)break;if(f.compare(w,g)){i.remove(g,!0);break}}})}},VB=function(e){for(var n=e;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},UB=function(e){Ne.each(e.getElementsByTagName("*"),function(n){n.removeAttribute("data-mce-fragment")})},WB=function(e){return!!e.getAttribute("data-mce-fragment")},NO=function(e,n){return n&&!e.schema.getShortEndedElements()[n.nodeName]},$O=function(e,n){var a,i=e.dom,s=e.selection;if(n){s.scrollIntoView(n);var f=Dv(e.getBody(),n);if(i.getContentEditable(f)==="false"){i.remove(n),s.select(f);return}var g=i.createRng(),b=n.previousSibling;if(Pt(b)){if(g.setStart(b,b.nodeValue.length),!Qt.ie){var w=n.nextSibling;Pt(w)&&(b.appendData(w.data),w.parentNode.removeChild(w))}}else g.setStartBefore(n),g.setEndBefore(n);var O=function(z){var F=Re.fromRangeStart(z),q=fl(e.getBody());if(F=q.next(F),F)return F.toRange()},N=i.getParent(n,i.isBlock);i.remove(n),N&&i.isEmpty(N)&&(e.$(N).empty(),g.setStart(N,0),g.setEnd(N,0),!H4(N)&&!WB(N)&&(a=O(g))?(g=a,i.remove(N)):i.add(N,i.create("br",{"data-mce-bogus":"1"}))),s.setRng(g)}},jB=function(e){var n=e.dom,a=N4(e.selection.getRng());e.selection.setRng(a);var i=n.getParent(a.startContainer,H4);LB(n,a,i)?gb(e,a,M.fromDom(i)):e.getDoc().execCommand("Delete",!1,null)},GB=function(e,n,a){var i,s,f,g=e.selection,b=e.dom;/^ | $/.test(n)&&(n=L4(b,g.getRng(),n));var w=e.parser,O=a.merge,N=Kd({validate:Jw(e)},e.schema),z='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',F=e.fire("BeforeSetContent",{content:n,format:"html",selection:!0,paste:a.paste});if(F.isDefaultPrevented()){e.fire("SetContent",{content:F.content,format:"html",selection:!0,paste:a.paste});return}n=F.content,n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,z),s=g.getRng();var q=s.startContainer||(s.parentElement?s.parentElement():null),G=e.getBody();q===G&&g.isCollapsed()&&b.isBlock(G.firstChild)&&NO(e,G.firstChild)&&b.isEmpty(G.firstChild)&&(s=b.createRng(),s.setStart(G.firstChild,0),s.setEnd(G.firstChild,0),g.setRng(s)),g.isCollapsed()||jB(e),i=g.getNode();var X={context:i.nodeName.toLowerCase(),data:a.data,insert:!0},J=w.parse(n,X);if(a.paste===!0&&z4(e.schema,J)&&_O(b,i)){s=f2(N,b,g.getRng(),J),g.setRng(s),e.fire("SetContent",F);return}if(VB(J),f=J.lastChild,f.attr("id")==="mce_marker"){var ie=f;for(f=f.prev;f;f=f.walk(!0))if(f.type===3||!b.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(ie,f,f.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(i),!X.invalid)n=N.serialize(J),MO(e,n,i);else{e.selection.setContent(z),i=g.getNode();var oe=e.getBody();for(i.nodeType===9?i=f=oe:f=i;f!==oe;)i=f,f=f.parentNode;n=i===oe?oe.innerHTML:b.getOuterHTML(i),n=N.serialize(w.parse(n.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return N.serialize(J)}))),i===oe?b.setHTML(oe,n):b.setOuterHTML(i,n)}HB(e,O),$O(e,b.get("mce_marker")),UB(e.getBody()),PO(b,g.getStart()),e.fire("SetContent",F),e.addVisual()},V4=function(e,n){n(e),e.firstChild&&V4(e.firstChild,n),e.next&&V4(e.next,n)},qB=function(e,n,a){var i={},s={},f=[];a.firstChild&&V4(a.firstChild,function(w){ft(e,function(O){O.name===w.name&&(i[O.name]?i[O.name].nodes.push(w):i[O.name]={filter:O,nodes:[w]})}),ft(n,function(O){typeof w.attr(O.name)=="string"&&(s[O.name]?s[O.name].nodes.push(w):s[O.name]={filter:O,nodes:[w]})})});for(var g in i)$n(i,g)&&f.push(i[g]);for(var b in s)$n(s,b)&&f.push(s[b]);return f},KB=function(e,n,a){var i=qB(e,n,a);ft(i,function(s){ft(s.filter.callbacks,function(f){f(s.nodes,s.filter.name,{})})})},XB="html",jh=function(e){return e instanceof lc},YB=function(e){Nv(e)&&_u(e.getBody()).each(function(n){var a=n.getNode(),i=ho(a)?_u(a).getOr(n):n;e.selection.setRng(i.toRange())})},GS=function(e,n,a){e.dom.setHTML(e.getBody(),n),a!==!0&&YB(e)},U4=function(e,n,a,i){if(a.length===0||/^\s+$/.test(a)){var s='<br data-mce-bogus="1">';n.nodeName==="TABLE"?a="<tr><td>"+s+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(a="<li>"+s+"</li>");var f=Pi(e);f&&e.schema.isValidChild(n.nodeName.toLowerCase(),f.toLowerCase())?(a=s,a=e.dom.createHTML(f,Ed(e),a)):a||(a='<br data-mce-bogus="1">'),GS(e,a,i.no_selection),e.fire("SetContent",i)}else i.format!=="raw"&&(a=Kd({validate:e.validate},e.schema).serialize(e.parser.parse(a,{isRootContent:!0,insert:!0}))),i.content=rd(M.fromDom(n))?a:Ne.trim(a),GS(e,i.content,i.no_selection),i.no_events||e.fire("SetContent",i);return i.content},JB=function(e,n,a,i){KB(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),a);var s=Kd({validate:e.validate},e.schema).serialize(a);return i.content=rd(M.fromDom(n))?s:Ne.trim(s),GS(e,i.content,i.no_selection),i.no_events||e.fire("SetContent",i),a},zO=function(e,n){return Jt(Jt({format:XB},e),{set:!0,content:jh(n)?"":n})},IO=function(e,n,a){var i=zO(a,n),s=a.no_events?i:e.fire("BeforeSetContent",i);return jh(n)||(n=s.content),ee.from(e.getBody()).fold(W(n),function(f){return jh(n)?JB(e,f,n,s):U4(e,f,n,s)})},ZB=function(e,n){return Kb(e,n).isSome()},FO=function(e){return Mt(e)?e:ut},QB=function(e,n,a){for(var i=e.dom,s=FO(a);i.parentNode;){i=i.parentNode;var f=M.fromDom(i),g=n(f);if(g.isSome())return g;if(s(f))break}return ee.none()},W4=function(e,n,a){var i=n(e),s=FO(a);return i.orThunk(function(){return s(e)?ee.none():QB(e,n,s)})},j4=gy,LO=function(e,n,a){var i=e.formatter.get(a);if(i)for(var s=0;s<i.length;s++){var f=i[s];if(Ls(f)&&f.inherit===!1&&e.dom.is(n,f.selector))return!0}return!1},G4=function(e,n,a,i,s){var f=e.dom.getRoot();return n===f?!1:(n=e.dom.getParent(n,function(g){return LO(e,g,a)?!0:g.parentNode===f||!!Fv(e,g,a,i,!0)}),!!Fv(e,n,a,i,s))},HO=function(e,n,a){if(j4(n,a.inline)||j4(n,a.block))return!0;if(a.selector)return n.nodeType===1&&e.is(n,a.selector)},VO=function(e,n,a,i,s,f){var g=a[i];if(Mt(a.onmatch))return a.onmatch(n,a,i);if(g){if(Bt(g.length)){for(var b in g)if($n(g,b)){var w=i==="attributes"?e.getAttrib(n,b):B1(e,n,b),O=Ul(g[b],f),N=Vr(w)||Iu(w);if(N&&Vr(O))continue;if(s&&N&&!a.exact||(!s||a.exact)&&!j4(w,_1(e,O,b)))return!1}}else for(var z=0;z<g.length;z++)if(i==="attributes"?e.getAttrib(n,g[z]):B1(e,n,g[z]))return!0}return!0},Fv=function(e,n,a,i,s){var f=e.formatter.get(a),g=e.dom;if(f&&n)for(var b=0;b<f.length;b++){var w=f[b];if(HO(e.dom,n,w)&&VO(g,n,w,"attributes",s,i)&&VO(g,n,w,"styles",s,i)){var O=w.classes;if(O){for(var N=0;N<O.length;N++)if(!e.dom.hasClass(n,Ul(O[N],i)))return}return w}}},q4=function(e,n,a,i,s){if(i)return G4(e,i,n,a,s);if(i=e.selection.getNode(),G4(e,i,n,a,s))return!0;var f=e.selection.getStart();return!!(f!==i&&G4(e,f,n,a,s))},K4=function(e,n,a){var i=[],s={},f=e.selection.getStart();return e.dom.getParent(f,function(g){for(var b=0;b<n.length;b++){var w=n[b];!s[w]&&Fv(e,g,w,a)&&(s[w]=!0,i.push(w))}},e.dom.getRoot()),i},Lf=function(e,n){var a=function(s){return gn(s,M.fromDom(e.getBody()))},i=function(s,f){return Fv(e,s.dom,f)?ee.some(f):ee.none()};return ee.from(e.selection.getStart(!0)).bind(function(s){return W4(M.fromDom(s),function(f){return Po(n,function(g){return i(f,g)})},a)}).getOrNull()},X4=function(e,n){var a=e.formatter.get(n),i=e.dom;if(a)for(var s=e.selection.getStart(),f=Qm(i,s),g=a.length-1;g>=0;g--){var b=a[g];if(!Ls(b)||Rn(b.defaultBlock))return!0;for(var w=f.length-1;w>=0;w--)if(i.is(f[w],b.selector))return!0}return!1},Y4=function(e,n,a){return jr(a,function(i,s){var f=DC(e,s);return e.formatter.matchNode(n,s,{},f)?i.concat([s]):i},[])},yg=he,UO="_mce_caret",WO=function(e,n){return e.importNode(n,!0)},e5=function(e){for(var n=[];e;){if(e.nodeType===3&&e.nodeValue!==yg||e.childNodes.length>1)return[];e.nodeType===1&&n.push(e),e=e.firstChild}return n},J4=function(e){return e5(e).length>0},qS=function(e){if(e){var n=new zr(e,e);for(e=n.current();e;e=n.next())if(Pt(e))return e}return null},Z4=function(e){var n=M.fromTag("span");return $(n,{id:UO,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Io(n,M.fromText(yg)),n},jO=function(e){var n=qS(e);return n&&n.nodeValue.charAt(0)===yg&&n.deleteData(0,1),n},Q4=function(e,n,a){a===void 0&&(a=!0);var i=e.dom,s=e.selection;if(J4(n))ct(e,!1,M.fromDom(n),a);else{var f=s.getRng(),g=i.getParent(n,i.isBlock),b=f.startContainer,w=f.startOffset,O=f.endContainer,N=f.endOffset,z=jO(n);i.remove(n,!0),b===z&&w>0&&f.setStart(z,w-1),O===z&&N>0&&f.setEnd(z,N-1),g&&i.isEmpty(g)&&Xd(M.fromDom(g)),s.setRng(f)}},Gh=function(e,n,a){a===void 0&&(a=!0);var i=e.dom,s=e.selection;if(n)Q4(e,n,a);else if(n=dl(e.getBody(),s.getStart()),!n)for(;n=i.get(UO);)Q4(e,n,!1)},GO=function(e,n,a){var i=e.dom,s=i.getParent(a,et(dy,e));s&&i.isEmpty(s)?a.parentNode.replaceChild(n,a):(Nh(M.fromDom(a)),i.isEmpty(a)?a.parentNode.replaceChild(n,a):i.insertAfter(n,a))},qO=function(e,n){return e.appendChild(n),n},e3=function(e,n){var a=Jr(e,function(i,s){return qO(i,s.cloneNode(!1))},n);return qO(a,a.ownerDocument.createTextNode(yg))},t5=function(e,n,a,i,s,f){var g=e.formatter,b=e.dom,w=jt(xi(g.get()),function(F){return F!==i&&!Cr(F,"removeformat")}),O=Y4(e,a,w),N=jt(O,function(F){return!RC(e,F,i)});if(N.length>0){var z=a.cloneNode(!1);return b.add(n,z),g.remove(i,s,z,f),b.remove(z),ee.some(z)}else return ee.none()},n5=function(e,n,a){var i,s,f=e.selection,g=f.getRng(),b=g.startOffset,w=g.startContainer,O=w.nodeValue;i=dl(e.getBody(),f.getStart()),i&&(s=qS(i));var N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(O&&b>0&&b<O.length&&N.test(O.charAt(b))&&N.test(O.charAt(b-1))){var z=f.getBookmark();g.collapse(!0);var F=tg(e,g,e.formatter.get(n));F=F1(F),e.formatter.apply(n,a,F),f.moveToBookmark(z)}else(!i||s.nodeValue!==yg)&&(i=WO(e.getDoc(),Z4(!0).dom),s=i.firstChild,g.insertNode(i),b=1),e.formatter.apply(n,a,i),f.setCursorLocation(s,b)},r5=function(e,n,a,i){var s=e.dom,f=e.selection,g,b,w,O=[],N=f.getRng(),z=N.startContainer,F=N.startOffset;for(b=z,z.nodeType===3&&(F!==z.nodeValue.length&&(g=!0),b=b.parentNode);b;){if(Fv(e,b,n,a,i)){w=b;break}b.nextSibling&&(g=!0),O.push(b),b=b.parentNode}if(w)if(g){var q=f.getBookmark();N.collapse(!0);var G=tg(e,N,e.formatter.get(n),!0);G=F1(G),e.formatter.remove(n,a,G,i),f.moveToBookmark(q)}else{var X=dl(e.getBody(),w),J=Z4(!1).dom;GO(e,J,X!==null?X:w);var ie=t5(e,J,w,n,a,i),oe=e3(O.concat(ie.toArray()),J);Q4(e,X,!1),f.setCursorLocation(oe,1),s.isEmpty(w)&&s.remove(w)}},a5=function(e,n){var a=e.selection,i=e.getBody();Gh(e,null,!1),(n===8||n===46)&&a.isCollapsed()&&a.getStart().innerHTML===yg&&Gh(e,dl(i,a.getStart())),(n===37||n===39)&&Gh(e,dl(i,a.getStart()))},o5=function(e){e.on("mouseup keydown",function(n){a5(e,n.keyCode)})},KO=function(e,n){var a=Z4(!1),i=e3(n,a.dom);return Oi(M.fromDom(e),a),Za(M.fromDom(e)),Re(i,0)},i5=function(e,n){var a=e.schema.getTextInlineElements();return $n(a,va(n))&&!uc(n.dom)&&!oo(n.dom)},t3=function(e){return uc(e.dom)&&J4(e.dom)},tm={},XO=Hi,YO=ai,KS=function(e,n){var a=tm[e];a||(tm[e]=[]),tm[e].push(n)},n3=function(e,n){YO(tm[e],function(a){a(n)})};KS("pre",function(e){var n=e.selection.getRng(),a,i=function(g){return f(g.previousSibling)&&oi(a,g.previousSibling)!==-1},s=function(g,b){Pn(b).remove(),Pn(g).append("<br><br>").append(b.childNodes)},f=_s(["pre"]);n.collapsed||(a=e.selection.getSelectedBlocks(),YO(XO(XO(a,f),i),function(g){s(g.previousSibling,g)}))});var r3=Ne.each,a3=function(e){return Sn(e)&&!ws(e)&&!uc(e)&&!oo(e)},o3=function(e,n){for(var a=e;a;a=a[n]){if(Pt(a)&&Wi(a.data))return e;if(Sn(a)&&!ws(a))return a}return e},XS=function(e,n,a){var i=SS(e);if(n&&a&&(n=o3(n,"previousSibling"),a=o3(a,"nextSibling"),i.compare(n,a))){for(var s=n.nextSibling;s&&s!==a;){var f=s;s=s.nextSibling,n.appendChild(f)}return e.remove(a),Ne.each(Ne.grep(a.childNodes),function(g){n.appendChild(g)}),n}return a},JO=function(e,n,a,i){if(i&&n.merge_siblings!==!1){var s=XS(e,vy(i),i);XS(e,s,vy(s,!0))}},YS=function(e,n,a){if(n.clear_child_styles){var i=n.links?"*:not(a)":"*";r3(e.select(i,a),function(s){a3(s)&&r3(n.styles,function(f,g){e.setStyle(s,g,"")})})}},Hf=function(e,n,a){r3(e.childNodes,function(i){a3(i)&&(n(i)&&a(i),i.hasChildNodes()&&Hf(i,n,a))})},u5=function(e,n){n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},JS=function(e,n){return function(a){return!!(a&&B1(e,a,n))}},ZO=function(e,n,a){return function(i){e.setStyle(i,n,a),i.getAttribute("style")===""&&i.removeAttribute("style"),u5(e,i)}},v2=Yt.generate([{keep:[]},{rename:["name"]},{removed:[]}]),s5=/^(src|href|style)$/,i3=Ne.each,qh=gy,c5=function(e){return/^(TR|TH|TD)$/.test(e.nodeName)},Kh=function(e,n,a){return e.isChildOf(n,a)&&n!==a&&!e.isBlock(a)},QO=function(e,n,a){var i=n[a?"startContainer":"endContainer"],s=n[a?"startOffset":"endOffset"];if(Sn(i)){var f=i.childNodes.length-1;!a&&s&&s--,i=i.childNodes[s>f?f:s]}return Pt(i)&&a&&s>=i.nodeValue.length&&(i=new zr(i,e.getBody()).next()||i),Pt(i)&&!a&&s===0&&(i=new zr(i,e.getBody()).prev()||i),i},eA=function(e,n){var a=n?"firstChild":"lastChild";if(c5(e)&&e[a]){var i=e[a];return e.nodeName==="TR"&&i[a]||i}return e},u3=function(e,n,a,i){var s=e.create(a,i);return n.parentNode.insertBefore(s,n),s.appendChild(n),s},tA=function(e,n,a,i,s){var f=M.fromDom(n),g=M.fromDom(e.create(i,s)),b=a?ya(f):_r(f);return cf(g,b),a?(Oi(f,g),Js(g,f)):(Zf(f,g),Io(g,f)),g.dom},nA=function(e,n,a){if($i(a)&&qh(n,a.inline)||ml(a)&&qh(n,a.block))return!0;if(Ls(a))return Sn(n)&&e.is(n,a.selector)},l5=function(e,n){return n.links&&e.nodeName==="A"},ZS=function(e,n,a,i){var s=vy(n,a,i);return Vr(s)||s.nodeName==="BR"||e.isBlock(s)},f5=function(e,n,a){var i=n.parentNode,s,f=e.dom,g=Pi(e);ml(a)&&(g?i===f.getRoot()&&(!a.list_block||!qh(n,a.list_block))&&ft(kr(n.childNodes),function(b){$d(e,g,b.nodeName.toLowerCase())?s?s.appendChild(b):(s=u3(f,b,g),f.setAttribs(s,e.settings.forced_root_block_attrs)):s=null}):f.isBlock(n)&&!f.isBlock(i)&&(!ZS(f,n,!1)&&!ZS(f,n.firstChild,!0,!0)&&n.insertBefore(f.create("br"),n.firstChild),!ZS(f,n,!0)&&!ZS(f,n.lastChild,!1,!0)&&n.appendChild(f.create("br")))),!(_C(a)&&!qh(a.inline,n))&&f.remove(n,!0)},rA=function(e,n,a,i,s){var f,g=e.dom;if(!nA(g,i,n)&&!l5(i,n))return v2.keep();var b=i;if($i(n)&&n.remove==="all"&&_n(n.preserve_attributes)){var w=jt(g.getAttribs(b),function(F){return tn(n.preserve_attributes,F.name.toLowerCase())});if(g.removeAllAttribs(b),ft(w,function(F){return g.setAttrib(b,F.name,F.value)}),w.length>0)return v2.rename("span")}if(n.remove!=="all"){i3(n.styles,function(F,q){F=_1(g,Ul(F,a),q+""),kn(q)&&(q=F,s=null),(n.remove_similar||!s||qh(B1(g,s,q),F))&&g.setStyle(b,q,""),f=!0}),f&&g.getAttrib(b,"style")===""&&(b.removeAttribute("style"),b.removeAttribute("data-mce-style")),i3(n.attributes,function(F,q){var G;if(F=Ul(F,a),kn(q)&&(q=F,s=null),n.remove_similar||!s||qh(g.getAttrib(s,q),F)){if(q==="class"&&(F=g.getAttrib(b,q),F&&(G="",ft(F.split(/\s+/),function(X){/mce\-\w+/.test(X)&&(G+=(G?" ":"")+X)}),G))){g.setAttrib(b,q,G);return}if(s5.test(q)&&b.removeAttribute("data-mce-"+q),q==="style"&&_s(["li"])(b)&&g.getStyle(b,"list-style-type")==="none"){b.removeAttribute(q),g.setStyle(b,"list-style-type","none");return}q==="class"&&b.removeAttribute("className"),b.removeAttribute(q)}}),i3(n.classes,function(F){F=Ul(F,a),(!s||g.hasClass(s,F))&&g.removeClass(b,F)});for(var O=g.getAttribs(b),N=0;N<O.length;N++){var z=O[N].nodeName;if(z.indexOf("_")!==0&&z.indexOf("data-")!==0)return v2.keep()}}return n.remove!=="none"?(f5(e,b,n),v2.removed()):v2.keep()},hb=function(e,n,a,i,s){return rA(e,n,a,i,s).fold(ut,function(f){return e.dom.rename(i,f),!0},Et)},v5=function(e,n,a,i,s){var f;return ft(Qm(e.dom,n.parentNode).reverse(),function(g){if(!f&&g.id!=="_start"&&g.id!=="_end"){var b=Fv(e,g,a,i,s);b&&b.split!==!1&&(f=g)}}),f},d5=function(e,n,a,i){return rA(e,n,a,i,i).fold(W(i),function(s){var f=e.dom.createFragment();return f.appendChild(i),e.dom.rename(i,s)},W(null))},m5=function(e,n,a,i,s,f,g,b){var w,O,N,z=e.dom;if(a){for(var F=a.parentNode,q=i.parentNode;q&&q!==F;q=q.parentNode){w=z.clone(q,!1);for(var G=0;G<n.length&&(w=d5(e,n[G],b,w),w!==null);G++);w&&(O&&w.appendChild(O),N||(N=w),O=w)}f&&(!g.mixed||!z.isBlock(a))&&(i=z.split(a,i)),O&&(s.parentNode.insertBefore(O,s),N.appendChild(s),$i(g)&&JO(z,g,b,O))}return i},aA=function(e,n,a,i,s){var f=e.formatter.get(n),g=f[0],b=!0,w=e.dom,O=e.selection,N=function(oe){var ve=v5(e,oe,n,a,s);return m5(e,f,ve,oe,oe,!0,g,a)},z=function(oe){return ws(oe)&&Sn(oe)&&(oe.id==="_start"||oe.id==="_end")},F=function(oe){return Wr(f,function(ve){return hb(e,ve,a,oe,oe)})},q=function(oe){var ve=!0,Ce=!1;Sn(oe)&&w.getContentEditable(oe)&&(ve=b,b=w.getContentEditable(oe)==="true",Ce=!0);var se=kr(oe.childNodes);if(b&&!Ce){var xe=F(oe),Be=oe.parentNode;!xe&&Rn(Be)&&hy(g)&&F(Be)}if(g.deep&&se.length){for(var Je=0;Je<se.length;Je++)q(se[Je]);Ce&&(b=ve)}var rn=["underline","line-through","overline"];ft(rn,function(At){Sn(oe)&&e.dom.getStyle(oe,"text-decoration")===At&&oe.parentNode&&AC(w,oe.parentNode)===At&&hb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:At}},null,oe)})},G=function(oe){var ve=w.get(oe?"_start":"_end"),Ce=ve[oe?"firstChild":"lastChild"];return z(Ce)&&(Ce=Ce[oe?"firstChild":"lastChild"]),Pt(Ce)&&Ce.data.length===0&&(Ce=oe?ve.previousSibling||ve.nextSibling:ve.nextSibling||ve.previousSibling),w.remove(ve,!0),Ce},X=function(oe){var ve,Ce,se=tg(e,oe,f,oe.collapsed);if(g.split){if(se=F1(se),ve=QO(e,se,!0),Ce=QO(e,se),ve!==Ce){if(ve=eA(ve,!0),Ce=eA(Ce,!1),Kh(w,ve,Ce)){var xe=ee.from(ve.firstChild).getOr(ve);N(tA(w,xe,!0,"span",{id:"_start","data-mce-type":"bookmark"})),G(!0);return}if(Kh(w,Ce,ve)){var xe=ee.from(Ce.lastChild).getOr(Ce);N(tA(w,xe,!1,"span",{id:"_end","data-mce-type":"bookmark"})),G(!1);return}ve=u3(w,ve,"span",{id:"_start","data-mce-type":"bookmark"}),Ce=u3(w,Ce,"span",{id:"_end","data-mce-type":"bookmark"});var Be=w.createRng();Be.setStartAfter(ve),Be.setEndBefore(Ce),Fd(w,Be,function(Je){ft(Je,function(rn){!ws(rn)&&!ws(rn.parentNode)&&N(rn)})}),N(ve),N(Ce),ve=G(!0),Ce=G()}else ve=Ce=N(ve);se.startContainer=ve.parentNode?ve.parentNode:ve,se.startOffset=w.nodeIndex(ve),se.endContainer=Ce.parentNode?Ce.parentNode:Ce,se.endOffset=w.nodeIndex(Ce)+1}Fd(w,se,function(Je){ft(Je,q)})};if(i){if(Zm(i)){var J=w.createRng();J.setStartBefore(i),J.setEndAfter(i),X(J)}else X(i);yh(e,n,i,a);return}if(w.getContentEditable(O.getNode())==="false"){i=O.getNode();for(var ie=0;ie<f.length&&!(f[ie].ceFalseOverride&&hb(e,f[ie],a,i,i));ie++);yh(e,n,i,a);return}!O.isCollapsed()||!$i(g)||Ld(e).length?(Vd(O,!0,function(){Av(e,X)}),$i(g)&&q4(e,n,a,O.getStart())&&OC(w,O,O.getRng()),e.nodeChanged()):r5(e,n,a,s),yh(e,n,i,a)},oA=Ne.each,s3=function(e,n,a,i){var s=function(f){if(f.nodeType===1&&f.parentNode&&f.parentNode.nodeType===1){var g=AC(e,f.parentNode);e.getStyle(f,"color")&&g?e.setStyle(f,"text-decoration",g):e.getStyle(f,"text-decoration")===g&&e.setStyle(f,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Ne.walk(i,s,"childNodes"),s(i))},iA=function(e,n,a,i){n.styles&&n.styles.backgroundColor&&Hf(i,JS(e,"fontSize"),ZO(e,"backgroundColor",Ul(n.styles.backgroundColor,a)))},g5=function(e,n,a,i){$i(n)&&(n.inline==="sub"||n.inline==="sup")&&(Hf(i,JS(e,"fontSize"),ZO(e,"fontSize","")),e.remove(e.select(n.inline==="sup"?"sub":"sup",i),!0))},QS=function(e,n,a,i){oA(n,function(s){$i(s)&&oA(e.dom.select(s.inline,i),function(f){a3(f)&&hb(e,s,a,f,s.exact?f:null)}),YS(e.dom,s,i)})},uA=function(e,n,a,i,s){Fv(e,s.parentNode,a,i)&&hb(e,n,i,s)||n.merge_with_parents&&e.dom.getParent(s.parentNode,function(f){if(Fv(e,f,a,i))return hb(e,n,i,s),!0})},wg=Ne.each,d2=function(e){return Sn(e)&&!ws(e)&&!uc(e)&&!oo(e)},sA=function(e,n,a,i){if(bk(e)&&$i(n)){var s=Jt(Jt({},e.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),f=ZB(M.fromDom(a),function(g){return uc(g.dom)});return ko(s,i)&&Ri(M.fromDom(a.parentNode),!1)&&!f}else return!1},c3=function(e,n,a,i){var s=e.formatter.get(n),f=s[0],g=!i&&e.selection.isCollapsed(),b=e.dom,w=e.selection,O=function(ve,Ce){if(Ce===void 0&&(Ce=f),Mt(Ce.onformat)&&Ce.onformat(ve,Ce,a,i),wg(Ce.styles,function(xe,Be){b.setStyle(ve,Be,Ul(xe,a))}),Ce.styles){var se=b.getAttrib(ve,"style");se&&b.setAttrib(ve,"data-mce-style",se)}wg(Ce.attributes,function(xe,Be){b.setAttrib(ve,Be,Ul(xe,a))}),wg(Ce.classes,function(xe){xe=Ul(xe,a),b.hasClass(ve,xe)||b.addClass(ve,xe)})},N=function(ve,Ce){var se=!1;return wg(ve,function(xe){if(!Ls(xe))return!1;if(!(Rn(xe.collapsed)&&xe.collapsed!==g)&&b.is(Ce,xe.selector)&&!uc(Ce))return O(Ce,xe),se=!0,!1}),se},z=function(ve){if(cr(ve)){var Ce=b.create(ve);return O(Ce),Ce}else return null},F=function(ve,Ce,se){var xe=[],Be=!0,Je=f.inline||f.block,rn=z(Je);Fd(ve,Ce,function(At){var Ye,hn=function(rt){var Dt=!1,tt=Be,pt=rt.nodeName.toLowerCase(),_t=rt.parentNode,qe=_t.nodeName.toLowerCase();if(Sn(rt)&&ve.getContentEditable(rt)&&(tt=Be,Be=ve.getContentEditable(rt)==="true",Dt=!0),ra(rt)&&!sA(e,f,rt,qe)){Ye=null,ml(f)&&ve.remove(rt);return}if(ml(f)&&f.wrapper&&Fv(e,rt,n,a)){Ye=null;return}if(Be&&!Dt&&ml(f)&&!f.wrapper&&dy(e,pt)&&$d(e,qe,Je)){var $t=ve.rename(rt,Je);O($t),xe.push($t),Ye=null;return}if(Ls(f)){var Bn=N(s,rt);if(!Bn&&Rn(_t)&&hy(f)&&(Bn=N(s,_t)),!$i(f)||Bn){Ye=null;return}}Be&&!Dt&&$d(e,Je,pt)&&$d(e,qe,Je)&&!(!se&&Pt(rt)&&ku(rt.data))&&!uc(rt)&&(!$i(f)||!ve.isBlock(rt))?(Ye||(Ye=ve.clone(rn,!1),rt.parentNode.insertBefore(Ye,rt),xe.push(Ye)),Ye.appendChild(rt)):(Ye=null,ft(kr(rt.childNodes),hn),Dt&&(Be=tt),Ye=null)};ft(At,hn)}),f.links===!0&&ft(xe,function(At){var Ye=function(hn){hn.nodeName==="A"&&O(hn,f),ft(kr(hn.childNodes),Ye)};Ye(At)}),ft(xe,function(At){var Ye=function(Dt){var tt=0;return ft(Dt.childNodes,function(pt){!Uk(pt)&&!ws(pt)&&tt++}),tt},hn=function(Dt){var tt=ua(Dt.childNodes,d2).filter(function(pt){return HO(ve,pt,f)});return tt.map(function(pt){var _t=ve.clone(pt,!1);return O(_t),ve.replace(_t,Dt,!0),ve.remove(pt,!0),_t}).getOr(Dt)},rt=Ye(At);if((xe.length>1||!ve.isBlock(At))&&rt===0){ve.remove(At,!0);return}($i(f)||ml(f)&&f.wrapper)&&(!f.exact&&rt===1&&(At=hn(At)),QS(e,s,a,At),uA(e,f,n,a,At),iA(ve,f,a,At),s3(ve,f,a,At),g5(ve,f,a,At),JO(ve,f,a,At))})};if(b.getContentEditable(w.getNode())==="false"){i=w.getNode();for(var q=0,G=s.length;q<G;q++){var X=s[q];if(X.ceFalseOverride&&Ls(X)&&b.is(i,X.selector)){O(i,X);break}}Ey(e,n,i,a);return}if(f){if(i)if(Zm(i)){if(!N(s,i)){var J=b.createRng();J.setStartBefore(i),J.setEndAfter(i),F(b,tg(e,J,s),!0)}}else F(b,i,!0);else if(!g||!$i(f)||Ld(e).length){var ie=w.getNode(),oe=s[0];!e.settings.forced_root_block&&oe.defaultBlock&&!b.getParent(ie,b.isBlock)&&c3(e,oe.defaultBlock),w.setRng(N4(w.getRng())),Vd(w,!0,function(){Av(e,function(ve,Ce){var se=Ce?ve:tg(e,ve,s);F(b,se,!1)})}),OC(b,w,w.getRng()),e.nodeChanged()}else n5(e,n,a);n3(n,e)}Ey(e,n,i,a)},cA=function(e){return $n(e,"vars")},h5=function(e,n){e.set({}),n.on("NodeChange",function(a){dA(n,a.element,e.get())}),n.on("FormatApply FormatRemove",function(a){var i=ee.from(a.node).map(function(s){return Zm(s)?s:s.startContainer}).bind(function(s){return Sn(s)?ee.some(s):ee.from(s.parentElement)}).getOrThunk(function(){return lA(n)});dA(n,i,e.get())})},lA=function(e){return e.selection.getStart()},fA=function(e,n,a,i,s){var f=function(b){var w=e.formatter.matchNode(b,a,s??{},i);return!Bt(w)},g=function(b){return LO(e,b,a)?!0:i?!1:Rn(e.formatter.matchNode(b,a,s,!0))};return an(n,f,g)},vA=function(e,n){var a=n??lA(e);return jt(Qm(e.dom,a),function(i){return Sn(i)&&!oo(i)})},dA=function(e,n,a){var i=vA(e,n);Zn(a,function(s,f){var g=function(b){var w=fA(e,i,f,b.similar,cA(b)?b.vars:void 0),O=w.isSome();if(b.state.get()!==O){b.state.set(O);var N=w.getOr(n);cA(b)?b.callback(O,{node:N,format:f,parents:i}):ft(b.callbacks,function(z){return z(O,{node:N,format:f,parents:i})})}};ft([s.withSimilar,s.withoutSimilar],g),ft(s.withVars,g)})},mA=function(e,n,a,i,s,f){var g=n.get();ft(a.split(","),function(b){var w=pr(g,b).getOrThunk(function(){var z={withSimilar:{state:Au(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Au(!1),similar:!1,callbacks:[]},withVars:[]};return g[b]=z,z}),O=function(){var z=vA(e);return fA(e,z,b,s,f).isSome()};if(Bt(f)){var N=s?w.withSimilar:w.withoutSimilar;N.callbacks.push(i),N.callbacks.length===1&&N.state.set(O())}else w.withVars.push({state:Au(O()),similar:s,vars:f,callback:i})}),n.set(g)},p5=function(e,n,a){var i=e.get();ft(n.split(","),function(s){return pr(i,s).each(function(f){i[s]={withSimilar:Jt(Jt({},f.withSimilar),{callbacks:jt(f.withSimilar.callbacks,function(g){return g!==a})}),withoutSimilar:Jt(Jt({},f.withoutSimilar),{callbacks:jt(f.withoutSimilar.callbacks,function(g){return g!==a})}),withVars:jt(f.withVars,function(g){return g.callback!==a})}})}),e.set(i)},m2=function(e,n,a,i,s,f){return n.get()===null&&h5(n,e),mA(e,n,a,i,s,f),{unbind:function(){return p5(n,a,i)}}},b5=function(e,n,a,i){var s=e.formatter.get(n);q4(e,n,a,i)&&(!("toggle"in s[0])||s[0].toggle)?aA(e,n,a,i):c3(e,n,a,i)},l3=function(e,n){var a=n||document,i=a.createDocumentFragment();return ft(e,function(s){i.appendChild(s.dom)}),M.fromDom(i)},f3=function(e,n,a){return{element:e,width:n,rows:a}},gA=function(e,n){return{element:e,cells:n}},hA=function(e,n){return{x:e,y:n}},v3=function(e,n){var a=parseInt(H(e,n),10);return isNaN(a)?1:a},pA=function(e,n,a,i,s){for(var f=v3(s,"rowspan"),g=v3(s,"colspan"),b=e.rows,w=a;w<a+f;w++){b[w]||(b[w]=gA(Ju(i),[]));for(var O=n;O<n+g;O++){var N=b[w].cells;N[O]=w===a&&O===n?s:mi(s)}}},bA=function(e,n,a){var i=e.rows,s=i[a]?i[a].cells:[];return!!s[n]},d3=function(e,n,a){for(;bA(e,n,a);)n++;return n},m3=function(e){return jr(e,function(n,a){return a.cells.length>n?a.cells.length:n},0)},yA=function(e,n){for(var a=e.rows,i=0;i<a.length;i++)for(var s=a[i].cells,f=0;f<s.length;f++)if(gn(s[f],n))return ee.some(hA(f,i));return ee.none()},wA=function(e,n,a,i,s){for(var f=[],g=e.rows,b=a;b<=s;b++){var w=g[b].cells,O=n<i?w.slice(n,i+1):w.slice(i,n+1);f.push(gA(g[b].element,O))}return f},y5=function(e,n,a){var i=n.x,s=n.y,f=a.x,g=a.y,b=s<g?wA(e,i,s,f,g):wA(e,i,g,f,s);return f3(e.element,m3(b),b)},w5=function(e,n){var a=mi(e.element),i=M.fromTag("tbody");return cf(i,n),Io(a,i),a},C5=function(e){return Hn(e.rows,function(n){var a=Hn(n.cells,function(s){var f=Ju(s);return $e(f,"colspan"),$e(f,"rowspan"),f}),i=mi(n.element);return cf(i,a),i})},g3=function(e){var n=f3(mi(e),0,[]);return ft(Xu(e,"tr"),function(a,i){ft(Xu(a,"td,th"),function(s,f){pA(n,d3(n,f,i),i,a,s)})}),f3(n.element,m3(n.rows),n.rows)},h3=function(e){return w5(e,C5(e))},CA=function(e,n,a){return yA(e,n).bind(function(i){return yA(e,a).map(function(s){return y5(e,i,s)})})},ex=function(e){return ua(e,function(n){return va(n)==="ul"||va(n)==="ol"})},Vc=function(e,n){return ua(e,function(a){return va(a)==="li"&&gh(a,n)}).fold(W([]),function(a){return ex(e).map(function(i){var s=M.fromTag(va(i)),f=ha(Ga(i),function(g,b){return rr(b,"list-style")});return ir(s,f),[M.fromTag("li"),s]}).getOr([])})},g2=function(e,n){var a=jr(n,function(i,s){return Io(s,i),s},e);return n.length>0?l3([a]):a},Xh=function(e){return Xi(e)?ja(e).filter(kc).fold(W([]),function(n){return[e,n]}):kc(e)?[e]:[]},S5=function(e,n){var a=M.fromDom(n.commonAncestorContainer),i=If(a,e),s=jt(i,function(b){return fu(b)||xn(b)}),f=Vc(i,n),g=s.concat(f.length?f:Xh(a));return Hn(g,mi)},p3=function(){return l3([])},SA=function(e,n){return g2(M.fromDom(n.cloneContents()),S5(e,n))},x5=function(e,n){return nd(n,"table",et(gn,e))},T5=function(e,n){return x5(e,n[0]).bind(function(a){var i=n[0],s=n[n.length-1],f=g3(a);return CA(f,i,s).map(function(g){return l3([h3(g)])})}).getOrThunk(p3)},k5=function(e,n){return n.length>0&&n[0].collapsed?p3():SA(e,n[0])},xA=function(e,n){var a=$C(n,e);return a.length>0?T5(e,a):k5(e,n)},tx=function(e){return e.replace(/^[ \f\n\r\t\v]+/,"")},h2=function(e,n){return n>=0&&n<e.length&&Jm(e.charAt(n))},b3=function(e,n){var a=ol(e.innerText);return n?tx(a):a},nx=function(e){return e.map(function(n){return n.nodeName}).getOr("div").toLowerCase()},E5=function(e){return ee.from(e.selection.getRng()).map(function(n){var a=ee.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),s=nx(a),f=Qt.browser.isIE()&&s!=="pre",g=e.dom.add(i,s,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},n.cloneContents()),b=b3(g,f),w=ol(g.textContent);if(e.dom.remove(g),h2(w,0)||h2(w,w.length-1)){var O=a.getOr(i),N=b3(O,f),z=N.indexOf(b);if(z===-1)return b;var F=h2(N,z-1),q=h2(N,z+b.length);return(F?" ":"")+b+(q?" ":"")}else return b}).getOr("")},O5=function(e,n){var a=e.selection.getRng(),i=e.dom.create("body"),s=e.selection.getSel(),f=dg(e,vh(s)),g=n.contextual?xA(M.fromDom(e.getBody()),f).dom:a.cloneContents();return g&&i.appendChild(g),e.selection.serializer.serialize(i,n)},A5=function(e,n){return Jt(Jt({},e),{format:n,get:!0,selection:!0})},D5=function(e,n,a){a===void 0&&(a={});var i=A5(a,n),s=e.fire("BeforeGetContent",i);if(s.isDefaultPrevented())return e.fire("GetContent",s),s.content;if(s.format==="text")return E5(e);s.getInner=!0;var f=O5(e,s);return s.format==="tree"?f:(s.content=e.selection.isCollapsed()?"":f,e.fire("GetContent",s),s.content)},y3=0,TA=1,kA=2,R5=function(e,n){var a=e.length+n.length+2,i=new Array(a),s=new Array(a),f=function(N,z,F){return{start:N,end:z,diag:F}},g=function(N,z,F,q,G){var X=w(N,z,F,q);if(X===null||X.start===z&&X.diag===z-q||X.end===N&&X.diag===N-F)for(var J=N,ie=F;J<z||ie<q;)J<z&&ie<q&&e[J]===n[ie]?(G.push([y3,e[J]]),++J,++ie):z-N>q-F?(G.push([kA,e[J]]),++J):(G.push([TA,n[ie]]),++ie);else{g(N,X.start,F,X.start-X.diag,G);for(var oe=X.start;oe<X.end;++oe)G.push([y3,e[oe]]);g(X.end,z,X.end-X.diag,q,G)}},b=function(N,z,F,q){for(var G=N;G-z<q&&G<F&&e[G]===n[G-z];)++G;return f(N,G,z)},w=function(N,z,F,q){var G=z-N,X=q-F;if(G===0||X===0)return null;var J=G-X,ie=X+G,oe=(ie%2===0?ie:ie+1)/2;i[1+oe]=N,s[1+oe]=z+1;var ve,Ce,se,xe,Be;for(ve=0;ve<=oe;++ve){for(Ce=-ve;Ce<=ve;Ce+=2){for(se=Ce+oe,Ce===-ve||Ce!==ve&&i[se-1]<i[se+1]?i[se]=i[se+1]:i[se]=i[se-1]+1,xe=i[se],Be=xe-N+F-Ce;xe<z&&Be<q&&e[xe]===n[Be];)i[se]=++xe,++Be;if(J%2!==0&&J-ve<=Ce&&Ce<=J+ve&&s[se-J]<=i[se])return b(s[se-J],Ce+N-F,z,q)}for(Ce=J-ve;Ce<=J+ve;Ce+=2){for(se=Ce+oe-J,Ce===J-ve||Ce!==J+ve&&s[se+1]<=s[se-1]?s[se]=s[se+1]-1:s[se]=s[se-1],xe=s[se]-1,Be=xe-N+F-Ce;xe>=N&&Be>=F&&e[xe]===n[Be];)s[se]=xe--,Be--;if(J%2===0&&-ve<=Ce&&Ce<=ve&&s[se]<=i[se+J])return b(s[se],Ce+N-F,z,q)}}},O=[];return g(0,e.length,0,n.length,O),O},EA=function(e){return Sn(e)?e.outerHTML:Pt(e)?zs.encodeRaw(e.data,!1):hf(e)?"<!--"+e.data+"-->":""},_5=function(e){var n,a=document.createElement("div"),i=document.createDocumentFragment();for(e&&(a.innerHTML=e);n=a.firstChild;)i.appendChild(n);return i},B5=function(e,n,a){var i=_5(n);if(e.hasChildNodes()&&a<e.childNodes.length){var s=e.childNodes[a];s.parentNode.insertBefore(i,s)}else e.appendChild(i)},M5=function(e,n){if(e.hasChildNodes()&&n<e.childNodes.length){var a=e.childNodes[n];a.parentNode.removeChild(a)}},w3=function(e,n){var a=0;ft(e,function(i){i[0]===y3?a++:i[0]===TA?(B5(n,i[1],a),a++):i[0]===kA&&M5(n,a)})},P5=function(e){return jt(Hn(kr(e.childNodes),EA),function(n){return n.length>0})},pb=function(e,n){var a=Hn(kr(n.childNodes),EA);return w3(R5(a,e),n),n},OA=ru(function(){return document.implementation.createHTMLDocument("undo")}),ei=function(e){return e.indexOf("</iframe>")!==-1},N5=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},$5=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},C3=function(e){var n=P5(e.getBody()),a=nu(n,function(s){var f=yS(e.serializer,s);return f.length>0?[f]:[]}),i=a.join("");return ei(i)?N5(a):$5(i)},S3=function(e,n,a){var i=a?n.beforeBookmark:n.bookmark;n.type==="fragmented"?pb(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Rn(i)&&CC(i)?!i.isFakeCaret:!0}),e.selection.moveToBookmark(i)},Uc=function(e){return e.type==="fragmented"?e.fragments.join(""):e.content},p2=function(e){var n=M.fromTag("body",OA());return Ho(n,Uc(e)),ft(Xu(n,"*[data-mce-bogus]"),ff),Ji(n)},b2=function(e,n){return Uc(e)===Uc(n)},y2=function(e,n){return p2(e)===p2(n)},bb=function(e,n){return!e||!n?!1:b2(e,n)?!0:y2(e,n)},x3=function(e){return e.get()===0},rx=function(e,n,a){x3(a)&&(e.typing=n)},Yh=function(e,n){e.typing&&(rx(e,!1,n),e.add())},yb=function(e){e.typing&&(e.typing=!1,e.add())},wb=function(e,n,a){x3(n)&&a.set(Uw(e.selection))},T3=function(e,n,a,i,s,f,g){var b=C3(e);if(f=f||{},f=Ne.extend(f,b),x3(i)===!1||e.removed)return null;var w=n.data[a.get()];if(e.fire("BeforeAddUndo",{level:f,lastLevel:w,originalEvent:g}).isDefaultPrevented()||w&&bb(w,f))return null;n.data[a.get()]&&s.get().each(function(F){n.data[a.get()].beforeBookmark=F});var O=w1(e);if(O&&n.data.length>O){for(var N=0;N<n.data.length-1;N++)n.data[N]=n.data[N+1];n.data.length--,a.set(n.data.length)}f.bookmark=Uw(e.selection),a.get()<n.data.length-1&&(n.data.length=a.get()+1),n.data.push(f),a.set(n.data.length-1);var z={level:f,lastLevel:w,originalEvent:g};return a.get()>0?(e.setDirty(!0),e.fire("AddUndo",z),e.fire("change",z)):e.fire("AddUndo",z),f},z5=function(e,n,a){n.data=[],a.set(0),n.typing=!1,e.fire("ClearUndos")},k3=function(e,n,a,i,s){if(n.transact(i)){var f=n.data[a.get()].bookmark,g=n.data[a.get()-1];S3(e,g,!0),n.transact(s)&&(n.data[a.get()-1].beforeBookmark=f)}},AA=function(e,n,a){var i;return n.get()<a.length-1&&(n.set(n.get()+1),i=a[n.get()],S3(e,i,!1),e.setDirty(!0),e.fire("Redo",{level:i})),i},DA=function(e,n,a,i){var s;return n.typing&&(n.add(),n.typing=!1,rx(n,!1,a)),i.get()>0&&(i.set(i.get()-1),s=n.data[i.get()],S3(e,s,!0),e.setDirty(!0),e.fire("Undo",{level:s})),s},I5=function(e){e.clear(),e.add()},F5=function(e,n,a){return a.get()>0||n.typing&&n.data[0]&&!bb(C3(e),n.data[0])},RA=function(e,n){return n.get()<e.data.length-1&&!e.typing},L5=function(e,n,a){return Yh(e,n),e.beforeChange(),e.ignore(a),e.add()},H5=function(e,n){try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},V5=function(e,n){var a=e.dom,i=Rn(n)?n:e.getBody();Bt(e.hasVisual)&&(e.hasVisual=Tk(e)),ft(a.select("table,a",i),function(s){switch(s.nodeName){case"TABLE":var f=qm(e),g=a.getAttrib(s,"border");(!g||g==="0")&&e.hasVisual?a.addClass(s,f):a.removeClass(s,f);break;case"A":if(!a.getAttrib(s,"href")){var b=a.getAttrib(s,"name")||s.id,w=nC(e);b&&e.hasVisual?a.addClass(s,w):a.removeClass(s,w)}break}}),e.fire("VisualAid",{element:n,hasVisual:e.hasVisual})},_A=function(e){return{undoManager:{beforeChange:function(n,a){return wb(e,n,a)},add:function(n,a,i,s,f,g){return T3(e,n,a,i,s,f,g)},undo:function(n,a,i){return DA(e,n,a,i)},redo:function(n,a){return AA(e,n,a)},clear:function(n,a){return z5(e,n,a)},reset:function(n){return I5(n)},hasUndo:function(n,a){return F5(e,n,a)},hasRedo:function(n,a){return RA(n,a)},transact:function(n,a,i){return L5(n,a,i)},ignore:function(n,a){return H5(n,a)},extra:function(n,a,i,s){return k3(e,n,a,i,s)}},formatter:{match:function(n,a,i,s){return q4(e,n,a,i,s)},matchAll:function(n,a){return K4(e,n,a)},matchNode:function(n,a,i,s){return Fv(e,n,a,i,s)},canApply:function(n){return X4(e,n)},closest:function(n){return Lf(e,n)},apply:function(n,a,i){return c3(e,n,a,i)},remove:function(n,a,i,s){return aA(e,n,a,i,s)},toggle:function(n,a,i){return b5(e,n,a,i)},formatChanged:function(n,a,i,s,f){return m2(e,n,a,i,s,f)}},editor:{getContent:function(n,a){return wS(e,n,a)},setContent:function(n,a){return IO(e,n,a)},insertContent:function(n,a){return GB(e,n,a)},addVisual:function(n){return V5(e,n)}},selection:{getContent:function(n,a){return D5(e,n,a)}},raw:{getModel:function(){return ee.none()}}}},U5=function(e){var n=function(b){return Ct(b)?b:{}},a=e.undoManager,i=e.formatter,s=e.editor,f=e.selection,g=e.raw;return{undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:function(b,w,O){return a.transact(O)},ignore:function(b,w){return a.ignore(w)},extra:function(b,w,O,N){return a.extra(O,N)}},formatter:{match:function(b,w,O,N){return i.match(b,n(w),N)},matchAll:i.matchAll,matchNode:i.matchNode,canApply:function(b){return i.canApply(b)},closest:function(b){return i.closest(b)},apply:function(b,w,O){return i.apply(b,n(w))},remove:function(b,w,O,N){return i.remove(b,n(w))},toggle:function(b,w,O){return i.toggle(b,n(w))},formatChanged:function(b,w,O,N,z){return i.formatChanged(w,O,N,z)}},editor:{getContent:function(b,w){return s.getContent(b)},setContent:function(b,w){return s.setContent(b,w)},insertContent:function(b,w){return s.insertContent(b)},addVisual:s.addVisual},selection:{getContent:function(b,w){return f.getContent(w)}},raw:{getModel:function(){return ee.some(g.getRawModel())}}}},BA=function(){var e=W(null),n=W("");return{undoManager:{beforeChange:Tt,add:e,undo:e,redo:e,clear:Tt,reset:Tt,hasUndo:ut,hasRedo:ut,transact:e,ignore:Tt,extra:Tt},formatter:{match:ut,matchAll:W([]),matchNode:W(void 0),canApply:ut,closest:n,apply:Tt,remove:Tt,toggle:Tt,formatChanged:W({unbind:Tt})},editor:{getContent:n,setContent:n,insertContent:Tt,addVisual:Tt},selection:{getContent:n},raw:{getModel:W(ee.none())}}},nm=function(e){return $n(e.plugins,"rtc")},w2=function(e){return pr(e.plugins,"rtc").bind(function(n){return ee.from(n.setup)})},MA=function(e){var n=e;return w2(e).fold(function(){return n.rtcInstance=_A(e),ee.none()},function(a){return n.rtcInstance=BA(),ee.some(function(){return a().then(function(i){return n.rtcInstance=U5(i),i.rtc.isRemote})})})},E3=function(e){return e.rtcInstance?e.rtcInstance:_A(e)},bi=function(e){var n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},W5=function(e,n,a){bi(e).undoManager.beforeChange(n,a)},PA=function(e,n,a,i,s,f,g){return bi(e).undoManager.add(n,a,i,s,f,g)},j5=function(e,n,a,i){return bi(e).undoManager.undo(n,a,i)},G5=function(e,n,a){return bi(e).undoManager.redo(n,a)},NA=function(e,n,a){bi(e).undoManager.clear(n,a)},$A=function(e,n){bi(e).undoManager.reset(n)},zA=function(e,n,a){return bi(e).undoManager.hasUndo(n,a)},IA=function(e,n,a){return bi(e).undoManager.hasRedo(n,a)},FA=function(e,n,a,i){return bi(e).undoManager.transact(n,a,i)},q5=function(e,n,a){bi(e).undoManager.ignore(n,a)},K5=function(e,n,a,i,s){bi(e).undoManager.extra(n,a,i,s)},X5=function(e,n,a,i,s){return bi(e).formatter.match(n,a,i,s)},Y5=function(e,n,a){return bi(e).formatter.matchAll(n,a)},O3=function(e,n,a,i,s){return bi(e).formatter.matchNode(n,a,i,s)},C2=function(e,n){return bi(e).formatter.canApply(n)},LA=function(e,n){return bi(e).formatter.closest(n)},HA=function(e,n,a,i){bi(e).formatter.apply(n,a,i)},ax=function(e,n,a,i,s){bi(e).formatter.remove(n,a,i,s)},J5=function(e,n,a,i){bi(e).formatter.toggle(n,a,i)},Z5=function(e,n,a,i,s,f){return bi(e).formatter.formatChanged(n,a,i,s,f)},Cg=function(e,n,a){return E3(e).editor.getContent(n,a)},A3=function(e,n,a){return E3(e).editor.setContent(n,a)},VA=function(e,n,a){return E3(e).editor.insertContent(n,a)},S2=function(e,n,a){return bi(e).selection.getContent(n,a)},UA=function(e,n){return bi(e).editor.addVisual(n)},WA=function(e,n){n===void 0&&(n={});var a=n.format?n.format:"html";return S2(e,a,n)},D3=function(e){return e.dom.length===0?(Za(e),ee.none()):ee.some(e)},jA=function(e,n){return e.filter(function(a){return jl.isBookmarkNode(a.dom)}).bind(n?Rs:uf)},Q5=function(e,n,a,i){var s=e.dom,f=n.dom,g=i?s.length:f.length;i?(db(s,f,!1,!i),a.setStart(f,g)):(db(f,s,!1,!i),a.setEnd(f,g))},eM=function(e,n){ja(e).each(function(a){var i=e.dom;n&&lb(a,Re(i,0))?Lh(i,0):!n&&fb(a,Re(i,i.length))&&vb(i,i.length)})},GA=function(e,n,a,i){e.bind(function(s){var f=i?vb:Lh;return f(s.dom,i?s.dom.length:0),n.filter(La).map(function(g){return Q5(s,g,a,i)})}).orThunk(function(){var s=jA(n,i).or(n).filter(La);return s.map(function(f){return eM(f,i)})})},R3=function(e,n){var a=ee.from(n.firstChild).map(M.fromDom),i=ee.from(n.lastChild).map(M.fromDom);e.deleteContents(),e.insertNode(n);var s=a.bind(uf).filter(La).bind(D3),f=i.bind(Rs).filter(La).bind(D3);GA(s,a,e,!0),GA(f,i,e,!1),e.collapse(!1)},tM=function(e,n){return Jt(Jt({format:"html"},e),{set:!0,selection:!0,content:n})},nM=function(e,n){if(n.format!=="raw"){var a=e.selection.getRng(),i=e.dom.getParent(a.commonAncestorContainer,e.dom.isBlock),s=i?{context:i.nodeName.toLowerCase()}:{},f=e.parser.parse(n.content,Jt(Jt({isRootContent:!0,forced_root_block:!1},s),n));return Kd({validate:e.validate},e.schema).serialize(f)}else return n.content},x2=function(e,n,a){a===void 0&&(a={});var i=tM(a,n),s=i;if(!i.no_events){var f=e.fire("BeforeSetContent",i);if(f.isDefaultPrevented()){e.fire("SetContent",f);return}else s=f}s.content=nM(e,s);var g=e.selection.getRng();R3(g,g.createContextualFragment(s.content)),e.selection.setRng(g),ug(e,g),s.no_events||e.fire("SetContent",s)},ox=function(e,n,a){if(e&&$n(e,n)){var i=jt(e[n],function(s){return s!==a});i.length===0?delete e[n]:e[n]=i}};function rM(e,n){var a,i,s=function(g,b){return ua(b,function(w){return e.is(w,g)})},f=function(g){return e.getParents(g,null,e.getRoot())};return{selectorChangedWithUnbind:function(g,b){return a||(a={},i={},n.on("NodeChange",function(w){var O=w.element,N=f(O),z={};Ne.each(a,function(F,q){s(q,N).each(function(G){i[q]||(ft(F,function(X){X(!0,{node:G,selector:q,parents:N})}),i[q]=F),z[q]=F})}),Ne.each(i,function(F,q){z[q]||(delete i[q],Ne.each(F,function(G){G(!1,{node:O,selector:q,parents:N})}))})})),a[g]||(a[g]=[]),a[g].push(b),s(g,f(n.selection.getStart())).each(function(){i[g]=a[g]}),{unbind:function(){ox(a,g,b),ox(i,g,b)}}}}}var _3=function(e){return!!e.select},qA=function(e){return!!(e&&e.ownerDocument)&&Hr(M.fromDom(e.ownerDocument),M.fromDom(e))},ix=function(e){return e?_3(e)?!0:qA(e.startContainer)&&qA(e.endContainer):!1},B3=function(e,n,a,i){var s,f,g=rM(e,i).selectorChangedWithUnbind,b=function(qe,$t){var Bn=e.createRng();Rn(qe)&&Rn($t)?(Bn.setStart(qe,$t),Bn.setEnd(qe,$t),ve(Bn),J(!1)):(Wl(e,Bn,i.getBody(),!0),ve(Bn))},w=function(qe){return WA(i,qe)},O=function(qe,$t){return x2(i,qe,$t)},N=function(qe){return Ah(i.getBody(),oe(),qe)},z=function(qe){return Gy(i.getBody(),oe(),qe)},F=function(qe,$t){return pt.getBookmark(qe,$t)},q=function(qe){return pt.moveToBookmark(qe)},G=function(qe,$t){return mS(e,qe,$t).each(ve),qe},X=function(){var qe=oe(),$t=ie();return!qe||qe.item?!1:qe.compareEndPoints?qe.compareEndPoints("StartToEnd",qe)===0:!$t||qe.collapsed},J=function(qe){var $t=oe();$t.collapse(!!qe),ve($t)},ie=function(){return n.getSelection?n.getSelection():n.document.selection},oe=function(){var qe,$t,Bn,Xr=function(lo,Vs,pc){try{return Vs.compareBoundaryPoints(lo,pc)}catch{return-1}},br=n.document;if(i.bookmark!==void 0&&Nv(i)===!1){var Bo=zy(i);if(Bo.isSome())return Bo.map(function(lo){return dg(i,[lo])[0]}).getOr(br.createRange())}try{(qe=ie())&&!Al(qe.anchorNode)&&(qe.rangeCount>0?$t=qe.getRangeAt(0):$t=qe.createRange?qe.createRange():br.createRange(),$t=dg(i,[$t])[0])}catch{}return $t||($t=br.createRange?br.createRange():br.body.createTextRange()),$t.setStart&&$t.startContainer.nodeType===9&&$t.collapsed&&(Bn=e.getRoot(),$t.setStart(Bn,0),$t.setEnd(Bn,0)),s&&f&&(Xr($t.START_TO_START,$t,s)===0&&Xr($t.END_TO_END,$t,s)===0?$t=f:(s=null,f=null)),$t},ve=function(qe,$t){var Bn;if(ix(qe)){var Xr=_3(qe)?qe:null;if(Xr){f=null;try{Xr.select()}catch{}return}var br=ie(),Bo=i.fire("SetSelectionRange",{range:qe,forward:$t});if(qe=Bo.range,br){f=qe;try{br.removeAllRanges(),br.addRange(qe)}catch{}$t===!1&&br.extend&&(br.collapse(qe.endContainer,qe.endOffset),br.extend(qe.startContainer,qe.startOffset)),s=br.rangeCount>0?br.getRangeAt(0):null}!qe.collapsed&&qe.startContainer===qe.endContainer&&br.setBaseAndExtent&&!Qt.ie&&qe.endOffset-qe.startOffset<2&&qe.startContainer.hasChildNodes()&&(Bn=qe.startContainer.childNodes[qe.startOffset],Bn&&Bn.tagName==="IMG"&&(br.setBaseAndExtent(qe.startContainer,qe.startOffset,qe.endContainer,qe.endOffset),(br.anchorNode!==qe.startContainer||br.focusNode!==qe.endContainer)&&br.setBaseAndExtent(Bn,0,Bn,1))),i.fire("AfterSetSelectionRange",{range:qe,forward:$t})}},Ce=function(qe){return O(e.getOuterHTML(qe)),qe},se=function(){return Dh(i.getBody(),oe())},xe=function(qe,$t){return b4(e,oe(),qe,$t)},Be=function(){var qe=ie(),$t=qe==null?void 0:qe.anchorNode,Bn=qe==null?void 0:qe.focusNode;if(!qe||!$t||!Bn||Al($t)||Al(Bn))return!0;var Xr=e.createRng();Xr.setStart($t,qe.anchorOffset),Xr.collapse(!0);var br=e.createRng();return br.setStart(Bn,qe.focusOffset),br.collapse(!0),Xr.compareBoundaryPoints(Xr.START_TO_START,br)<=0},Je=function(){var qe=oe(),$t=ie();if(!jk($t)&&cc(i)){var Bn=wh(e,qe);return Bn.each(function(Xr){ve(Xr,Be())}),Bn.getOr(qe)}return qe},rn=function(qe,$t){return g(qe,$t),tt},At=function(){for(var qe,$t=e.getRoot();$t&&$t.nodeName!=="BODY";){if($t.scrollHeight>$t.clientHeight){qe=$t;break}$t=$t.parentNode}return qe},Ye=function(qe,$t){Rn(qe)?o4(i,qe,$t):ug(i,oe(),$t)},hn=function(qe,$t){return ve(Dy(qe,$t,i.getDoc()))},rt=function(){var qe=oe();return qe.collapsed?Re.fromRangeStart(qe).getClientRects()[0]:qe.getBoundingClientRect()},Dt=function(){n=s=f=null,_t.destroy()},tt={bookmarkManager:null,controlSelection:null,dom:e,win:n,serializer:a,editor:i,collapse:J,setCursorLocation:b,getContent:w,setContent:O,getBookmark:F,moveToBookmark:q,select:G,isCollapsed:X,isForward:Be,setNode:Ce,getNode:se,getSel:ie,setRng:ve,getRng:oe,getStart:N,getEnd:z,getSelectedBlocks:xe,normalize:Je,selectorChanged:rn,selectorChangedWithUnbind:g,getScrollContainer:At,scrollIntoView:Ye,placeCaretAt:hn,getBoundingClientRect:rt,destroy:Dt},pt=jl(tt),_t=HC(tt,i);return tt.bookmarkManager=pt,tt.controlSelection=_t,tt},aM=function(e,n){ft(n,function(a){e.attr(a,null)})},yi=function(e,n,a){e.addNodeFilter("font",function(i){ft(i,function(s){var f=n.parse(s.attr("style")),g=s.attr("color"),b=s.attr("face"),w=s.attr("size");g&&(f.color=g),b&&(f["font-family"]=b),w&&(f["font-size"]=a[parseInt(s.attr("size"),10)-1]),s.name="span",s.attr("style",n.serialize(f)),aM(s,["color","face","size"])})})},oM=function(e,n){e.addNodeFilter("strike",function(a){ft(a,function(i){var s=n.parse(i.attr("style"));s["text-decoration"]="line-through",i.name="span",i.attr("style",n.serialize(s))})})},KA=function(e,n){var a=xf();n.convert_fonts_to_spans&&yi(e,a,Ne.explode(n.font_size_legacy_values)),oM(e,a)},iM=function(e,n){n.inline_styles&&KA(e,n)},uM=function(e){return new si(function(n,a){var i=function(){a("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="blob",s.onload=function(){s.status===200?n(s.response):i()},s.onerror=i,s.send()}catch{i()}})},ux=function(e){var n,a=decodeURIComponent(e).split(","),i=/data:([^;]+)/.exec(a[0]);return i&&(n=i[1]),{type:n,data:a[1]}},XA=function(e,n){var a;try{a=atob(n)}catch{return ee.none()}for(var i=new Uint8Array(a.length),s=0;s<i.length;s++)i[s]=a.charCodeAt(s);return ee.some(new Blob([i],{type:e}))},M3=function(e){return new si(function(n){var a=ux(e),i=a.type,s=a.data;XA(i,s).fold(function(){return n(new Blob([]))},n)})},YA=function(e){return e.indexOf("blob:")===0?uM(e):e.indexOf("data:")===0?M3(e):null},JA=function(e){return new si(function(n){var a=new FileReader;a.onloadend=function(){n(a.result)},a.readAsDataURL(e)})},P3=0,N3=function(e){return(e||"blobid")+P3++},sM=function(e,n,a,i){var s,f;if(n.src.indexOf("blob:")===0){f=e.getByUri(n.src),f?a({image:n,blobInfo:f}):YA(n.src).then(function(O){JA(O).then(function(N){s=ux(N).data,f=e.create(N3(),O,s),e.add(f),a({image:n,blobInfo:f})})},function(O){i(O)});return}var g=ux(n.src),b=g.data,w=g.type;s=b,f=e.getByData(s,w),f?a({image:n,blobInfo:f}):YA(n.src).then(function(O){f=e.create(N3(),O,s),e.add(f),a({image:n,blobInfo:f})},function(O){i(O)})},cM=function(e){return e?kr(e.getElementsByTagName("img")):[]},lM=function(e,n){var a={},i=function(s,f){f||(f=Et);var g=jt(cM(s),function(w){var O=w.src;return!Qt.fileApi||w.hasAttribute("data-mce-bogus")||w.hasAttribute("data-mce-placeholder")||!O||O===Qt.transparentSrc?!1:O.indexOf("blob:")===0?!e.isUploaded(O)&&f(w):O.indexOf("data:")===0?f(w):!1}),b=Hn(g,function(w){if(a[w.src]!==void 0)return new si(function(N){a[w.src].then(function(z){if(typeof z=="string")return z;N({image:w,blobInfo:z.blobInfo})})});var O=new si(function(N,z){sM(n,w,N,z)}).then(function(N){return delete a[N.image.src],N}).catch(function(N){return delete a[w.src],N});return a[w.src]=O,O});return si.all(b)};return{findAll:i}},ZA=function(e,n,a,i){var s=e.padd_empty_with_br||n.insert;s&&a[i.name]?i.empty().append(new lc("br",1)).shortEnded=!0:i.empty().append(new lc("#text",3)).value=fs},QA=function(e){return $3(e,"#text")&&e.firstChild.value===fs},$3=function(e,n){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===n},z3=function(e,n){var a=e.getElementRule(n.name);return a&&a.paddEmpty},Cb=function(e,n,a,i){return i.isEmpty(n,a,function(s){return z3(e,s)})},eD=function(e,n){return e&&($n(n,e.name)||e.name==="br")},tD=function(e){return Rn(e.attr("data-mce-bogus"))},nD=function(e){return e.attr("src")===Qt.transparentSrc||Rn(e.attr("data-mce-placeholder"))},rD=function(e,n){if(n.images_dataimg_filter){var a=new Image;return a.src=e.attr("src"),Zn(e.attributes.map,function(i,s){a.setAttribute(s,i)}),n.images_dataimg_filter(a)}else return!0},aD=function(e,n){var a=n.blob_cache,i=function(s){var f=s.attr("src");nD(s)||tD(s)||w4(f).filter(function(){return rD(s,n)}).bind(function(g){var b=g.type,w=g.data;return ee.from(a.getByData(w,b)).orThunk(function(){return XA(b,w).map(function(O){var N=a.create(N3(),O,w);return a.add(N),N})})}).each(function(g){s.attr("src",g.blobUri())})};a&&e.addAttributeFilter("src",function(s){return ft(s,i)})},fM=function(e,n){var a=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",function(i,s,f){var g,b=i.length,w,O=Ne.extend({},a.getBlockElements()),N=a.getNonEmptyElements(),z,F,q,G,X=a.getWhiteSpaceElements(),J,ie;for(O.body=1,g=0;g<b;g++)if(w=i[g],z=w.parent,O[w.parent.name]&&w===z.lastChild){for(q=w.prev;q;){if(G=q.name,G!=="span"||q.attr("data-mce-type")!=="bookmark"){G==="br"&&(w=null);break}q=q.prev}w&&(w.remove(),Cb(a,N,X,z)&&(J=a.getElementRule(z.name),J&&(J.removeEmpty?z.remove():J.paddEmpty&&ZA(n,f,O,z))))}else{for(F=w;z&&z.firstChild===F&&z.lastChild===F&&(F=z,!O[z.name]);)z=z.parent;F===z&&n.padd_empty_with_br!==!0&&(ie=new lc("#text",3),ie.value=fs,w.replace(ie))}}),e.addAttributeFilter("href",function(i){var s=i.length,f=function(w){var O=w.split(" ").filter(function(N){return N.length>0});return O.concat(["noopener"]).sort().join(" ")},g=function(w){var O=w?Ne.trim(w):"";return/\b(noopener)\b/g.test(O)?O:f(O)};if(!n.allow_unsafe_link_target)for(;s--;){var b=i[s];b.name==="a"&&b.attr("target")==="_blank"&&b.attr("rel",g(b.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(i){for(var s=i.length,f,g,b,w;s--;)if(w=i[s],w.name==="a"&&w.firstChild&&!w.attr("href")){b=w.parent,f=w.lastChild;do g=f.prev,b.insert(f,w),f=g;while(f)}}),n.fix_list_elements&&e.addNodeFilter("ul,ol",function(i){for(var s=i.length,f,g;s--;)if(f=i[s],g=f.parent,g.name==="ul"||g.name==="ol")if(f.prev&&f.prev.name==="li")f.prev.append(f);else{var b=new lc("li",1);b.attr("style","list-style-type: none"),f.wrap(b)}}),n.validate&&a.getValidClasses()&&e.addAttributeFilter("class",function(i){for(var s=a.getValidClasses(),f=i.length;f--;){for(var g=i[f],b=g.attr("class").split(" "),w="",O=0;O<b.length;O++){var N=b[O],z=!1,F=s["*"];F&&F[N]&&(z=!0),F=s[g.name],!z&&F&&F[N]&&(z=!0),z&&(w&&(w+=" "),w+=N)}w.length||(w=null),g.attr("class",w)}}),aD(e,n)},sx=Ne.makeMap,oD=Ne.each,T2=Ne.explode,vM=Ne.extend,I3=function(e,n){n===void 0&&(n=er());var a={},i=[],s={},f={};e=e||{},e.validate="validate"in e?e.validate:!0,e.root_name=e.root_name||"body";var g=function(G){for(var X=sx("tr,td,th,tbody,thead,tfoot,table"),J=n.getNonEmptyElements(),ie=n.getWhiteSpaceElements(),oe=n.getTextBlockElements(),ve=n.getSpecialElements(),Ce=function(pt,_t){if(_t===void 0&&(_t=pt.parent),ve[pt.name])pt.empty().remove();else{for(var qe=pt.children(),$t=0,Bn=qe;$t<Bn.length;$t++){var Xr=Bn[$t];n.isValidChild(_t.name,Xr.name)||Ce(Xr,_t)}pt.unwrap()}},se=0;se<G.length;se++){var xe=G[se],Be=void 0,Je=void 0,rn=void 0;if(!(!xe.parent||xe.fixed)){if(oe[xe.name]&&xe.parent.name==="li"){for(var At=xe.next;At&&oe[At.name];){At.name="li",At.fixed=!0,xe.parent.insert(At,xe.parent);At=At.next}xe.unwrap();continue}var Ye=[xe];for(Be=xe.parent;Be&&!n.isValidChild(Be.name,xe.name)&&!X[Be.name];Be=Be.parent)Ye.push(Be);if(Be&&Ye.length>1)if(n.isValidChild(Be.name,xe.name)){Ye.reverse(),Je=b(Ye[0].clone());for(var hn=Je,rt=0;rt<Ye.length-1;rt++){n.isValidChild(hn.name,Ye[rt].name)?(rn=b(Ye[rt].clone()),hn.append(rn)):rn=hn;for(var Dt=Ye[rt].firstChild;Dt&&Dt!==Ye[rt+1];){var tt=Dt.next;rn.append(Dt),Dt=tt}hn=rn}Cb(n,J,ie,Je)?Be.insert(xe,Ye[0],!0):(Be.insert(Je,Ye[0],!0),Be.insert(xe,Je)),Be=Ye[0],(Cb(n,J,ie,Be)||$3(Be,"br"))&&Be.empty().remove()}else Ce(xe);else if(xe.parent){if(xe.name==="li"){var At=xe.prev;if(At&&(At.name==="ul"||At.name==="ol")){At.append(xe);continue}if(At=xe.next,At&&(At.name==="ul"||At.name==="ol")){At.insert(xe,At.firstChild,!0);continue}xe.wrap(b(new lc("ul",1)));continue}n.isValidChild(xe.parent.name,"div")&&n.isValidChild("div",xe.name)?xe.wrap(b(new lc("div",1))):Ce(xe)}}}},b=function(G){var X=G.name;if(X in a){var J=s[X];J?J.push(G):s[X]=[G]}for(var ie=i.length;ie--;){var oe=i[ie].name;if(oe in G.attributes.map){var J=f[oe];J?J.push(G):f[oe]=[G]}}return G},w=function(G,X){oD(T2(G),function(J){var ie=a[J];ie||(a[J]=ie=[]),ie.push(X)})},O=function(){var G=[];for(var X in a)$n(a,X)&&G.push({name:X,callbacks:a[X]});return G},N=function(G,X){oD(T2(G),function(J){var ie;for(ie=0;ie<i.length;ie++)if(i[ie].name===J){i[ie].callbacks.push(X);return}i.push({name:J,callbacks:[X]})})},z=function(){return[].concat(i)},F=function(G,X){var J,ie,oe,ve,Ce,se,xe,Be=[],Je,rn=function(Ee){return Ee===!1?"":Ee===!0?"p":Ee};X=X||{},s={},f={};var At=vM(sx("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ye=n.getNonEmptyElements(),hn=n.children,rt=e.validate,Dt="forced_root_block"in X?X.forced_root_block:e.forced_root_block,tt=rn(Dt),pt=n.getWhiteSpaceElements(),_t=/^[ \t\r\n]+/,qe=/[ \t\r\n]+$/,$t=/[ \t\r\n]+/g,Bn=/^[ \t\r\n]+$/,Xr=$n(pt,X.context)||$n(pt,e.root_name),br=function(){var Ee=Ke.firstChild,Ze=null,Oe=function(mt){mt&&(Ee=mt.firstChild,Ee&&Ee.type===3&&(Ee.value=Ee.value.replace(_t,"")),Ee=mt.lastChild,Ee&&Ee.type===3&&(Ee.value=Ee.value.replace(qe,"")))};if(n.isValidChild(Ke.name,tt.toLowerCase())){for(;Ee;){var Ft=Ee.next;Ee.type===3||Ee.type===1&&Ee.name!=="p"&&!At[Ee.name]&&!Ee.attr("data-mce-type")?(Ze||(Ze=Bo(tt,1),Ze.attr(e.forced_root_block_attrs),Ke.insert(Ze,Ee)),Ze.append(Ee)):(Oe(Ze),Ze=null),Ee=Ft}Oe(Ze)}},Bo=function(Ee,Ze){var Oe=new lc(Ee,Ze),Ft;return Ee in a&&(Ft=s[Ee],Ft?Ft.push(Oe):s[Ee]=[Oe]),Oe},lo=function(Ee){for(var Ze=n.getBlockElements(),Oe=Ee.prev;Oe&&Oe.type===3;){var Ft=Oe.value.replace(qe,"");if(Ft.length>0){Oe.value=Ft;return}var mt=Oe.next;if(mt){if(mt.type===3&&mt.value.length){Oe=Oe.prev;continue}if(!Ze[mt.name]&&mt.name!=="script"&&mt.name!=="style"){Oe=Oe.prev;continue}}var vn=Oe.prev;Oe.remove(),Oe=vn}},Vs=function(Ee){var Ze={};for(var Oe in Ee)Oe!=="li"&&Oe!=="p"&&(Ze[Oe]=Ee[Oe]);return Ze},pc=eb({validate:rt,document:e.document,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,preserve_cdata:e.preserve_cdata,self_closing_elements:Vs(n.getSelfClosingElements()),cdata:function(Ee){Je.append(Bo("#cdata",4)).value=Ee},text:function(Ee,Ze){var Oe;Xr||(Ee=Ee.replace($t," "),eD(Je.lastChild,At)&&(Ee=Ee.replace(_t,""))),Ee.length!==0&&(Oe=Bo("#text",3),Oe.raw=!!Ze,Je.append(Oe).value=Ee)},comment:function(Ee){Je.append(Bo("#comment",8)).value=Ee},pi:function(Ee,Ze){Je.append(Bo(Ee,7)).value=Ze,lo(Je)},doctype:function(Ee){var Ze=Je.append(Bo("#doctype",10));Ze.value=Ee,lo(Je)},start:function(Ee,Ze,Oe){var Ft=rt?n.getElementRule(Ee):{};if(Ft){var mt=Bo(Ft.outputName||Ee,1);mt.attributes=Ze,mt.shortEnded=Oe,Je.append(mt);var vn=hn[Je.name];vn&&hn[mt.name]&&!vn[mt.name]&&Be.push(mt);for(var tr=i.length;tr--;){var Na=i[tr].name;Na in Ze.map&&(se=f[Na],se?se.push(mt):f[Na]=[mt])}At[Ee]&&lo(mt),Oe||(Je=mt),!Xr&&pt[Ee]&&(Xr=!0)}},end:function(Ee){var Ze,Oe,Ft,mt,vn=rt?n.getElementRule(Ee):{};if(vn){if(At[Ee]&&!Xr){if(Ze=Je.firstChild,Ze&&Ze.type===3)if(Oe=Ze.value.replace(_t,""),Oe.length>0)Ze.value=Oe,Ze=Ze.next;else for(Ft=Ze.next,Ze.remove(),Ze=Ft;Ze&&Ze.type===3;)Oe=Ze.value,Ft=Ze.next,(Oe.length===0||Bn.test(Oe))&&(Ze.remove(),Ze=Ft),Ze=Ft;if(Ze=Je.lastChild,Ze&&Ze.type===3)if(Oe=Ze.value.replace(qe,""),Oe.length>0)Ze.value=Oe,Ze=Ze.prev;else for(Ft=Ze.prev,Ze.remove(),Ze=Ft;Ze&&Ze.type===3;)Oe=Ze.value,Ft=Ze.prev,(Oe.length===0||Bn.test(Oe))&&(Ze.remove(),Ze=Ft),Ze=Ft}if(Xr&&pt[Ee]&&(Xr=!1),vn.removeEmpty&&Cb(n,Ye,pt,Je)){mt=Je.parent,At[Je.name]?Je.empty().remove():Je.unwrap(),Je=mt;return}vn.paddEmpty&&(QA(Je)||Cb(n,Ye,pt,Je))&&ZA(e,X,At,Je),Je=Je.parent}}},n),Ke=Je=new lc(X.context||e.root_name,11);if(pc.parse(G,X.format),rt&&Be.length&&(X.context?X.invalid=!0:g(Be)),tt&&(Ke.name==="body"||X.isRootContent)&&br(),!X.invalid){for(xe in s)if($n(s,xe)){for(se=a[xe],J=s[xe],ve=J.length;ve--;)J[ve].parent||J.splice(ve,1);for(ie=0,oe=se.length;ie<oe;ie++)se[ie](J,xe,X)}for(ie=0,oe=i.length;ie<oe;ie++)if(se=i[ie],se.name in f){for(J=f[se.name],ve=J.length;ve--;)J[ve].parent||J.splice(ve,1);for(ve=0,Ce=se.callbacks.length;ve<Ce;ve++)se.callbacks[ve](J,se.name,X)}}return Ke},q={schema:n,addAttributeFilter:N,getAttributeFilters:z,addNodeFilter:w,getNodeFilters:O,filterNode:b,parse:F};return fM(q,e),iM(q,e),q},dM=function(e,n,a){e.addAttributeFilter("data-mce-tabindex",function(i,s){for(var f=i.length;f--;){var g=i[f];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(s,null)}}),e.addAttributeFilter("src,href,style",function(i,s){for(var f="data-mce-"+s,g=n.url_converter,b=n.url_converter_scope,w=i.length;w--;){var O=i[w],N=O.attr(f);N!==void 0?(O.attr(s,N.length>0?N:null),O.attr(f,null)):(N=O.attr(s),s==="style"?N=a.serializeStyle(a.parseStyle(N),O.name):g&&(N=g.call(b,N,s,O.name)),O.attr(s,N.length>0?N:null))}}),e.addAttributeFilter("class",function(i){for(var s=i.length;s--;){var f=i[s],g=f.attr("class");g&&(g=f.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",g.length>0?g:null))}}),e.addAttributeFilter("data-mce-type",function(i,s,f){for(var g=i.length;g--;){var b=i[g];if(b.attr("data-mce-type")==="bookmark"&&!f.cleanup){var w=ee.from(b.firstChild).exists(function(O){return!ku(O.value)});w?b.unwrap():b.remove()}}}),e.addNodeFilter("noscript",function(i){for(var s=i.length;s--;){var f=i[s].firstChild;f&&(f.value=zs.decode(f.value))}}),e.addNodeFilter("script,style",function(i,s){for(var f=function(N){return N.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},g=i.length;g--;){var b=i[g],w=b.firstChild?b.firstChild.value:"";if(s==="script"){var O=b.attr("type");O&&b.attr("type",O==="mce-no/type"?null:O.replace(/^mce\-/,"")),n.element_format==="xhtml"&&w.length>0&&(b.firstChild.value=`// <![CDATA[
`+f(w)+`
// ]]>`)}else n.element_format==="xhtml"&&w.length>0&&(b.firstChild.value=`<!--
`+f(w)+`
-->`)}}),e.addNodeFilter("#comment",function(i){for(var s=i.length;s--;){var f=i[s];n.preserve_cdata&&f.value.indexOf("[CDATA[")===0?(f.name="#cdata",f.type=4,f.value=a.decode(f.value.replace(/^\[CDATA\[|\]\]$/g,""))):f.value.indexOf("mce:protected ")===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(f.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",function(i,s){for(var f=i.length;f--;){var g=i[f];g.type===7?g.remove():g.type===1&&s==="input"&&!g.attr("type")&&g.attr("type","text")}}),e.addAttributeFilter("data-mce-type",function(i){ft(i,function(s){s.attr("data-mce-type")==="format-caret"&&(s.isEmpty(e.schema.getNonEmptyElements())?s.remove():s.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(i,s){for(var f=i.length;f--;)i[f].attr(s,null)})},iD=function(e){var n=function(s){return s&&s.name==="br"},a=e.lastChild;if(n(a)){var i=a.prev;n(i)&&(a.remove(),i.remove())}},uD=function(e,n,a){var i,s=e.dom,f=n.cloneNode(!0),g=document.implementation;if(g.createHTMLDocument){var b=g.createHTMLDocument("");Ne.each(f.nodeName==="BODY"?f.childNodes:[f],function(w){b.body.appendChild(b.importNode(w,!0))}),f.nodeName!=="BODY"?f=b.body.firstChild:f=b.body,i=s.doc,s.doc=b}return zC(e,Jt(Jt({},a),{node:f})),i&&(s.doc=i),f},mM=function(e,n){return e&&e.hasEventListeners("PreProcess")&&!n.no_events},gM=function(e,n,a){return mM(e,a)?uD(e,n,a):n},hM=function(e,n,a){Ne.inArray(n,a)===-1&&(e.addAttributeFilter(a,function(i,s){for(var f=i.length;f--;)i[f].attr(s,null)}),n.push(a))},pM=function(e,n,a){if(!n.no_events&&e){var i=bh(e,Jt(Jt({},n),{content:a}));return i.content}else return a},sD=function(e,n,a){var i=ol(a.getInner?n.innerHTML:e.getOuterHTML(n));return a.selection||rd(M.fromDom(n))?i:Ne.trim(i)},bM=function(e,n,a){var i=a.selection?Jt({forced_root_block:!1},a):a,s=e.parse(n,i);return iD(s),s},yM=function(e,n,a){var i=Kd(e,n);return i.serialize(a)},wM=function(e,n,a,i,s){var f=yM(n,a,i);return pM(e,s,f)},CM=function(e,n){var a=["data-mce-selected"],i=n&&n.dom?n.dom:Ea.DOM,s=n&&n.schema?n.schema:er(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;var f=I3(e,s);dM(f,e,i);var g=function(b,w){w===void 0&&(w={});var O=Jt({format:"html"},w),N=gM(n,b,O),z=sD(i,N,O),F=bM(f,z,O);return O.format==="tree"?F:wM(n,e,s,F,O)};return{schema:s,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:g,addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:et(hM,f,a),getTempAttrs:W(a),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters}},cD=function(e,n){var a=CM(e,n);return{schema:a.schema,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:a.serialize,addRules:a.addRules,setRules:a.setRules,addTempAttr:a.addTempAttr,getTempAttrs:a.getTempAttrs,getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters}},SM="html",xM=function(e,n){n===void 0&&(n={});var a=n.format?n.format:SM;return Cg(e,n,a)},F3=function(e,n,a){return a===void 0&&(a={}),A3(e,n,a)},k2=Ea.DOM,TM=function(e){k2.setStyle(e.id,"display",e.orgDisplay)},cx=function(e){return ee.from(e).each(function(n){return n.destroy()})},kM=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},EM=function(e){var n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),k2.unbind(n,"submit reset",e.formEventDelegate))},OM=function(e){if(!e.removed){var n=e._selectionOverrides,a=e.editorUpload,i=e.getBody(),s=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&s&&k2.remove(s.nextSibling),qk(e),e.editorManager.remove(e),!e.inline&&i&&TM(e),Sy(e),k2.remove(e.getContainer()),cx(n),cx(a),e.destroy()}},E2=function(e,n){var a=e.selection,i=e.dom;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),cx(a),cx(i)),EM(e),kM(e),e.destroyed=!0}},AM=function(e,n){var a=Ct(e)&&Ct(n);return a?L3(e,n):n},DM=function(e){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(n.length===0)throw new Error("Can't merge zero objects");for(var i={},s=0;s<n.length;s++){var f=n[s];for(var g in f)$n(f,g)&&(i[g]=e(i[g],f[g]))}return i}},L3=DM(AM),lD="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),RM="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),_M="imagetools,toc".split(","),BM=function(e){var n=jt(lD,function(i){return $n(e,i)}),a=e.forced_root_block;return(a===!1||a==="")&&n.push("forced_root_block (false only)"),sa(n)},O2=function(e){var n=Ne.makeMap(e.plugins," "),a=function(s){return $n(n,s)},i=Ko(Ko([],jt(RM,a),!0),nu(_M,function(s){return a(s)?[s+" (moving to premium)"]:[]}),!0);return sa(i)},fD=function(e,n){var a=BM(e),i=O2(n),s=i.length>0,f=a.length>0,g=n.theme==="mobile";if(s||f||g){var b=`
- `,w=g?`

Themes:`+b+"mobile":"",O=s?`

Plugins:`+b+i.join(b):"",N=f?`

Settings:`+b+a.join(b):"";console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+w+O+N)}},vD=function(e,n){return{sections:W(e),settings:W(n)}},H3=Ut().deviceType,dD=H3.isTouch(),mD=H3.isPhone(),MM=H3.isTablet(),PM=["lists","autolink","autosave"],V3={table_grid:!1,object_resizing:!1,resize:!1},A2=function(e){var n=_n(e)?e.join(" "):e,a=Hn(cr(n)?n.split(" "):[],Sa);return jt(a,function(i){return i.length>0})},NM=function(e){return jt(e,et(tn,PM))},$M=function(e,n){var a=hr(n,function(i,s){return tn(e,s)});return vD(a.t,a.f)},gD=function(e,n,a){a===void 0&&(a={});var i=e.sections(),s=pr(i,n).getOr({});return Ne.extend({},a,s)},lx=function(e,n){return $n(e.sections(),n)},zM=function(e,n,a){var i=e.sections();return lx(e,n)&&i[n].theme===a},D2=function(e,n){return lx(e,n)?e.sections()[n]:{}},U3=function(e,n){return pr(e,"toolbar_mode").orThunk(function(){return pr(e,"toolbar_drawer").map(function(a){return a===!1?"wrap":a})}).getOr(n)},hD=function(e,n,a,i,s){var f={id:n,theme:"silver",toolbar_mode:U3(e,"floating"),plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s};return Jt(Jt({},f),i?V3:{})},IM=function(e,n){var a={resize:!1,toolbar_mode:U3(e,"scrolling"),toolbar_sticky:!1},i={menubar:!1};return Jt(Jt(Jt({},V3),a),n?i:{})},FM=function(e,n){var a=n.external_plugins?n.external_plugins:{};return e&&e.external_plugins?Ne.extend({},e.external_plugins,a):a},LM=function(e,n){return[].concat(A2(e)).concat(A2(n))},pD=function(e,n,a,i){return e&&zM(n,"mobile","mobile")?NM(i):e&&lx(n,"mobile")?i:a},HM=function(e,n,a,i){var s=A2(a.forced_plugins),f=A2(i.plugins),g=D2(n,"mobile"),b=g.plugins?A2(g.plugins):f,w=pD(e,n,f,b),O=LM(s,w);if(Qt.browser.isIE()&&tn(O,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return Ne.extend(i,{plugins:O.join(" ")})},VM=function(e,n){return e&&lx(n,"mobile")},UM=function(e,n,a,i,s){var f=e?{mobile:IM(s.mobile||{},n)}:{},g=$M(["mobile"],L3(f,s)),b=Ne.extend(a,i,g.settings(),VM(e,g)?gD(g,"mobile"):{},{validate:!0,external_plugins:FM(i,g.settings())});return HM(e,g,i,b)},WM=function(e,n,a,i,s){var f=hD(s,n,a,dD,e),g=UM(mD||MM,mD,f,i,s);return g.deprecation_warnings!==!1&&fD(s,g),g},Jh=function(e,n,a){return ee.from(n.settings[a]).filter(e)},Nu=function(e){var n={};return typeof e=="string"?ft(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(a){var i=a.split("=");i.length>1?n[Ne.trim(i[0])]=Ne.trim(i[1]):n[Ne.trim(i[0])]=Ne.trim(i[0])}):n=e,n},bD=function(e){return function(n){return _n(n)&&Li(n,e)}},jM=function(e,n,a,i){var s=n in e.settings?e.settings[n]:a;return i==="hash"?Nu(s):i==="string"?Jh(cr,e,n).getOr(a):i==="number"?Jh(kn,e,n).getOr(a):i==="boolean"?Jh(Lt,e,n).getOr(a):i==="object"?Jh(Ct,e,n).getOr(a):i==="array"?Jh(_n,e,n).getOr(a):i==="string[]"?Jh(bD(cr),e,n).getOr(a):i==="function"?Jh(Mt,e,n).getOr(a):s},GM=function(){var e={},n=function(s,f){e[s]=f},a=function(s){return e[s]?e[s]:{icons:{}}},i=function(s){return $n(e,s)};return{add:n,get:a,has:i}},fx=GM(),yD=function(e,n){var a=n.dom;return a[e]},Rr=function(e,n){return parseInt(jn(n,e),10)},qM=et(yD,"clientWidth"),KM=et(yD,"clientHeight"),XM=et(Rr,"margin-top"),yo=et(Rr,"margin-left"),YM=function(e){return e.dom.getBoundingClientRect()},R2=function(e,n,a){var i=qM(e),s=KM(e);return n>=0&&a>=0&&n<=i&&a<=s},JM=function(e,n,a,i){var s=YM(n),f=e?s.left+n.dom.clientLeft+yo(n):0,g=e?s.top+n.dom.clientTop+XM(n):0,b=a-f,w=i-g;return{x:b,y:w}},wD=function(e,n,a){var i=M.fromDom(e.getBody()),s=e.inline?i:us(i),f=JM(e.inline,s,n,a);return R2(s,f.x,f.y)},ZM=function(e){return ee.from(e).map(M.fromDom)},CD=function(e){var n=e.inline?e.getBody():e.getContentAreaContainer();return ZM(n).map(vf).getOr(!1)},Sg=function(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}},vc=function(e){var n=[],a=function(){var F=e.theme;return F&&F.getNotificationManagerImpl?F.getNotificationManagerImpl():Sg()},i=function(){return ee.from(n[0])},s=function(F,q){return F.type===q.type&&F.text===q.text&&!F.progressBar&&!F.timeout&&!q.progressBar&&!q.timeout},f=function(){n.length>0&&a().reposition(n)},g=function(F){n.push(F)},b=function(F){Si(n,function(q){return q===F}).each(function(q){n.splice(q,1)})},w=function(F,q){if(q===void 0&&(q=!0),!(e.removed||!CD(e)))return q&&e.fire("BeforeOpenNotification",{notification:F}),ua(n,function(G){return s(a().getArgs(G),F)}).getOrThunk(function(){e.editorManager.setActive(e);var G=a().open(F,function(){b(G),f(),i().fold(function(){return e.focus()},function(X){return u4(M.fromDom(X.getEl()))})});return g(G),f(),e.fire("OpenNotification",{notification:Jt({},G)}),G})},O=function(){i().each(function(F){a().close(F),b(F),f()})},N=W(n),z=function(F){F.on("SkinLoaded",function(){var q=q0(F);q&&w({text:q,type:"warning",timeout:0},!1),f()}),F.on("show ResizeEditor ResizeWindow NodeChange",function(){Ki.requestAnimationFrame(f)}),F.on("remove",function(){ft(n.slice(),function(q){a().close(q)})})};return z(e),{open:w,close:O,getNotifications:N}},dc=oa.PluginManager,Wc=oa.ThemeManager;function Lv(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}var Sb=function(e){var n=[],a=function(){var X=e.theme;return X&&X.getWindowManagerImpl?X.getWindowManagerImpl():Lv()},i=function(X,J){return function(){for(var ie=[],oe=0;oe<arguments.length;oe++)ie[oe]=arguments[oe];return J?J.apply(X,ie):void 0}},s=function(X){e.fire("OpenWindow",{dialog:X})},f=function(X){e.fire("CloseWindow",{dialog:X})},g=function(X){n.push(X),s(X)},b=function(X){f(X),n=jt(n,function(J){return J!==X}),n.length===0&&e.focus()},w=function(){return ee.from(n[n.length-1])},O=function(X){e.editorManager.setActive(e),fg(e);var J=X();return g(J),J},N=function(X,J){return O(function(){return a().open(X,J,b)})},z=function(X){return O(function(){return a().openUrl(X,b)})},F=function(X,J,ie){var oe=a();oe.alert(X,i(ie||oe,J))},q=function(X,J,ie){var oe=a();oe.confirm(X,i(ie||oe,J))},G=function(){w().each(function(X){a().close(X),b(X)})};return e.on("remove",function(){ft(n,function(X){a().close(X)})}),{open:N,openUrl:z,alert:F,confirm:q,close:G}},vx=function(e,n){e.notificationManager.open({type:"error",text:n})},xb=function(e,n){e._skinLoaded?vx(e,n):e.on("SkinLoaded",function(){vx(e,n)})},SD=function(e,n){xb(e,Yn.translate(["Failed to upload image: {0}",n]))},dx=function(e,n,a){ky(e,n,{message:a}),console.error(a)},W3=function(e,n,a){return a?"Failed to load "+e+": "+a+" from url "+n:"Failed to load "+e+" url: "+n},mx=function(e,n,a){dx(e,"PluginLoadError",W3("plugin",n,a))},xD=function(e,n,a){dx(e,"IconsLoadError",W3("icons",n,a))},QM=function(e,n,a){dx(e,"LanguageLoadError",W3("language",n,a))},TD=function(e,n,a){var i=Yn.translate(["Failed to initialize plugin: {0}",n]);ky(e,"PluginLoadError",{message:i}),gx(i,a),xb(e,i)},gx=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=window.console;i&&(i.error?i.error.apply(i,Ko([e],n,!1)):i.log.apply(i,Ko([e],n,!1)))},_2=function(e){return/^[a-z0-9\-]+$/i.test(e)},kD=function(e){return Hv(e,dk(e))},ED=function(e){return Hv(e,y1(e))},Hv=function(e,n){var a=e.editorManager.baseURL+"/skins/content",i=e.editorManager.suffix,s="content"+i+".css",f=e.inline===!0;return Hn(n,function(g){return _2(g)&&!f?a+"/"+g+"/"+s:e.documentBaseURI.toAbsolute(g)})},j3=function(e){e.contentCSS=e.contentCSS.concat(kD(e),ED(e))},OD=function(){var e=1,n=2,a={},i=function(F,q){return{status:F,resultUri:q}},s=function(F){return F in a},f=function(F){var q=a[F];return q?q.resultUri:null},g=function(F){return s(F)?a[F].status===e:!1},b=function(F){return s(F)?a[F].status===n:!1},w=function(F){a[F]=i(e,null)},O=function(F,q){a[F]=i(n,q)},N=function(F){delete a[F]},z=function(){a={}};return{hasBlobUri:s,getResultUri:f,isPending:g,isUploaded:b,markPending:w,markUploaded:O,removeFailed:N,destroy:z}},eP=0,tP=function(){var e=function(){return Math.round(Math.random()*4294967295).toString(36)},n=new Date().getTime();return"s"+n.toString(36)+e()+e()+e()},Zh=function(e){return e+eP+++tP()},nP=function(){var e=[],n=function(z){var F={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};return F[z.toLowerCase()]||"dat"},a=function(z,F,q,G,X){if(cr(z)){var J=z;return i({id:J,name:G,filename:X,blob:F,base64:q})}else{if(Ct(z))return i(z);throw new Error("Unknown input type")}},i=function(z){if(!z.blob||!z.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var F=z.id||Zh("blobid"),q=z.name||F,G=z.blob;return{id:W(F),name:W(q),filename:W(z.filename||q+"."+n(G.type)),blob:W(G),base64:W(z.base64),blobUri:W(z.blobUri||URL.createObjectURL(G)),uri:W(z.uri)}},s=function(z){g(z.id())||e.push(z)},f=function(z){return ua(e,z).getOrUndefined()},g=function(z){return f(function(F){return F.id()===z})},b=function(z){return f(function(F){return F.blobUri()===z})},w=function(z,F){return f(function(q){return q.base64()===z&&q.blob().type===F})},O=function(z){e=jt(e,function(F){return F.blobUri()===z?(URL.revokeObjectURL(F.blobUri()),!1):!0})},N=function(){ft(e,function(z){URL.revokeObjectURL(z.blobUri())}),e=[]};return{create:a,add:s,get:g,getByUri:b,getByData:w,findFirst:f,removeByUri:O,destroy:N}},rP=function(e,n){var a={},i=function(G,X){return G?G.replace(/\/$/,"")+"/"+X.replace(/^\//,""):X},s=function(G,X,J,ie){var oe=new XMLHttpRequest;oe.open("POST",n.url),oe.withCredentials=n.credentials,oe.upload.onprogress=function(Ce){ie(Ce.loaded/Ce.total*100)},oe.onerror=function(){J("Image upload failed due to a XHR Transport error. Code: "+oe.status)},oe.onload=function(){if(oe.status<200||oe.status>=300){J("HTTP Error: "+oe.status);return}var Ce=JSON.parse(oe.responseText);if(!Ce||typeof Ce.location!="string"){J("Invalid JSON: "+oe.responseText);return}X(i(n.basePath,Ce.location))};var ve=new FormData;ve.append("file",G.blob(),G.filename()),oe.send(ve)},f=function(){return new si(function(G){G([])})},g=function(G,X){return{url:X,blobInfo:G,status:!0}},b=function(G,X,J){return{url:"",blobInfo:G,status:!1,error:{message:X,options:J}}},w=function(G,X){Ne.each(a[G],function(J){J(X)}),delete a[G]},O=function(G,X,J){return e.markPending(G.blobUri()),new si(function(ie){var oe,ve;try{var Ce=function(){oe&&(oe.close(),ve=Tt)},se=function(Be){Ce(),e.markUploaded(G.blobUri(),Be),w(G.blobUri(),g(G,Be)),ie(g(G,Be))},xe=function(Be,Je){var rn=Je||{};Ce(),e.removeFailed(G.blobUri()),w(G.blobUri(),b(G,Be,rn)),ie(b(G,Be,rn))};ve=function(Be){Be<0||Be>100||ee.from(oe).orThunk(function(){return ee.from(J).map(D)}).each(function(Je){oe=Je,Je.progressBar.value(Be)})},X(G,se,xe,ve)}catch(Be){ie(b(G,Be.message,{}))}})},N=function(G){return G===s},z=function(G){var X=G.blobUri();return new si(function(J){a[X]=a[X]||[],a[X].push(J)})},F=function(G,X){return G=Ne.grep(G,function(J){return!e.isUploaded(J.blobUri())}),si.all(Ne.map(G,function(J){return e.isPending(J.blobUri())?z(J):O(J,n.handler,X)}))},q=function(G,X){return!n.url&&N(n.handler)?f():F(G,X)};return Mt(n.handler)===!1&&(n.handler=s),{upload:q}},Qi=function(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},AD=function(e,n){return rP(n,{url:Rf(e),basePath:p1(e),credentials:vk(e),handler:Sv(e)})},DD=function(e){var n=OD(),a=AD(e,n);return{upload:function(i,s){return s===void 0&&(s=!0),a.upload(i,s?Qi(e):void 0)}}},RD=function(e){var n=Au(null);e.on("change AddUndo",function(i){n.set(Jt({},i.level))});var a=function(){var i=e.undoManager.data;Gr(i).filter(function(s){return!bb(n.get(),s)}).each(function(s){e.setDirty(!0),e.fire("change",{level:s,lastLevel:ta(i,i.length-2).getOrNull()})})};return{fireIfChanged:a}},_D=function(e){var n=nP(),a,i,s=OD(),f=[],g=RD(e),b=function(Ce){return function(se){return e.selection?Ce(se):[]}},w=function(Ce){return Ce+(Ce.indexOf("?")===-1?"?":"&")+new Date().getTime()},O=function(Ce,se,xe){var Be=0;do Be=Ce.indexOf(se,Be),Be!==-1&&(Ce=Ce.substring(0,Be)+xe+Ce.substr(Be+se.length),Be+=xe.length-se.length+1);while(Be!==-1);return Ce},N=function(Ce,se,xe){var Be='src="'+xe+'"'+(xe===Qt.transparentSrc?' data-mce-placeholder="1"':"");return Ce=O(Ce,'src="'+se+'"',Be),Ce=O(Ce,'data-mce-src="'+se+'"','data-mce-src="'+xe+'"'),Ce},z=function(Ce,se){ft(e.undoManager.data,function(xe){xe.type==="fragmented"?xe.fragments=Hn(xe.fragments,function(Be){return N(Be,Ce,se)}):xe.content=N(xe.content,Ce,se)})},F=function(Ce,se){var xe=e.convertURL(se,"src");z(Ce.src,se),e.$(Ce).attr({src:m1(e)?w(se):se,"data-mce-src":xe})},q=function(Ce){return a||(a=AD(e,s)),ie().then(b(function(se){var xe=Hn(se,function(Be){return Be.blobInfo});return a.upload(xe,Qi(e)).then(b(function(Be){var Je=[],rn=Hn(Be,function(At,Ye){var hn=se[Ye].blobInfo,rt=se[Ye].image;return At.status&&g1(e)?(n.removeByUri(rt.src),nm(e)||F(rt,At.url)):At.error&&(At.error.options.remove&&(z(rt.getAttribute("src"),Qt.transparentSrc),Je.push(rt)),SD(e,At.error.message)),{element:rt,status:At.status,uploadUri:At.url,blobInfo:hn}});return rn.length>0&&g.fireIfChanged(),Je.length>0&&(nm(e)?console.error("Removing images on failed uploads is currently unsupported for RTC"):e.undoManager.transact(function(){ft(Je,function(At){e.dom.remove(At),n.removeByUri(At.src)})})),Ce&&Ce(rn),rn}))}))},G=function(Ce){if(Cv(e))return q(Ce)},X=function(Ce){if(Li(f,function(xe){return xe(Ce)})===!1)return!1;if(Ce.getAttribute("src").indexOf("data:")===0){var se=ah(e);return se(Ce)}return!0},J=function(Ce){f.push(Ce)},ie=function(){return i||(i=lM(s,n)),i.findAll(e.getBody(),X).then(b(function(Ce){return Ce=jt(Ce,function(se){return typeof se=="string"?(xb(e,se),!1):!0}),nm(e)||ft(Ce,function(se){z(se.image.src,se.blobInfo.blobUri()),se.image.src=se.blobInfo.blobUri(),se.image.removeAttribute("data-mce-src")}),Ce}))},oe=function(){n.destroy(),s.destroy(),i=a=null},ve=function(Ce){return Ce.replace(/src="(blob:[^"]+)"/g,function(se,xe){var Be=s.getResultUri(xe);if(Be)return'src="'+Be+'"';var Je=n.getByUri(xe);if(Je||(Je=jr(e.editorManager.get(),function(At,Ye){return At||Ye.editorUpload&&Ye.editorUpload.blobCache.getByUri(xe)},null)),Je){var rn=Je.blob();return'src="data:'+rn.type+";base64,"+Je.base64()+'"'}return se})};return e.on("SetContent",function(){Cv(e)?G():ie()}),e.on("RawSaveContent",function(Ce){Ce.content=ve(Ce.content)}),e.on("GetContent",function(Ce){Ce.source_view||Ce.format==="raw"||Ce.format==="tree"||(Ce.content=ve(Ce.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(Ce){ft(Ce,function(se){var xe=se.attr("src");if(!n.getByUri(xe)){var Be=s.getResultUri(xe);Be&&se.attr("src",Be)}})})}),{blobCache:n,addFilter:J,uploadImages:q,uploadImagesAuto:G,scanForImages:ie,destroy:oe}},BD=function(e){var n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a,i,s){return Sn(a)&&a.hasAttribute("href")},onformat:function(a,i,s){Ne.each(s,function(f,g){e.setAttrib(a,g,f)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(a){var i;return(i=a==null?void 0:a.customValue)!==null&&i!==void 0?i:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ne.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(a){n[a]={block:a,remove:"all"}}),n},G3=function(e){var n={},a=function(g){return Rn(g)?n[g]:n},i=function(g){return $n(n,g)},s=function(g,b){g&&(cr(g)?(_n(b)||(b=[b]),ft(b,function(w){Bt(w.deep)&&(w.deep=!Ls(w)),Bt(w.split)&&(w.split=!Ls(w)||$i(w)),Bt(w.remove)&&Ls(w)&&!$i(w)&&(w.remove="none"),Ls(w)&&$i(w)&&(w.mixed=!0,w.block_expand=!0),cr(w.classes)&&(w.classes=w.classes.split(/\s+/))}),n[g]=b):Zn(g,function(w,O){s(O,w)}))},f=function(g){return g&&n[g]&&delete n[g],n};return s(BD(e.dom)),s(hk(e)),{get:a,has:i,register:s,unregister:f}},hx=Ne.each,xs=Ea.DOM,MD=function(e,n){var a,i,s,f=n&&n.schema||er({}),g=function(N,z){z.classes.length&&xs.addClass(N,z.classes.join(" ")),xs.setAttribs(N,z.attrs)},b=function(N){i=typeof N=="string"?{name:N,classes:[],attrs:{}}:N;var z=xs.create(i.name);return g(z,i),z},w=function(N,z){var F=typeof N!="string"?N.nodeName.toLowerCase():N,q=f.getElementRule(F),G=q&&q.parentsRequired;return G&&G.length?z&&Ne.inArray(G,z)!==-1?z:G[0]:!1},O=function(N,z,F){var q,G,X=z.length>0&&z[0],J=X&&X.name,ie=w(N,J);if(ie)J===ie?(G=z[0],z=z.slice(1)):G=ie;else if(X)G=z[0],z=z.slice(1);else if(!F)return N;return G&&(q=b(G),q.appendChild(N)),F&&(q||(q=xs.create("div"),q.appendChild(N)),Ne.each(F,function(oe){var ve=b(oe);q.insertBefore(ve,N)})),O(q,z,G&&G.siblings)};return e&&e.length?(i=e[0],a=b(i),s=xs.create("div"),s.appendChild(O(a,e.slice(1),i.siblings)),s):""},aP=function(e){var n,a={classes:[],attrs:{}};return e=a.selector=Ne.trim(e),e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(i,s,f,g,b){switch(s){case"#":a.attrs.id=f;break;case".":a.classes.push(f);break;case":":Ne.inArray("checked disabled enabled read-only required".split(" "),f)!==-1&&(a.attrs[f]=f);break}if(g==="["){var w=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);w&&(a.attrs[w[1]]=w[2])}return""})),a.name=n||"div",a},oP=function(e){return!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ne.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(n){var a=Ne.map(n.split(/(?:~\+|~|\+)/),aP),i=a.pop();return a.length&&(i.siblings=a),i}).reverse())},Vv=function(e,n){var a,i,s="",f,g=pk(e);if(g==="")return"";var b=function(z){return z.replace(/%(\w+)/g,"")};if(typeof n=="string"){if(n=e.formatter.get(n),!n)return;n=n[0]}if("preview"in n){var w=pr(n,"preview");if(td(w,!1))return"";g=w.getOr(g)}a=n.block||n.inline||"span";var O=oP(n.selector);O.length?(O[0].name||(O[0].name=a),a=n.selector,i=MD(O,e)):i=MD([a],e);var N=xs.select(a,i)[0]||i.firstChild;return hx(n.styles,function(z,F){var q=b(z);q&&xs.setStyle(N,F,q)}),hx(n.attributes,function(z,F){var q=b(z);q&&xs.setAttrib(N,F,q)}),hx(n.classes,function(z){var F=b(z);xs.hasClass(N,F)||xs.addClass(N,F)}),e.fire("PreviewFormats"),xs.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),f=xs.getStyle(e.getBody(),"fontSize",!0),f=/px$/.test(f)?parseInt(f,10):0,hx(g.split(" "),function(z){var F=xs.getStyle(N,z,!0);if(!(z==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(F)&&(F=xs.getStyle(e.getBody(),z,!0),xs.toHex(F).toLowerCase()==="#ffffff"))&&!(z==="color"&&xs.toHex(F).toLowerCase()==="#000000")){if(z==="font-size"&&/em|%$/.test(F)){if(f===0)return;var q=parseFloat(F)/(/%$/.test(F)?100:1);F=q*f+"px"}z==="border"&&F&&(s+="padding:0 2px;"),s+=z+":"+F+";"}}),e.fire("AfterPreviewFormats"),xs.remove(i),s},iP=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},PD=function(e){var n=G3(e),a=Au(null);return iP(e),o5(e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:function(i,s,f){HA(e,i,s,f)},remove:function(i,s,f,g){ax(e,i,s,f,g)},toggle:function(i,s,f){J5(e,i,s,f)},match:function(i,s,f,g){return X5(e,i,s,f,g)},closest:function(i){return LA(e,i)},matchAll:function(i,s){return Y5(e,i,s)},matchNode:function(i,s,f,g){return O3(e,i,s,f,g)},canApply:function(i){return C2(e,i)},formatChanged:function(i,s,f,g){return Z5(e,a,i,s,f,g)},getCssText:et(Vv,e)}},ND=function(e){switch(e.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return!0;default:return!1}},uP=function(e,n,a){var i=Au(!1),s=function(w){rx(n,!1,a),n.add({},w)};e.on("init",function(){n.add()}),e.on("BeforeExecCommand",function(w){var O=w.command;ND(O)||(Yh(n,a),n.beforeChange())}),e.on("ExecCommand",function(w){var O=w.command;ND(O)||s(w)}),e.on("ObjectResizeStart cut",function(){n.beforeChange()}),e.on("SaveContent ObjectResized blur",s),e.on("dragend",s),e.on("keyup",function(w){var O=w.keyCode;w.isDefaultPrevented()||((O>=33&&O<=36||O>=37&&O<=40||O===45||w.ctrlKey)&&(s(),e.nodeChanged()),(O===46||O===8)&&e.nodeChanged(),i.get()&&n.typing&&bb(C3(e),n.data[0])===!1&&(e.isDirty()===!1&&(e.setDirty(!0),e.fire("change",{level:n.data[0],lastLevel:null})),e.fire("TypingUndo"),i.set(!1),e.nodeChanged()))}),e.on("keydown",function(w){var O=w.keyCode;if(!w.isDefaultPrevented()){if(O>=33&&O<=36||O>=37&&O<=40||O===45){n.typing&&s(w);return}var N=w.ctrlKey&&!w.altKey||w.metaKey;(O<16||O>20)&&O!==224&&O!==91&&!n.typing&&!N&&(n.beforeChange(),rx(n,!0,a),n.add({},w),i.set(!0))}}),e.on("mousedown",function(w){n.typing&&s(w)});var f=function(w){return w.inputType==="insertReplacementText"},g=function(w){return w.inputType==="insertText"&&w.data===null},b=function(w){return w.inputType==="insertFromPaste"||w.inputType==="insertFromDrop"};e.on("input",function(w){w.inputType&&(f(w)||g(w)||b(w))&&s(w)}),e.on("AddUndo Undo Redo ClearUndos",function(w){w.isDefaultPrevented()||e.nodeChanged()})},sP=function(e){e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},wo=function(e){var n=mv(),a=Au(0),i=Au(0),s={data:[],typing:!1,beforeChange:function(){W5(e,a,n)},add:function(f,g){return PA(e,s,i,a,n,f,g)},undo:function(){return j5(e,s,a,i)},redo:function(){return G5(e,i,s.data)},clear:function(){NA(e,s,i)},reset:function(){$A(e,s)},hasUndo:function(){return zA(e,s,i)},hasRedo:function(){return IA(e,s,i)},transact:function(f){return FA(e,s,a,f)},ignore:function(f){q5(e,a,f)},extra:function(f,g){K5(e,s,i,f,g)}};return nm(e)||uP(e,s,a),sP(e),s},$D=[9,27,ln.HOME,ln.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ln.DOWN,ln.UP,ln.LEFT,ln.RIGHT].concat(Qt.browser.isFirefox()?[224]:[]),q3="data-mce-placeholder",Yl=function(e){return e.type==="keydown"||e.type==="keyup"},K3=function(e){var n=e.keyCode;return n===ln.BACKSPACE||n===ln.DELETE},cP=function(e){if(Yl(e)){var n=e.keyCode;return!K3(e)&&(ln.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||tn($D,n))}else return!1},lP=function(e){return Yl(e)&&!(K3(e)||e.type==="keyup"&&e.keyCode===229)},X3=function(e,n,a){if(Ri(M.fromDom(n),!1)){var i=a==="",s=n.firstElementChild;return s?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:i?!e.isBlock(s):a===s.nodeName.toLowerCase():!0}else return!1},fP=function(e){var n=e.dom,a=Pi(e),i=gk(e),s=function(f,g){if(!cP(f)){var b=e.getBody(),w=lP(f)?!1:X3(n,b,a),O=n.getAttrib(b,q3)!=="";(O!==w||g)&&(n.setAttrib(b,q3,w?i:null),n.setAttrib(b,"aria-placeholder",w?i:null),LC(e,w),e.on(w?"keydown":"keyup",s),e.off(w?"keyup":"keydown",s))}};i&&e.on("init",function(f){s(f,!0),e.on("change SetContent ExecCommand",s),e.on("paste",function(g){return Ki.setEditorTimeout(e,function(){return s(g)})})})},Tb=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,vP=function(e){return Tb.test(e)},xg=function(e,n){return xt(M.fromDom(n),mk(e))},zD=function(e){return Ea.DOM.getStyle(e,"direction",!0)==="rtl"||vP(e.textContent)},Y3=function(e,n,a){return jt(Ea.DOM.getParents(a.container(),"*",n),e)},rm=function(e,n,a){var i=Y3(e,n,a);return ee.from(i[i.length-1])},J3=function(e,n,a){var i=Hl(n,e),s=Hl(a,e);return i&&i===s},dP=function(e){return nn(e)||Op(e)},bl=function(e,n){if(!n)return n;var a=n.container(),i=n.offset();return e?ma(a)?Pt(a.nextSibling)?Re(a.nextSibling,0):Re.after(a):nn(n)?Re(a,i+1):n:ma(a)?Pt(a.previousSibling)?Re(a.previousSibling,a.previousSibling.data.length):Re.before(a):Op(n)?Re(a,i-1):n},ID=et(bl,!0),yl=et(bl,!1),mP=function(e){return function(n){return gn(e,M.fromDom(n.dom.parentNode))}},gP=function(e){return _l(e)||Xi(e)},px=function(e,n){return Hr(e,n)?bm(n,gP,mP(e)):ee.none()},B2=function(e){var n=e.getBody(),a=n.firstChild&&e.dom.isBlock(n.firstChild)?n.firstChild:n;e.selection.setCursorLocation(a,0)},FD=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),B2(e))},LD=function(e,n,a){return lu(_u(a),vl(a),function(i,s){var f=bl(!0,i),g=bl(!1,s),b=bl(!1,n);return e?oc(a,b).exists(function(w){return w.isEqual(g)&&n.isEqual(f)}):ic(a,b).exists(function(w){return w.isEqual(f)&&n.isEqual(g)})}).getOr(!0)},HD=function(e,n){return{block:e,position:n}},VD=function(e,n){return{from:e,to:n}},Z3=function(e,n){var a=M.fromDom(e),i=M.fromDom(n.container());return px(a,i).map(function(s){return HD(s,n)})},hP=function(e){return gn(e.from.block,e.to.block)===!1},Tg=function(e){return ja(e.from.block).bind(function(n){return ja(e.to.block).filter(function(a){return gn(n,a)})}).isSome()},pP=function(e){return Ra(e.from.block.dom)===!1&&Ra(e.to.block.dom)===!1},bP=function(e,n,a){return ra(a.position.getNode())&&Ri(a.block)===!1?ac(!1,a.block.dom).bind(function(i){return i.isEqual(a.position)?Zi(n,e,i).bind(function(s){return Z3(e,s)}):ee.some(a)}).getOr(a):a},yP=function(e,n,a){var i=Z3(e,Re.fromRangeStart(a)),s=i.bind(function(f){return Zi(n,e,f.position).bind(function(g){return Z3(e,g).map(function(b){return bP(e,n,b)})})});return lu(i,s,VD).filter(function(f){return hP(f)&&Tg(f)&&pP(f)})},wP=function(e,n,a){return a.collapsed?yP(e,n,a):ee.none()},CP=function(e){var n=cu(e);return Si(n,Ms).fold(W(n),function(a){return n.slice(0,a)})},UD=function(e){var n=CP(e);return ft(n,Za),n},WD=function(e,n){var a=If(n,e);return ua(a.reverse(),function(i){return Ri(i)}).each(Za)},SP=function(e){return jt(_r(e),function(n){return!Ri(n)}).length===0},xP=function(e,n,a,i){if(Ri(a))return Xd(a),_u(a.dom);SP(i)&&Ri(n)&&Oi(i,M.fromTag("br"));var s=ic(a.dom,Re.before(i.dom));return ft(UD(n),function(f){Oi(i,f)}),WD(e,n),s},TP=function(e,n,a){if(Ri(a))return Za(a),Ri(n)&&Xd(n),_u(n.dom);var i=vl(a.dom);return ft(UD(n),function(s){Io(a,s)}),WD(e,n),i},kP=function(e,n){var a=If(n,e);return ee.from(a[a.length-1])},EP=function(e,n){return Hr(n,e)?kP(n,e):ee.none()},kb=function(e,n){ac(e,n.dom).map(function(a){return a.getNode()}).map(M.fromDom).filter(Cm).each(Za)},jD=function(e,n,a){return kb(!0,n),kb(!1,a),EP(n,a).fold(et(TP,e,n,a),et(xP,e,n,a))},bx=function(e,n,a,i){return n?jD(e,i,a):jD(e,a,i)},yx=function(e,n){var a=M.fromDom(e.getBody()),i=wP(a.dom,n,e.selection.getRng()).bind(function(s){return bx(a,n,s.from.block,s.to.block)});return i.each(function(s){e.selection.setRng(s.toRange())}),i.isSome()},OP=function(e,n){var a=n.getRng();return lu(px(e,M.fromDom(a.startContainer)),px(e,M.fromDom(a.endContainer)),function(i,s){return gn(i,s)===!1?(a.deleteContents(),bx(e,!0,i,s).each(function(f){n.setRng(f.toRange())}),!0):!1}).getOr(!1)},GD=function(e,n){var a=M.fromDom(n),i=et(gn,e);return Qf(a,al,i).isSome()},AP=function(e,n){return GD(e,n.startContainer)||GD(e,n.endContainer)},Qh=function(e,n){var a=ic(e.dom,Re.fromRangeStart(n)).isNone(),i=oc(e.dom,Re.fromRangeEnd(n)).isNone();return!AP(e,n)&&a&&i},ep=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},wx=function(e){var n=M.fromDom(e.getBody()),a=e.selection.getRng();return Qh(n,a)?ep(e):OP(n,e.selection)},tp=function(e,n){return e.selection.isCollapsed()?!1:wx(e)},np=Sc,rp=Ra,Jl=function(e,n,a,i,s){return ee.from(n._selectionOverrides.showCaret(e,a,i,s))},Cx=function(e){var n=e.ownerDocument.createRange();return n.selectNode(e),n},ap=function(e,n){var a=e.fire("BeforeObjectSelected",{target:n});return a.isDefaultPrevented()?ee.none():ee.some(Cx(n))},Sx=function(e,n,a){var i=E1(1,e.getBody(),n),s=Re.fromRangeStart(i),f=s.getNode();if(Yo(f))return Jl(1,e,f,!s.isAtEnd(),!1);var g=s.getNode(!0);if(Yo(g))return Jl(1,e,g,!1,!1);var b=e.dom.getParent(s.getNode(),function(w){return rp(w)||np(w)});return Yo(b)?Jl(1,e,b,!1,a):ee.none()},M2=function(e,n,a){return n.collapsed?Sx(e,n,a).getOr(n):n},qD=function(e){return $v(e)||gg(e)},KD=function(e){return zv(e)||hg(e)},Eb=function(e,n){Pt(n)&&n.data.length===0&&e.remove(n)},Q3=function(e,n,a,i,s,f){return Jl(i,e,f.getNode(!s),s,!0).each(function(g){if(n.collapsed){var b=n.cloneRange();s?b.setEnd(g.startContainer,g.startOffset):b.setStart(g.endContainer,g.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(g)}),Eb(e.dom,a),!0},XD=function(e,n){var a=e.selection.getRng();if(!Pt(a.commonAncestorContainer))return!1;var i=n?Ni.Forwards:Ni.Backwards,s=fl(e.getBody()),f=et(oy,n?s.next:s.prev),g=n?qD:KD,b=hi(i,e.getBody(),a),w=bl(n,f(b));if(!w||!O1(b,w))return!1;if(g(w))return Q3(e,a,b.getNode(),i,n,w);var O=f(w);return O&&g(O)&&O1(w,O)?Q3(e,a,b.getNode(),i,n,O):!1},P2=function(e,n){return XD(e,n)},xx=function(e){return al(M.fromDom(e))||Xi(M.fromDom(e))},mc=Yt.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),YD=function(e,n){var a=n.getNode(e===!1),i=e?"after":"before";return Sn(a)&&a.getAttribute("data-mce-caret")===i},JD=function(e,n,a,i){var s=function(f){return fu(M.fromDom(f))&&!Nc(a,i,e)};return ay(!n,a).fold(function(){return ay(n,i).fold(ut,s)},s)},eE=function(e,n,a,i){var s=i.getNode(n===!1);return px(M.fromDom(e),M.fromDom(a.getNode())).map(function(f){return Ri(f)?mc.remove(f.dom):mc.moveToElement(s)}).orThunk(function(){return ee.some(mc.moveToElement(s))})},Uv=function(e,n,a){return Zi(n,e,a).bind(function(i){return xx(i.getNode())||JD(e,n,a,i)?ee.none():n&&Ra(i.getNode())||n===!1&&Ra(i.getNode(!0))?eE(e,n,a,i):n&&zv(a)||n===!1&&$v(a)?ee.some(mc.moveToPosition(i)):ee.none()})},ZD=function(e,n){return e&&Ra(n.nextSibling)?ee.some(mc.moveToElement(n.nextSibling)):e===!1&&Ra(n.previousSibling)?ee.some(mc.moveToElement(n.previousSibling)):ee.none()},QD=function(e,n,a){return a.fold(function(i){return ee.some(mc.remove(i))},function(i){return ee.some(mc.moveToElement(i))},function(i){return Nc(n,i,e)?ee.none():ee.some(mc.moveToPosition(i))})},kg=function(e,n,a){return YD(n,a)?ZD(n,a.getNode(n===!1)).fold(function(){return Uv(e,n,a)},ee.some):Uv(e,n,a).bind(function(i){return QD(e,a,i)})},Zl=function(e,n,a){var i=E1(n?1:-1,e,a),s=Re.fromRangeStart(i),f=M.fromDom(e);return n===!1&&zv(s)?ee.some(mc.remove(s.getNode(!0))):n&&$v(s)?ee.some(mc.remove(s.getNode())):n===!1&&$v(s)&&Iv(f,s)?u2(f,s).map(function(g){return mc.remove(g.getNode())}):n&&zv(s)&&sb(f,s)?cb(f,s).map(function(g){return mc.remove(g.getNode())}):kg(e,n,s)},DP=function(e,n){return function(a){return e._selectionOverrides.hideFakeCaret(),ct(e,n,M.fromDom(a)),!0}},RP=function(e,n){return function(a){var i=n?Re.before(a):Re.after(a);return e.selection.setRng(i.toRange()),!0}},_P=function(e){return function(n){return e.selection.setRng(n.toRange()),!0}},eR=function(e,n){return ee.from(Dv(e.getBody(),n))},BP=function(e,n){var a=e.selection.getNode();return eR(e,a).filter(Ra).fold(function(){return Zl(e.getBody(),n,e.selection.getRng()).exists(function(i){return i.fold(DP(e,n),RP(e,n),_P(e))})},Et)},MP=function(e){ft(Xu(e,".mce-offscreen-selection"),Za)},PP=function(e,n){var a=e.selection.getNode();if(Ra(a)&&!mm(a)){var i=eR(e,a.parentNode).filter(Ra);return i.fold(function(){return MP(M.fromDom(e.getBody())),ct(e,n,M.fromDom(e.selection.getNode())),FD(e),!0},Et)}return!1},tR=function(e){var n=e.dom,a=e.selection,i=Dv(e.getBody(),a.getNode());if(Sc(i)&&n.isBlock(i)&&n.isEmpty(i)){var s=n.create("br",{"data-mce-bogus":"1"});n.setHTML(i,""),i.appendChild(s),a.setRng(Re.before(s).toRange())}return!0},Tx=function(e,n){return e.selection.isCollapsed()?BP(e,n):PP(e,n)},NP=function(e,n){var a=Re.fromRangeStart(e.selection.getRng());return Zi(n,e.getBody(),a).filter(function(i){return n?E4(i):O4(i)}).bind(function(i){return ee.from(Xm(n?0:-1,i))}).exists(function(i){return e.selection.select(i),!0})},kx=function(e,n){return e.selection.isCollapsed()?NP(e,n):!1},Ob=Pt,Ex=function(e){return Ob(e)&&e.data[0]===he},Ox=function(e){return Ob(e)&&e.data[e.data.length-1]===he},tE=function(e){return e.ownerDocument.createTextNode(he)},$P=function(e){if(Ob(e.previousSibling))return Ox(e.previousSibling)||e.previousSibling.appendData(he),e.previousSibling;if(Ob(e))return Ex(e)||e.insertData(0,he),e;var n=tE(e);return e.parentNode.insertBefore(n,e),n},zP=function(e){if(Ob(e.nextSibling))return Ex(e.nextSibling)||e.nextSibling.insertData(0,he),e.nextSibling;if(Ob(e))return Ox(e)||e.appendData(he),e;var n=tE(e);return e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n),n},N2=function(e,n){return e?$P(n):zP(n)},nR=et(N2,!0),nE=et(N2,!1),rE=function(e,n){return Pt(e.container())?N2(n,e.container()):N2(n,e.getNode())},aE=function(e,n){var a=n.get();return a&&e.container()===a&&ma(a)},$2=function(e,n){return n.fold(function(a){Dd(e.get());var i=nR(a);return e.set(i),ee.some(Re(i,i.length-1))},function(a){return _u(a).map(function(i){if(aE(i,e))return Re(e.get(),1);Dd(e.get());var s=rE(i,!0);return e.set(s),Re(s,1)})},function(a){return vl(a).map(function(i){if(aE(i,e))return Re(e.get(),e.get().length-1);Dd(e.get());var s=rE(i,!1);return e.set(s),Re(s,s.length-1)})},function(a){Dd(e.get());var i=nE(a);return e.set(i),ee.some(Re(i,1))})},rR=function(e,n){for(var a=0;a<e.length;a++){var i=e[a].apply(null,n);if(i.isSome())return i}return ee.none()},Ts=Yt.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Vf=function(e,n){var a=Hl(n,e);return a||e},Ql=function(e,n,a){var i=ID(a),s=Vf(n,i.container());return rm(e,s,i).fold(function(){return oc(s,i).bind(et(rm,e,s)).map(function(f){return Ts.before(f)})},ee.none)},Ax=function(e,n){return dl(e,n)===null},oE=function(e,n,a){return rm(e,n,a).filter(et(Ax,n))},Dx=function(e,n,a){var i=yl(a);return oE(e,n,i).bind(function(s){var f=ic(s,i);return f.isNone()?ee.some(Ts.start(s)):ee.none()})},aR=function(e,n,a){var i=ID(a);return oE(e,n,i).bind(function(s){var f=oc(s,i);return f.isNone()?ee.some(Ts.end(s)):ee.none()})},oR=function(e,n,a){var i=yl(a),s=Vf(n,i.container());return rm(e,s,i).fold(function(){return ic(s,i).bind(et(rm,e,s)).map(function(f){return Ts.after(f)})},ee.none)},iE=function(e){return zD(Rx(e))===!1},Uf=function(e,n,a){var i=rR([Ql,Dx,aR,oR],[e,n,a]);return i.filter(iE)},Rx=function(e){return e.fold(gt,gt,gt,gt)},uE=function(e){return e.fold(W("before"),W("start"),W("end"),W("after"))},op=function(e){return e.fold(Ts.before,Ts.before,Ts.after,Ts.after)},Ab=function(e){return e.fold(Ts.start,Ts.start,Ts.end,Ts.end)},sE=function(e,n){return uE(e)===uE(n)&&Rx(e)===Rx(n)},IP=function(e,n,a,i,s,f){return lu(rm(n,a,i),rm(n,a,s),function(g,b){return g!==b&&J3(a,g,b)?Ts.after(e?g:b):f}).getOr(f)},FP=function(e,n){return e.fold(Et,function(a){return!sE(a,n)})},LP=function(e,n,a,i,s){var f=bl(e,s),g=Zi(e,a,f).map(et(bl,e)),b=g.fold(function(){return i.map(op)},function(w){return Uf(n,a,w).map(et(IP,e,n,a,f,w)).filter(et(FP,i))});return b.filter(iE)},HP=function(e,n){return e?n.fold(vo(ee.some,Ts.start),ee.none,vo(ee.some,Ts.after),ee.none):n.fold(ee.none,vo(ee.some,Ts.before),ee.none,vo(ee.some,Ts.end))},_x=function(e,n,a,i){var s=bl(e,i),f=Uf(n,a,s);return Uf(n,a,s).bind(et(HP,e)).orThunk(function(){return LP(e,n,a,f,i)})};et(_x,!1),et(_x,!0);var VP=function(e){return Mt(e.selection.getSel().modify)},iR=function(e,n,a){var i=e?1:-1;return n.setRng(Re(a.container(),a.offset()+i).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},cE=function(e,n){var a=n.selection.getRng(),i=e?Re.fromRangeEnd(a):Re.fromRangeStart(a);return VP(n)?e&&nn(i)?iR(!0,n.selection,i):!e&&Op(i)?iR(!1,n.selection,i):!1:!1},Wv;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Wv||(Wv={}));var Bx=function(e,n){return e===Ni.Backwards?To(n):n},UP=function(e,n,a){return e===Ni.Forwards?n.next(a):n.prev(a)},WP=function(e,n,a,i){return ra(i.getNode(n===Ni.Forwards))?Wv.Br:Nc(a,i)===!1?Wv.Block:Wv.Wrap},uR=function(e,n,a,i){for(var s=fl(a),f=i,g=[];f;){var b=UP(n,s,f);if(!b)break;if(ra(b.getNode(!1)))return n===Ni.Forwards?{positions:Bx(n,g).concat([b]),breakType:Wv.Br,breakAt:ee.some(b)}:{positions:Bx(n,g),breakType:Wv.Br,breakAt:ee.some(b)};if(!b.isVisible()){f=b;continue}if(e(f,b)){var w=WP(a,n,f,b);return{positions:Bx(n,g),breakType:w,breakAt:ee.some(b)}}g.push(b),f=b}return{positions:Bx(n,g),breakType:Wv.Eol,breakAt:ee.none()}},sR=function(e,n,a,i){return n(a,i).breakAt.map(function(s){var f=n(a,s).positions;return e===Ni.Backwards?f.concat(s):[s].concat(f)}).getOr([])},lE=function(e,n){return jr(e,function(a,i){return a.fold(function(){return ee.some(i)},function(s){return lu(Ua(s.getClientRects()),Ua(i.getClientRects()),function(f,g){var b=Math.abs(n-f.left),w=Math.abs(n-g.left);return w<=b?i:s}).or(a)})},ee.none())},z2=function(e,n){return Ua(n.getClientRects()).bind(function(a){return lE(e,a.left)})},Eg=et(uR,Re.isAbove,-1),ip=et(uR,Re.isBelow,1),jP=et(sR,-1,Eg),GP=et(sR,1,ip),qP=function(e,n){return Eg(e,n).breakAt.isNone()},KP=function(e,n){return ip(e,n).breakAt.isNone()},cR=function(e){return _u(e).map(function(n){return[n].concat(ip(e,n).positions)}).getOr([])},XP=function(e){return vl(e).map(function(n){return Eg(e,n).positions.concat(n)}).getOr([])},YP=function(e){var n=function(i){return Hn(i,function(s){var f=pv(s);return f.node=e,f})};if(Sn(e))return n(e.getClientRects());if(Pt(e)){var a=e.ownerDocument.createRange();return a.setStart(e,0),a.setEnd(e,e.data.length),n(a.getClientRects())}},I2=function(e){return nu(e,YP)},up;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(up||(up={}));var JP=function(e,n,a,i){for(;i=Bd(i,e,Ao,n);)if(a(i))return},lR=function(e,n,a,i,s,f){var g=0,b=[],w=function(z){var F=I2([z]);e===-1&&(F=F.reverse());for(var q=0;q<F.length;q++){var G=F[q];if(!a(G,O)){if(b.length>0&&n(G,Vi(b))&&g++,G.line=g,s(G))return!0;b.push(G)}}},O=Vi(f.getClientRects());if(!O)return b;var N=f.getNode();return w(N),JP(e,i,w,N),b},ZP=function(e,n){return n.line>e},QP=function(e,n){return n.line===e},eN=et(lR,up.Up,Af,bv),tN=et(lR,up.Down,bv,Af),Mx=function(e,n,a,i){var s=fl(n),f,g,b,w,O=[],N=0,z=function(X){return Vi(X.getClientRects())};e===1?(f=s.next,g=bv,b=Af,w=Re.after(i)):(f=s.prev,g=Af,b=bv,w=Re.before(i));var F=z(w);do if(w.isVisible()){var q=z(w);if(!b(q,F)){O.length>0&&g(q,Vi(O))&&N++;var G=pv(q);if(G.position=w,G.line=N,a(G))return O;O.push(G)}}while(w=f(w));return O},F2=function(e){return function(n){return ZP(e,n)}},fE=function(e){return function(n){return QP(e,n)}},nN=Ra,L2=Bd,vE=function(e,n){return Math.abs(e.left-n)},dE=function(e,n){return Math.abs(e.right-n)},fR=function(e,n){return e>=n.left&&e<=n.right},rN=function(e,n){return e>=n.top&&e<=n.bottom},aN=function(e){return ko(e,"node")},Px=function(e,n,a){return a===void 0&&(a=Et),zu(e,function(i,s){if(fR(n,s))return a(s)?s:i;if(fR(n,i))return a(i)?i:s;var f=Math.min(vE(i,n),dE(i,n)),g=Math.min(vE(s,n),dE(s,n));return g===f&&aN(s)&&nN(s.node)||g<f?s:i})},vR=function(e,n,a,i,s){var f=L2(i,e,Ao,n,!s);do if(!f||a(f))return;while(f=L2(f,e,Ao,n))},oN=function(e,n,a){a===void 0&&(a=!0);var i=[],s=function(f,g){var b=jt(I2([g]),function(w){return!f(w,n)});return i=i.concat(b),b.length===0};return i.push(n),vR(up.Up,e,et(s,Af),n.node,a),vR(up.Down,e,et(s,bv),n.node,a),i},iN=function(e){return jt(kr(e.getElementsByTagName("*")),Tv)},uN=function(e,n){return{node:e.node,before:vE(e,n)<dE(e,n)}},sN=function(e,n,a){var i=I2(iN(e)),s=jt(i,et(rN,a)),f=function(w){return!ho(w.node)&&!Wu(w.node)},g=Px(s,n,f);if(g){var b=f(g);if(g=Px(oN(e,g,b),n,f),g&&Tv(g.node))return uN(g,n)}return null},am=function(e,n){e.selection.setRng(n),ug(e,e.selection.getRng())},jc=function(e,n,a){return ee.some(M2(e,n,a))},Nx=function(e,n,a,i,s,f){var g=n===Ni.Forwards,b=fl(e.getBody()),w=et(oy,g?b.next:b.prev),O=g?i:s;if(!a.collapsed){var N=Zp(a);if(f(N))return Jl(n,e,N,n===Ni.Backwards,!1)}var z=hi(n,e.getBody(),a);if(O(z))return ap(e,z.getNode(!g));var F=bl(g,w(z)),q=Bl(a);if(!F)return q?ee.some(a):ee.none();if(O(F))return Jl(n,e,F.getNode(!g),g,!1);var G=w(F);return G&&O(G)&&O1(F,G)?Jl(n,e,G.getNode(!g),g,!1):q?jc(e,F.toRange(),!1):ee.none()},mE=function(e,n,a,i,s,f){var g=hi(n,e.getBody(),a),b=Vi(g.getClientRects()),w=n===up.Down;if(!b)return ee.none();var O=w?tN:eN,N=O(e.getBody(),F2(1),g),z=jt(N,fE(1)),F=b.left,q=Px(z,F);if(q&&f(q.node)){var G=Math.abs(F-q.left),X=Math.abs(F-q.right);return Jl(n,e,q.node,G<X,!1)}var J;if(i(g)?J=g.getNode():s(g)?J=g.getNode(!0):J=Zp(a),J){var ie=Mx(n,e.getBody(),F2(1),J),oe=Px(jt(ie,fE(1)),F);if(oe||(oe=Vi(jt(ie,fE(0))),oe))return jc(e,oe.position.toRange(),!1)}return z.length===0?$x(e,w).filter(w?s:i).map(function(ve){return M2(e,ve.toRange(),!1)}):ee.none()},$x=function(e,n){var a=e.selection.getRng(),i=e.getBody();if(n){var s=Re.fromRangeEnd(a),f=ip(i,s);return Gr(f.positions)}else{var s=Re.fromRangeStart(a),f=Eg(i,s);return Ua(f.positions)}},dR=function(e,n,a){return $x(e,n).filter(a).exists(function(i){return e.selection.setRng(i.toRange()),!0})},H2=function(e,n){var a=e.dom.createRng();a.setStart(n.container(),n.offset()),a.setEnd(n.container(),n.offset()),e.selection.setRng(a)},mR=function(e,n){e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},gE=function(e,n,a){return $2(n,a).map(function(i){return H2(e,i),a})},cN=function(e,n,a){var i=e.getBody(),s=Re.fromRangeStart(e.selection.getRng()),f=et(xg,e),g=_x(a,f,i,s);return g.bind(function(b){return gE(e,n,b)})},lN=function(e,n,a){var i=Hn(Xu(M.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(g){return g.dom}),s=jt(i,e),f=jt(a,e);ft(bu(s,f),et(mR,!1)),ft(bu(f,s),et(mR,!0))},fN=function(e,n){if(e.selection.isCollapsed()&&e.composing!==!0&&n.get()){var a=Re.fromRangeStart(e.selection.getRng());Re.isTextPosition(a)&&dP(a)===!1&&(H2(e,Q0(n.get(),a)),n.set(null))}},Db=function(e,n,a,i){if(n.selection.isCollapsed()){var s=jt(i,e);ft(s,function(f){var g=Re.fromRangeStart(n.selection.getRng());Uf(e,n.getBody(),g).bind(function(b){return gE(n,a,b)})})}},hE=function(e,n,a){return jm(e)?cN(e,n,a).isSome():!1},pE=function(e,n,a){return jm(n)?cE(e,n):!1},gR=function(e){var n=Au(null),a=et(xg,e);return e.on("NodeChange",function(i){jm(e)&&!(Qt.browser.isIE()&&i.initial)&&(lN(a,e.dom,i.parents),fN(e,n),Db(a,e,n,i.parents))}),n},bE=et(pE,!0),vN=et(pE,!1),zx=function(e,n,a){if(jm(e)){var i=$x(e,n).getOrThunk(function(){var s=e.selection.getRng();return n?Re.fromRangeEnd(s):Re.fromRangeStart(s)});return Uf(et(xg,e),e.getBody(),i).exists(function(s){var f=op(s);return $2(a,f).exists(function(g){return H2(e,g),!0})})}else return!1},dN=function(e,n){var a=document.createRange();return a.setStart(e.container(),e.offset()),a.setEnd(n.container(),n.offset()),a},mN=function(e){return lu(_u(e),vl(e),function(n,a){var i=bl(!0,n),s=bl(!1,a);return oc(e,i).forall(function(f){return f.isEqual(s)})}).getOr(!0)},hR=function(e,n){return function(a){return $2(n,a).exists(function(i){return H2(e,i),!0})}},pR=function(e,n,a,i){var s=e.getBody(),f=et(xg,e);e.undoManager.ignore(function(){e.selection.setRng(dN(a,i)),e.execCommand("Delete"),Uf(f,s,Re.fromRangeStart(e.selection.getRng())).map(Ab).map(hR(e,n))}),e.nodeChanged()},Wf=function(e,n){var a=Hl(n,e);return a||e},gN=function(e,n,a,i){var s=Wf(e.getBody(),i.container()),f=et(xg,e),g=Uf(f,s,i);return g.bind(function(b){return a?b.fold(W(ee.some(Ab(b))),ee.none,W(ee.some(op(b))),ee.none):b.fold(ee.none,W(ee.some(op(b))),ee.none,W(ee.some(Ab(b))))}).map(hR(e,n)).getOrThunk(function(){var b=Pd(a,s,i),w=b.bind(function(O){return Uf(f,s,O)});return lu(g,w,function(){return rm(f,s,i).exists(function(O){return mN(O)?(ct(e,a,M.fromDom(O)),!0):!1})}).orThunk(function(){return w.bind(function(O){return b.map(function(N){return a?pR(e,n,i,N):pR(e,n,N,i),!0})})}).getOr(!1)})},Ix=function(e,n,a){if(e.selection.isCollapsed()&&jm(e)){var i=Re.fromRangeStart(e.selection.getRng());return gN(e,n,a,i)}return!1},hN=function(e,n){var a=If(n,e);return Si(a,Ms).fold(W(a),function(i){return a.slice(0,i)})},pN=function(e){return Cp(e)===1},bN=function(e,n,a,i){var s=et(i5,n),f=Hn(jt(i,s),function(b){return b.dom});if(f.length===0)ct(n,e,a);else{var g=KO(a.dom,f);n.selection.setRng(g.toRange())}},yN=function(e,n){var a=M.fromDom(e.getBody()),i=M.fromDom(e.selection.getStart()),s=jt(hN(a,i),pN);return Gr(s).exists(function(f){var g=Re.fromRangeStart(e.selection.getRng());return LD(n,g,f.dom)&&!t3(f)?(bN(n,e,f,s),!0):!1})},Fx=function(e,n){return e.selection.isCollapsed()?yN(e,n):!1},jv=function(e,n,a){return e._selectionOverrides.hideFakeCaret(),ct(e,n,M.fromDom(a)),!0},wN=function(e,n){var a=n?gg:hg,i=n?Ni.Forwards:Ni.Backwards,s=hi(i,e.getBody(),e.selection.getRng());return a(s)?jv(e,n,s.getNode(!n)):ee.from(bl(n,s)).filter(function(f){return a(f)&&O1(s,f)}).exists(function(f){return jv(e,n,f.getNode(!n))})},CN=function(e,n){var a=e.selection.getNode();return Wu(a)?jv(e,n,a):!1},V2=function(e,n){return e.selection.isCollapsed()?wN(e,n):CN(e,n)},yE=function(e){return bm(e,function(n){return Sc(n.dom)||Ra(n.dom)}).exists(function(n){return Sc(n.dom)})},wE=function(e){var n=parseInt(e,10);return isNaN(n)?0:n},bR=function(e,n){var a=e||TT(n)?"margin":"padding",i=jn(n,"direction")==="rtl"?"-right":"-left";return a+i},SN=function(e,n,a,i,s,f){var g=bR(a,M.fromDom(f));if(n==="outdent"){var b=Math.max(0,wE(f.style[g])-i);e.setStyle(f,g,b?b+s:"")}else{var b=wE(f.style[g])+i+s;e.setStyle(f,g,b)}},sp=function(e,n){return Li(n,function(a){var i=bR(b1(e),a),s=Di(a,i).map(wE).getOr(0),f=e.dom.getContentEditable(a.dom);return f!=="false"&&s>0})},yR=function(e){var n=CR(e);return!e.mode.isReadOnly()&&(n.length>1||sp(e,n))},wR=function(e){return kc(e)||Xi(e)},xN=function(e){return ja(e).exists(wR)},CR=function(e){return jt(tk(e.selection.getSelectedBlocks()),function(n){return!wR(n)&&!xN(n)&&yE(n)})},Lx=function(e,n){var a=e.dom,i=e.selection,s=e.formatter,f=gi(e),g=/[a-z%]+$/i.exec(f)[0],b=parseInt(f,10),w=b1(e),O=Pi(e);!e.queryCommandState("InsertUnorderedList")&&!e.queryCommandState("InsertOrderedList")&&O===""&&!a.getParent(i.getNode(),a.isBlock)&&s.apply("div"),ft(CR(e),function(N){SN(a,n,w,b,g,N.dom)})},Hx=function(e,n){if(e.selection.isCollapsed()&&yR(e)){var a=e.dom,i=e.selection.getRng(),s=Re.fromRangeStart(i),f=a.getParent(i.startContainer,a.isBlock);if(f!==null&&i2(M.fromDom(f),s))return Lx(e,"outdent"),!0}return!1},CE=function(e,n){e.getDoc().execCommand(n,!1,null)},SR=function(e,n){if(!Hx(e)){if(Tx(e,!1))return;if(P2(e,!1))return;if(Ix(e,n,!1))return;if(yx(e,!1))return;if(l2(e))return;if(kx(e,!1))return;if(V2(e,!1))return;if(tp(e))return;if(Fx(e,!1))return;CE(e,"Delete"),FD(e)}},xR=function(e,n){if(!Tx(e,!0)){if(P2(e,!0))return;if(Ix(e,n,!0))return;if(yx(e,!0))return;if(l2(e))return;if(kx(e,!0))return;if(V2(e,!0))return;if(tp(e))return;if(Fx(e,!0))return;CE(e,"ForwardDelete")}},TN=function(e,n){e.addCommand("delete",function(){SR(e,n)}),e.addCommand("forwardDelete",function(){xR(e,n)})},Rb=5,kN=400,TR=function(e){return e.touches===void 0||e.touches.length!==1?ee.none():ee.some(e.touches[0])},EN=function(e,n){var a=Math.abs(e.clientX-n.x),i=Math.abs(e.clientY-n.y);return a>Rb||i>Rb},_b=function(e){var n=mv(),a=Au(!1),i=Up(function(s){e.fire("longpress",Jt(Jt({},s),{type:"longpress"})),a.set(!0)},kN);e.on("touchstart",function(s){TR(s).each(function(f){i.cancel();var g={x:f.clientX,y:f.clientY,target:s.target};i.throttle(s),a.set(!1),n.set(g)})},!0),e.on("touchmove",function(s){i.cancel(),TR(s).each(function(f){n.on(function(g){EN(f,g)&&(n.clear(),a.set(!1),e.fire("longpresscancel"))})})},!0),e.on("touchend touchcancel",function(s){i.cancel(),s.type!=="touchcancel"&&n.get().filter(function(f){return f.target.isEqualNode(s.target)}).each(function(){a.get()?s.preventDefault():e.fire("tap",Jt(Jt({},s),{type:"tap"}))})},!0)},SE=function(e,n){return $n(e,n.nodeName)},om=function(e,n){return Pt(n)?!0:Sn(n)?!SE(e,n)&&!ws(n):!1},ON=function(e,n,a){return Wr(a2(M.fromDom(a),M.fromDom(n)),function(i){return SE(e,i.dom)})},xE=function(e,n){if(Pt(n)){if(n.nodeValue.length===0)return!0;if(/^\s+$/.test(n.nodeValue)&&(!n.nextSibling||SE(e,n.nextSibling)))return!0}return!1},TE=function(e){var n=e.dom,a=e.selection,i=e.schema,s=i.getBlockElements(),f=a.getStart(),g=e.getBody(),b,w,O,N=Pi(e);if(!(!f||!Sn(f)||!N)){var z=g.nodeName.toLowerCase();if(!(!i.isValidChild(z,N.toLowerCase())||ON(s,g,f))){var F=a.getRng(),q=F.startContainer,G=F.startOffset,X=F.endContainer,J=F.endOffset,ie=Nv(e);for(f=g.firstChild;f;)if(om(s,f)){if(xE(s,f)){w=f,f=f.nextSibling,n.remove(w);continue}b||(b=n.create(N,Ed(e)),f.parentNode.insertBefore(b,f),O=!0),w=f,f=f.nextSibling,b.appendChild(w)}else b=null,f=f.nextSibling;O&&ie&&(F.setStart(q,G),F.setEnd(X,J),a.setRng(F),e.nodeChanged())}}},AN=function(e){Pi(e)&&e.on("NodeChange",et(TE,e))},DN=function(e){return ym(M.fromDom(e.getBody()),"*[data-mce-caret]").map(function(n){return n.dom}).getOrNull()},RN=function(e){e.selection.setRng(e.selection.getRng())},kE=function(e,n){n.hasAttribute("data-mce-caret")&&(Jb(n),RN(e),e.selection.scrollIntoView(n))},_N=function(e,n){var a=DN(e);if(a){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),kE(e,a);return}yf(a)&&(kE(e,a),e.undoManager.add())}},BN=function(e){e.on("keyup compositionstart",et(_N,e))},kR=Ra,MN=function(e,n,a){return Nx(n,e,a,$v,zv,kR)},ER=function(e,n,a){var i=function(f){return $v(f)||ab(f)},s=function(f){return zv(f)||AS(f)};return mE(n,e,a,i,s,kR)},PN=function(e){var n=e.dom.create(Pi(e));return(!Qt.ie||Qt.ie>=11)&&(n.innerHTML='<br data-mce-bogus="1">'),n},Og=function(e,n,a){var i=fl(e.getBody()),s=et(oy,n===1?i.next:i.prev);if(a.collapsed&&wk(e)){var f=e.dom.getParent(a.startContainer,"PRE");if(!f)return;var g=s(Re.fromRangeStart(a));if(!g){var b=PN(e);n===1?e.$(f).after(b):e.$(f).before(b),e.selection.select(b,!0),e.selection.collapse()}}},NN=function(e,n){var a=n?Ni.Forwards:Ni.Backwards,i=e.selection.getRng();return MN(a,e,i).orThunk(function(){return Og(e,a,i),ee.none()})},U2=function(e,n){var a=n?1:-1,i=e.selection.getRng();return ER(a,e,i).orThunk(function(){return Og(e,a,i),ee.none()})},EE=function(e,n){return NN(e,n).exists(function(a){return am(e,a),!0})},Vx=function(e,n){return U2(e,n).exists(function(a){return am(e,a),!0})},Ux=function(e,n){var a=n?zv:$v;return dR(e,n,a)},$N=function(e){return tn(["figcaption"],va(e))},OR=function(e){var n=document.createRange();return n.setStartBefore(e.dom),n.setEndBefore(e.dom),n},AR=function(e,n,a){a?Io(e,n):Js(e,n)},OE=function(e,n){var a=M.fromTag("br");return AR(e,a,n),OR(a)},zN=function(e,n,a,i){var s=M.fromTag(a),f=M.fromTag("br");return $(s,i),Io(s,f),AR(e,s,n),OR(f)},IN=function(e,n,a,i){return n===""?OE(e,i):zN(e,i,n,a)},FN=function(e,n){var a=et(gn,n);return bm(M.fromDom(e.container()),Ms,a).filter($N)},LN=function(e,n,a){return n?KP(e.dom,a):qP(e.dom,a)},DR=function(e,n){var a=M.fromDom(e.getBody()),i=Re.fromRangeStart(e.selection.getRng()),s=Pi(e),f=Ed(e);return FN(i,a).exists(function(){if(LN(a,n,i)){var g=IN(a,s,f,n);return e.selection.setRng(g),!0}else return!1})},RR=function(e,n){return e.selection.isCollapsed()?DR(e,n):!1},HN=function(e){return Hn(e,function(n){return Jt({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:Tt},n)})},VN=function(e,n){return n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey},UN=function(e,n){return nu(HN(e),function(a){return VN(a,n)?[a]:[]})},Tr=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return function(){return e.apply(null,n)}},Bb=function(e,n){return ua(UN(e,n),function(a){return a.action()})},_R=function(e,n){var a=n?Ni.Forwards:Ni.Backwards,i=e.selection.getRng();return Nx(e,a,i,gg,hg,Wu).exists(function(s){return am(e,s),!0})},BR=function(e,n){var a=n?1:-1,i=e.selection.getRng();return mE(e,a,i,gg,hg,Wu).exists(function(s){return am(e,s),!0})},AE=function(e,n){var a=n?hg:gg;return dR(e,n,a)},WN=function(e,n){return{left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}},MR=function(e,n){return nu(n,function(a){var i=WN(pv(a.getBoundingClientRect()),-1);return[{x:i.left,y:e(i),cell:a},{x:i.right,y:e(i),cell:a}]})},jN=function(e,n,a){return jr(e,function(i,s){return i.fold(function(){return ee.some(s)},function(f){var g=Math.sqrt(Math.abs(f.x-n)+Math.abs(f.y-a)),b=Math.sqrt(Math.abs(s.x-n)+Math.abs(s.y-a));return ee.some(b<g?s:f)})},ee.none())},PR=function(e,n,a,i,s){var f=Xu(M.fromDom(a),"td,th,caption").map(function(b){return b.dom}),g=jt(MR(e,f),function(b){return n(b,s)});return jN(g,i,s).map(function(b){return b.cell})},GN=function(e){return e.bottom},qN=function(e){return e.top},KN=function(e,n){return e.y<n},XN=function(e,n){return e.y>n},YN=et(PR,GN,KN),JN=et(PR,qN,XN),ZN=function(e,n){return Ua(n.getClientRects()).bind(function(a){return YN(e,a.left,a.top)}).bind(function(a){return z2(XP(a),n)})},QN=function(e,n){return Gr(n.getClientRects()).bind(function(a){return JN(e,a.left,a.top)}).bind(function(a){return z2(cR(a),n)})},e$=function(e,n,a){return a.breakAt.exists(function(i){return e(n,i).breakAt.isSome()})},t$=function(e){return e.breakType===Wv.Wrap&&e.positions.length===0},n$=function(e){return e.breakType===Wv.Br&&e.positions.length===1},DE=function(e,n,a){var i=e(n,a);return t$(i)||!ra(a.getNode())&&n$(i)?!e$(e,n,i):i.breakAt.isNone()},r$=et(DE,Eg),a$=et(DE,ip),NR=function(e,n,a){var i=Re.fromRangeStart(n);return ac(!e,a).exists(function(s){return s.isEqual(i)})},$R=function(e,n,a,i){var s=e.selection.getRng(),f=n?1:-1;return Rd()&&NR(n,s,a)?(Jl(f,e,a,!n,!1).each(function(g){am(e,g)}),!0):!1},Wx=function(e,n,a){return ZN(n,a).orThunk(function(){return Ua(a.getClientRects()).bind(function(i){return lE(jP(e,Re.before(n)),i.left)})}).getOr(Re.before(n))},zR=function(e,n,a){return QN(n,a).orThunk(function(){return Ua(a.getClientRects()).bind(function(i){return lE(GP(e,Re.after(n)),i.left)})}).getOr(Re.after(n))},jx=function(e,n){var a=n.getNode(e);return Sn(a)&&a.nodeName==="TABLE"?ee.some(a):ee.none()},RE=function(e,n,a,i){var s=Pi(n);s?n.undoManager.transact(function(){var f=M.fromTag(s);$(f,Ed(n)),Io(f,M.fromTag("br")),e?Zf(M.fromDom(a),f):Oi(M.fromDom(a),f);var g=n.dom.createRng();g.setStart(f.dom,0),g.setEnd(f.dom,0),am(n,g)}):am(n,i.toRange())},_E=function(e,n,a){var i=jx(!!n,a),s=n===!1;i.fold(function(){return am(e,a.toRange())},function(f){return ac(s,e.getBody()).filter(function(g){return g.isEqual(a)}).fold(function(){return am(e,a.toRange())},function(g){return RE(n,e,f,a)})})},o$=function(e,n,a,i){var s=e.selection.getRng(),f=Re.fromRangeStart(s),g=e.getBody();if(!n&&r$(i,f)){var b=Wx(g,a,f);return _E(e,n,b),!0}else if(n&&a$(i,f)){var b=zR(g,a,f);return _E(e,n,b),!0}else return!1},BE=function(e,n,a){return ee.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(i){return ee.from(e.dom.getParent(i,"table")).map(function(s){return a(e,n,s,i)})}).getOr(!1)},cp=function(e,n){return BE(e,n,$R)},ME=function(e,n){return BE(e,n,o$)},PE=function(e,n,a){var i=Ut().os;Bb([{keyCode:ln.RIGHT,action:Tr(EE,e,!0)},{keyCode:ln.LEFT,action:Tr(EE,e,!1)},{keyCode:ln.UP,action:Tr(Vx,e,!1)},{keyCode:ln.DOWN,action:Tr(Vx,e,!0)},{keyCode:ln.RIGHT,action:Tr(cp,e,!0)},{keyCode:ln.LEFT,action:Tr(cp,e,!1)},{keyCode:ln.UP,action:Tr(ME,e,!1)},{keyCode:ln.DOWN,action:Tr(ME,e,!0)},{keyCode:ln.RIGHT,action:Tr(_R,e,!0)},{keyCode:ln.LEFT,action:Tr(_R,e,!1)},{keyCode:ln.UP,action:Tr(BR,e,!1)},{keyCode:ln.DOWN,action:Tr(BR,e,!0)},{keyCode:ln.RIGHT,action:Tr(hE,e,n,!0)},{keyCode:ln.LEFT,action:Tr(hE,e,n,!1)},{keyCode:ln.RIGHT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:Tr(bE,e,n)},{keyCode:ln.LEFT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:Tr(vN,e,n)},{keyCode:ln.UP,action:Tr(RR,e,!1)},{keyCode:ln.DOWN,action:Tr(RR,e,!0)}],a).each(function(s){a.preventDefault()})},i$=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&PE(e,n,a)})},NE=function(e,n,a){Bb([{keyCode:ln.BACKSPACE,action:Tr(Hx,e,!1)},{keyCode:ln.BACKSPACE,action:Tr(Tx,e,!1)},{keyCode:ln.DELETE,action:Tr(Tx,e,!0)},{keyCode:ln.BACKSPACE,action:Tr(P2,e,!1)},{keyCode:ln.DELETE,action:Tr(P2,e,!0)},{keyCode:ln.BACKSPACE,action:Tr(Ix,e,n,!1)},{keyCode:ln.DELETE,action:Tr(Ix,e,n,!0)},{keyCode:ln.BACKSPACE,action:Tr(l2,e,!1)},{keyCode:ln.DELETE,action:Tr(l2,e,!0)},{keyCode:ln.BACKSPACE,action:Tr(kx,e,!1)},{keyCode:ln.DELETE,action:Tr(kx,e,!0)},{keyCode:ln.BACKSPACE,action:Tr(V2,e,!1)},{keyCode:ln.DELETE,action:Tr(V2,e,!0)},{keyCode:ln.BACKSPACE,action:Tr(tp,e,!1)},{keyCode:ln.DELETE,action:Tr(tp,e,!0)},{keyCode:ln.BACKSPACE,action:Tr(yx,e,!1)},{keyCode:ln.DELETE,action:Tr(yx,e,!0)},{keyCode:ln.BACKSPACE,action:Tr(Fx,e,!1)},{keyCode:ln.DELETE,action:Tr(Fx,e,!0)}],a).each(function(i){a.preventDefault()})},u$=function(e,n){Bb([{keyCode:ln.BACKSPACE,action:Tr(tR,e)},{keyCode:ln.DELETE,action:Tr(tR,e)}],n)},s$=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&NE(e,n,a)}),e.on("keyup",function(a){a.isDefaultPrevented()===!1&&u$(e,a)})},c$=function(e){for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},W2=function(e,n){var a,i=n,s=e.dom,f=e.schema.getMoveCaretBeforeOnEnterElements();if(n){if(/^(LI|DT|DD)$/.test(n.nodeName)){var g=c$(n.firstChild);g&&/^(UL|OL|DL)$/.test(g.nodeName)&&n.insertBefore(s.doc.createTextNode(fs),n.firstChild)}var b=s.createRng();if(n.normalize(),n.hasChildNodes()){for(var w=new zr(n,n);a=w.current();){if(Pt(a)){b.setStart(a,0),b.setEnd(a,0);break}if(f[a.nodeName.toLowerCase()]){b.setStartBefore(a),b.setEndBefore(a);break}i=a,a=w.next()}a||(b.setStart(i,0),b.setEnd(i,0))}else ra(n)?n.nextSibling&&s.isBlock(n.nextSibling)?(b.setStartBefore(n),b.setEndBefore(n)):(b.setStartAfter(n),b.setEndAfter(n)):(b.setStart(n,0),b.setEnd(n,0));e.selection.setRng(b),ug(e,b)}},l$=function(e,n){var a=e.getRoot(),i,s;for(i=n;i!==a&&e.getContentEditable(i)!=="false";)e.getContentEditable(i)==="true"&&(s=i),i=i.parentNode;return i!==a?s:a},$E=function(e){return ee.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},IR=function(e){return $E(e).fold(W(""),function(n){return n.nodeName.toUpperCase()})},Mb=function(e){return $E(e).filter(function(n){return Xi(M.fromDom(n))}).isSome()},f$=function(e,n){return e.firstChild&&e.firstChild.nodeName===n},zE=function(e){var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},FR=function(e,n){return e&&e.parentNode&&e.parentNode.nodeName===n},IE=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},LR=function(e){return IE(e)&&IE(e.parentNode)},j2=function(e){var n=e.parentNode;return/^(LI|DT|DD)$/.test(n.nodeName)?n:e},G2=function(e,n,a){for(var i=e[a?"firstChild":"lastChild"];i&&!Sn(i);)i=i[a?"nextSibling":"previousSibling"];return i===n},FE=function(e,n,a,i,s){var f=e.dom,g=e.selection.getRng();if(a!==e.getBody()){LR(a)&&(s="LI");var b=s?n(s):f.create("BR");if(G2(a,i,!0)&&G2(a,i,!1))if(FR(a,"LI")){var w=j2(a);f.insertAfter(b,w),zE(a)?f.remove(w):f.remove(a)}else f.replace(b,a);else if(G2(a,i,!0))FR(a,"LI")?(f.insertAfter(b,j2(a)),b.appendChild(f.doc.createTextNode(" ")),b.appendChild(a)):a.parentNode.insertBefore(b,a),f.remove(i);else if(G2(a,i,!1))f.insertAfter(b,j2(a)),f.remove(i);else{a=j2(a);var O=g.cloneRange();O.setStartAfter(i),O.setEndAfter(a);var N=O.extractContents();s==="LI"&&f$(N,"LI")?(b=N.firstChild,f.insertAfter(N,a)):(f.insertAfter(N,a),f.insertAfter(b,a)),f.remove(i)}W2(e,b)}},HR=function(e){ft(Kp(M.fromDom(e),La),function(n){var a=n.dom;a.nodeValue=ol(a.nodeValue)})},v$=function(e,n){return n&&n.nodeName==="A"&&e.isEmpty(n)},d$=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Pb=function(e){e.innerHTML='<br data-mce-bogus="1">'},LE=function(e,n){return e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n},VR=function(e,n){return n&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.getContentEditable(n)!=="true"},m$=function(e,n,a){var i=a,s=[],f;if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;Sn(i)&&!n[i.nodeName.toLowerCase()]&&s.push(i)}for(f=s.length;f--;)i=s[f],(!i.hasChildNodes()||i.firstChild===i.lastChild&&i.firstChild.nodeValue===""||v$(e,i))&&e.remove(i)}},Gx=function(e,n,a){return Pt(n)===!1?a:e?a===1&&n.data.charAt(a-1)===he?0:a:a===n.data.length-1&&n.data.charAt(a)===he?n.data.length:a},g$=function(e){var n=e.cloneRange();return n.setStart(e.startContainer,Gx(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Gx(!1,e.endContainer,e.endOffset)),n},h$=function(e){do Pt(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},gc=function(e,n){var a=e.getRoot(),i,s;for(i=n;i!==a&&e.getContentEditable(i)!=="false";)e.getContentEditable(i)==="true"&&(s=i),i=i.parentNode;return i!==a?s:a},p$=function(e,n,a){var i=e.dom;ee.from(a.style).map(i.parseStyle).each(function(w){var O=Ga(M.fromDom(n)),N=Jt(Jt({},O),w);i.setStyles(n,N)});var s=ee.from(a.class).map(function(w){return w.split(/\s+/)}),f=ee.from(n.className).map(function(w){return jt(w.split(/\s+/),function(O){return O!==""})});lu(s,f,function(w,O){var N=jt(O,function(F){return!tn(w,F)}),z=Ko(Ko([],w,!0),N,!0);i.setAttrib(n,"class",z.join(" "))});var g=["style","class"],b=ha(a,function(w,O){return!tn(g,O)});i.setAttribs(n,b)},lp=function(e,n){var a=Pi(e);if(a&&a.toLowerCase()===n.tagName.toLowerCase()){var i=Ed(e);p$(e,n,i)}},UR=function(e,n,a,i,s){var f,g,b,w,O,N,z=n||"P",F=e.dom,q=gc(F,i);if(g=F.getParent(i,F.isBlock),!g||!VR(F,g)){if(g=g||q,g===e.getBody()||d$(g)?N=g.nodeName.toLowerCase():N=g.parentNode.nodeName.toLowerCase(),!g.hasChildNodes())return f=F.create(z),lp(e,f),g.appendChild(f),a.setStart(f,0),a.setEnd(f,0),f;for(w=i;w.parentNode!==g;)w=w.parentNode;for(;w&&!F.isBlock(w);)b=w,w=w.previousSibling;if(b&&e.schema.isValidChild(N,z.toLowerCase())){for(f=F.create(z),lp(e,f),b.parentNode.insertBefore(f,b),w=b;w&&!F.isBlock(w);)O=w.nextSibling,f.appendChild(w),w=O;a.setStart(i,s),a.setEnd(i,s)}}return i},HE=function(e,n){n.normalize();var a=n.lastChild;(!a||/^(left|right)$/gi.test(e.getStyle(a,"float",!0)))&&e.add(n,"br")},b$=function(e,n){var a,i,s,f,g,b,w,O,N,z,F=e.dom,q=e.schema,G=q.getNonEmptyElements(),X=e.selection.getRng(),J=function(Be){var Je=i,rn,At,Ye,hn=q.getTextInlineElements();if(Be||O==="TABLE"||O==="HR"?rn=F.create(Be||N):rn=f.cloneNode(!1),Ye=rn,Wm(e)===!1)F.setAttrib(rn,"style",null),F.setAttrib(rn,"class",null);else do if(hn[Je.nodeName]){if(uc(Je)||ws(Je))continue;At=Je.cloneNode(!1),F.setAttrib(At,"id",""),rn.hasChildNodes()?(At.appendChild(rn.firstChild),rn.appendChild(At)):(Ye=At,rn.appendChild(At))}while((Je=Je.parentNode)&&Je!==se);return lp(e,rn),Pb(Ye),rn},ie=function(Be){var Je,rn,At=Gx(Be,i,s);if(Pt(i)&&(Be?At>0:At<i.nodeValue.length))return!1;if(i.parentNode===f&&z&&!Be||Be&&Sn(i)&&i===f.firstChild)return!0;if(LE(i,"TABLE")||LE(i,"HR"))return z&&!Be||!z&&Be;var Ye=new zr(i,f);for(Pt(i)&&(Be&&At===0?Ye.prev():!Be&&At===i.nodeValue.length&&Ye.next());Je=Ye.current();){if(Sn(Je)){if(!Je.getAttribute("data-mce-bogus")&&(rn=Je.nodeName.toLowerCase(),G[rn]&&rn!=="br"))return!1}else if(Pt(Je)&&!Ec(Je.nodeValue))return!1;Be?Ye.prev():Ye.next()}return!0},oe=function(){/^(H[1-6]|PRE|FIGURE)$/.test(O)&&xe!=="HGROUP"?g=J(N):g=J(),Kw(e)&&VR(F,w)&&F.isEmpty(f)?g=F.split(w,f):F.insertAfter(g,f),W2(e,g)};wh(F,X).each(function(Be){X.setStart(Be.startContainer,Be.startOffset),X.setEnd(Be.endContainer,Be.endOffset)}),i=X.startContainer,s=X.startOffset,N=Pi(e);var ve=!!(n&&n.shiftKey),Ce=!!(n&&n.ctrlKey);Sn(i)&&i.hasChildNodes()&&(z=s>i.childNodes.length-1,i=i.childNodes[Math.min(s,i.childNodes.length-1)]||i,z&&Pt(i)?s=i.nodeValue.length:s=0);var se=gc(F,i);if(se){(N&&!ve||!N&&ve)&&(i=UR(e,N,X,i,s)),f=F.getParent(i,F.isBlock),w=f?F.getParent(f.parentNode,F.isBlock):null,O=f?f.nodeName.toUpperCase():"";var xe=w?w.nodeName.toUpperCase():"";if(xe==="LI"&&!Ce&&(f=w,w=w.parentNode,O=xe),/^(LI|DT|DD)$/.test(O)&&F.isEmpty(f)){FE(e,J,w,f,N);return}N&&f===e.getBody()||(N=N||"P",aa(f)?(g=Jb(f),F.isEmpty(f)&&Pb(f),lp(e,g),W2(e,g)):ie()?oe():ie(!0)?(g=f.parentNode.insertBefore(J(),f),W2(e,LE(f,"HR")?g:f)):(a=g$(X).cloneRange(),a.setEndAfter(f),b=a.extractContents(),HR(b),h$(b),g=b.firstChild,F.insertAfter(b,f),m$(F,G,g),HE(F,f),F.isEmpty(f)&&Pb(f),g.normalize(),F.isEmpty(g)?(F.remove(g),oe()):(lp(e,g),W2(e,g))),F.setAttrib(g,"id",""),e.fire("NewBlock",{newBlock:g}))}},y$=function(e,n,a){for(var i=new zr(n,a),s,f=e.getNonEmptyElements();s=i.next();)if(f[s.nodeName.toLowerCase()]||s.length>0)return!0},VE=function(e,n,a){var i=e.dom.createRng();a?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),e.selection.setRng(i),ug(e,i)},w$=function(e,n){var a=e.selection,i=e.dom,s=a.getRng(),f,g;wh(i,s).each(function(G){s.setStart(G.startContainer,G.startOffset),s.setEnd(G.endContainer,G.endOffset)});var b=s.startOffset,w=s.startContainer;if(w.nodeType===1&&w.hasChildNodes()){var O=b>w.childNodes.length-1;w=w.childNodes[Math.min(b,w.childNodes.length-1)]||w,O&&w.nodeType===3?b=w.nodeValue.length:b=0}var N=i.getParent(w,i.isBlock),z=N?i.getParent(N.parentNode,i.isBlock):null,F=z?z.nodeName.toUpperCase():"",q=!!(n&&n.ctrlKey);F==="LI"&&!q&&(N=z),w&&w.nodeType===3&&b>=w.nodeValue.length&&(y$(e.schema,w,N)||(f=i.create("br"),s.insertNode(f),s.setStartAfter(f),s.setEndAfter(f),g=!0)),f=i.create("br"),wv(i,s,f),VE(e,f,g),e.undoManager.add()},C$=function(e,n){var a=M.fromTag("br");Oi(M.fromDom(n),a),e.undoManager.add()},S$=function(e,n){T$(e.getBody(),n)||Zf(M.fromDom(n),M.fromTag("br"));var a=M.fromTag("br");Zf(M.fromDom(n),a),VE(e,a.dom,!1),e.undoManager.add()},x$=function(e){return ra(e.getNode())},T$=function(e,n){return x$(Re.after(n))?!0:oc(e,Re.after(n)).map(function(a){return ra(a.getNode())}).getOr(!1)},WR=function(e){return e&&e.nodeName==="A"&&"href"in e},k$=function(e){return e.fold(ut,WR,WR,ut)},E$=function(e){var n=et(xg,e),a=Re.fromRangeStart(e.selection.getRng());return Uf(n,e.getBody(),a).filter(k$)},O$=function(e,n){n.fold(Tt,et(C$,e),et(S$,e),Tt)},pu=function(e,n){var a=E$(e);a.isSome()?a.each(et(O$,e)):w$(e,n)},jR=function(e,n){return $E(e).filter(function(a){return n.length>0&&xt(M.fromDom(a),n)}).isSome()},A$=function(e){return jR(e,W0(e))},D$=function(e){return jR(e,qw(e))},to=Yt.generate([{br:[]},{block:[]},{none:[]}]),R$=function(e,n){return D$(e)},qx=function(e){return function(n,a){var i=Pi(n)==="";return i===e}},GR=function(e){return function(n,a){return Mb(n)===e}},fp=function(e,n){return function(a,i){var s=IR(a)===e.toUpperCase();return s===n}},Kx=function(e){return fp("pre",e)},_$=function(){return fp("summary",!0)},Nb=function(e){return function(n,a){return ck(n)===e}},B$=function(e,n){return A$(e)},q2=function(e,n){return n},qR=function(e){var n=Pi(e),a=l$(e.dom,e.selection.getStart());return a&&e.schema.isValidChild(a.nodeName,n||"P")},wl=function(e,n){return function(a,i){var s=jr(e,function(f,g){return f&&g(a,i)},!0);return s?ee.some(n):ee.none()}},M$=function(e,n){return rR([wl([R$],to.none()),wl([_$()],to.br()),wl([Kx(!0),Nb(!1),q2],to.br()),wl([Kx(!0),Nb(!1)],to.block()),wl([Kx(!0),Nb(!0),q2],to.block()),wl([Kx(!0),Nb(!0)],to.br()),wl([GR(!0),q2],to.br()),wl([GR(!0)],to.block()),wl([qx(!0),q2,qR],to.block()),wl([qx(!0)],to.br()),wl([B$],to.br()),wl([qx(!1),q2],to.br()),wl([qR],to.block())],[e,!!(n&&n.shiftKey)]).getOr(to.none())},KR=function(e,n){M$(e,n).fold(function(){pu(e,n)},function(){b$(e,n)},Tt)},Xx=function(e,n){n.isDefaultPrevented()||(n.preventDefault(),yb(e.undoManager),e.undoManager.transact(function(){e.selection.isCollapsed()===!1&&e.execCommand("Delete"),KR(e,n)}))},XR=function(e){e.on("keydown",function(n){n.keyCode===ln.ENTER&&Xx(e,n)})},P$=function(e,n,a){Bb([{keyCode:ln.END,action:Tr(Ux,e,!0)},{keyCode:ln.HOME,action:Tr(Ux,e,!1)},{keyCode:ln.END,action:Tr(AE,e,!0)},{keyCode:ln.HOME,action:Tr(AE,e,!1)},{keyCode:ln.END,action:Tr(zx,e,!0,n)},{keyCode:ln.HOME,action:Tr(zx,e,!1,n)}],a).each(function(i){a.preventDefault()})},N$=function(e,n){e.on("keydown",function(a){a.isDefaultPrevented()===!1&&P$(e,n,a)})},$$=Ut().browser,z$=function(e){var n=Zr(function(){e.composing||dr(e)},0);$$.isIE()&&(e.on("keypress",function(a){n.throttle()}),e.on("remove",function(a){n.cancel()}))},I$=function(e){z$(e),e.on("input",function(n){n.isComposing===!1&&dr(e)})},UE=Ut(),YR=function(e,n,a){Bb([{keyCode:ln.PAGE_UP,action:Tr(zx,e,!1,n)},{keyCode:ln.PAGE_DOWN,action:Tr(zx,e,!0,n)}],a)},WE=function(e){return e.stopImmediatePropagation()},jE=function(e){return e.keyCode===ln.PAGE_UP||e.keyCode===ln.PAGE_DOWN},JR=function(e,n,a){a&&!e.get()?n.on("NodeChange",WE,!0):!a&&e.get()&&n.off("NodeChange",WE),e.set(a)},F$=function(e,n){if(!UE.os.isOSX()){var a=Au(!1);e.on("keydown",function(i){jE(i)&&JR(a,e,!0)}),e.on("keyup",function(i){i.isDefaultPrevented()===!1&&YR(e,n,i),jE(i)&&a.get()&&(JR(a,e,!1),e.nodeChanged())})}},ZR=function(e,n){var a=n.container(),i=n.offset();return Pt(a)?(a.insertData(i,e),ee.some(Re(a,i+e.length))):kv(n).map(function(s){var f=M.fromText(e);return n.isAtEnd()?Zf(s,f):Oi(s,f),Re(f.dom,e.length)})},L$=et(ZR,fs),H$=et(ZR," "),V$=function(e){return function(n){return n.fold(function(a){return ic(e.dom,Re.before(a))},function(a){return _u(a)},function(a){return vl(a)},function(a){return oc(e.dom,Re.after(a))})}},QR=function(e,n){return function(a){return s2(e,a)?L$(n):H$(n)}},U$=function(e){return function(n){return e.selection.setRng(n.toRange()),e.nodeChanged(),!0}},W$=function(e){var n=Re.fromRangeStart(e.selection.getRng()),a=M.fromDom(e.getBody());if(e.selection.isCollapsed()){var i=et(xg,e),s=Re.fromRangeStart(e.selection.getRng());return Uf(i,e.getBody(),s).bind(V$(a)).bind(QR(a,n)).exists(U$(e))}else return!1},j$=function(e,n){Bb([{keyCode:ln.SPACEBAR,action:Tr(W$,e)}],n).each(function(a){n.preventDefault()})},G$=function(e){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&j$(e,n)})},e_=function(e){var n=gR(e);return BN(e),i$(e,n),s$(e,n),XR(e),G$(e),I$(e),N$(e,n),F$(e,n),n},q$=function(e){return nm(e)?Au(null):e_(e)},K$=function(){function e(n){this.lastPath=[],this.editor=n;var a,i=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",function(s){var f=n.selection.getRng(),g={startContainer:f.startContainer,startOffset:f.startOffset,endContainer:f.endContainer,endOffset:f.endOffset};(s.type==="nodechange"||!I1(g,a))&&n.fire("SelectionChange"),a=g}),n.on("contextmenu",function(){n.fire("SelectionChange")}),n.on("SelectionChange",function(){var s=n.selection.getStart(!0);!s||!Qt.range&&n.selection.isCollapsed()||cc(n)&&!i.isSameElementPath(s)&&n.dom.isChildOf(s,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",function(s){!s.isDefaultPrevented()&&cc(n)&&(n.selection.getNode().nodeName==="IMG"?Ki.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())})}return e.prototype.nodeChanged=function(n){var a=this.editor.selection,i,s,f;this.editor.initialized&&a&&!Ck(this.editor)&&!this.editor.mode.isReadOnly()&&(f=this.editor.getBody(),i=a.getStart(!0)||f,(i.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(i,f))&&(i=f),s=[],this.editor.dom.getParent(i,function(g){if(g===f)return!0;s.push(g)}),n=n||{},n.element=i,n.parents=s,this.editor.fire("NodeChange",n))},e.prototype.isSameElementPath=function(n){var a,i=this.editor.$(n).parentsUntil(this.editor.getBody()).add(n);if(i.length===this.lastPath.length){for(a=i.length;a>=0&&i[a]===this.lastPath[a];a--);if(a===-1)return this.lastPath=i,!0}return this.lastPath=i,!1},e}(),X$=function(e){e.on("click",function(n){e.dom.getParent(n.target,"details")&&n.preventDefault()})},Y$=function(e){e.parser.addNodeFilter("details",function(n){ft(n,function(a){a.attr("data-mce-open",a.attr("open")),a.attr("open","open")})}),e.serializer.addNodeFilter("details",function(n){ft(n,function(a){var i=a.attr("data-mce-open");a.attr("open",cr(i)?i:null),a.attr("data-mce-open",null)})})},t_=function(e){X$(e),Y$(e)},K2=function(e){return Sn(e)&&_l(M.fromDom(e))},n_=function(e){var n=e.selection.getRng(),a=Re.fromRangeStart(n),i=Re.fromRangeEnd(n);if(Re.isElementPosition(a)){var s=a.container();K2(s)&&_u(s).each(function(f){return n.setStart(f.container(),f.offset())})}if(Re.isElementPosition(i)){var s=a.container();K2(s)&&vl(s).each(function(g){return n.setEnd(g.container(),g.offset())})}e.selection.setRng(N4(n))},r_=function(e){e.on("click",function(n){n.detail>=3&&n_(e)})},a_=function(e){var n=e.getBoundingClientRect(),a=e.ownerDocument,i=a.documentElement,s=a.defaultView;return{top:n.top+s.pageYOffset-i.clientTop,left:n.left+s.pageXOffset-i.clientLeft}},J$=function(e){return e.inline?a_(e.getBody()):{left:0,top:0}},GE=function(e){var n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Z$=function(e){var n=e.getBody(),a=e.getDoc().documentElement,i={left:n.scrollLeft,top:n.scrollTop},s={left:n.scrollLeft||a.scrollLeft,top:n.scrollTop||a.scrollTop};return e.inline?i:s},Q$=function(e,n){if(n.target.ownerDocument!==e.getDoc()){var a=a_(e.getContentAreaContainer()),i=Z$(e);return{left:n.pageX-a.left+i.left,top:n.pageY-a.top+i.top}}return{left:n.pageX,top:n.pageY}},ez=function(e,n,a){return{pageX:a.left-e.left+n.left,pageY:a.top-e.top+n.top}},tz=function(e,n){return ez(J$(e),GE(e),Q$(e,n))},hc=Ra,o_=Sc,i_=function(e,n){return hc(n)&&n!==e},nz=function(e,n,a){return n===a||e.dom.isChildOf(n,a)?!1:!hc(n)},rz=function(e){var n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},az=function(e,n,a,i){var s=e.dom,f=n.cloneNode(!0);s.setStyles(f,{width:a,height:i}),s.setAttrib(f,"data-mce-selected",null);var g=s.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return s.setStyles(g,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:a,height:i}),s.setStyles(f,{margin:0,boxSizing:"border-box"}),g.appendChild(f),g},oz=function(e,n){e.parentNode!==n&&n.appendChild(e)},iz=function(e,n,a,i,s,f){var g=0,b=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+a>s&&(g=n.pageX+a-s),n.pageY+i>f&&(b=n.pageY+i-f),e.style.width=a-g+"px",e.style.height=i-b+"px"},u_=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},uz=function(e){return e.button===0},qE=function(e,n){return{pageX:n.pageX-e.relX,pageY:n.pageY+5}},sz=function(e,n){return function(a){if(uz(a)){var i=ua(n.dom.getParents(a.target),rk(hc,o_)).getOr(null);if(i_(n.getBody(),i)){var s=n.dom.getPos(i),f=n.getBody(),g=n.getDoc().documentElement;e.set({element:i,dragging:!1,screenX:a.screenX,screenY:a.screenY,maxX:(n.inline?f.scrollWidth:g.offsetWidth)-2,maxY:(n.inline?f.scrollHeight:g.offsetHeight)-2,relX:a.pageX-s.x,relY:a.pageY-s.y,width:i.offsetWidth,height:i.offsetHeight,ghost:az(n,i,i.offsetWidth,i.offsetHeight)})}}}},cz=function(e,n){var a=Ki.throttle(function(i,s){n._selectionOverrides.hideFakeCaret(),n.selection.placeCaretAt(i,s)},0);return n.on("remove",a.stop),function(i){return e.on(function(s){var f=Math.max(Math.abs(i.screenX-s.screenX),Math.abs(i.screenY-s.screenY));if(!s.dragging&&f>10){var g=n.fire("dragstart",{target:s.element});if(g.isDefaultPrevented())return;s.dragging=!0,n.focus()}if(s.dragging){var b=qE(s,tz(n,i));oz(s.ghost,n.getBody()),iz(s.ghost,b,s.width,s.height,s.maxX,s.maxY),a(i.clientX,i.clientY)}})}},s_=function(e){var n=e.getSel().getRangeAt(0),a=n.startContainer;return a.nodeType===3?a.parentNode:a},lz=function(e,n){return function(a){e.on(function(i){if(i.dragging){if(nz(n,s_(n.selection),i.element)){var s=rz(i.element),f=n.fire("drop",{clientX:a.clientX,clientY:a.clientY});f.isDefaultPrevented()||n.undoManager.transact(function(){u_(i.element),n.insertContent(n.dom.getOuterHTML(s)),n._selectionOverrides.hideFakeCaret()})}n.fire("dragend")}}),c_(e)}},fz=function(e,n){return function(){e.on(function(a){a.dragging&&n.fire("dragend")}),c_(e)}},c_=function(e){e.on(function(n){u_(n.ghost)}),e.clear()},vz=function(e){var n=mv(),a=Ea.DOM,i=document,s=sz(n,e),f=cz(n,e),g=lz(n,e),b=fz(n,e);e.on("mousedown",s),e.on("mousemove",f),e.on("mouseup",g),a.bind(i,"mousemove",f),a.bind(i,"mouseup",b),e.on("remove",function(){a.unbind(i,"mousemove",f),a.unbind(i,"mouseup",b)}),e.on("keydown",function(w){w.keyCode===ln.ESC&&b()})},dz=function(e){e.on("drop",function(n){var a=typeof n.clientX<"u"?e.getDoc().elementFromPoint(n.clientX,n.clientY):null;(hc(a)||e.dom.getContentEditableParent(a)==="false")&&n.preventDefault()})},mz=function(e){var n=function(s){if(!s.isDefaultPrevented()){var f=s.dataTransfer;f&&(tn(f.types,"Files")||f.files.length>0)&&(s.preventDefault(),s.type==="drop"&&xb(e,"Dropped file type is not supported"))}},a=function(s){Oh(e,s.target)&&n(s)},i=function(){var s=Ea.DOM,f=e.dom,g=document,b=e.inline?e.getBody():e.getDoc(),w=["drop","dragover"];ft(w,function(O){s.bind(g,O,a),f.bind(b,O,n)}),e.on("remove",function(){ft(w,function(O){s.unbind(g,O,a),f.unbind(b,O,n)})})};e.on("init",function(){Ki.setEditorTimeout(e,i,0)})},KE=function(e){vz(e),dz(e),tC(e)&&mz(e)},gz=function(e){var n=Zr(function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var a=e.selection.getRng();if(a.collapsed){var i=M2(e,a,!1);e.selection.setRng(i)}}},0);e.on("focus",function(){n.throttle()}),e.on("blur",function(){n.cancel()})},l_=function(e){e.on("init",function(){e.on("focusin",function(n){var a=n.target;if(Wu(a)){var i=Dv(e.getBody(),a),s=Ra(i)?i:a;e.selection.getNode()!==s&&ap(e,s).each(function(f){return e.selection.setRng(f)})}})})},f_=Sc,vp=Ra,Yx=function(e,n){return Dv(e.getBody(),n)},hz=function(e){var n=e.selection,a=e.dom,i=a.isBlock,s=e.getBody(),f=cC(e,s,i,function(){return Nv(e)}),g="sel-"+a.uniqueId(),b="data-mce-selected",w,O=function(Ye){return a.hasClass(Ye,"mce-offscreen-selection")},N=function(Ye){return Ye!==s&&(vp(Ye)||Wu(Ye))&&a.isChildOf(Ye,s)},z=function(Ye){return $v(Ye)||zv(Ye)||gg(Ye)||hg(Ye)},F=function(){var Ye=a.get(g);return Ye&&Ye.getElementsByTagName("*")[0]},q=function(Ye){Ye&&n.setRng(Ye)},G=n.getRng,X=function(Ye,hn,rt,Dt){Dt===void 0&&(Dt=!0);var tt=e.fire("ShowCaret",{target:hn,direction:Ye,before:rt});return tt.isDefaultPrevented()?null:(Dt&&n.scrollIntoView(hn,Ye===-1),f.show(rt,hn))},J=function(Ye){Ye.hasAttribute("data-mce-caret")&&(Jb(Ye),q(G()),n.scrollIntoView(Ye))},ie=function(){e.on("mouseup",function(tt){var pt=G();pt.collapsed&&wD(e,tt.clientX,tt.clientY)&&Sx(e,pt,!1).each(q)}),e.on("click",function(tt){var pt=Yx(e,tt.target);pt&&(vp(pt)&&(tt.preventDefault(),e.focus()),f_(pt)&&a.isChildOf(pt,n.getNode())&&Je())}),e.on("blur NewBlock",Je),e.on("ResizeWindow FullscreenStateChanged",f.reposition);var Ye=function(tt){var pt=tt.firstChild;if(Vr(pt))return!1;var _t=Re.before(pt);if(ra(_t.getNode())&&tt.childNodes.length===1)return!z(_t);var qe=fl(tt),$t=qe.next(_t);return $t&&!z($t)},hn=function(tt,pt){var _t=a.getParent(tt,i),qe=a.getParent(pt,i);return _t===qe},rt=function(tt,pt){var _t=a.getParent(tt,i),qe=a.getParent(pt,i);return Vr(_t)?!1:tt!==qe&&a.isChildOf(_t,qe)&&vp(Yx(e,_t))===!1?!0:!a.isChildOf(qe,_t)&&!hn(_t,qe)&&Ye(_t)};e.on("tap",function(tt){var pt=tt.target,_t=Yx(e,pt);vp(_t)?(tt.preventDefault(),ap(e,_t).each(Be)):N(pt)&&ap(e,pt).each(Be)},!0),e.on("mousedown",function(tt){var pt=tt.target;if(!(pt!==s&&pt.nodeName!=="HTML"&&!a.isChildOf(pt,s))&&wD(e,tt.clientX,tt.clientY)!==!1){var _t=Yx(e,pt);if(_t)vp(_t)?(tt.preventDefault(),ap(e,_t).each(Be)):(Je(),!(f_(_t)&&tt.shiftKey)&&!ng(tt.clientX,tt.clientY,n.getRng())&&(At(),n.placeCaretAt(tt.clientX,tt.clientY)));else if(N(pt))ap(e,pt).each(Be);else if(Tv(pt)===!1){Je(),At();var qe=sN(s,tt.clientX,tt.clientY);if(qe&&!rt(pt,qe.node)){tt.preventDefault();var $t=X(1,qe.node,qe.before,!1);q($t),e.getBody().focus()}}}}),e.on("keypress",function(tt){ln.modifierPressed(tt)||vp(n.getNode())&&tt.preventDefault()}),e.on("GetSelectionRange",function(tt){var pt=tt.range;if(w){if(!w.parentNode){w=null;return}pt=pt.cloneRange(),pt.selectNode(w),tt.range=pt}}),e.on("SetSelectionRange",function(tt){tt.range=Ce(tt.range);var pt=Be(tt.range,tt.forward);pt&&(tt.range=pt)});var Dt=function(tt){return tt.id==="mcepastebin"};e.on("AfterSetSelectionRange",function(tt){var pt=tt.range,_t=pt.startContainer.parentNode;!ve(pt)&&!Dt(_t)&&At(),O(_t)||Je()}),e.on("copy",function(tt){var pt=tt.clipboardData;if(!tt.isDefaultPrevented()&&tt.clipboardData&&!Qt.ie){var _t=F();_t&&(tt.preventDefault(),pt.clearData(),pt.setData("text/html",_t.outerHTML),pt.setData("text/plain",_t.outerText||_t.innerText))}}),KE(e),gz(e),l_(e)},oe=function(Ye){return qu(Ye)||Hg(Ye)||Vg(Ye)},ve=function(Ye){return oe(Ye.startContainer)||oe(Ye.endContainer)},Ce=function(Ye){var hn=e.schema.getShortEndedElements(),rt=a.createRng(),Dt=Ye.startContainer,tt=Ye.startOffset,pt=Ye.endContainer,_t=Ye.endOffset;return $n(hn,Dt.nodeName.toLowerCase())?tt===0?rt.setStartBefore(Dt):rt.setStartAfter(Dt):rt.setStart(Dt,tt),$n(hn,pt.nodeName.toLowerCase())?_t===0?rt.setEndBefore(pt):rt.setEndAfter(pt):rt.setEnd(pt,_t),rt},se=function(Ye,hn,rt){var Dt=e.$,tt=ym(M.fromDom(e.getBody()),"#"+g).fold(function(){return Dt([])},function(qe){return Dt([qe.dom])});tt.length===0&&(tt=Dt('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",g),tt.appendTo(e.getBody()));var pt=a.createRng();hn===rt&&Qt.ie?(tt.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(hn),pt.setStartAfter(tt[0].firstChild.firstChild),pt.setEndAfter(hn)):(tt.empty().append(fs).append(hn).append(fs),pt.setStart(tt[0].firstChild,1),pt.setEnd(tt[0].lastChild,0)),tt.css({top:a.getPos(Ye,e.getBody()).y}),tt[0].focus();var _t=n.getSel();return _t.removeAllRanges(),_t.addRange(pt),pt},xe=function(Ye){var hn=Ye.cloneNode(!0),rt=e.fire("ObjectSelected",{target:Ye,targetClone:hn});if(rt.isDefaultPrevented())return null;var Dt=se(Ye,rt.targetClone,hn),tt=M.fromDom(Ye);return ft(Xu(M.fromDom(e.getBody()),"*[data-mce-selected]"),function(pt){gn(tt,pt)||$e(pt,b)}),a.getAttrib(Ye,b)||Ye.setAttribute(b,"1"),w=Ye,At(),Dt},Be=function(Ye,hn){if(!Ye)return null;if(Ye.collapsed){if(!ve(Ye)){var rt=hn?1:-1,Dt=hi(rt,s,Ye),tt=Dt.getNode(!hn);if(Tv(tt))return X(rt,tt,hn?!Dt.isAtEnd():!1,!1);var pt=Dt.getNode(hn);if(Tv(pt))return X(rt,pt,hn?!1:!Dt.isAtEnd(),!1)}return null}var _t=Ye.startContainer,qe=Ye.startOffset,$t=Ye.endOffset;if(_t.nodeType===3&&qe===0&&vp(_t.parentNode)&&(_t=_t.parentNode,qe=a.nodeIndex(_t),_t=_t.parentNode),_t.nodeType!==1)return null;if($t===qe+1&&_t===Ye.endContainer){var Bn=_t.childNodes[qe];if(N(Bn))return xe(Bn)}return null},Je=function(){w&&w.removeAttribute(b),ym(M.fromDom(e.getBody()),"#"+g).each(Za),w=null},rn=function(){f.destroy(),w=null},At=function(){f.hide()};return Qt.ceFalse&&!nm(e)&&ie(),{showCaret:X,showBlockCaretContainer:J,hideFakeCaret:At,destroy:rn}},Ii=function(e){var n=Ne.each,a=ln.BACKSPACE,i=ln.DELETE,s=e.dom,f=e.selection,g=e.parser,b=Qt.gecko,w=Qt.ie,O=Qt.webkit,N="data:text/mce-internal,",z=w?"Text":"URL",F=function(Ke,Ee){try{e.getDoc().execCommand(Ke,!1,Ee)}catch{}},q=function(Ke){return Ke.isDefaultPrevented()},G=function(Ke){var Ee,Ze;Ke.dataTransfer&&(e.selection.isCollapsed()&&Ke.target.tagName==="IMG"&&f.select(Ke.target),Ee=e.selection.getContent(),Ee.length>0&&(Ze=N+escape(e.id)+","+escape(Ee),Ke.dataTransfer.setData(z,Ze)))},X=function(Ke){var Ee;return Ke.dataTransfer&&(Ee=Ke.dataTransfer.getData(z),Ee&&Ee.indexOf(N)>=0)?(Ee=Ee.substr(N.length).split(","),{id:unescape(Ee[0]),html:unescape(Ee[1])}):null},J=function(Ke,Ee){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:Ke,internal:Ee}):e.execCommand("mceInsertContent",!1,Ke)},ie=function(){var Ke=function(Ze){var Oe=s.create("body"),Ft=Ze.cloneContents();return Oe.appendChild(Ft),f.serializer.serialize(Oe,{format:"html"})},Ee=function(Ze){var Oe=Ke(Ze),Ft=s.createRng();Ft.selectNode(e.getBody());var mt=Ke(Ft);return Oe===mt};e.on("keydown",function(Ze){var Oe=Ze.keyCode,Ft,mt;if(!q(Ze)&&(Oe===i||Oe===a)){if(Ft=e.selection.isCollapsed(),mt=e.getBody(),Ft&&!s.isEmpty(mt)||!Ft&&!Ee(e.selection.getRng()))return;Ze.preventDefault(),e.setContent(""),mt.firstChild&&s.isBlock(mt.firstChild)?e.selection.setCursorLocation(mt.firstChild,0):e.selection.setCursorLocation(mt,0),e.nodeChanged()}})},oe=function(){e.shortcuts.add("meta+a",null,"SelectAll")},ve=function(){e.inline||s.bind(e.getDoc(),"mousedown mouseup",function(Ke){var Ee;if(Ke.target===e.getDoc().documentElement)if(Ee=f.getRng(),e.getBody().focus(),Ke.type==="mousedown"){if(qu(Ee.startContainer))return;f.placeCaretAt(Ke.clientX,Ke.clientY)}else f.setRng(Ee)})},Ce=function(){e.on("keydown",function(Ke){if(!q(Ke)&&Ke.keyCode===a){if(!e.getBody().getElementsByTagName("hr").length)return;if(f.isCollapsed()&&f.getRng().startOffset===0){var Ee=f.getNode(),Ze=Ee.previousSibling;if(Ee.nodeName==="HR"){s.remove(Ee),Ke.preventDefault();return}Ze&&Ze.nodeName&&Ze.nodeName.toLowerCase()==="hr"&&(s.remove(Ze),Ke.preventDefault())}}})},se=function(){Range.prototype.getClientRects||e.on("mousedown",function(Ke){if(!q(Ke)&&Ke.target.nodeName==="HTML"){var Ee=e.getBody();Ee.blur(),Ki.setEditorTimeout(e,function(){Ee.focus()})}})},xe=function(){e.on("click",function(Ke){var Ee=Ke.target;/^(IMG|HR)$/.test(Ee.nodeName)&&s.getContentEditableParent(Ee)!=="false"&&(Ke.preventDefault(),e.selection.select(Ee),e.nodeChanged()),Ee.nodeName==="A"&&s.hasClass(Ee,"mce-item-anchor")&&(Ke.preventDefault(),f.select(Ee))})},Be=function(){var Ke=function(){var Ze=s.getAttribs(f.getStart().cloneNode(!1));return function(){var Oe=f.getStart();Oe!==e.getBody()&&(s.setAttrib(Oe,"style",null),n(Ze,function(Ft){Oe.setAttributeNode(Ft.cloneNode(!0))}))}},Ee=function(){return!f.isCollapsed()&&s.getParent(f.getStart(),s.isBlock)!==s.getParent(f.getEnd(),s.isBlock)};e.on("keypress",function(Ze){var Oe;if(!q(Ze)&&(Ze.keyCode===8||Ze.keyCode===46)&&Ee())return Oe=Ke(),e.getDoc().execCommand("delete",!1,null),Oe(),Ze.preventDefault(),!1}),s.bind(e.getDoc(),"cut",function(Ze){var Oe;!q(Ze)&&Ee()&&(Oe=Ke(),Ki.setEditorTimeout(e,function(){Oe()}))})},Je=function(){e.on("keydown",function(Ke){if(!q(Ke)&&Ke.keyCode===a&&f.isCollapsed()&&f.getRng().startOffset===0){var Ee=f.getNode().previousSibling;if(Ee&&Ee.nodeName&&Ee.nodeName.toLowerCase()==="table")return Ke.preventDefault(),!1}})},rn=function(){e.on("keydown",function(Ke){var Ee,Ze;if(!(q(Ke)||Ke.keyCode!==ln.BACKSPACE)){Ee=f.getRng();var Oe=Ee.startContainer,Ft=Ee.startOffset,mt=s.getRoot();if(Ze=Oe,!(!Ee.collapsed||Ft!==0)){for(;Ze&&Ze.parentNode&&Ze.parentNode.firstChild===Ze&&Ze.parentNode!==mt;)Ze=Ze.parentNode;Ze.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,Ze),Ee=s.createRng(),Ee.setStart(Oe,0),Ee.setEnd(Oe,0),f.setRng(Ee))}}})},At=function(){var Ke=function(){F("StyleWithCSS",!1),F("enableInlineTableEditing",!1),Pc(e)||F("enableObjectResizing",!1)};ih(e)||e.on("BeforeExecCommand mousedown",Ke)},Ye=function(){var Ke=function(){n(s.select("a"),function(Ee){var Ze=Ee.parentNode,Oe=s.getRoot();if(Ze.lastChild===Ee){for(;Ze&&!s.isBlock(Ze);){if(Ze.parentNode.lastChild!==Ze||Ze===Oe)return;Ze=Ze.parentNode}s.add(Ze,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function(Ee){(Ee.type==="setcontent"||Ee.command==="mceInsertLink")&&Ke()})},hn=function(){Pi(e)&&e.on("init",function(){F("DefaultParagraphSeparator",Pi(e))})},rt=function(){e.on("keyup focusin mouseup",function(Ke){ln.modifierPressed(Ke)||f.normalize()},!0)},Dt=function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},tt=function(){e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()})},pt=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(Ke){var Ee;if(Ke.target.nodeName==="HTML"){if(Qt.ie>11){e.getBody().focus();return}Ee=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ee),e.selection.normalize(),e.nodeChanged()}}))},_t=function(){Qt.mac&&e.on("keydown",function(Ke){if(ln.metaKeyPressed(Ke)&&!Ke.shiftKey&&(Ke.keyCode===37||Ke.keyCode===39)){Ke.preventDefault();var Ee=e.selection.getSel();Ee.modify("move",Ke.keyCode===37?"backward":"forward","lineboundary")}})},qe=function(){F("AutoUrlDetect",!1)},$t=function(){e.on("click",function(Ke){var Ee=Ke.target;do if(Ee.tagName==="A"){Ke.preventDefault();return}while(Ee=Ee.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Bn=function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(Ke){Ke.preventDefault()})})},Xr=function(){g.addNodeFilter("br",function(Ke){for(var Ee=Ke.length;Ee--;)Ke[Ee].attr("class")==="Apple-interchange-newline"&&Ke[Ee].remove()})},br=function(){e.on("dragstart",function(Ke){G(Ke)}),e.on("drop",function(Ke){if(!q(Ke)){var Ee=X(Ke);if(Ee&&Ee.id!==e.id){Ke.preventDefault();var Ze=Dy(Ke.x,Ke.y,e.getDoc());f.setRng(Ze),J(Ee.html,!0)}}})},Bo=Tt,lo=function(){if(!b||e.removed)return!1;var Ke=e.selection.getSel();return!Ke||!Ke.rangeCount||Ke.rangeCount===0},Vs=function(){O&&(ve(),xe(),Bn(),oe(),Qt.iOS&&(tt(),pt(),$t())),b&&(se(),At(),Dt(),_t())},pc=function(){rn(),ie(),Qt.windowsPhone||rt(),O&&(ve(),xe(),hn(),Bn(),Je(),Xr(),Qt.iOS?(tt(),pt(),$t()):oe()),Qt.ie>=11&&(pt(),Je()),Qt.ie&&(oe(),qe(),br()),b&&(Ce(),se(),Be(),At(),Ye(),Dt(),_t(),Je())};return nm(e)?Vs():pc(),{refreshContentEditable:Bo,isHidden:lo}},XE=Ea.DOM,pz=function(e,n){var a=M.fromDom(e.getBody()),i=Ja(Cu(a)),s=M.fromTag("style");E(s,"type","text/css"),Io(s,M.fromText(n)),Io(i,s),e.on("remove",function(){Za(s)})},bz=function(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0},YE=function(e){return ha(e,function(n){return Bt(n)===!1})},Jx=function(e){var n=e.settings,a=e.editorUpload.blobCache;return YE({allow_conditional_comments:n.allow_conditional_comments,allow_html_data_urls:n.allow_html_data_urls,allow_svg_data_urls:n.allow_svg_data_urls,allow_html_in_named_anchor:n.allow_html_in_named_anchor,allow_script_urls:n.allow_script_urls,allow_unsafe_link_target:n.allow_unsafe_link_target,convert_fonts_to_spans:n.convert_fonts_to_spans,fix_list_elements:n.fix_list_elements,font_size_legacy_values:n.font_size_legacy_values,forced_root_block:n.forced_root_block,forced_root_block_attrs:n.forced_root_block_attrs,padd_empty_with_br:n.padd_empty_with_br,preserve_cdata:n.preserve_cdata,remove_trailing_brs:n.remove_trailing_brs,inline_styles:n.inline_styles,root_name:bz(e),validate:!0,blob_cache:a,document:e.getDoc(),images_dataimg_filter:n.images_dataimg_filter})},yz=function(e){var n=e.settings;return Jt(Jt({},Jx(e)),YE({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,element_format:n.element_format,entities:n.entities,entity_encoding:n.entity_encoding,indent:n.indent,indent_after:n.indent_after,indent_before:n.indent_before,block_elements:n.block_elements,boolean_attributes:n.boolean_attributes,custom_elements:n.custom_elements,extended_valid_elements:n.extended_valid_elements,invalid_elements:n.invalid_elements,invalid_styles:n.invalid_styles,move_caret_before_on_enter_elements:n.move_caret_before_on_enter_elements,non_empty_elements:n.non_empty_elements,schema:n.schema,self_closing_elements:n.self_closing_elements,short_ended_elements:n.short_ended_elements,special:n.special,text_block_elements:n.text_block_elements,text_inline_elements:n.text_inline_elements,valid_children:n.valid_children,valid_classes:n.valid_classes,valid_elements:n.valid_elements,valid_styles:n.valid_styles,verify_html:n.verify_html,whitespace_elements:n.whitespace_elements}))},v_=function(e){var n=I3(Jx(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",function(a,i){for(var s=a.length,f,g,b=e.dom,w="data-mce-"+i;s--;)if(f=a[s],g=f.attr(i),g&&!f.attr(w)){if(g.indexOf("data:")===0||g.indexOf("blob:")===0)continue;i==="style"?(g=b.serializeStyle(b.parseStyle(g),f.name),g.length||(g=null),f.attr(w,g),f.attr(i,g)):i==="tabindex"?(f.attr(w,g),f.attr(i,null)):f.attr(w,e.convertURL(g,i,f.name))}}),n.addNodeFilter("script",function(a){for(var i=a.length;i--;){var s=a[i],f=s.attr("type")||"no/type";f.indexOf("mce-")!==0&&s.attr("type","mce-"+f)}}),e.settings.preserve_cdata&&n.addNodeFilter("#cdata",function(a){for(var i=a.length;i--;){var s=a[i];s.type=8,s.name="#comment",s.value="[CDATA["+e.dom.encode(s.value)+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(a){for(var i=a.length,s=e.schema.getNonEmptyElements();i--;){var f=a[i];f.isEmpty(s)&&f.getAll("br").length===0&&(f.append(new lc("br",1)).shortEnded=!0)}}),n},wz=function(e){e.settings.auto_focus&&Ki.setEditorTimeout(e,function(){var n;e.settings.auto_focus===!0?n=e:n=e.editorManager.get(e.settings.auto_focus),n.destroyed||n.focus()},100)},Cz=function(e){var n=e.dom.getRoot();!e.inline&&(!cc(e)||e.selection.getStart(!0)===n)&&_u(n).each(function(a){var i=a.getNode(),s=ho(i)?_u(i).getOr(a):a;Qt.browser.isIE()?iS(e,s.toRange()):e.selection.setRng(s.toRange())})},Sz=function(e){e.bindPendingEventDelegates(),e.initialized=!0,Gl(e),e.focus(!0),Cz(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),wz(e)},d_=function(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader},xz=function(e,n,a){var i=[new si(function(s,f){return d_(e).loadAll(n,s,f)})];return e.inline?i:i.concat([new si(function(s,f){return e.ui.styleSheetLoader.loadAll(a,s,f)})])},m_=function(e){var n=d_(e),a=y1(e),i=e.contentCSS,s=function(){n.unloadAll(i),e.inline||e.ui.styleSheetLoader.unloadAll(a)},f=function(){e.removed?s():e.on("remove",s)};if(e.contentStyles.length>0){var g="";Ne.each(e.contentStyles,function(w){g+=w+`\r
`}),e.dom.addStyle(g)}var b=si.all(xz(e,i,a)).then(f).catch(f);return e.settings.content_style&&pz(e,e.settings.content_style),b},Tz=function(e){var n=e.settings,a=e.getDoc(),i=e.getBody();Ty(e),!n.browser_spellcheck&&!n.gecko_spellcheck&&(a.body.spellcheck=!1,XE.setAttrib(i,"spellcheck","false")),e.quirks=Ii(e),Qr(e);var s=Yw(e);s!==void 0&&(i.dir=s),n.protect&&e.on("BeforeSetContent",function(f){Ne.each(n.protect,function(g){f.content=f.content.replace(g,function(b){return"<!--mce:protected "+escape(b)+"-->"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.on("compositionstart compositionend",function(f){e.composing=f.type==="compositionstart"})},kz=function(e){nm(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},JE=function(e){e.removed!==!0&&(kz(e),Sz(e))},ZE=function(e,n){var a=e.settings,i=e.getElement(),s=e.getDoc();a.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline&&(s.open(),s.write(e.iframeHTML),s.close()),e.inline&&(XE.addClass(i,"mce-content-body"),e.contentDocument=s=document,e.contentWindow=window,e.bodyElement=i,e.contentAreaContainer=i);var f=e.getBody();f.disabled=!0,e.readonly=!!a.readonly,e.readonly||(e.inline&&XE.getStyle(f,"position",!0)==="static"&&(f.style.position="relative"),f.contentEditable=e.getParam("content_editable_state",!0)),f.disabled=!1,e.editorUpload=_D(e),e.schema=er(a),e.dom=Ea(s,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:a.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:xv(e),referrerPolicy:Xw(e),onSetAttrib:function(w){e.fire("SetAttrib",w)}}),e.parser=v_(e),e.serializer=cD(yz(e),e),e.selection=B3(e.dom,e.getWin(),e.serializer,e),e.annotator=gl(e),e.formatter=PD(e),e.undoManager=wo(e),e._nodeChangeDispatcher=new K$(e),e._selectionOverrides=hz(e),_b(e),t_(e),nm(e)||r_(e);var g=q$(e);TN(e,g),AN(e),fP(e);var b=MA(e);Tz(e),b.fold(function(){m_(e).then(function(){return JE(e)})},function(w){e.setProgressState(!0),m_(e).then(function(){w().then(function(O){e.setProgressState(!1),JE(e)},function(O){e.notificationManager.open({type:"error",text:String(O)}),JE(e)})})})},X2=Ea.DOM,Ez=function(e,n){if(document.domain!==window.location.hostname&&Qt.browser.isIE()){var a=Zh("mce");e[a]=function(){ZE(e)};var i='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+a+"(true);})()";return X2.setAttrib(n,"src",i),!0}return!1},Oz=function(e,n,a,i){var s=M.fromTag("iframe");return $(s,i),$(s,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),zm(s,"tox-edit-area__iframe"),s},g_=function(e){var n=d1(e)+"<html><head>";sk(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var a=jw(e),i=U0(e),s=e.translate(kk(e));return Gw(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Gw(e)+'" />'),n+="</head>"+('<body id="'+a+'" class="mce-content-body '+i+'" data-id="'+e.id+'" aria-label="'+s+'">')+"<br></body></html>",n},Az=function(e,n){var a=e.translate("Rich Text Area"),i=Oz(e.id,a,n.height,v1(e)).dom;i.onload=function(){i.onload=null,e.fire("load")};var s=Ez(e,i);return e.contentAreaContainer=n.iframeContainer,e.iframeElement=i,e.iframeHTML=g_(e),X2.add(n.iframeContainer,i),s},Dz=function(e,n){var a=Az(e,n);n.editorContainer&&(X2.get(n.editorContainer).style.display=e.orgDisplay,e.hidden=X2.isHidden(n.editorContainer)),e.getElement().style.display="none",X2.setAttrib(e.id,"aria-hidden","true"),a||ZE(e)},h_=Ea.DOM,p_=function(e,n,a){var i=dc.get(a),s=dc.urls[a]||e.documentBaseUrl.replace(/\/$/,"");if(a=Ne.trim(a),i&&Ne.inArray(n,a)===-1){if(Ne.each(dc.dependencies(a),function(g){p_(e,n,g)}),e.plugins[a])return;try{var f=new i(e,s,e.$);e.plugins[a]=f,f.init&&(f.init(e,s),n.push(a))}catch(g){TD(e,a,g)}}},QE=function(e){return e.replace(/^\-/,"")},Rz=function(e){var n=[];Ne.each(Y0(e).split(/[ ,]/),function(a){p_(e,n,QE(a))})},b_=function(e){var n=Ne.trim(h1(e)),a=e.ui.registry.getAll().icons,i=Jt(Jt({},fx.get("default").icons),fx.get(n).icons);Zn(i,function(s,f){$n(a,f)||e.ui.registry.addIcon(f,s)})},y_=function(e){var n=Od(e);if(cr(n)){e.settings.theme=QE(n);var a=Wc.get(n);e.theme=new a(e,Wc.urls[n]),e.theme.init&&e.theme.init(e,Wc.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}},w_=function(e){return e.theme.renderUI()},_z=function(e){var n=e.getElement(),a=Od(e),i=a(e,n);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||e.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||e.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:n.offsetHeight,i},C_=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},Bz=function(e){var n=h_.create("div");return h_.insertAfter(n,e),C_(n)},S_=function(e){var n=e.getElement();return e.inline?C_(null):Bz(n)},Mz=function(e){var n=e.getElement();return e.orgDisplay=n.style.display,cr(Od(e))?w_(e):Mt(Od(e))?_z(e):S_(e)},Pz=function(e,n){var a={show:ee.from(n.show).getOr(Tt),hide:ee.from(n.hide).getOr(Tt),disable:ee.from(n.disable).getOr(Tt),isDisabled:ee.from(n.isDisabled).getOr(ut),enable:function(){e.mode.isReadOnly()||ee.from(n.enable).map(ia)}};e.ui=Jt(Jt({},e.ui),a)},eO=function(e){e.fire("ScriptsLoaded"),b_(e),y_(e),Rz(e);var n=Mz(e);Pz(e,ee.from(n.api).getOr({}));var a={editorContainer:n.editorContainer,iframeContainer:n.iframeContainer};return e.editorContainer=a.editorContainer?a.editorContainer:null,j3(e),e.inline?ZE(e):Dz(e,a)},dp=Ea.DOM,x_=function(e){return e.charAt(0)==="-"},T_=function(e,n){var a=oh(n),i=j0(n);if(Yn.hasCode(a)===!1&&a!=="en"){var s=i!==""?i:n.editorManager.baseURL+"/langs/"+a+".js";e.add(s,Tt,void 0,function(){QM(n,s,a)})}},Nz=function(e,n,a,i){var s=Od(n);if(cr(s)){if(!x_(s)&&!$n(Wc.urls,s)){var f=Ad(n);f?Wc.load(s,n.documentBaseURI.toAbsolute(f)):Wc.load(s,"themes/"+s+"/theme"+a+".js")}e.loadQueue(function(){Wc.waitFor(s,i)})}else i()},$z=function(e){return ee.from(fk(e)).filter(function(n){return n.length>0}).map(function(n){return{url:n,name:ee.none()}})},k_=function(e,n,a){return ee.from(n).filter(function(i){return i.length>0&&!fx.has(i)}).map(function(i){return{url:e.editorManager.baseURL+"/icons/"+i+"/icons"+a+".js",name:ee.some(i)}})},E_=function(e,n,a){var i=k_(n,"default",a),s=$z(n).orThunk(function(){return k_(n,h1(n),"")});ft(Wn([i,s]),function(f){e.add(f.url,Tt,void 0,function(){xD(n,f.url,f.name.getOrUndefined())})})},O_=function(e,n){Ne.each(xk(e),function(a,i){dc.load(i,a,Tt,void 0,function(){mx(e,a,i)}),e.settings.plugins+=" "+i}),Ne.each(Y0(e).split(/[ ,]/),function(a){if(a=Ne.trim(a),a&&!dc.urls[a])if(x_(a)){a=a.substr(1,a.length);var i=dc.dependencies(a);Ne.each(i,function(f){var g={prefix:"plugins/",resource:f,suffix:"/plugin"+n+".js"},b=dc.createUrl(g,f);dc.load(b.resource,b,Tt,void 0,function(){mx(e,b.prefix+b.resource+b.suffix,b.resource)})})}else{var s={prefix:"plugins/",resource:a,suffix:"/plugin"+n+".js"};dc.load(a,s,Tt,void 0,function(){mx(e,s.prefix+s.resource+s.suffix,a)})}})},zz=function(e,n){var a=Il.ScriptLoader;Nz(a,e,n,function(){T_(a,e),E_(a,e,n),O_(e,n),a.loadQueue(function(){e.removed||eO(e)},e,function(){e.removed||eO(e)})})},Iz=function(e,n){return Tc.forElement(e,{contentCssCors:Sk(n),referrerPolicy:Xw(n)})},Fz=function(e){var n=e.id;Yn.setCode(oh(e));var a=function(){dp.unbind(window,"ready",a),e.render()};if(!ov.Event.domLoaded){dp.bind(window,"ready",a);return}if(e.getElement()&&Qt.contentEditable){var i=M.fromDom(e.getElement()),s=Wt(i);e.on("remove",function(){lr(i.dom.attributes,function(g){return $e(i,g.name)}),$(i,s)}),e.ui.styleSheetLoader=Iz(i,e),K0(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var f=e.getElement().form||dp.getParent(n,"form");f&&(e.formElement=f,Zw(e)&&!Ai(e.getElement())&&(dp.insertAfter(dp.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(g){e.fire(g.type,g)},dp.bind(f,"submit reset",e.formEventDelegate),e.on("reset",function(){e.resetContent()}),yk(e)&&!f.submit.nodeType&&!f.submit.length&&!f._mceOldSubmit&&(f._mceOldSubmit=f.submit,f.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),f._mceOldSubmit(f)})),e.windowManager=Sb(e),e.notificationManager=vc(e),Qw(e)&&e.on("GetContent",function(g){g.save&&(g.content=dp.encode(g.content))}),eC(e)&&e.on("submit",function(){e.initialized&&e.save()}),X0(e)&&(e._beforeUnload=function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),zz(e,e.suffix)}},Lz=function(e,n){return UA(e,n)},Hz={"font-size":"size","font-family":"face"},Vz=function(e,n,a){var i=function(f){return Di(f,e).orThunk(function(){return va(f)==="font"?pr(Hz,e).bind(function(g){return te(f,g)}):ee.none()})},s=function(f){return gn(M.fromDom(n),f)};return W4(M.fromDom(a),function(f){return i(f)},s)},Uz=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},Wz=function(e,n){return ee.from(Ea.DOM.getStyle(n,e,!0))},A_=function(e){return function(n,a){return ee.from(a).map(M.fromDom).filter(Da).bind(function(i){return Vz(e,n,i.dom).or(Wz(e,i.dom))}).getOr("")}},jz=A_("font-size"),Zx=vo(Uz,A_("font-family")),D_=function(e){return _u(e.getBody()).map(function(n){var a=n.container();return Pt(a)?a.parentNode:a})},R_=function(e){return ee.from(e.selection.getRng()).bind(function(n){var a=e.getBody(),i=n.startContainer===a&&n.startOffset===0;return i?ee.none():ee.from(e.selection.getStart(!0))})},Gz=function(e,n){return R_(e).orThunk(et(D_,e)).map(M.fromDom).filter(Da).bind(n)},Qx=function(e,n){return Gz(e,ue(ee.some,n))},tO=function(e,n){if(/^[0-9.]+$/.test(n)){var a=parseInt(n,10);if(a>=1&&a<=7){var i=lk(e),s=rh(e);return s?s[a-1]||n:i[a-1]||n}else return n}else return n},qz=function(e){var n=e.split(/\s*,\s*/);return Hn(n,function(a){return a.indexOf(" ")!==-1&&!(rr(a,'"')||rr(a,"'"))?"'"+a+"'":a}).join(",")},Kz=function(e,n){var a=tO(e,n);e.formatter.toggle("fontname",{value:qz(a)}),e.nodeChanged()},Xz=function(e){return Qx(e,function(n){return Zx(e.getBody(),n.dom)}).getOr("")},nO=function(e,n){e.formatter.toggle("fontsize",{value:tO(e,n)}),e.nodeChanged()},Yz=function(e){return Qx(e,function(n){return jz(e.getBody(),n.dom)}).getOr("")},rO=function(e){return Qx(e,function(n){var a=M.fromDom(e.getBody()),i=W4(n,function(f){return Di(f,"line-height")},et(gn,a)),s=function(){var f=parseFloat(jn(n,"line-height")),g=parseFloat(jn(n,"font-size"));return String(f/g)};return i.getOrThunk(s)}).getOr("")},Jz=function(e,n){e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Zz=function(e){if(typeof e!="string"){var n=Ne.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},Qz=function(e,n){var a=Zz(n);VA(e,a.content,a.details)},Y2=Ne.each,e6=Ne.map,t6=Ne.inArray,__=function(){function e(n){this.commands={state:{},exec:{},value:{}},this.editor=n,this.setupCommands(n)}return e.prototype.execCommand=function(n,a,i,s){var f,g=!1,b=this;if(!b.editor.removed){if(n.toLowerCase()!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(n)&&(!s||!s.skip_focus)?b.editor.focus():v4(b.editor)),s=b.editor.fire("BeforeExecCommand",{command:n,ui:a,value:i}),s.isDefaultPrevented())return!1;var w=n.toLowerCase();if(f=b.commands.exec[w])return f(w,a,i),b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0;if(Y2(this.editor.plugins,function(O){if(O.execCommand&&O.execCommand(n,a,i))return b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),g=!0,!1}),g)return g;if(b.editor.theme&&b.editor.theme.execCommand&&b.editor.theme.execCommand(n,a,i))return b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0;try{g=b.editor.getDoc().execCommand(n,a,i)}catch{}return g?(b.editor.fire("ExecCommand",{command:n,ui:a,value:i}),!0):!1}},e.prototype.queryCommandState=function(n){var a;if(!(this.editor.quirks.isHidden()||this.editor.removed)){if(n=n.toLowerCase(),a=this.commands.state[n])return a(n);try{return this.editor.getDoc().queryCommandState(n)}catch{}return!1}},e.prototype.queryCommandValue=function(n){var a;if(!(this.editor.quirks.isHidden()||this.editor.removed)){if(n=n.toLowerCase(),a=this.commands.value[n])return a(n);try{return this.editor.getDoc().queryCommandValue(n)}catch{}}},e.prototype.addCommands=function(n,a){a===void 0&&(a="exec");var i=this;Y2(n,function(s,f){Y2(f.toLowerCase().split(","),function(g){i.commands[a][g]=s})})},e.prototype.addCommand=function(n,a,i){var s=this;n=n.toLowerCase(),this.commands.exec[n]=function(f,g,b,w){return a.call(i||s.editor,g,b,w)}},e.prototype.queryCommandSupported=function(n){if(n=n.toLowerCase(),this.commands.exec[n])return!0;try{return this.editor.getDoc().queryCommandSupported(n)}catch{}return!1},e.prototype.addQueryStateHandler=function(n,a,i){var s=this;n=n.toLowerCase(),this.commands.state[n]=function(){return a.call(i||s.editor)}},e.prototype.addQueryValueHandler=function(n,a,i){var s=this;n=n.toLowerCase(),this.commands.value[n]=function(){return a.call(i||s.editor)}},e.prototype.hasCustomCommand=function(n){return n=n.toLowerCase(),!!this.commands.exec[n]},e.prototype.execNativeCommand=function(n,a,i){return a===void 0&&(a=!1),i===void 0&&(i=null),this.editor.getDoc().execCommand(n,a,i)},e.prototype.isFormatMatch=function(n){return this.editor.formatter.match(n)},e.prototype.toggleFormat=function(n,a){this.editor.formatter.toggle(n,a),this.editor.nodeChanged()},e.prototype.storeSelection=function(n){this.selectionBookmark=this.editor.selection.getBookmark(n)},e.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},e.prototype.setupCommands=function(n){var a=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":Tt,"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},mceFocus:function(s,f,g){dS(n,g)},"Cut,Copy,Paste":function(s){var f=n.getDoc(),g;try{a.execNativeCommand(s)}catch{g=!0}if(s==="paste"&&!f.queryCommandEnabled(s)&&(g=!0),g||!f.queryCommandSupported(s)){var b=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Qt.mac&&(b=b.replace(/Ctrl\+/g,"⌘+")),n.notificationManager.open({text:b,type:"error"})}},unlink:function(){if(n.selection.isCollapsed()){var s=n.dom.getParent(n.selection.getStart(),"a");s&&n.dom.remove(s,!0);return}n.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(s){var f=s.substring(7);f==="full"&&(f="justify"),Y2("left,center,right,justify".split(","),function(g){f!==g&&n.formatter.remove("align"+g)}),f!=="none"&&a.toggleFormat("align"+f)},"InsertUnorderedList,InsertOrderedList":function(s){var f;a.execNativeCommand(s);var g=n.dom.getParent(n.selection.getNode(),"ol,ul");g&&(f=g.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(f.nodeName)&&(a.storeSelection(),n.dom.split(f,g),a.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(s){a.toggleFormat(s)},"ForeColor,HiliteColor":function(s,f,g){a.toggleFormat(s,{value:g})},FontName:function(s,f,g){Kz(n,g)},FontSize:function(s,f,g){nO(n,g)},LineHeight:function(s,f,g){Jz(n,g)},Lang:function(s,f,g){a.toggleFormat(s,{value:g.code,customValue:g.customCode})},RemoveFormat:function(s){n.formatter.remove(s)},mceBlockQuote:function(){a.toggleFormat("blockquote")},FormatBlock:function(s,f,g){return a.toggleFormat(g||"p")},mceCleanup:function(){var s=n.selection.getBookmark();n.setContent(n.getContent()),n.selection.moveToBookmark(s)},mceRemoveNode:function(s,f,g){var b=g||n.selection.getNode();b!==n.getBody()&&(a.storeSelection(),n.dom.remove(b,!0),a.restoreSelection())},mceSelectNodeDepth:function(s,f,g){var b=0;n.dom.getParent(n.selection.getNode(),function(w){if(w.nodeType===1&&b++===g)return n.selection.select(w),!1},n.getBody())},mceSelectNode:function(s,f,g){n.selection.select(g)},mceInsertContent:function(s,f,g){Qz(n,g)},mceInsertRawHTML:function(s,f,g){n.selection.setContent("tiny_mce_marker");var b=n.getContent();n.setContent(b.replace(/tiny_mce_marker/g,function(){return g}))},mceInsertNewLine:function(s,f,g){KR(n,g)},mceToggleFormat:function(s,f,g){a.toggleFormat(g)},mceSetContent:function(s,f,g){n.setContent(g)},"Indent,Outdent":function(s){Lx(n,s)},mceRepaint:Tt,InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(s,f,g){n.execCommand("mceInsertContent",!1,g.replace(/\{\$selection\}/g,n.selection.getContent({format:"text"})))},mceInsertLink:function(s,f,g){typeof g=="string"&&(g={href:g});var b=n.dom.getParent(n.selection.getNode(),"a");g.href=g.href.replace(/ /g,"%20"),(!b||!g.href)&&n.formatter.remove("link"),g.href&&n.formatter.apply("link",g,b)},selectAll:function(){var s=n.dom.getParent(n.selection.getStart(),Sc);if(s){var f=n.dom.createRng();f.selectNodeContents(s),n.selection.setRng(f)}},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(s,f,g){return pu(n,g),!0}});var i=function(s){return function(){var f=n.selection,g=f.isCollapsed()?[n.dom.getParent(f.getNode(),n.dom.isBlock)]:f.getSelectedBlocks(),b=e6(g,function(w){return!!n.formatter.matchNode(w,s)});return t6(b,!0)!==-1}};a.addCommands({JustifyLeft:i("alignleft"),JustifyCenter:i("aligncenter"),JustifyRight:i("alignright"),JustifyFull:i("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(s){return a.isFormatMatch(s)},mceBlockQuote:function(){return a.isFormatMatch("blockquote")},Outdent:function(){return yR(n)},"InsertUnorderedList,InsertOrderedList":function(s){var f=n.dom.getParent(n.selection.getNode(),"ul,ol");return f&&(s==="insertunorderedlist"&&f.tagName==="UL"||s==="insertorderedlist"&&f.tagName==="OL")}},"state"),a.addCommands({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}}),a.addQueryValueHandler("FontName",function(){return Xz(n)},this),a.addQueryValueHandler("FontSize",function(){return Yz(n)},this),a.addQueryValueHandler("LineHeight",function(){return rO(n)},this)},e}(),mp="data-mce-contenteditable",n6=function(e,n,a){Im(e,n)&&a===!1?qp(e,n):a&&zm(e,n)},Zu=function(e,n,a){try{e.getDoc().execCommand(n,!1,String(a))}catch{}},Gv=function(e,n){e.dom.contentEditable=n?"true":"false"},r6=function(e){ft(Xu(e,'*[contenteditable="true"]'),function(n){E(n,mp,"true"),Gv(n,!1)})},a6=function(e){ft(Xu(e,"*["+mp+'="true"]'),function(n){$e(n,mp),Gv(n,!0)})},o6=function(e){ee.from(e.selection.getNode()).each(function(n){n.removeAttribute("data-mce-selected")})},i6=function(e){e.selection.setRng(e.selection.getRng())},u6=function(e,n){var a=M.fromDom(e.getBody());n6(a,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),o6(e),e.readonly=!0,Gv(a,!1),r6(a)):(e.readonly=!1,Gv(a,!0),a6(a),Zu(e,"StyleWithCSS",!1),Zu(e,"enableInlineTableEditing",!1),Zu(e,"enableObjectResizing",!1),vS(e)&&e.focus(),i6(e),e.nodeChanged())},gp=function(e){return e.readonly},aO=function(e){e.parser.addAttributeFilter("contenteditable",function(n){gp(e)&&ft(n,function(a){a.attr(mp,a.attr("contenteditable")),a.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(mp,function(n){gp(e)&&ft(n,function(a){a.attr("contenteditable",a.attr(mp))})}),e.serializer.addTempAttr(mp)},$b=function(e){e.serializer?aO(e):e.on("PreInit",function(){aO(e)})},s6=function(e){return e.type==="click"},c6=function(e,n){var a=function(i){return gn(i,M.fromDom(e.getBody()))};return io(n,"a",a).bind(function(i){return te(i,"href")})},l6=function(e,n){if(s6(n)&&!ln.metaKeyPressed(n)){var a=M.fromDom(n.target);c6(e,a).each(function(i){if(n.preventDefault(),/^#/.test(i)){var s=e.dom.select(i+',[name="'+wr(i,"#")+'"]');s.length&&e.selection.scrollIntoView(s[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},jf=function(e){e.on("ShowCaret",function(n){gp(e)&&n.preventDefault()}),e.on("ObjectSelected",function(n){gp(e)&&n.preventDefault()})},f6=Ne.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),oO=function(){function e(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ut}return e.isNative=function(n){return!!f6[n.toLowerCase()]},e.prototype.fire=function(n,a){var i=n.toLowerCase(),s=Gg(i,a||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(s);var f=this.bindings[i];if(f)for(var g=0,b=f.length;g<b;g++){var w=f[g];if(!w.removed){if(w.once&&this.off(i,w.func),s.isImmediatePropagationStopped())return s;if(w.func.call(this.scope,s)===!1)return s.preventDefault(),s}}return s},e.prototype.on=function(n,a,i,s){if(a===!1&&(a=ut),a){var f={func:a,removed:!1};s&&Ne.extend(f,s);for(var g=n.toLowerCase().split(" "),b=g.length;b--;){var w=g[b],O=this.bindings[w];O||(O=[],this.toggleEvent(w,!0)),i?O=Ko([f],O,!0):O=Ko(Ko([],O,!0),[f],!1),this.bindings[w]=O}}return this},e.prototype.off=function(n,a){var i=this;if(n)for(var s=n.toLowerCase().split(" "),f=s.length;f--;){var g=s[f],b=this.bindings[g];if(!g)return Zn(this.bindings,function(O,N){i.toggleEvent(N,!1),delete i.bindings[N]}),this;if(b){if(!a)b.length=0;else{var w=Va(b,function(O){return O.func===a});b=w.fail,this.bindings[g]=b,ft(w.pass,function(O){O.removed=!0})}b.length||(this.toggleEvent(n,!1),delete this.bindings[g])}}else Zn(this.bindings,function(O,N){i.toggleEvent(N,!1)}),this.bindings={};return this},e.prototype.once=function(n,a,i){return this.on(n,a,i,{once:!0})},e.prototype.has=function(n){return n=n.toLowerCase(),!(!this.bindings[n]||this.bindings[n].length===0)},e}(),zb=function(e){return e._eventDispatcher||(e._eventDispatcher=new oO({scope:e,toggleEvent:function(n,a){oO.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,a)}})),e._eventDispatcher},eT={fire:function(e,n,a){var i=this;if(i.removed&&e!=="remove"&&e!=="detach")return n;var s=zb(i).fire(e,n);if(a!==!1&&i.parent)for(var f=i.parent();f&&!s.isPropagationStopped();)f.fire(e,s,!1),f=f.parent();return s},on:function(e,n,a){return zb(this).on(e,n,a)},off:function(e,n){return zb(this).off(e,n)},once:function(e,n){return zb(this).once(e,n)},hasEventListeners:function(e){return zb(this).has(e)}},J2=Ea.DOM,Ag,Ib=function(e,n){if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(n))return e.getDoc().documentElement;var a=G0(e);return a?(e.eventRoot||(e.eventRoot=J2.select(a)[0]),e.eventRoot):e.getBody()},v6=function(e){return!e.hidden&&!gp(e)},B_=function(e,n,a){v6(e)?e.fire(n,a):gp(e)&&l6(e,a)},M_=function(e,n){var a;if(e.delegates||(e.delegates={}),!(e.delegates[n]||e.removed)){var i=Ib(e,n);if(G0(e)){if(Ag||(Ag={},e.editorManager.on("removeEditor",function(){e.editorManager.activeEditor||Ag&&(Zn(Ag,function(s,f){e.dom.unbind(Ib(e,f))}),Ag=null)})),Ag[n])return;a=function(s){for(var f=s.target,g=e.editorManager.get(),b=g.length;b--;){var w=g[b].getBody();(w===f||J2.isChildOf(f,w))&&B_(g[b],n,s)}},Ag[n]=a,J2.bind(i,n,a)}else a=function(s){B_(e,n,s)},J2.bind(i,n,a),e.delegates[n]=a}},P_=Jt(Jt({},eT),{bindPendingEventDelegates:function(){var e=this;Ne.each(e._pendingNativeEvents,function(n){M_(e,n)})},toggleNativeEvent:function(e,n){var a=this;e==="focus"||e==="blur"||a.removed||(n?a.initialized?M_(a,e):a._pendingNativeEvents?a._pendingNativeEvents.push(e):a._pendingNativeEvents=[e]:a.initialized&&(a.dom.unbind(Ib(a,e),e,a.delegates[e]),delete a.delegates[e]))},unbindAllNativeEvents:function(){var e=this,n=e.getBody(),a=e.dom;e.delegates&&(Zn(e.delegates,function(i,s){e.dom.unbind(Ib(e,s),s,i)}),delete e.delegates),!e.inline&&n&&a&&(n.onload=null,a.unbind(e.getWin()),a.unbind(e.getDoc())),a&&(a.unbind(n),a.unbind(e.getContainer()))}}),d6=["design","readonly"],iO=function(e,n,a,i){var s=a[n.get()],f=a[i];try{f.activate()}catch(g){console.error("problem while activating editor mode "+i+":",g);return}s.deactivate(),s.editorReadOnly!==f.editorReadOnly&&u6(e,f.editorReadOnly),n.set(i),IC(e,i)},N_=function(e,n,a,i){if(i!==a.get()){if(!$n(n,i))throw new Error("Editor mode '"+i+"' is invalid");e.initialized?iO(e,a,n,i):e.on("init",function(){return iO(e,a,n,i)})}},m6=function(e,n,a){var i;if(tn(d6,n))throw new Error("Cannot override default mode "+n);return Jt(Jt({},e),(i={},i[n]=Jt(Jt({},a),{deactivate:function(){try{a.deactivate()}catch(s){console.error("problem while deactivating editor mode "+n+":",s)}}}),i))},$_=function(e){var n=Au("design"),a=Au({design:{activate:Tt,deactivate:Tt,editorReadOnly:!1},readonly:{activate:Tt,deactivate:Tt,editorReadOnly:!0}});return $b(e),jf(e),{isReadOnly:function(){return gp(e)},set:function(i){return N_(e,a.get(),n,i)},get:function(){return n.get()},register:function(i,s){a.set(m6(a.get(),i,s))}}},uO=Ne.each,sO=Ne.explode,g6={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},z_=Ne.makeMap("alt,ctrl,shift,meta,access"),I_=function(e){var n,a={};uO(sO(e.toLowerCase(),"+"),function(s){s in z_?a[s]=!0:/^[0-9]{2,}$/.test(s)?a.keyCode=parseInt(s,10):(a.charCode=s.charCodeAt(0),a.keyCode=g6[s]||s.toUpperCase().charCodeAt(0))});var i=[a.keyCode];for(n in z_)a[n]?i.push(n):a[n]=!1;return a.id=i.join(","),a.access&&(a.alt=!0,Qt.mac?a.ctrl=!0:a.shift=!0),a.meta&&(Qt.mac?a.meta=!0:(a.ctrl=!0,a.meta=!1)),a},tT=function(){function e(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;var a=this;n.on("keyup keypress keydown",function(i){(a.hasModifier(i)||a.isFunctionKey(i))&&!i.isDefaultPrevented()&&(uO(a.shortcuts,function(s){if(a.matchShortcut(i,s))return a.pendingPatterns=s.subpatterns.slice(0),i.type==="keydown"&&a.executeShortcutAction(s),!0}),a.matchShortcut(i,a.pendingPatterns[0])&&(a.pendingPatterns.length===1&&i.type==="keydown"&&a.executeShortcutAction(a.pendingPatterns[0]),a.pendingPatterns.shift()))})}return e.prototype.add=function(n,a,i,s){var f=this,g=f.normalizeCommandFunc(i);return uO(sO(Ne.trim(n)),function(b){var w=f.createShortcut(b,a,g,s);f.shortcuts[w.id]=w}),!0},e.prototype.remove=function(n){var a=this.createShortcut(n);return this.shortcuts[a.id]?(delete this.shortcuts[a.id],!0):!1},e.prototype.normalizeCommandFunc=function(n){var a=this,i=n;return typeof i=="string"?function(){a.editor.execCommand(i,!1,null)}:Ne.isArray(i)?function(){a.editor.execCommand(i[0],i[1],i[2])}:i},e.prototype.createShortcut=function(n,a,i,s){var f=Ne.map(sO(n,">"),I_);return f[f.length-1]=Ne.extend(f[f.length-1],{func:i,scope:s||this.editor}),Ne.extend(f[0],{desc:this.editor.translate(a),subpatterns:f.slice(1)})},e.prototype.hasModifier=function(n){return n.altKey||n.ctrlKey||n.metaKey},e.prototype.isFunctionKey=function(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123},e.prototype.matchShortcut=function(n,a){return!a||a.ctrl!==n.ctrlKey||a.meta!==n.metaKey||a.alt!==n.altKey||a.shift!==n.shiftKey?!1:n.keyCode===a.keyCode||n.charCode&&n.charCode===a.charCode?(n.preventDefault(),!0):!1},e.prototype.executeShortcutAction=function(n){return n.func?n.func.call(n.scope):null},e}(),F_=function(){var e={},n={},a={},i={},s={},f={},g={},b=function(O,N){return function(z,F){return O[z.toLowerCase()]=Jt(Jt({},F),{type:N})}},w=function(O,N){return i[O.toLowerCase()]=N};return{addButton:b(e,"button"),addGroupToolbarButton:b(e,"grouptoolbarbutton"),addToggleButton:b(e,"togglebutton"),addMenuButton:b(e,"menubutton"),addSplitButton:b(e,"splitbutton"),addMenuItem:b(n,"menuitem"),addNestedMenuItem:b(n,"nestedmenuitem"),addToggleMenuItem:b(n,"togglemenuitem"),addAutocompleter:b(a,"autocompleter"),addContextMenu:b(s,"contextmenu"),addContextToolbar:b(f,"contexttoolbar"),addContextForm:b(f,"contextform"),addSidebar:b(g,"sidebar"),addIcon:w,getAll:function(){return{buttons:e,menuItems:n,icons:i,popups:a,contextMenus:s,contextToolbars:f,sidebars:g}}}},h6=function(){var e=F_();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},hp=Ea.DOM,nT=Ne.extend,L_=Ne.each,H_=Ne.resolve,p6=Qt.ie,rT=function(){function e(n,a,i){var s=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=i,this.documentBaseUrl=i.documentBaseURL,nT(this,P_),this.settings=WM(this,n,this.documentBaseUrl,i.defaultSettings,a),this.settings.suffix&&(i.suffix=this.settings.suffix),this.suffix=i.suffix,this.settings.base_url&&i._setBaseUrl(this.settings.base_url),this.baseUri=i.baseURI,this.settings.referrer_policy&&(Il.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),Ea.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),oa.languageLoad=this.settings.language_load,oa.baseURL=i.baseURL,this.id=n,this.setDirty(!1),this.documentBaseURI=new $f(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new tT(this),this.editorCommands=new __(this),this.settings.cache_suffix&&(Qt.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:h6(),styleSheetLoader:void 0,show:Tt,hide:Tt,enable:Tt,disable:Tt,isDisabled:ut};var f=this,g=$_(f);this.mode=g,this.setMode=g.set,i.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=Pn.overrideDefaults(function(){return{context:s.inline?s.getBody():s.getDoc(),element:s.getBody()}})}return e.prototype.render=function(){Fz(this)},e.prototype.focus=function(n){this.execCommand("mceFocus",!1,n)},e.prototype.hasFocus=function(){return Nv(this)},e.prototype.execCallback=function(n){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];var s=this,f=s.settings[n],g;if(f)return s.callbackLookup&&(g=s.callbackLookup[n])&&(f=g.func,g=g.scope),typeof f=="string"&&(g=f.replace(/\.\w+$/,""),g=g?H_(g):0,f=H_(f),s.callbackLookup=s.callbackLookup||{},s.callbackLookup[n]={func:f,scope:g}),f.apply(g||s,a)},e.prototype.translate=function(n){return Yn.translate(n)},e.prototype.getParam=function(n,a,i){return jM(this,n,a,i)},e.prototype.hasPlugin=function(n,a){var i=tn(Y0(this).split(/[ ,]/),n);return i?a?dc.get(n)!==void 0:!0:!1},e.prototype.nodeChanged=function(n){this._nodeChangeDispatcher.nodeChanged(n)},e.prototype.addCommand=function(n,a,i){this.editorCommands.addCommand(n,a,i)},e.prototype.addQueryStateHandler=function(n,a,i){this.editorCommands.addQueryStateHandler(n,a,i)},e.prototype.addQueryValueHandler=function(n,a,i){this.editorCommands.addQueryValueHandler(n,a,i)},e.prototype.addShortcut=function(n,a,i,s){this.shortcuts.add(n,a,i,s)},e.prototype.execCommand=function(n,a,i,s){return this.editorCommands.execCommand(n,a,i,s)},e.prototype.queryCommandState=function(n){return this.editorCommands.queryCommandState(n)},e.prototype.queryCommandValue=function(n){return this.editorCommands.queryCommandValue(n)},e.prototype.queryCommandSupported=function(n){return this.editorCommands.queryCommandSupported(n)},e.prototype.show=function(){var n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(hp.show(n.getContainer()),hp.hide(n.id)),n.load(),n.fire("show"))},e.prototype.hide=function(){var n=this,a=n.getDoc();n.hidden||(p6&&a&&!n.inline&&a.execCommand("SelectAll"),n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(hp.hide(n.getContainer()),hp.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.fire("hide"))},e.prototype.isHidden=function(){return!!this.hidden},e.prototype.setProgressState=function(n,a){this.fire("ProgressState",{state:n,time:a})},e.prototype.load=function(n){var a=this,i=a.getElement(),s;if(a.removed)return"";if(i){n=n||{},n.load=!0;var f=Ai(i)?i.value:i.innerHTML;return s=a.setContent(f,n),n.element=i,n.no_events||a.fire("LoadContent",n),n.element=i=null,s}},e.prototype.save=function(n){var a=this,i=a.getElement(),s,f;if(!(!i||!a.initialized||a.removed))return n=n||{},n.save=!0,n.element=i,s=n.content=a.getContent(n),n.no_events||a.fire("SaveContent",n),n.format==="raw"&&a.fire("RawSaveContent",n),s=n.content,Ai(i)?i.value=s:((n.is_removing||!a.inline)&&(i.innerHTML=s),(f=hp.getParent(a.id,"form"))&&L_(f.elements,function(g){if(g.name===a.id)return g.value=s,!1})),n.element=i=null,n.set_dirty!==!1&&a.setDirty(!1),s},e.prototype.setContent=function(n,a){return F3(this,n,a)},e.prototype.getContent=function(n){return xM(this,n)},e.prototype.insertContent=function(n,a){a&&(n=nT({content:n},a)),this.execCommand("mceInsertContent",!1,n)},e.prototype.resetContent=function(n){n===void 0?F3(this,this.startContent,{format:"raw"}):F3(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},e.prototype.isDirty=function(){return!this.isNotDirty},e.prototype.setDirty=function(n){var a=!this.isNotDirty;this.isNotDirty=!n,n&&n!==a&&this.fire("dirty")},e.prototype.getContainer=function(){var n=this;return n.container||(n.container=hp.get(n.editorContainer||n.id+"_parent")),n.container},e.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},e.prototype.getElement=function(){return this.targetElm||(this.targetElm=hp.get(this.id)),this.targetElm},e.prototype.getWin=function(){var n=this,a;return n.contentWindow||(a=n.iframeElement,a&&(n.contentWindow=a.contentWindow)),n.contentWindow},e.prototype.getDoc=function(){var n=this,a;return n.contentDocument||(a=n.getWin(),a&&(n.contentDocument=a.document)),n.contentDocument},e.prototype.getBody=function(){var n=this.getDoc();return this.bodyElement||(n?n.body:null)},e.prototype.convertURL=function(n,a,i){var s=this,f=s.settings;return f.urlconverter_callback?s.execCallback("urlconverter_callback",n,i,!0,a):!f.convert_urls||i&&i.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:f.relative_urls?s.documentBaseURI.toRelative(n):(n=s.documentBaseURI.toAbsolute(n,f.remove_script_host),n)},e.prototype.addVisual=function(n){Lz(this,n)},e.prototype.remove=function(){OM(this)},e.prototype.destroy=function(n){E2(this,n)},e.prototype.uploadImages=function(n){return this.editorUpload.uploadImages(n)},e.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},e.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},e.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},e.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},e.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},e}(),ef=Ea.DOM,b6=Ne.explode,qv=Ne.each,y6=Ne.extend,w6=0,V_=!1,eu,Kv=[],Wo=[],U_=function(e){return e!=="length"},cO=function(e){var n=e.type;qv(im.get(),function(a){switch(n){case"scroll":a.fire("ScrollWindow",e);break;case"resize":a.fire("ResizeWindow",e);break}})},W_=function(e){e!==V_&&(e?Pn(window).on("resize scroll",cO):Pn(window).off("resize scroll",cO),V_=e)},aT=function(e){var n=Wo;delete Kv[e.id];for(var a=0;a<Kv.length;a++)if(Kv[a]===e){Kv.splice(a,1);break}return Wo=jt(Wo,function(i){return e!==i}),im.activeEditor===e&&(im.activeEditor=Wo.length>0?Wo[0]:null),im.focusedEditor===e&&(im.focusedEditor=null),n.length!==Wo.length},lO=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(aT(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e},j_=document.compatMode!=="CSS1Compat",im=Jt(Jt({},eT),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:Pn,majorVersion:"5",minorVersion:"10.2",releaseDate:"2021-11-17",editors:Kv,i18n:Yn,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e=this,n,a,i="";a=$f.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));var s=window.tinymce||window.tinyMCEPreInit;if(s)n=s.base||s.baseURL,i=s.suffix;else{for(var f=document.getElementsByTagName("script"),g=0;g<f.length;g++){var b=f[g].src||"";if(b!==""){var w=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){w.indexOf(".min")!==-1&&(i=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}}if(!n&&document.currentScript){var b=document.currentScript.src;b.indexOf(".min")!==-1&&(i=".min"),n=b.substring(0,b.lastIndexOf("/"))}}e.baseURL=new $f(a).toAbsolute(n),e.documentBaseURL=a,e.baseURI=new $f(e.baseURL),e.suffix=i,cS(e)},overrideDefaults:function(e){var n=e.base_url;n&&this._setBaseUrl(n);var a=e.suffix;e.suffix&&(this.suffix=a),this.defaultSettings=e;var i=e.plugin_base_urls;i!==void 0&&Zn(i,function(s,f){oa.PluginManager.urls[f]=s})},init:function(e){var n=this,a,i=Ne.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),s=function(z,F){return z.inline&&F.tagName.toLowerCase()in i},f=function(z){var F=z.id;return F||(F=pr(z,"name").filter(function(q){return!ef.get(q)}).getOrThunk(ef.uniqueId),z.setAttribute("id",F)),F},g=function(z){var F=e[z];if(F)return F.apply(n,[])},b=function(z,F){return F.constructor===RegExp?F.test(z.className):ef.hasClass(z,F)},w=function(z){var F=[];if(Qt.browser.isIE()&&Qt.browser.version.major<11)return gx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(j_)return gx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(z.types)return qv(z.types,function(G){F=F.concat(ef.select(G.selector))}),F;if(z.selector)return ef.select(z.selector);if(z.target)return[z.target];switch(z.mode){case"exact":var q=z.elements||"";q.length>0&&qv(b6(q),function(G){var X=ef.get(G);X?F.push(X):qv(document.forms,function(J){qv(J.elements,function(ie){ie.name===G&&(G="mce_editor_"+w6++,ef.setAttrib(ie,"id",G),F.push(ie))})})});break;case"textareas":case"specific_textareas":qv(ef.select("textarea"),function(G){z.editor_deselector&&b(G,z.editor_deselector)||(!z.editor_selector||b(G,z.editor_selector))&&F.push(G)});break}return F},O=function(z){a=z},N=function(){var z=0,F=[],q,G=function(X,J,ie){var oe=new rT(X,J,n);F.push(oe),oe.on("init",function(){++z===q.length&&O(F)}),oe.targetElm=oe.targetElm||ie,oe.render()};if(ef.unbind(window,"ready",N),g("onpageload"),q=Pn.unique(w(e)),e.types){qv(e.types,function(X){Ne.each(q,function(J){return ef.is(J,X.selector)?(G(f(J),y6({},e,X),J),!1):!0})});return}Ne.each(q,function(X){lO(n.get(X.id))}),q=Ne.grep(q,function(X){return!n.get(X.id)}),q.length===0?O([]):qv(q,function(X){s(e,X)?gx("Could not initialize inline editor on invalid inline target element",X):G(f(X),e,X)})};return n.settings=e,ef.bind(window,"ready",N),new si(function(z){a?z(a):O=function(F){z(F)}})},get:function(e){return arguments.length===0?Wo.slice(0):cr(e)?ua(Wo,function(n){return n.id===e}).getOr(null):kn(e)&&Wo[e]?Wo[e]:null},add:function(e){var n=this,a=Kv[e.id];return a===e||(n.get(e.id)===null&&(U_(e.id)&&(Kv[e.id]=e),Kv.push(e),Wo.push(e)),W_(!0),n.activeEditor=e,n.fire("AddEditor",{editor:e}),eu||(eu=function(i){var s=n.fire("BeforeUnload");if(s.returnValue)return i.preventDefault(),i.returnValue=s.returnValue,s.returnValue},window.addEventListener("beforeunload",eu))),e},createEditor:function(e,n){return this.add(new rT(e,n,this))},remove:function(e){var n=this,a,i;if(!e){for(a=Wo.length-1;a>=0;a--)n.remove(Wo[a]);return}if(cr(e)){qv(ef.select(e),function(s){i=n.get(s.id),i&&n.remove(i)});return}return i=e,ye(n.get(i.id))?null:(aT(i)&&n.fire("RemoveEditor",{editor:i}),Wo.length===0&&window.removeEventListener("beforeunload",eu),i.remove(),W_(Wo.length>0),i)},execCommand:function(e,n,a){var i=this,s=i.get(a);switch(e){case"mceAddEditor":return i.get(a)||new rT(a,i.settings,i).render(),!0;case"mceRemoveEditor":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(i.execCommand("mceAddEditor",!1,a),!0)}return i.activeEditor?i.activeEditor.execCommand(e,n,a):!1},triggerSave:function(){qv(Wo,function(e){e.save()})},addI18n:function(e,n){Yn.add(e,n)},translate:function(e){return Yn.translate(e)},setActive:function(e){var n=this.activeEditor;this.activeEditor!==e&&(n&&n.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new $f(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new $f(this.baseURL)}});im.setup();var G_=Math.min,Fb=Math.max,oT=Math.round,q_=function(e,n,a){var i=n.x,s=n.y,f=e.w,g=e.h,b=n.w,w=n.h,O=(a||"").split("");return O[0]==="b"&&(s+=w),O[1]==="r"&&(i+=b),O[0]==="c"&&(s+=oT(w/2)),O[1]==="c"&&(i+=oT(b/2)),O[3]==="b"&&(s-=g),O[4]==="r"&&(i-=f),O[3]==="c"&&(s-=oT(g/2)),O[4]==="c"&&(i-=oT(f/2)),Lb(i,s,f,g)},C6=function(e,n,a,i){var s,f;for(f=0;f<i.length;f++)if(s=q_(e,n,i[f]),s.x>=a.x&&s.x+s.w<=a.w+a.x&&s.y>=a.y&&s.y+s.h<=a.h+a.y)return i[f];return null},K_=function(e,n,a){return Lb(e.x-n,e.y-a,e.w+n*2,e.h+a*2)},S6=function(e,n){var a=Fb(e.x,n.x),i=Fb(e.y,n.y),s=G_(e.x+e.w,n.x+n.w),f=G_(e.y+e.h,n.y+n.h);return s-a<0||f-i<0?null:Lb(a,i,s-a,f-i)},x6=function(e,n,a){var i=e.x,s=e.y,f=e.x+e.w,g=e.y+e.h,b=n.x+n.w,w=n.y+n.h,O=Fb(0,n.x-i),N=Fb(0,n.y-s),z=Fb(0,f-b),F=Fb(0,g-w);return i+=O,s+=N,a&&(f+=O,g+=N,i-=z,s-=F),f-=z,g-=F,Lb(i,s,f-i,g-s)},Lb=function(e,n,a,i){return{x:e,y:n,w:a,h:i}},T6=function(e){return Lb(e.left,e.top,e.width,e.height)},k6={inflate:K_,relativePosition:q_,findBestRelativePosition:C6,intersect:S6,clamp:x6,create:Lb,fromClientRect:T6},E6=function(e,n,a){a===void 0&&(a=1e3);var i=!1,s=null,f=function(O){return function(){for(var N=[],z=0;z<arguments.length;z++)N[z]=arguments[z];i||(i=!0,s!==null&&(clearTimeout(s),s=null),O.apply(null,N))}},g=f(e),b=f(n),w=function(){for(var O=[],N=0;N<arguments.length;N++)O[N]=arguments[N];!i&&s===null&&(s=setTimeout(function(){return b.apply(null,O)},a))};return{start:w,resolve:g,reject:b}},X_=function(){var e={},n={},a=function(s,f){var g='Script at URL "'+f+'" failed to load',b='Script at URL "'+f+"\" did not call `tinymce.Resource.add('"+s+"', data)` within 1 second";if(e[s]!==void 0)return e[s];var w=new si(function(O,N){var z=E6(O,N);n[s]=z.resolve,Il.ScriptLoader.loadScript(f,function(){return z.start(b)},function(){return z.reject(g)})});return e[s]=w,w},i=function(s,f){n[s]!==void 0&&(n[s](f),delete n[s]),e[s]=si.resolve(f)};return{load:a,add:i}},O6=X_(),iT=Ne.each,A6=Ne.extend,uT,pp,um=function(){};um.extend=uT=function(e){var n=this,a=n.prototype,i=function(){var b,w,O,N=this;if(!pp&&(N.init&&N.init.apply(N,arguments),w=N.Mixins,w))for(b=w.length;b--;)O=w[b],O.init&&O.init.apply(N,arguments)},s=function(){return this},f=function(b,w){return function(){var O=this,N=O._super;O._super=a[b];var z=w.apply(O,arguments);return O._super=N,z}};pp=!0;var g=new n;return pp=!1,e.Mixins&&(iT(e.Mixins,function(b){for(var w in b)w!=="init"&&(e[w]=b[w])}),a.Mixins&&(e.Mixins=a.Mixins.concat(e.Mixins))),e.Methods&&iT(e.Methods.split(","),function(b){e[b]=s}),e.Properties&&iT(e.Properties.split(","),function(b){var w="_"+b;e[b]=function(O){var N=this;return O!==void 0?(N[w]=O,N):N[w]}}),e.Statics&&iT(e.Statics,function(b,w){i[w]=b}),e.Defaults&&a.Defaults&&(e.Defaults=A6({},a.Defaults,e.Defaults)),Zn(e,function(b,w){typeof b=="function"&&a[w]?g[w]=f(w,b):g[w]=b}),i.prototype=g,i.constructor=i,i.extend=uT,i};var sm=Math.min,Hb=Math.max,cm=Math.round,Y_=function(e){var n={},a=0,i=0,s=0,f=function(z,F,q){var G,X,J;G=0,X=0,J=0,z=z/255,F=F/255,q=q/255;var ie=sm(z,sm(F,q)),oe=Hb(z,Hb(F,q));if(ie===oe)return J=ie,{h:0,s:0,v:J*100};var ve=z===ie?F-q:q===ie?z-F:q-z;return G=z===ie?3:q===ie?1:5,G=60*(G-ve/(oe-ie)),X=(oe-ie)/oe,J=oe,{h:cm(G),s:cm(X*100),v:cm(J*100)}},g=function(z,F,q){if(z=(parseInt(z,10)||0)%360,F=parseInt(F,10)/100,q=parseInt(q,10)/100,F=Hb(0,sm(F,1)),q=Hb(0,sm(q,1)),F===0){a=i=s=cm(255*q);return}var G=z/60,X=q*F,J=X*(1-Math.abs(G%2-1)),ie=q-X;switch(Math.floor(G)){case 0:a=X,i=J,s=0;break;case 1:a=J,i=X,s=0;break;case 2:a=0,i=X,s=J;break;case 3:a=0,i=J,s=X;break;case 4:a=J,i=0,s=X;break;case 5:a=X,i=0,s=J;break;default:a=i=s=0}a=cm(255*(a+ie)),i=cm(255*(i+ie)),s=cm(255*(s+ie))},b=function(){var z=function(F){return F=parseInt(F,10).toString(16),F.length>1?F:"0"+F};return"#"+z(a)+z(i)+z(s)},w=function(){return{r:a,g:i,b:s}},O=function(){return f(a,i,s)},N=function(z){var F;return typeof z=="object"?"r"in z?(a=z.r,i=z.g,s=z.b):"v"in z&&g(z.h,z.s,z.v):(F=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(z))?(a=parseInt(F[1],10),i=parseInt(F[2],10),s=parseInt(F[3],10)):(F=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(z))?(a=parseInt(F[1],16),i=parseInt(F[2],16),s=parseInt(F[3],16)):(F=/#([0-F])([0-F])([0-F])/gi.exec(z))&&(a=parseInt(F[1]+F[1],16),i=parseInt(F[2]+F[2],16),s=parseInt(F[3]+F[3],16)),a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,n};return e&&N(e),n.toRgb=w,n.toHsv=O,n.toHex=b,n.parse=N,n},J_=function(e){var n=JSON.stringify(e);return cr(n)?n.replace(/[\u0080-\uFFFF]/g,function(a){var i=a.charCodeAt(0).toString(16);return"\\u"+"0000".substring(i.length)+i}):n},fO={serialize:J_,parse:function(e){try{return JSON.parse(e)}catch{}}},Z_={callbacks:{},count:0,send:function(e){var n=this,a=Ea.DOM,i=e.count!==void 0?e.count:n.count,s="tinymce_jsonp_"+i;n.callbacks[i]=function(f){a.remove(s),delete n.callbacks[i],e.callback(f)},a.add(a.doc.body,"script",{id:s,src:e.url,type:"text/javascript"}),n.count++}},Z2=Jt(Jt({},eT),{send:function(e){var n,a=0,i=function(){!e.async||n.readyState===4||a++>1e4?(e.success&&a<1e4&&n.status===200?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,a>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):Ki.setTimeout(i,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",Z2.fire("beforeInitialize",{settings:e}),n=new XMLHttpRequest,n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(n.withCredentials=!0),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Ne.each(e.requestheaders,function(s){n.setRequestHeader(s.key,s.value)}),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n=Z2.fire("beforeSend",{xhr:n,settings:e}).xhr,n.send(e.data),!e.async)return i();Ki.setTimeout(i,10)}}),Q_=Ne.extend,D6=function(){function e(n){this.settings=Q_({},n),this.count=0}return e.sendRPC=function(n){return new e().send(n)},e.prototype.send=function(n){var a=n.error,i=n.success,s=Q_(this.settings,n);s.success=function(f,g){f=fO.parse(f),typeof f>"u"&&(f={error:"JSON Parse error."}),f.error?a.call(s.error_scope||s.scope,f.error,g):i.call(s.success_scope||s.scope,f.result)},s.error=function(f,g){a&&a.call(s.error_scope||s.scope,f,g)},s.data=fO.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),s.content_type="application/json",Z2.send(s)},e}(),R6=function(){return function(){var e={},n=[],a={getItem:function(i){var s=e[i];return s||null},setItem:function(i,s){n.push(i),e[i]=String(s)},key:function(i){return n[i]},removeItem:function(i){n=n.filter(function(s){return s===i}),delete e[i]},clear:function(){n=[],e={}},length:0};return Object.defineProperty(a,"length",{get:function(){return n.length},configurable:!1,enumerable:!1}),a}()},Q2;try{var vO="__storage_test__";Q2=window.localStorage,Q2.setItem(vO,vO),Q2.removeItem(vO)}catch{Q2=R6()}var _6=Q2,eB={geom:{Rect:k6},util:{Promise:si,Delay:Ki,Tools:Ne,VK:ln,URI:$f,Class:um,EventDispatcher:oO,Observable:eT,I18n:Yn,XHR:Z2,JSON:fO,JSONRequest:D6,JSONP:Z_,LocalStorage:_6,Color:Y_,ImageUploader:DD},dom:{EventUtils:ov,Sizzle:fa,DomQuery:Pn,TreeWalker:zr,TextSeeker:Yp,DOMUtils:Ea,ScriptLoader:Il,RangeUtils:ag,Serializer:cD,StyleSheetLoader:lw,ControlSelection:HC,BookmarkManager:jl,Selection:B3,Event:ov.Event},html:{Styles:xf,Entities:zs,Node:lc,Schema:er,SaxParser:eb,DomParser:I3,Writer:Ph,Serializer:Kd},Env:Qt,AddOnManager:oa,Annotator:gl,Formatter:PD,UndoManager:wo,EditorCommands:__,WindowManager:Sb,NotificationManager:vc,EditorObservable:P_,Shortcuts:tT,Editor:rT,FocusManager:j1,EditorManager:im,DOM:Ea.DOM,ScriptLoader:Il.ScriptLoader,PluginManager:dc,ThemeManager:Wc,IconManager:fx,Resource:O6,trim:Ne.trim,isArray:Ne.isArray,is:Ne.is,toArray:Ne.toArray,makeMap:Ne.makeMap,each:Ne.each,map:Ne.map,grep:Ne.grep,inArray:Ne.inArray,extend:Ne.extend,create:Ne.create,walk:Ne.walk,createNS:Ne.createNS,resolve:Ne.resolve,explode:Ne.explode,_addCacheSuffix:Ne._addCacheSuffix,isOpera:Qt.opera,isWebKit:Qt.webkit,isIE:Qt.ie,isGecko:Qt.gecko,isMac:Qt.mac},dO=Ne.extend(im,eB),B6=function(e){try{cn.exports=e}catch{}},M6=function(e){window.tinymce=e,window.tinyMCE=e};M6(dO),B6(dO)})()})(h8);var PU=h8.exports;const NU=MU(PU);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="M13 11l-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z" opacity=".2"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}});(function(){var cn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ot=function(W,gt,nr){var et=gt==="UL"?"InsertUnorderedList":"InsertOrderedList";W.execCommand(et,!1,nr===!1?null:{"list-style-type":nr})},An=function(W){W.addCommand("ApplyUnorderedListStyle",function(gt,nr){Ot(W,"UL",nr["list-style-type"])}),W.addCommand("ApplyOrderedListStyle",function(gt,nr){Ot(W,"OL",nr["list-style-type"])})},Ln=tinymce.util.Tools.resolve("tinymce.util.Tools"),Xt=function(W){var gt=W.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return gt?gt.split(/[ ,]/):[]},yr=function(W){var gt=W.getParam("advlist_bullet_styles","default,circle,square");return gt?gt.split(/[ ,]/):[]},ar=function(){},Ar=function(W){return function(){return W}},no=function(W){return W},So=Ar(!1),fo=Ar(!0),Tn=function(){return or},or=function(){var W=function(et){return et()},gt=no,nr={fold:function(et,Ur){return et()},isSome:So,isNone:fo,getOr:gt,getOrThunk:W,getOrDie:function(et){throw new Error(et||"error: getOrDie called on none.")},getOrNull:Ar(null),getOrUndefined:Ar(void 0),or:gt,orThunk:W,map:Tn,each:ar,bind:Tn,exists:So,forall:fo,filter:function(){return Tn()},toArray:function(){return[]},toString:Ar("none()")};return nr}(),za=function(W){var gt=Ar(W),nr=function(){return Ur},et=function(qn){return qn(W)},Ur={fold:function(qn,D){return D(W)},isSome:fo,isNone:So,getOr:gt,getOrThunk:gt,getOrDie:gt,getOrNull:gt,getOrUndefined:gt,or:nr,orThunk:nr,map:function(qn){return za(qn(W))},each:function(qn){qn(W)},bind:et,exists:et,forall:et,filter:function(qn){return qn(W)?Ur:or},toArray:function(){return[W]},toString:function(){return"some("+W+")"}};return Ur},Ht=function(W){return W==null?or:za(W)},at={some:za,none:Tn,from:Ht},cr=function(W,gt){return W.$.contains(W.getBody(),gt)},Ct=function(W){return W&&/^(TH|TD)$/.test(W.nodeName)},_n=function(W){return function(gt){return gt&&/^(OL|UL|DL)$/.test(gt.nodeName)&&cr(W,gt)}},ye=function(W){var gt=W.dom.getParent(W.selection.getNode(),"ol,ul"),nr=W.dom.getStyle(gt,"listStyleType");return at.from(nr)},Lt=function(W,gt){for(var nr=0;nr<W.length;nr++){var et=W[nr];if(gt(et))return nr}return-1},Bt=function(W){return W.replace(/\-/g," ").replace(/\b\w/g,function(gt){return gt.toUpperCase()})},Vr=function(W,gt,nr){var et=Lt(gt.parents,Ct),Ur=et!==-1?gt.parents.slice(0,et):gt.parents,qn=Ln.grep(Ur,_n(W));return qn.length>0&&qn[0].nodeName===nr},Rn=function(W,gt){return function(nr){var et=function(Ur){nr.setActive(Vr(W,Ur,gt))};return W.on("NodeChange",et),function(){return W.off("NodeChange",et)}}},Mt=function(W,gt,nr,et,Ur,qn){W.ui.registry.addSplitButton(gt,{tooltip:nr,icon:Ur==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(D){var ia=Ln.map(qn,function(ut){var Et=Ur==="OL"?"num":"bull",xo=ut==="disc"||ut==="decimal"?"default":ut,wi=ut==="default"?"":ut,Un=Bt(ut);return{type:"choiceitem",value:wi,icon:"list-"+Et+"-"+xo,text:Un}});D(ia)},onAction:function(){return W.execCommand(et)},onItemAction:function(D,ia){Ot(W,Ur,ia)},select:function(D){var ia=ye(W);return ia.map(function(ut){return D===ut}).getOr(!1)},onSetup:Rn(W,Ur)})},kn=function(W,gt,nr,et,Ur,qn){W.ui.registry.addToggleButton(gt,{active:!1,tooltip:nr,icon:Ur==="OL"?"ordered-list":"unordered-list",onSetup:Rn(W,Ur),onAction:function(){return W.execCommand(et)}})},Tt=function(W,gt,nr,et,Ur,qn){qn.length>1?Mt(W,gt,nr,et,Ur,qn):kn(W,gt,nr,et,Ur)},vo=function(W){Tt(W,"numlist","Numbered list","InsertOrderedList","OL",Xt(W)),Tt(W,"bullist","Bullet list","InsertUnorderedList","UL",yr(W))};function ue(){cn.add("advlist",function(W){W.hasPlugin("lists")?(vo(W),An(W)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}ue()})();(function(){var cn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ot=function(Ar,no){Ar.focus(),Ar.undoManager.transact(function(){Ar.setContent(no)}),Ar.selection.setCursorLocation(),Ar.nodeChanged()},An=function(Ar){return Ar.getContent({source_view:!0})},Ln=function(Ar){var no=An(Ar);Ar.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:no},onSubmit:function(So){Ot(Ar,So.getData().code),So.close()}})},Xt=function(Ar){Ar.addCommand("mceCodeEditor",function(){Ln(Ar)})},yr=function(Ar){var no=function(){return Ar.execCommand("mceCodeEditor")};Ar.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:no}),Ar.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:no})};function ar(){cn.add("code",function(Ar){return Xt(Ar),yr(Ar),{}})}ar()})();(function(){var cn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ot=function(){return Ot=Object.assign||function(M){for(var T,I=1,ae=arguments.length;I<ae;I++){T=arguments[I];for(var fe in T)Object.prototype.hasOwnProperty.call(T,fe)&&(M[fe]=T[fe])}return M},Ot.apply(this,arguments)},An=function(_){var M=typeof _;return _===null?"null":M==="object"&&(Array.prototype.isPrototypeOf(_)||_.constructor&&_.constructor.name==="Array")?"array":M==="object"&&(String.prototype.isPrototypeOf(_)||_.constructor&&_.constructor.name==="String")?"string":M},Ln=function(_){return function(M){return An(M)===_}},Xt=function(_){return function(M){return typeof M===_}},yr=function(_){return function(M){return _===M}},ar=Ln("string"),Ar=Ln("object"),no=Ln("array"),So=yr(null),fo=Xt("boolean"),Tn=function(_){return _==null},or=function(_){return!Tn(_)},za=Xt("function"),Ht=Xt("number"),at=function(){},cr=function(_){return function(){return _}},Ct=function(_){return _},_n=cr(!1),ye=cr(!0),Lt=function(){return Bt},Bt=function(){var _=function(I){return I()},M=Ct,T={fold:function(I,ae){return I()},isSome:_n,isNone:ye,getOr:M,getOrThunk:_,getOrDie:function(I){throw new Error(I||"error: getOrDie called on none.")},getOrNull:cr(null),getOrUndefined:cr(void 0),or:M,orThunk:_,map:Lt,each:at,bind:Lt,exists:_n,forall:ye,filter:function(){return Lt()},toArray:function(){return[]},toString:cr("none()")};return T}(),Vr=function(_){var M=cr(_),T=function(){return ae},I=function(fe){return fe(_)},ae={fold:function(fe,De){return De(_)},isSome:ye,isNone:_n,getOr:M,getOrThunk:M,getOrDie:M,getOrNull:M,getOrUndefined:M,or:T,orThunk:T,map:function(fe){return Vr(fe(_))},each:function(fe){fe(_)},bind:I,exists:I,forall:I,filter:function(fe){return fe(_)?ae:Bt},toArray:function(){return[_]},toString:function(){return"some("+_+")"}};return ae},Rn=function(_){return _==null?Bt:Vr(_)},Mt={some:Vr,none:Lt,from:Rn},kn=Object.keys,Tt=Object.hasOwnProperty,vo=function(_,M){for(var T=kn(_),I=0,ae=T.length;I<ae;I++){var fe=T[I],De=_[fe];M(De,fe)}},ue=function(_){return function(M,T){_[T]=M}},W=function(_,M,T,I){var ae={};return vo(_,function(fe,De){(M(fe,De)?T:I)(fe,De)}),ae},gt=function(_,M){var T={};return W(_,M,ue(T),at),T},nr=function(_,M){return Tt.call(_,M)},et=function(_,M){return nr(_,M)&&_[M]!==void 0&&_[M]!==null},Ur=Array.prototype.push,qn=function(_){for(var M=[],T=0,I=_.length;T<I;++T){if(!no(_[T]))throw new Error("Arr.flatten item "+T+" was not an array, input: "+_);Ur.apply(M,_[T])}return M},D=function(_,M){return M>=0&&M<_.length?Mt.some(_[M]):Mt.none()},ia=function(_){return D(_,0)},ut=function(_,M){for(var T=0;T<_.length;T++){var I=M(_[T],T);if(I.isSome())return I}return Mt.none()};typeof window<"u"||Function("return this;")();var Et=function(_,M,T){if(ar(T)||fo(T)||Ht(T))_.setAttribute(M,T+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",T,":: Element ",_),new Error("Attribute value was not simple")},xo=function(_,M,T){Et(_.dom,M,T)},wi=function(_,M){_.dom.removeAttribute(M)},Un=function(_,M){var T=M||document,I=T.createElement("div");if(I.innerHTML=_,!I.hasChildNodes()||I.childNodes.length>1)throw console.error("HTML does not have a single root node",_),new Error("HTML must have a single root node");return ni(I.childNodes[0])},Ca=function(_,M){var T=M||document,I=T.createElement(_);return ni(I)},ee=function(_,M){var T=M||document,I=T.createTextNode(_);return ni(I)},ni=function(_){if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},nt=function(_,M,T){return Mt.from(_.dom.elementFromPoint(M,T)).map(ni)},kt={fromHtml:Un,fromTag:Ca,fromText:ee,fromDom:ni,fromPoint:nt},Ci=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Fr=tinymce.util.Tools.resolve("tinymce.util.Promise"),tn=tinymce.util.Tools.resolve("tinymce.util.URI"),Wr=tinymce.util.Tools.resolve("tinymce.util.XHR"),Hn=function(_){return _.getParam("image_dimensions",!0,"boolean")},ft=function(_){return _.getParam("image_advtab",!1,"boolean")},lr=function(_){return _.getParam("image_uploadtab",!0,"boolean")},Va=function(_){return _.getParam("image_prepend_url","","string")},jt=function(_){return _.getParam("image_class_list")},Jr=function(_){return _.getParam("image_description",!0,"boolean")},jr=function(_){return _.getParam("image_title",!1,"boolean")},an=function(_){return _.getParam("image_caption",!1,"boolean")},ua=function(_){return _.getParam("image_list",!1)},Si=function(_){return or(_.getParam("images_upload_url"))},rs=function(_){return or(_.getParam("images_upload_handler"))},nu=function(_){return _.getParam("a11y_advanced_options",!1,"boolean")},Li=function(_){return _.getParam("automatic_uploads",!0,"boolean")},To=function(_,M){return Math.max(parseInt(_,10),parseInt(M,10))},bu=function(_){return new Fr(function(M){var T=document.createElement("img"),I=function(fe){T.onload=T.onerror=null,T.parentNode&&T.parentNode.removeChild(T),M(fe)};T.onload=function(){var fe=To(T.width,T.clientWidth),De=To(T.height,T.clientHeight),st={width:fe,height:De};I(Fr.resolve(st))},T.onerror=function(){I(Fr.reject("Failed to get image dimensions for: "+_))};var ae=T.style;ae.visibility="hidden",ae.position="fixed",ae.bottom=ae.left="0px",ae.width=ae.height="auto",document.body.appendChild(T),T.src=_})},Go=function(_){return _&&(_=_.replace(/px$/,"")),_},sa=function(_){return _.length>0&&/^[0-9]+$/.test(_)&&(_+="px"),_},ta=function(_){if(_.margin){var M=String(_.margin).split(" ");switch(M.length){case 1:_["margin-top"]=_["margin-top"]||M[0],_["margin-right"]=_["margin-right"]||M[0],_["margin-bottom"]=_["margin-bottom"]||M[0],_["margin-left"]=_["margin-left"]||M[0];break;case 2:_["margin-top"]=_["margin-top"]||M[0],_["margin-right"]=_["margin-right"]||M[1],_["margin-bottom"]=_["margin-bottom"]||M[0],_["margin-left"]=_["margin-left"]||M[1];break;case 3:_["margin-top"]=_["margin-top"]||M[0],_["margin-right"]=_["margin-right"]||M[1],_["margin-bottom"]=_["margin-bottom"]||M[2],_["margin-left"]=_["margin-left"]||M[1];break;case 4:_["margin-top"]=_["margin-top"]||M[0],_["margin-right"]=_["margin-right"]||M[1],_["margin-bottom"]=_["margin-bottom"]||M[2],_["margin-left"]=_["margin-left"]||M[3]}delete _.margin}return _},Ua=function(_,M){var T=ua(_);ar(T)?Wr.send({url:T,success:function(I){M(JSON.parse(I))}}):za(T)?T(M):M(T)},Gr=function(_,M,T){var I=function(){T.onload=T.onerror=null,_.selection&&(_.selection.select(T),_.nodeChanged())};T.onload=function(){!M.width&&!M.height&&Hn(_)&&_.dom.setAttribs(T,{width:String(T.clientWidth),height:String(T.clientHeight)}),I()},T.onerror=I},kr=function(_){return new Fr(function(M,T){var I=new FileReader;I.onload=function(){M(I.result)},I.onerror=function(){T(I.error.message)},I.readAsDataURL(_)})},Po=function(_){return _.nodeName==="IMG"&&(_.hasAttribute("data-mce-object")||_.hasAttribute("data-mce-placeholder"))},xi=function(_,M){return tn.isDomSafe(M,"img",_.settings)},ro=Ci.DOM,Zn=function(_){return _.style.marginLeft&&_.style.marginRight&&_.style.marginLeft===_.style.marginRight?Go(_.style.marginLeft):""},mo=function(_){return _.style.marginTop&&_.style.marginBottom&&_.style.marginTop===_.style.marginBottom?Go(_.style.marginTop):""},No=function(_){return _.style.borderWidth?Go(_.style.borderWidth):""},$o=function(_,M){return _.hasAttribute(M)?_.getAttribute(M):""},Gt=function(_,M){return _.style[M]?_.style[M]:""},hr=function(_){return _.parentNode!==null&&_.parentNode.nodeName==="FIGURE"},ha=function(_,M,T){T===""?_.removeAttribute(M):_.setAttribute(M,T)},Ti=function(_){var M=ro.create("figure",{class:"image"});ro.insertAfter(M,_),M.appendChild(_),M.appendChild(ro.create("figcaption",{contentEditable:"true"},"Caption")),M.contentEditable="false"},Es=function(_){var M=_.parentNode;ro.insertAfter(_,M),ro.remove(M)},pr=function(_){hr(_)?Es(_):Ti(_)},$n=function(_,M){var T=_.getAttribute("style"),I=M(T!==null?T:"");I.length>0?(_.setAttribute("style",I),_.setAttribute("data-mce-style",I)):_.removeAttribute("style")},ko=function(_,M){return function(T,I,ae){T.style[I]?(T.style[I]=sa(ae),$n(T,M)):ha(T,I,ae)}},as=function(_,M){return _.style[M]?Go(_.style[M]):$o(_,M)},qo=function(_,M){var T=sa(M);_.style.marginLeft=T,_.style.marginRight=T},ri=function(_,M){var T=sa(M);_.style.marginTop=T,_.style.marginBottom=T},ai=function(_,M){var T=sa(M);_.style.borderWidth=T},$u=function(_,M){_.style.borderStyle=M},Hi=function(_){return Gt(_,"borderStyle")},oi=function(_){return _.nodeName==="FIGURE"},zu=function(_){return _.nodeName==="IMG"},Er=function(_){return ro.getAttrib(_,"alt").length===0&&ro.getAttrib(_,"role")==="presentation"},Vi=function(_){return Er(_)?"":$o(_,"alt")},Jt=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},Us=function(_,M){var T=document.createElement("img");return ha(T,"style",M.style),(Zn(T)||M.hspace!=="")&&qo(T,M.hspace),(mo(T)||M.vspace!=="")&&ri(T,M.vspace),(No(T)||M.border!=="")&&ai(T,M.border),(Hi(T)||M.borderStyle!=="")&&$u(T,M.borderStyle),_(T.getAttribute("style"))},Ko=function(_,M){var T=document.createElement("img");if(js(_,Ot(Ot({},M),{caption:!1}),T),au(T,M.alt,M.isDecorative),M.caption){var I=ro.create("figure",{class:"image"});return I.appendChild(T),I.appendChild(ro.create("figcaption",{contentEditable:"true"},"Caption")),I.contentEditable="false",I}else return T},ru=function(_,M){return{src:$o(M,"src"),alt:Vi(M),title:$o(M,"title"),width:as(M,"width"),height:as(M,"height"),class:$o(M,"class"),style:_($o(M,"style")),caption:hr(M),hspace:Zn(M),vspace:mo(M),border:No(M),borderStyle:Gt(M,"borderStyle"),isDecorative:Er(M)}},Xo=function(_,M,T,I,ae){T[I]!==M[I]&&ae(_,I,T[I])},au=function(_,M,T){if(T){ro.setAttrib(_,"role","presentation");var I=kt.fromDom(_);xo(I,"alt","")}else{if(So(M)){var I=kt.fromDom(_);wi(I,"alt")}else{var I=kt.fromDom(_);xo(I,"alt",M)}ro.getAttrib(_,"role")==="presentation"&&ro.setAttrib(_,"role","")}},Ws=function(_,M,T){(T.alt!==M.alt||T.isDecorative!==M.isDecorative)&&au(_,T.alt,T.isDecorative)},Ui=function(_,M){return function(T,I,ae){_(T,ae),$n(T,M)}},js=function(_,M,T){var I=ru(_,T);Xo(T,I,M,"caption",function(ae,fe,De){return pr(ae)}),Xo(T,I,M,"src",ha),Xo(T,I,M,"title",ha),Xo(T,I,M,"width",ko("width",_)),Xo(T,I,M,"height",ko("height",_)),Xo(T,I,M,"class",ha),Xo(T,I,M,"style",Ui(function(ae,fe){return ha(ae,"style",fe)},_)),Xo(T,I,M,"hspace",Ui(qo,_)),Xo(T,I,M,"vspace",Ui(ri,_)),Xo(T,I,M,"border",Ui(ai,_)),Xo(T,I,M,"borderStyle",Ui($u,_)),Ws(T,I,M)},Q=function(_,M){var T=_.dom.styles.parse(M),I=ta(T),ae=_.dom.styles.parse(_.dom.styles.serialize(I));return _.dom.styles.serialize(ae)},be=function(_){var M=_.selection.getNode(),T=_.dom.getParent(M,"figure.image");return T?_.dom.select("img",T)[0]:M&&(M.nodeName!=="IMG"||Po(M))?null:M},re=function(_,M){var T=_.dom,I=gt(_.schema.getTextBlockElements(),function(fe,De){return!_.schema.isValidChild(De,"figure")}),ae=T.getParent(M.parentNode,function(fe){return et(I,fe.nodeName)},_.getBody());return ae?T.split(ae,M):M},Te=function(_){var M=be(_);return M?ru(function(T){return Q(_,T)},M):Jt()},dt=function(_,M){var T=Ko(function(fe){return Q(_,fe)},M);_.dom.setAttrib(T,"data-mce-id","__mcenew"),_.focus(),_.selection.setContent(T.outerHTML);var I=_.dom.select('*[data-mce-id="__mcenew"]')[0];if(_.dom.setAttrib(I,"data-mce-id",null),oi(I)){var ae=re(_,I);_.selection.select(ae)}else _.selection.select(I)},zt=function(_,M){_.dom.setAttrib(M,"src",M.getAttribute("src"))},mn=function(_,M){if(M){var T=_.dom.is(M.parentNode,"figure.image")?M.parentNode:M;_.dom.remove(T),_.focus(),_.nodeChanged(),_.dom.isEmpty(_.getBody())&&(_.setContent(""),_.selection.setCursorLocation())}},wn=function(_,M){var T=be(_);if(js(function(ae){return Q(_,ae)},M,T),zt(_,T),oi(T.parentNode)){var I=T.parentNode;re(_,I),_.selection.select(T.parentNode)}else _.selection.select(T),Gr(_,M,T)},wr=function(_,M){var T=M.src;return Ot(Ot({},M),{src:xi(_,T)?T:""})},Cr=function(_,M){var T=be(_);if(T){var I=ru(function(De){return Q(_,De)},T),ae=Ot(Ot({},I),M),fe=wr(_,ae);ae.src?wn(_,fe):mn(_,T)}else M.src&&dt(_,Ot(Ot({},Jt()),M))},rr=function(_,M){var T=Ar(_)&&Ar(M);return T?Sa(_,M):M},Oa=function(_){return function(){for(var M=[],T=0;T<arguments.length;T++)M[T]=arguments[T];if(M.length===0)throw new Error("Can't merge zero objects");for(var I={},ae=0;ae<M.length;ae++){var fe=M[ae];for(var De in fe)nr(fe,De)&&(I[De]=_(I[De],fe[De]))}return I}},Sa=Oa(rr),yu=function(_){return _.length>0},ao=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Wi=tinymce.util.Tools.resolve("tinymce.util.Tools"),Iu=function(_){return ar(_.value)?_.value:""},pa=function(_){return ar(_.text)?_.text:ar(_.title)?_.title:""},xa=function(_,M){var T=[];return Wi.each(_,function(I){var ae=pa(I);if(I.menu!==void 0){var fe=xa(I.menu,M);T.push({text:ae,items:fe})}else{var De=M(I);T.push({text:ae,value:De})}}),T},Xe=function(_){return _===void 0&&(_=Iu),function(M){return M?Mt.from(M).map(function(T){return xa(T,_)}):Mt.none()}},Ya=function(_){return Xe(Iu)(_)},Fu=function(_){return nr(_,"items")},Xc=function(_,M){return ut(_,function(T){return Fu(T)?Xc(T.items,M):T.value===M?Mt.some(T):Mt.none()})},Gs=function(_,M){return _.bind(function(T){return Xc(T,M)})},Qn={sanitizer:Xe,sanitize:Ya,findEntry:Gs},bc=function(_){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Lu={makeTab:bc},Aa=function(_){var M=Qn.sanitizer(function(fn){return _.convertURL(fn.value||fn.url,"src")}),T=new Fr(function(fn){Ua(_,function(Hr){fn(M(Hr).map(function(va){return qn([[{text:"None",value:""}],va])}))})}),I=Qn.sanitize(jt(_)),ae=ft(_),fe=lr(_),De=Si(_),st=rs(_),dn=Te(_),Cn=Jr(_),xt=jr(_),on=Hn(_),Vn=an(_),Kn=nu(_),gn=Li(_),Ta=Mt.some(Va(_)).filter(function(fn){return ar(fn)&&fn.length>0});return T.then(function(fn){return{image:dn,imageList:fn,classList:I,hasAdvTab:ae,hasUploadTab:fe,hasUploadUrl:De,hasUploadHandler:st,hasDescription:Cn,hasImageTitle:xt,hasDimensions:on,hasImageCaption:Vn,prependURL:Ta,hasAccessibilityOptions:Kn,automaticUploads:gn}})},qs=function(_){var M={name:"src",type:"urlinput",filetype:"image",label:"Source"},T=_.imageList.map(function(xt){return{name:"images",type:"listbox",label:"Image list",items:xt}}),I={name:"alt",type:"input",label:"Alternative description",disabled:_.hasAccessibilityOptions&&_.image.isDecorative},ae={name:"title",type:"input",label:"Image title"},fe={name:"dimensions",type:"sizeinput"},De={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},st=_.classList.map(function(xt){return{name:"classes",type:"listbox",label:"Class",items:xt}}),dn={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Cn=function(xt){return xt?{type:"grid",columns:2}:{type:"panel"}};return qn([[M],T.toArray(),_.hasAccessibilityOptions&&_.hasDescription?[De]:[],_.hasDescription?[I]:[],_.hasImageTitle?[ae]:[],_.hasDimensions?[fe]:[],[Ot(Ot({},Cn(_.classList.isSome()&&_.hasImageCaption)),{items:qn([st.toArray(),_.hasImageCaption?[dn]:[]])})]])},ii=function(_){return{title:"General",name:"general",items:qs(_)}},ki={makeTab:ii,makeItems:qs},qr=function(_){var M=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:M}},Ks={makeTab:qr},Os=function(_){return{prevImage:Qn.findEntry(_.imageList,_.image.src),prevAlt:_.image.alt,open:!0}},As=function(_){return{src:{value:_.src,meta:{}},images:_.src,alt:_.alt,title:_.title,dimensions:{width:_.width,height:_.height},classes:_.class,caption:_.caption,style:_.style,vspace:_.vspace,border:_.border,hspace:_.hspace,borderstyle:_.borderStyle,fileinput:[],isDecorative:_.isDecorative}},yc=function(_,M){return{src:_.src.value,alt:_.alt.length===0&&M?null:_.alt,title:_.title,width:_.dimensions.width,height:_.dimensions.height,class:_.classes,style:_.style,caption:_.caption,hspace:_.hspace,vspace:_.vspace,border:_.border,borderStyle:_.borderstyle,isDecorative:_.isDecorative}},ou=function(_,M){return/^(?:[a-zA-Z]+:)?\/\//.test(M)?Mt.none():_.prependURL.bind(function(T){return M.substring(0,T.length)!==T?Mt.some(T+M):Mt.none()})},wu=function(_,M){var T=M.getData();ou(_,T.src.value).each(function(I){M.setData({src:{value:I,meta:T.src.meta}})})},wc=function(_,M,T){_.hasDescription&&ar(T.alt)&&(M.alt=T.alt),_.hasAccessibilityOptions&&(M.isDecorative=T.isDecorative||M.isDecorative||!1),_.hasImageTitle&&ar(T.title)&&(M.title=T.title),_.hasDimensions&&(ar(T.width)&&(M.dimensions.width=T.width),ar(T.height)&&(M.dimensions.height=T.height)),ar(T.class)&&Qn.findEntry(_.classList,T.class).each(function(I){M.classes=I.value}),_.hasImageCaption&&fo(T.caption)&&(M.caption=T.caption),_.hasAdvTab&&(ar(T.style)&&(M.style=T.style),ar(T.vspace)&&(M.vspace=T.vspace),ar(T.border)&&(M.border=T.border),ar(T.hspace)&&(M.hspace=T.hspace),ar(T.borderstyle)&&(M.borderstyle=T.borderstyle))},iu=function(_,M){var T=M.getData(),I=T.src.meta;if(I!==void 0){var ae=Sa({},T);wc(_,ae,I),M.setData(ae)}},Ei=function(_,M,T,I){var ae=I.getData(),fe=ae.src.value,De=ae.src.meta||{};!De.width&&!De.height&&M.hasDimensions&&(yu(fe)?_.imageSize(fe).then(function(st){T.open&&I.setData({dimensions:st})}).catch(function(st){return console.error(st)}):I.setData({dimensions:{width:"",height:""}}))},V=function(_,M,T){var I=T.getData(),ae=Qn.findEntry(_.imageList,I.src.value);M.prevImage=ae,T.setData({images:ae.map(function(fe){return fe.value}).getOr("")})},ce=function(_,M,T,I){wu(M,I),iu(M,I),Ei(_,M,T,I),V(M,T,I)},Se=function(_,M,T,I){var ae=I.getData(),fe=Qn.findEntry(M.imageList,ae.images);fe.each(function(De){var st=ae.alt===""||T.prevImage.map(function(dn){return dn.text===ae.alt}).getOr(!1);st?De.value===""?I.setData({src:De,alt:T.prevAlt}):I.setData({src:De,alt:De.text}):I.setData({src:De})}),T.prevImage=fe,ce(_,M,T,I)},Fe=function(_){var M=_["margin-top"]&&_["margin-bottom"]&&_["margin-top"]===_["margin-bottom"];return M?Go(String(_["margin-top"])):""},ot=function(_){var M=_["margin-right"]&&_["margin-left"]&&_["margin-right"]===_["margin-left"];return M?Go(String(_["margin-right"])):""},Ut=function(_){return _["border-width"]?Go(String(_["border-width"])):""},Or=function(_){return _["border-style"]?String(_["border-style"]):""},Nr=function(_,M,T){return M(_(M(T)))},zn=function(_,M,T){var I=ta(_(T.style)),ae=Sa({},T);return ae.vspace=Fe(I),ae.hspace=ot(I),ae.border=Ut(I),ae.borderstyle=Or(I),ae.style=Nr(_,M,I),ae},ca=function(_,M){var T=M.getData(),I=zn(_.parseStyle,_.serializeStyle,T);M.setData(I)},ba=function(_,M,T){var I=Sa(As(M.image),T.getData()),ae=Us(_.normalizeCss,yc(I,!1));T.setData({style:ae})},os=function(_,M,T,I){var ae=I.getData();I.block("Uploading image"),ia(ae.fileinput).fold(function(){I.unblock()},function(fe){var De=URL.createObjectURL(fe),st=function(){I.unblock(),URL.revokeObjectURL(De)},dn=function(Cn){I.setData({src:{value:Cn,meta:{}}}),I.showTab("general"),ce(_,M,T,I)};kr(fe).then(function(Cn){var xt=_.createBlobCache(fe,De,Cn);M.automaticUploads?_.uploadImage(xt).then(function(on){dn(on.url),st()}).catch(function(on){st(),_.alertErr(on)}):(_.addToBlobCache(xt),dn(xt.blobUri()),I.unblock())})})},Eo=function(_,M,T){return function(I,ae){ae.name==="src"?ce(_,M,T,I):ae.name==="images"?Se(_,M,T,I):ae.name==="alt"?T.prevAlt=I.getData().alt:ae.name==="style"?ca(_,I):ae.name==="vspace"||ae.name==="hspace"||ae.name==="border"||ae.name==="borderstyle"?ba(_,M,I):ae.name==="fileinput"?os(_,M,T,I):ae.name==="isDecorative"&&(I.getData().isDecorative?I.disable("alt"):I.enable("alt"))}},Hu=function(_){return function(){_.open=!1}},Qt=function(_){if(_.hasAdvTab||_.hasUploadUrl||_.hasUploadHandler){var M={type:"tabpanel",tabs:qn([[ki.makeTab(_)],_.hasAdvTab?[Lu.makeTab(_)]:[],_.hasUploadTab&&(_.hasUploadUrl||_.hasUploadHandler)?[Ks.makeTab(_)]:[]])};return M}else{var T={type:"panel",items:ki.makeItems(_)};return T}},Yc=function(_){return function(M){var T=Os(M);return{title:"Insert/Edit Image",size:"normal",body:Qt(M),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:As(M.image),onSubmit:_.onSubmit(M),onChange:Eo(_,M,T),onClose:Hu(T)}}},af=function(_){return function(M){return function(T){var I=Sa(As(M.image),T.getData());_.execCommand("mceUpdateImage",!1,yc(I,M.hasAccessibilityOptions)),_.editorUpload.uploadImagesAuto(),T.close()}}},Sr=function(_){return function(M){return xi(_,M)?bu(_.documentBaseURI.toAbsolute(M)).then(function(T){return{width:String(T.width),height:String(T.height)}}):Fr.resolve({width:"",height:""})}},of=function(_){return function(M,T,I){return _.editorUpload.blobCache.create({blob:M,blobUri:T,name:M.name?M.name.replace(/\.[^\.]+$/,""):null,filename:M.name,base64:I.split(",")[1]})}},kl=function(_){return function(M){_.editorUpload.blobCache.add(M)}},Yf=function(_){return function(M){_.windowManager.alert(M)}},Lr=function(_){return function(M){return Q(_,M)}},uu=function(_){return function(M){return _.dom.parseStyle(M)}},Qv=function(_){return function(M,T){return _.dom.serializeStyle(M,T)}},Vu=function(_){return function(M){return ao(_).upload([M],!1).then(function(T){return T.length===0?Fr.reject("Failed to upload image"):T[0].status===!1?Fr.reject(T[0].error.message):T[0]})}},Ia=function(_){var M={onSubmit:af(_),imageSize:Sr(_),addToBlobCache:kl(_),createBlobCache:of(_),alertErr:Yf(_),normalizeCss:Lr(_),parseStyle:uu(_),serializeStyle:Qv(_),uploadImage:Vu(_)},T=function(){Aa(_).then(Yc(M)).then(_.windowManager.open)};return{open:T}},Xs=function(_){_.addCommand("mceImage",Ia(_).open),_.addCommand("mceUpdateImage",function(M,T){_.undoManager.transact(function(){return Cr(_,T)})})},Ne=function(_){var M=_.attr("class");return M&&/\bimage\b/.test(M)},Jc=function(_){return function(M){for(var T=M.length,I=function(fe){fe.attr("contenteditable",_?"true":null)};T--;){var ae=M[T];Ne(ae)&&(ae.attr("contenteditable",_?"false":null),Wi.each(ae.getAll("figcaption"),I))}}},Fa=function(_){_.on("PreInit",function(){_.parser.addNodeFilter("figure",Jc(!0)),_.serializer.addNodeFilter("figure",Jc(!1))})},Jf=function(_){_.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Ia(_).open,onSetup:function(M){return M.setActive(or(be(_))),_.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",M.setActive).unbind}}),_.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Ia(_).open}),_.ui.registry.addContextMenu("image",{update:function(M){return oi(M)||zu(M)&&!Po(M)?["image"]:[]}})};function Ds(){cn.add("image",function(_){Fa(_),Jf(_),Xs(_)})}Ds()})();(function(){var cn=function(u){var l=typeof u;return u===null?"null":l==="object"&&(Array.prototype.isPrototypeOf(u)||u.constructor&&u.constructor.name==="Array")?"array":l==="object"&&(String.prototype.isPrototypeOf(u)||u.constructor&&u.constructor.name==="String")?"string":l},Ot=function(u){return function(l){return cn(l)===u}},An=function(u){return function(l){return typeof l===u}},Ln=function(u){return function(l){return u===l}},Xt=Ot("string"),yr=Ot("object"),ar=Ot("array"),Ar=Ln(null),no=An("boolean"),So=Ln(void 0),fo=function(u){return u==null},Tn=function(u){return!fo(u)},or=An("function"),za=An("number"),Ht=function(){},at=function(u,l){return function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return u(l.apply(null,d))}},cr=function(u,l){return function(d){return u(l(d))}},Ct=function(u){return function(){return u}},_n=function(u){return u},ye=function(u,l){return u===l};function Lt(u){for(var l=[],d=1;d<arguments.length;d++)l[d-1]=arguments[d];return function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];var x=l.concat(h);return u.apply(null,x)}}var Bt=function(u){return function(l){return!u(l)}},Vr=function(u){return function(){throw new Error(u)}},Rn=Ct(!1),Mt=Ct(!0),kn=function(){return Tt},Tt=function(){var u=function(h){return h()},l=_n,d={fold:function(h,y){return h()},isSome:Rn,isNone:Mt,getOr:l,getOrThunk:u,getOrDie:function(h){throw new Error(h||"error: getOrDie called on none.")},getOrNull:Ct(null),getOrUndefined:Ct(void 0),or:l,orThunk:u,map:kn,each:Ht,bind:kn,exists:Rn,forall:Mt,filter:function(){return kn()},toArray:function(){return[]},toString:Ct("none()")};return d}(),vo=function(u){var l=Ct(u),d=function(){return y},h=function(x){return x(u)},y={fold:function(x,A){return A(u)},isSome:Mt,isNone:Rn,getOr:l,getOrThunk:l,getOrDie:l,getOrNull:l,getOrUndefined:l,or:d,orThunk:d,map:function(x){return vo(x(u))},each:function(x){x(u)},bind:h,exists:h,forall:h,filter:function(x){return x(u)?y:Tt},toArray:function(){return[u]},toString:function(){return"some("+u+")"}};return y},ue=function(u){return u==null?Tt:vo(u)},W={some:vo,none:kn,from:ue},gt=Array.prototype.slice,nr=Array.prototype.indexOf,et=Array.prototype.push,Ur=function(u,l){return nr.call(u,l)},qn=function(u,l){return Ur(u,l)>-1},D=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];if(l(y,d))return!0}return!1},ia=function(u,l){for(var d=[],h=0;h<u;h++)d.push(l(h));return d},ut=function(u,l){for(var d=u.length,h=new Array(d),y=0;y<d;y++){var x=u[y];h[y]=l(x,y)}return h},Et=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];l(y,d)}},xo=function(u,l){for(var d=u.length-1;d>=0;d--){var h=u[d];l(h,d)}},wi=function(u,l){for(var d=[],h=[],y=0,x=u.length;y<x;y++){var A=u[y],P=l(A,y)?d:h;P.push(A)}return{pass:d,fail:h}},Un=function(u,l){for(var d=[],h=0,y=u.length;h<y;h++){var x=u[h];l(x,h)&&d.push(x)}return d},Ca=function(u,l,d){return xo(u,function(h,y){d=l(d,h,y)}),d},ee=function(u,l,d){return Et(u,function(h,y){d=l(d,h,y)}),d},ni=function(u,l,d){for(var h=0,y=u.length;h<y;h++){var x=u[h];if(l(x,h))return W.some(x);if(d(x,h))break}return W.none()},nt=function(u,l){return ni(u,l,Rn)},kt=function(u,l){for(var d=0,h=u.length;d<h;d++){var y=u[d];if(l(y,d))return W.some(d)}return W.none()},Ci=function(u){for(var l=[],d=0,h=u.length;d<h;++d){if(!ar(u[d]))throw new Error("Arr.flatten item "+d+" was not an array, input: "+u);et.apply(l,u[d])}return l},Fr=function(u,l){return Ci(ut(u,l))},tn=function(u,l){for(var d=0,h=u.length;d<h;++d){var y=u[d];if(l(y,d)!==!0)return!1}return!0},Wr=function(u){var l=gt.call(u,0);return l.reverse(),l},Hn=function(u,l){for(var d={},h=0,y=u.length;h<y;h++){var x=u[h];d[String(x)]=l(x,h)}return d},ft=function(u){return[u]},lr=function(u,l){var d=gt.call(u,0);return d.sort(l),d},Va=function(u,l){return l>=0&&l<u.length?W.some(u[l]):W.none()},jt=function(u){return Va(u,0)},Jr=function(u){return Va(u,u.length-1)},jr=function(u,l){for(var d=0;d<u.length;d++){var h=l(u[d],d);if(h.isSome())return h}return W.none()},an=function(){return an=Object.assign||function(l){for(var d,h=1,y=arguments.length;h<y;h++){d=arguments[h];for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(l[x]=d[x])}return l},an.apply(this,arguments)};function ua(u,l,d){if(d||arguments.length===2)for(var h=0,y=l.length,x;h<y;h++)(x||!(h in l))&&(x||(x=Array.prototype.slice.call(l,0,h)),x[h]=l[h]);return u.concat(x||Array.prototype.slice.call(l))}var Si=function(u){var l=!1,d;return function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];return l||(l=!0,d=u.apply(null,h)),d}},rs=function(u,l,d,h){var y=u.isiOS()&&/ipad/i.test(d)===!0,x=u.isiOS()&&!y,A=u.isiOS()||u.isAndroid(),P=A||h("(pointer:coarse)"),j=y||!x&&A&&h("(min-device-width:768px)"),Y=x||A&&!j,le=l.isSafari()&&u.isiOS()&&/safari/i.test(d)===!1,Me=!Y&&!j&&!le;return{isiPad:Ct(y),isiPhone:Ct(x),isTablet:Ct(j),isPhone:Ct(Y),isTouch:Ct(P),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:Ct(le),isDesktop:Ct(Me)}},nu=function(u,l){for(var d=0;d<u.length;d++){var h=u[d];if(h.test(l))return h}},Li=function(u,l){var d=nu(u,l);if(!d)return{major:0,minor:0};var h=function(y){return Number(l.replace(d,"$"+y))};return Go(h(1),h(2))},To=function(u,l){var d=String(l).toLowerCase();return u.length===0?bu():Li(u,d)},bu=function(){return Go(0,0)},Go=function(u,l){return{major:u,minor:l}},sa={nu:Go,detect:To,unknown:bu},ta=function(u,l){return jr(l.brands,function(d){var h=d.brand.toLowerCase();return nt(u,function(y){var x;return h===((x=y.brand)===null||x===void 0?void 0:x.toLowerCase())}).map(function(y){return{current:y.name,version:sa.nu(parseInt(d.version,10),0)}})})},Ua=function(u,l){var d=String(l).toLowerCase();return nt(u,function(h){return h.search(d)})},Gr=function(u,l){return Ua(u,l).map(function(d){var h=sa.detect(d.versionRegexes,l);return{current:d.name,version:h}})},kr=function(u,l){return Ua(u,l).map(function(d){var h=sa.detect(d.versionRegexes,l);return{current:d.name,version:h}})},Po=function(u,l){return u.substring(l)},xi=function(u,l,d){return l===""||u.length>=l.length&&u.substr(d,d+l.length)===l},ro=function(u,l){return mo(u,l)?Po(u,l.length):u},Zn=function(u,l){return u.indexOf(l)!==-1},mo=function(u,l){return xi(u,l,0)},No=function(u,l){return xi(u,l,u.length-l.length)},$o=function(u){return function(l){return l.replace(u,"")}},Gt=$o(/^\s+|\s+$/g),hr=function(u){return u.length>0},ha=function(u){return!hr(u)},Ti=function(u){var l=parseFloat(u);return isNaN(l)?W.none():W.some(l)},Es=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pr=function(u){return function(l){return Zn(l,u)}},$n=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(u){return Zn(u,"edge/")&&Zn(u,"chrome")&&Zn(u,"safari")&&Zn(u,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Es],search:function(u){return Zn(u,"chrome")&&!Zn(u,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(u){return Zn(u,"msie")||Zn(u,"trident")}},{name:"Opera",versionRegexes:[Es,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pr("firefox")},{name:"Safari",versionRegexes:[Es,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(u){return(Zn(u,"safari")||Zn(u,"mobile/"))&&Zn(u,"applewebkit")}}],ko=[{name:"Windows",search:pr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(u){return Zn(u,"iphone")||Zn(u,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:pr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pr("linux"),versionRegexes:[]},{name:"Solaris",search:pr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],as={browsers:Ct($n),oses:Ct(ko)},qo="Edge",ri="Chrome",ai="IE",$u="Opera",Hi="Firefox",oi="Safari",zu=function(){return Er({current:void 0,version:sa.unknown()})},Er=function(u){var l=u.current,d=u.version,h=function(y){return function(){return l===y}};return{current:l,version:d,isEdge:h(qo),isChrome:h(ri),isIE:h(ai),isOpera:h($u),isFirefox:h(Hi),isSafari:h(oi)}},Vi={unknown:zu,nu:Er,edge:Ct(qo),chrome:Ct(ri),ie:Ct(ai),opera:Ct($u),firefox:Ct(Hi),safari:Ct(oi)},Jt="Windows",Us="iOS",Ko="Android",ru="Linux",Xo="OSX",au="Solaris",Ws="FreeBSD",Ui="ChromeOS",js=function(){return Q({current:void 0,version:sa.unknown()})},Q=function(u){var l=u.current,d=u.version,h=function(y){return function(){return l===y}};return{current:l,version:d,isWindows:h(Jt),isiOS:h(Us),isAndroid:h(Ko),isOSX:h(Xo),isLinux:h(ru),isSolaris:h(au),isFreeBSD:h(Ws),isChromeOS:h(Ui)}},be={unknown:js,nu:Q,windows:Ct(Jt),ios:Ct(Us),android:Ct(Ko),linux:Ct(ru),osx:Ct(Xo),solaris:Ct(au),freebsd:Ct(Ws),chromeos:Ct(Ui)},re=function(u,l,d){var h=as.browsers(),y=as.oses(),x=l.bind(function(j){return ta(h,j)}).orThunk(function(){return Gr(h,u)}).fold(Vi.unknown,Vi.nu),A=kr(y,u).fold(be.unknown,be.nu),P=rs(A,x,u,d);return{browser:x,os:A,deviceType:P}},Te={detect:re},dt=function(u){return window.matchMedia(u).matches},zt=Si(function(){return Te.detect(navigator.userAgent,W.from(navigator.userAgentData),dt)}),mn=function(){return zt()},wn=function(u,l,d){return(u.compareDocumentPosition(l)&d)!==0},wr=function(u,l){return wn(u,l,Node.DOCUMENT_POSITION_CONTAINED_BY)},Cr=8,rr=9,Oa=11,Sa=1,yu=3,ao=function(u,l){var d=l||document,h=d.createElement("div");if(h.innerHTML=u,!h.hasChildNodes()||h.childNodes.length>1)throw console.error("HTML does not have a single root node",u),new Error("HTML must have a single root node");return pa(h.childNodes[0])},Wi=function(u,l){var d=l||document,h=d.createElement(u);return pa(h)},Iu=function(u,l){var d=l||document,h=d.createTextNode(u);return pa(h)},pa=function(u){if(u==null)throw new Error("Node cannot be null or undefined");return{dom:u}},xa=function(u,l,d){return W.from(u.dom.elementFromPoint(l,d)).map(pa)},Xe={fromHtml:ao,fromTag:Wi,fromText:Iu,fromDom:pa,fromPoint:xa},Ya=function(u,l){var d=u.dom;if(d.nodeType!==Sa)return!1;var h=d;if(h.matches!==void 0)return h.matches(l);if(h.msMatchesSelector!==void 0)return h.msMatchesSelector(l);if(h.webkitMatchesSelector!==void 0)return h.webkitMatchesSelector(l);if(h.mozMatchesSelector!==void 0)return h.mozMatchesSelector(l);throw new Error("Browser lacks native selectors")},Fu=function(u){return u.nodeType!==Sa&&u.nodeType!==rr&&u.nodeType!==Oa||u.childElementCount===0},Xc=function(u,l){var d=l===void 0?document:l.dom;return Fu(d)?[]:ut(d.querySelectorAll(u),Xe.fromDom)},Gs=function(u,l){var d=l===void 0?document:l.dom;return Fu(d)?W.none():W.from(d.querySelector(u)).map(Xe.fromDom)},Qn=function(u,l){return u.dom===l.dom},bc=function(u,l){var d=u.dom,h=l.dom;return d===h?!1:d.contains(h)},Lu=function(u,l){return wr(u.dom,l.dom)},Aa=function(u,l){return mn().browser.isIE()?Lu(u,l):bc(u,l)},qs=Ya,ii=Object.keys,ki=Object.hasOwnProperty,qr=function(u,l){for(var d=ii(u),h=0,y=d.length;h<y;h++){var x=d[h],A=u[x];l(A,x)}},Ks=function(u,l){return Os(u,function(d,h){return{k:h,v:l(d,h)}})},Os=function(u,l){var d={};return qr(u,function(h,y){var x=l(h,y);d[x.k]=x.v}),d},As=function(u){return function(l,d){u[d]=l}},yc=function(u,l,d,h){var y={};return qr(u,function(x,A){(l(x,A)?d:h)(x,A)}),y},ou=function(u,l){var d={};return yc(u,l,As(d),Ht),d},wu=function(u,l){var d=[];return qr(u,function(h,y){d.push(l(h,y))}),d},wc=function(u){return wu(u,_n)},iu=function(u){return ii(u).length},Ei=function(u,l){return V(u,l)?W.from(u[l]):W.none()},V=function(u,l){return ki.call(u,l)},ce=function(u,l){return V(u,l)&&u[l]!==void 0&&u[l]!==null},Se=function(u){for(var l in u)if(ki.call(u,l))return!1;return!0},Fe=["tfoot","thead","tbody","colgroup"],ot=function(u){return qn(Fe,u)},Ut=function(u,l){return{rows:u,columns:l}},Or=function(u,l){return{row:u,column:l}},Nr=function(u,l,d){return{element:u,rowspan:l,colspan:d}},zn=function(u,l,d,h){return{element:u,rowspan:l,colspan:d,isNew:h}},ca=function(u,l,d,h,y,x){return{element:u,rowspan:l,colspan:d,row:h,column:y,isLocked:x}},ba=function(u,l,d){return{element:u,cells:l,section:d}},os=function(u,l,d,h){return{element:u,cells:l,section:d,isNew:h}},Eo=function(u,l,d){return{element:u,isNew:l,isLocked:d}},Hu=function(u,l,d,h){return{element:u,cells:l,section:d,isNew:h}},Qt=function(u,l,d,h){return{startRow:u,startCol:l,finishRow:d,finishCol:h}},Yc=function(u,l,d){return{element:u,colspan:l,column:d}},af=function(u,l){return{element:u,columns:l}};typeof window<"u"||Function("return this;")();var Sr=function(u){var l=u.dom.nodeName;return l.toLowerCase()},of=function(u){return u.dom.nodeType},kl=function(u){return function(l){return of(l)===u}},Yf=function(u){return of(u)===Cr||Sr(u)==="#comment"},Lr=kl(Sa),uu=kl(yu),Qv=kl(rr),Vu=kl(Oa),Ia=function(u){return function(l){return Lr(l)&&Sr(l)===u}},Xs=function(u){return Xe.fromDom(u.dom.ownerDocument)},Ne=function(u){return Qv(u)?u:Xs(u)},Jc=function(u){return Xe.fromDom(Ne(u).dom.defaultView)},Fa=function(u){return W.from(u.dom.parentNode).map(Xe.fromDom)},Jf=function(u){return W.from(u.dom.parentElement).map(Xe.fromDom)},Ds=function(u,l){for(var d=or(l)?l:Rn,h=u.dom,y=[];h.parentNode!==null&&h.parentNode!==void 0;){var x=h.parentNode,A=Xe.fromDom(x);if(y.push(A),d(A)===!0)break;h=x}return y},_=function(u){return W.from(u.dom.previousSibling).map(Xe.fromDom)},M=function(u){return W.from(u.dom.nextSibling).map(Xe.fromDom)},T=function(u){return ut(u.dom.childNodes,Xe.fromDom)},I=function(u,l){var d=u.dom.childNodes;return W.from(d[l]).map(Xe.fromDom)},ae=function(u){return I(u,0)},fe=function(u){return Vu(u)&&Tn(u.dom.host)},De=or(Element.prototype.attachShadow)&&or(Node.prototype.getRootNode),st=Ct(De),dn=De?function(u){return Xe.fromDom(u.dom.getRootNode())}:Ne,Cn=function(u){var l=dn(u);return fe(l)?W.some(l):W.none()},xt=function(u){return Xe.fromDom(u.dom.host)},on=function(u){if(st()&&Tn(u.target)){var l=Xe.fromDom(u.target);if(Lr(l)&&Vn(l)&&u.composed&&u.composedPath){var d=u.composedPath();if(d)return jt(d)}}return W.from(u.target)},Vn=function(u){return Tn(u.dom.shadowRoot)},Kn=function(u){var l=uu(u)?u.dom.parentNode:u.dom;if(l==null||l.ownerDocument===null)return!1;var d=l.ownerDocument;return Cn(Xe.fromDom(l)).fold(function(){return d.body.contains(l)},cr(Kn,xt))},gn=function(){return Ta(Xe.fromDom(document))},Ta=function(u){var l=u.dom.body;if(l==null)throw new Error("Body is not available yet");return Xe.fromDom(l)},fn=function(u,l,d){return Un(Ds(u,d),l)},Hr=function(u,l){return Un(T(u),l)},va=function(u,l){var d=[];return Et(T(u),function(h){l(h)&&(d=d.concat([h])),d=d.concat(va(h,l))}),d},su=function(u,l,d){return fn(u,function(h){return Ya(h,l)},d)},Mn=function(u,l){return Hr(u,function(d){return Ya(d,l)})},is=function(u,l){return Xc(l,u)};function Da(u,l,d,h,y){return u(d,h)?W.some(d):or(y)&&y(d)?W.none():l(d,h,y)}var La=function(u,l,d){for(var h=u.dom,y=or(d)?d:Rn;h.parentNode;){h=h.parentNode;var x=Xe.fromDom(h);if(l(x))return W.some(x);if(y(x))break}return W.none()},wp=function(u,l,d){var h=function(y,x){return x(y)};return Da(h,La,u,l,d)},ui=function(u,l){var d=function(y){return l(Xe.fromDom(y))},h=nt(u.dom.childNodes,d);return h.map(Xe.fromDom)},_g=function(u,l){var d=function(h){for(var y=0;y<h.childNodes.length;y++){var x=Xe.fromDom(h.childNodes[y]);if(l(x))return W.some(x);var A=d(h.childNodes[y]);if(A.isSome())return A}return W.none()};return d(u.dom)},Cc=function(u,l,d){return La(u,function(h){return Ya(h,l)},d)},pn=function(u,l){return ui(u,function(d){return Ya(d,l)})},us=function(u,l){return Gs(l,u)},Wa=function(u,l,d){var h=function(y,x){return Ya(y,x)};return Da(h,Cc,u,l,d)},ja=function(u,l,d){if(Xt(d)||no(d)||za(d))u.setAttribute(l,d+"");else throw console.error("Invalid call to Attribute.set. Key ",l,":: Value ",d,":: Element ",u),new Error("Attribute value was not simple")},zo=function(u,l,d){ja(u.dom,l,d)},go=function(u,l){var d=u.dom;qr(l,function(h,y){ja(d,y,h)})},uf=function(u,l){qr(l,function(d,h){d.fold(function(){ya(u,h)},function(y){ja(u.dom,h,y)})})},Rs=function(u,l){var d=u.dom.getAttribute(l);return d===null?void 0:d},_r=function(u,l){return W.from(Rs(u,l))},ya=function(u,l){u.dom.removeAttribute(l)},cu=function(u){return ee(u.dom.attributes,function(l,d){return l[d.name]=d.value,l},{})},Zc=function(u,l,d){return d===void 0&&(d=ye),u.exists(function(h){return d(h,l)})},Oo=function(u){for(var l=[],d=function(y){l.push(y)},h=0;h<u.length;h++)u[h].each(d);return l},ss=function(u,l,d){return u.isSome()&&l.isSome()?W.some(d(u.getOrDie(),l.getOrDie())):W.none()},Cp=function(u,l){return u!=null?l(u):W.none()},sf=function(u){return u.bind(_n)},na=function(u,l){return u?W.some(l):W.none()},Ys=function(u){return u.style!==void 0&&or(u.style.getPropertyValue)},El=function(u,l,d){if(!Xt(d))throw console.error("Invalid call to CSS.set. Property ",l,":: Value ",d,":: Element ",u),new Error("CSS value must be a string: "+d);Ys(u)&&u.style.setProperty(l,d)},Cu=function(u,l){Ys(u)&&u.style.removeProperty(l)},Ja=function(u,l,d){var h=u.dom;El(h,l,d)},Ol=function(u,l){var d=u.dom;qr(l,function(h,y){El(d,y,h)})},Qc=function(u,l){var d=u.dom,h=window.getComputedStyle(d),y=h.getPropertyValue(l);return y===""&&!Kn(u)?ji(d,l):y},ji=function(u,l){return Ys(u)?u.style.getPropertyValue(l):""},Su=function(u,l){var d=u.dom,h=ji(d,l);return W.from(h).filter(function(y){return y.length>0})},Oi=function(u,l){var d=u.dom;Cu(d,l),Zc(_r(u,"style").map(Gt),"")&&ya(u,"style")},Zf=function(u,l){var d=u.dom,h=l.dom;Ys(d)&&Ys(h)&&(h.style.cssText=d.style.cssText)},Js=function(u,l,d){return d===void 0&&(d=0),_r(u,l).map(function(h){return parseInt(h,10)}).getOr(d)},Io=function(u,l){return Js(u,l,1)},ed=function(u){return Ia("col")(u)?Js(u,"span",1)>1:Io(u,"colspan")>1},Sp=function(u){return Io(u,"rowspan")>1},cf=function(u,l){return parseInt(Qc(u,l),10)},lf=Ct(10),Za=Ct(10),ff=function(u,l){return vf(u,l,Mt)},vf=function(u,l,d){return Fr(T(u),function(h){return Ya(h,l)?d(h)?[h]:[]:vf(h,l,d)})},Gi=function(u,l,d){if(d===void 0&&(d=Rn),d(l))return W.none();if(qn(u,Sr(l)))return W.some(l);var h=function(y){return Ya(y,"table")||d(y)};return Cc(l,u.join(","),h)},el=function(u,l){return Gi(["td","th"],u,l)},df=function(u){return ff(u,"th,td")},tl=function(u){return Ya(u,"colgroup")?Mn(u,"col"):Fr(fm(u),function(l){return Mn(l,"col")})},_a=function(u,l){return Wa(u,"table",l)},Uu=function(u){return ff(u,"tr")},fm=function(u){return _a(u).fold(Ct([]),function(l){return Mn(l,"colgroup")})},cs=function(u,l){return ut(u,function(d){if(Sr(d)==="colgroup"){var h=ut(tl(d),function(y){var x=Js(y,"span",1);return Nr(y,1,x)});return ba(d,h,"colgroup")}else{var h=ut(df(d),function(x){var A=Js(x,"rowspan",1),P=Js(x,"colspan",1);return Nr(x,A,P)});return ba(d,h,l(d))}})},vm=function(u){return Fa(u).map(function(l){var d=Sr(l);return ot(d)?d:"tbody"}).getOr("tbody")},xp=function(u){var l=Uu(u),d=fm(u),h=ua(ua([],d,!0),l,!0);return cs(h,vm)},Bg=function(u,l){return cs(u,function(){return l})},mf=function(u,l,d){var h=u.cells,y=h.slice(0,l),x=h.slice(l),A=y.concat(d).concat(x);return Sn(u,A)},gf=function(u,l,d){return mf(u,l,[d])},Al=function(u,l,d){var h=u.cells;h[l]=d},Sn=function(u,l){return Hu(u.element,l,u.section,u.isNew)},_s=function(u,l){var d=u.cells,h=ut(d,l);return Hu(u.element,h,u.section,u.isNew)},xu=function(u,l){return u.cells[l]},qi=function(u,l){return xu(u,l).element},Bs=function(u){return u.cells.length},oo=function(u){var l=wi(u,function(d){return d.section==="colgroup"});return{rows:l.fail,cols:l.pass}},Fo=function(u,l,d){var h=ut(u.cells,d);return Hu(l(u.element),h,u.section,!0)},ho="data-snooker-locked-cols",Dl=function(u){return _r(u,ho).bind(function(l){return W.from(l.match(/\d+/g))}).map(function(l){return Hn(l,Mt)})},Ai=function(u){var l=ee(oo(u).rows,function(h,y){return Et(y.cells,function(x,A){x.isLocked&&(h[A]=!0)}),h},{}),d=wu(l,function(h,y){return parseInt(y,10)});return lr(d)},Pt=function(u,l){return u+","+l},hf=function(u,l,d){return W.from(u.access[Pt(l,d)])},Mg=function(u,l,d){var h=In(u,function(y){return d(l,y.element)});return h.length>0?W.some(h[0]):W.none()},In=function(u,l){var d=Fr(u.all,function(h){return h.cells});return Un(d,l)},ra=function(u){var l={},d=0;return Et(u.cells,function(h){var y=h.colspan;ia(y,function(x){var A=d+x;l[A]=Yc(h.element,y,A)}),d+=y}),l},dm=function(u){var l={},d=[],h=jt(u).map(function(lt){return lt.element}).bind(_a),y=h.bind(Dl).getOr({}),x=0,A=0,P=0,j=wi(u,function(lt){return lt.section==="colgroup"}),Y=j.pass,le=j.fail;Et(le,function(lt){var ct=[];Et(lt.cells,function(qt){for(var xr=0;l[Pt(P,xr)]!==void 0;)xr++;for(var en=ce(y,xr.toString()),yn=ca(qt.element,qt.rowspan,qt.colspan,P,xr,en),sr=0;sr<qt.colspan;sr++)for(var Gn=0;Gn<qt.rowspan;Gn++){var eo=P+Gn,Qo=xr+sr,hu=Pt(eo,Qo);l[hu]=yn,A=Math.max(A,Qo+1)}ct.push(yn)}),x++,d.push(ba(lt.element,ct,lt.section)),P++});var Me=Jr(Y).map(function(lt){var ct=ra(lt),qt=af(lt.element,wc(ct));return{colgroups:[qt],columns:ct}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),Qe=Me.columns,Ve=Me.colgroups,Pe=Ut(x,A);return{grid:Pe,access:l,all:d,columns:Qe,colgroups:Ve}},Sc=function(u){var l=xp(u);return dm(l)},Ra=function(u){return Fr(u.all,function(l){return l.cells})},mm=function(u){return wc(u.columns)},Wu=function(u){return ii(u.columns).length>0},td=function(u,l){return W.from(u.columns[l])},Wn={fromTable:Sc,generate:dm,getAt:hf,findItem:Mg,filterItems:In,justCells:Ra,justColumns:mm,hasColumns:Wu,getColumnAt:td},lu=function(u,l){var d=l.column,h=l.column+l.colspan-1,y=l.row,x=l.row+l.rowspan-1;return d<=u.finishCol&&h>=u.startCol&&y<=u.finishRow&&x>=u.startRow},Wb=function(u,l){return l.column>=u.startCol&&l.column+l.colspan-1<=u.finishCol&&l.row>=u.startRow&&l.row+l.rowspan-1<=u.finishRow},jb=function(u,l){for(var d=!0,h=Lt(Wb,l),y=l.startRow;y<=l.finishRow;y++)for(var x=l.startCol;x<=l.finishCol;x++)d=d&&Wn.getAt(u,y,x).exists(h);return d?W.some(l):W.none()},Ba=function(u,l){return Qt(Math.min(u.row,l.row),Math.min(u.column,l.column),Math.max(u.row+u.rowspan-1,l.row+l.rowspan-1),Math.max(u.column+u.colspan-1,l.column+l.colspan-1))},gm=function(u,l,d){var h=Wn.findItem(u,l,Qn),y=Wn.findItem(u,d,Qn);return h.bind(function(x){return y.map(function(A){return Ba(x,A)})})},E=function(u,l,d){return gm(u,l,d).bind(function(h){return jb(u,h)})},$=function(u,l,d,h){return Wn.findItem(u,l,Qn).bind(function(y){var x=d>0?y.row+y.rowspan-1:y.row,A=h>0?y.column+y.colspan-1:y.column,P=Wn.getAt(u,x+d,A+h);return P.map(function(j){return j.element})})},H=function(u,l,d){return gm(u,l,d).map(function(h){var y=Wn.filterItems(u,Lt(lu,h));return ut(y,function(x){return x.element})})},te=function(u,l){var d=function(h,y){return Aa(y,h)};return Wn.findItem(u,l,d).map(function(h){return h.element})},we=function(u,l,d){return _a(u).bind(function(h){var y=ir(h);return $(y,u,l,d)})},$e=function(u,l,d){var h=ir(u);return H(h,l,d)},Wt=function(u,l,d,h,y){var x=ir(u),A=Qn(u,d)?W.some(l):te(x,l),P=Qn(u,y)?W.some(h):te(x,h);return A.bind(function(j){return P.bind(function(Y){return H(x,j,Y)})})},En=function(u,l,d){var h=ir(u);return E(h,l,d)},ir=Wn.fromTable,jn=function(u,l){var d=Fa(u);d.each(function(h){h.dom.insertBefore(l.dom,u.dom)})},la=function(u,l){var d=M(u);d.fold(function(){var h=Fa(u);h.each(function(y){Ga(y,l)})},function(h){jn(h,l)})},Di=function(u,l){var d=ae(u);d.fold(function(){Ga(u,l)},function(h){u.dom.insertBefore(l.dom,h.dom)})},Ga=function(u,l){u.dom.appendChild(l.dom)},hT=function(u,l,d){I(u,d).fold(function(){Ga(u,l)},function(h){jn(h,l)})},ow=function(u,l){jn(u,l),Ga(l,u)},iw=function(u,l){Et(l,function(d){jn(u,d)})},pT=function(u,l){Et(l,function(d,h){var y=h===0?u:l[h-1];la(y,d)})},nl=function(u,l){Et(l,function(d){Ga(u,d)})},Pg=function(u){u.dom.textContent="",Et(T(u),function(l){ju(l)})},ju=function(u){var l=u.dom;l.parentNode!==null&&l.parentNode.removeChild(l)},hm=function(u){var l=T(u);l.length>0&&iw(u,l),ju(u)},Gb=function(u,l){var d=function(x){if(!u(x))throw new Error("Can only get "+l+" value of a "+l+" node");return h(x).getOr("")},h=function(x){return u(x)?W.from(x.dom.nodeValue):W.none()},y=function(x,A){if(!u(x))throw new Error("Can only set raw "+l+" value of a "+l+" node");x.dom.nodeValue=A};return{get:d,getOption:h,set:y}},Ng=Gb(uu,"text"),Tp=function(u){return Ng.get(u)},uw=function(u){return Ng.getOption(u)},bT=function(u,l){return Ng.set(u,l)},rl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function $g(){var u=function(Y){return Xe.fromDom(Y.dom.cloneNode(!1))},l=function(Y){return Ne(Y).dom},d=function(Y){return Lr(Y)?Sr(Y)==="body"?!0:qn(rl,Sr(Y)):!1},h=function(Y){return Lr(Y)?qn(["br","img","hr","input"],Sr(Y)):!1},y=function(Y){return Lr(Y)&&Rs(Y,"contenteditable")==="false"},x=function(Y,le){return Y.dom.compareDocumentPosition(le.dom)},A=function(Y,le){var Me=cu(Y);go(le,Me)},P=function(Y){var le=Sr(Y);return qn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],le)},j=function(Y){return Lr(Y)?_r(Y,"lang"):W.none()};return{up:Ct({selector:Cc,closest:Wa,predicate:La,all:Ds}),down:Ct({selector:is,predicate:va}),styles:Ct({get:Qc,getRaw:Su,set:Ja,remove:Oi}),attrs:Ct({get:Rs,set:zo,remove:ya,copyTo:A}),insert:Ct({before:jn,after:la,afterAll:pT,append:Ga,appendAll:nl,prepend:Di,wrap:ow}),remove:Ct({unwrap:hm,remove:ju}),create:Ct({nu:Xe.fromTag,clone:u,text:Xe.fromText}),query:Ct({comparePosition:x,prevSibling:_,nextSibling:M}),property:Ct({children:T,name:Sr,parent:Fa,document:l,isText:uu,isComment:Yf,isElement:Lr,isSpecial:P,getLanguage:j,getText:Tp,setText:bT,isBoundary:d,isEmptyTag:h,isNonEditable:y}),eq:Qn,is:qs}}var yT=function(u,l,d,h){var y=d[0],x=d.slice(1);return h(u,l,y,x)},qb=function(u,l,d){return d.length>0?yT(u,l,d,wT):W.none()},wT=function(u,l,d,h){var y=l(u,d);return Ca(h,function(x,A){var P=l(u,A);return CT(u,x,P)},y)},CT=function(u,l,d){return l.bind(function(h){return d.filter(Lt(u.eq,h))})},pm=function(u,l){return Lt(u.eq,l)},zg=function(u,l,d,h){h===void 0&&(h=Rn);var y=[l].concat(u.up().all(l)),x=[d].concat(u.up().all(d)),A=function(le){var Me=kt(le,h);return Me.fold(function(){return le},function(Qe){return le.slice(0,Qe+1)})},P=A(y),j=A(x),Y=nt(P,function(le){return D(j,pm(u,le))});return{firstpath:P,secondpath:j,shared:Y}},sw=qb,cw=zg,ls=$g(),Yt=function(u,l){return sw(ls,function(d,h){return u(h)},l)},pf=function(u,l,d){return cw(ls,u,l,d)},Ig=function(u){return Cc(u,"table")},Qf=function(u,l,d){var h=function(y){return function(x){return d!==void 0&&d(x)||Qn(x,y)}};return Qn(u,l)?W.some({boxes:W.some([u]),start:u,finish:l}):Ig(u).bind(function(y){return Ig(l).bind(function(x){if(Qn(y,x))return W.some({boxes:$e(y,u,l),start:u,finish:l});if(Aa(y,x)){var A=su(l,"td,th",h(y)),P=A.length>0?A[A.length-1]:l;return W.some({boxes:Wt(y,u,y,l,x),start:u,finish:P})}else if(Aa(x,y)){var A=su(u,"td,th",h(x)),j=A.length>0?A[A.length-1]:u;return W.some({boxes:Wt(x,u,y,l,x),start:u,finish:j})}else return pf(u,l).shared.bind(function(Y){return Wa(Y,"table",d).bind(function(le){var Me=su(l,"td,th",h(le)),Qe=Me.length>0?Me[Me.length-1]:l,Ve=su(u,"td,th",h(le)),Pe=Ve.length>0?Ve[Ve.length-1]:u;return W.some({boxes:Wt(le,u,y,l,x),start:Pe,finish:Qe})})})})})},bm=function(u,l){var d=is(u,l);return d.length>0?W.some(d):W.none()},Kb=function(u,l){return nt(u,function(d){return Ya(d,l)})},xc=function(u,l,d){return us(u,l).bind(function(h){return us(u,d).bind(function(y){return Yt(Ig,[h,y]).map(function(x){return{first:h,last:y,table:x}})})})},nd=function(u,l){return Cc(u,"table").bind(function(d){return us(d,l).bind(function(h){return Qf(h,u).bind(function(y){return y.boxes.map(function(x){return{boxes:x,start:y.start,finish:y.finish}})})})})},ym=function(u,l,d,h,y){return Kb(u,y).bind(function(x){return we(x,l,d).bind(function(A){return nd(A,h)})})},io=function(u,l){return bm(u,l)},si=function(u,l,d){return xc(u,l,d).bind(function(h){var y=function(j){return Qn(u,j)},x="thead,tfoot,tbody,table",A=Cc(h.first,x,y),P=Cc(h.last,x,y);return A.bind(function(j){return P.bind(function(Y){return Qn(j,Y)?En(h.table,h.first,h.last):W.none()})})})},Fg=function(u){if(!ar(u))throw new Error("cases must be an array");if(u.length===0)throw new Error("there must be at least one case");var l=[],d={};return Et(u,function(h,y){var x=ii(h);if(x.length!==1)throw new Error("one and only one name per case");var A=x[0],P=h[A];if(d[A]!==void 0)throw new Error("duplicate key detected:"+A);if(A==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ar(P))throw new Error("case arguments must be an array");l.push(A),d[A]=function(){for(var j=[],Y=0;Y<arguments.length;Y++)j[Y]=arguments[Y];var le=j.length;if(le!==P.length)throw new Error("Wrong number of arguments to case "+A+". Expected "+P.length+" ("+P+"), got "+le);var Me=function(Qe){var Ve=ii(Qe);if(l.length!==Ve.length)throw new Error("Wrong number of arguments to match. Expected: "+l.join(",")+`
Actual: `+Ve.join(","));var Pe=tn(l,function(lt){return qn(Ve,lt)});if(!Pe)throw new Error("Not all branches were specified when using match. Specified: "+Ve.join(", ")+`
Required: `+l.join(", "));return Qe[A].apply(null,j)};return{fold:function(){for(var Qe=[],Ve=0;Ve<arguments.length;Ve++)Qe[Ve]=arguments[Ve];if(Qe.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+Qe.length);var Pe=Qe[y];return Pe.apply(null,j)},match:Me,log:function(Qe){console.log(Qe,{constructors:l,constructor:A,params:j})}}}}),d},Rl={generate:Fg},Lg=Rl.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),kp=function(u,l,d,h){return u.fold(l,d,h)},Ep=Lg.none,ST=Lg.multiple,wm=Lg.single,Ki=function(u,l,d){var h=function(){return io(u(),d).fold(function(){return l().fold(Ep,wm)},function(y){return ST(y)})};return{get:h}},lw=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ha=function(u,l){return Xe.fromDom(u.dom.cloneNode(l))},Tc=function(u){return Ha(u,!1)},zr=function(u){return Ha(u,!0)},ev=function(u,l){var d=Xe.fromTag(l),h=cu(u);return go(d,h),d},Zs=function(u,l){var d=ev(u,l),h=T(zr(u));return nl(d,h),d},xT=function(u,l){var d=ev(u,l);jn(u,d);var h=T(u);return nl(d,h),ju(u),d},Lo=function(u,l){var d=function(P,j){if(!za(j)&&!j.match(/^[0-9]+$/))throw new Error(u+".set accepts only positive integer values. Value was "+j);var Y=P.dom;Ys(Y)&&(Y.style[u]=j+"px")},h=function(P){var j=l(P);if(j<=0||j===null){var Y=Qc(P,u);return parseFloat(Y)||0}return j},y=h,x=function(P,j){return ee(j,function(Y,le){var Me=Qc(P,le),Qe=Me===void 0?0:parseInt(Me,10);return isNaN(Qe)?Y:Y+Qe},0)},A=function(P,j,Y){var le=x(P,Y),Me=j>le?j-le:0;return Me};return{set:d,get:h,getOuter:y,aggregate:x,max:A}},Tu=function(){var u=mn().browser;return u.isIE()||u.isEdge()},fw=function(u,l){return Ti(u).getOr(l)},He=function(u,l,d){return fw(Qc(u,l),d)},Gu=function(u){return Qc(u,"box-sizing")},bf=function(u,l,d,h){var y=He(u,"padding-"+d,0),x=He(u,"padding-"+h,0),A=He(u,"border-"+d+"-width",0),P=He(u,"border-"+h+"-width",0);return l-y-x-A-P},xn=function(u,l){var d=u.dom,h=d.getBoundingClientRect().height||d.offsetHeight;return l==="border-box"?h:bf(u,h,"top","bottom")},Ms=function(u,l){var d=u.dom,h=d.getBoundingClientRect().width||d.offsetWidth;return l==="border-box"?h:bf(u,h,"left","right")},TT=function(u){return Tu()?xn(u,Gu(u)):He(u,"height",u.dom.offsetHeight)},fu=function(u){return Tu()?Ms(u,Gu(u)):He(u,"width",u.dom.offsetWidth)},Cm=function(u){return Ms(u,"content-box")},_l=Lo("width",function(u){return u.dom.offsetWidth}),kc=function(u){return _l.get(u)},Xi=function(u){return _l.getOuter(u)},Br=Cm,al=fu,rd=function(u,l){l===void 0&&(l=Mt);var d=u.grid,h=ia(d.columns,_n),y=ia(d.rows,_n);return ut(h,function(x){var A=function(){return Fr(y,function(Y){return Wn.getAt(u,Y,x).filter(function(le){return le.column===x}).toArray()})},P=function(Y){return Y.colspan===1&&l(Y.element)},j=function(){return Wn.getAt(u,0,x)};return da(A,P,j)})},da=function(u,l,d){var h=u(),y=nt(h,l),x=y.orThunk(function(){return W.from(h[0]).orThunk(d)});return x.map(function(A){return A.element})},tv=function(u){var l=u.grid,d=ia(l.rows,_n),h=ia(l.columns,_n);return ut(d,function(y){var x=function(){return Fr(h,function(j){return Wn.getAt(u,y,j).filter(function(Y){return Y.row===y}).fold(Ct([]),function(Y){return[Y]})})},A=function(j){return j.rowspan===1},P=function(){return Wn.getAt(u,y,0)};return da(x,A,P)})},fs=function(u,l){if(l<0||l>=u.length-1)return W.none();var d=u[l].fold(function(){var y=Wr(u.slice(0,l));return jr(y,function(x,A){return x.map(function(P){return{value:P,delta:A+1}})})},function(y){return W.some({value:y,delta:0})}),h=u[l+1].fold(function(){var y=u.slice(l+1);return jr(y,function(x,A){return x.map(function(P){return{value:P,delta:A+1}})})},function(y){return W.some({value:y,delta:1})});return d.bind(function(y){return h.map(function(x){var A=x.delta+y.delta;return Math.abs(x.value-y.value)/A})})},vs=function(u,l){return function(d){return kT(d)==="rtl"?l:u}},kT=function(u){return Qc(u,"direction")==="rtl"?"rtl":"ltr"},he=Lo("height",function(u){var l=u.dom;return Kn(u)?l.getBoundingClientRect().height:l.offsetHeight}),ku=function(u){return he.get(u)},ol=function(u){return he.getOuter(u)},Sm=TT,Ps=function(u,l){var d=function(h,y){return Ps(u+h,l+y)};return{left:u,top:l,translate:d}},aa=Ps,ma=function(u){var l=u.getBoundingClientRect();return aa(l.left,l.top)},qu=function(u,l){return u!==void 0?u:l!==void 0?l:0},yf=function(u){var l=u.dom.ownerDocument,d=l.body,h=l.defaultView,y=l.documentElement;if(d===u.dom)return aa(d.offsetLeft,d.offsetTop);var x=qu(h==null?void 0:h.pageYOffset,y.scrollTop),A=qu(h==null?void 0:h.pageXOffset,y.scrollLeft),P=qu(y.clientTop,d.clientTop),j=qu(y.clientLeft,d.clientLeft);return Xb(u).translate(A-j,x-P)},Xb=function(u){var l=u.dom,d=l.ownerDocument,h=d.body;return h===l?aa(h.offsetLeft,h.offsetTop):Kn(u)?ma(l):aa(0,0)},nn=function(u,l){return{row:u,y:l}},Op=function(u,l){return{col:u,x:l}},Ns=function(u){var l=yf(u);return l.left+Xi(u)},vw=function(u){return yf(u).left},Hg=function(u,l){return Op(u,vw(l))},Vg=function(u,l){return Op(u,Ns(l))},Yb=function(u){return yf(u).top},Jb=function(u,l){return nn(u,Yb(l))},Bl=function(u,l){return nn(u,Yb(l)+ol(l))},wf=function(u,l,d){if(d.length===0)return[];var h=ut(d.slice(1),function(x,A){return x.map(function(P){return u(A,P)})}),y=d[d.length-1].map(function(x){return l(d.length-1,x)});return h.concat([y])},ET=function(u){return-u},Zb={delta:_n,positions:function(u){return wf(Jb,Bl,u)},edge:Yb},OT={delta:_n,edge:vw,positions:function(u){return wf(Hg,Vg,u)}},dw={delta:ET,edge:Ns,positions:function(u){return wf(Vg,Hg,u)}},Ug=vs(OT,dw),xm={delta:function(u,l){return Ug(l).delta(u,l)},positions:function(u,l){return Ug(l).positions(u,l)},edge:function(u){return Ug(u).edge(u)}},mw={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Ml=function(){var u="[0-9]+",l="[+-]?"+u,d="[eE]"+l,h="\\.",y=function(P){return"(?:"+P+")?"},x=["Infinity",u+h+y(u)+y(d),h+u+y(d),u+y(d)].join("|"),A="[+-]?(?:"+x+")";return new RegExp("^("+A+")(.*)$")}(),Tm=function(u,l){return D(l,function(d){return D(mw[d],function(h){return u===h})})},Qb=function(u,l){var d=W.from(Ml.exec(u));return d.bind(function(h){var y=Number(h[1]),x=h[2];return Tm(x,l)?W.some({value:y,unit:x}):W.none()})},gw=/(\d+(\.\d+)?)%/,AT=/(\d+(\.\d+)?)px|em/,DT=Ia("col"),Ao=function(u,l,d){var h=Jf(u).getOrThunk(function(){return Ta(Xs(u))});return l(u)/d(h)*100},Pl=function(u,l){Ja(u,"width",l+"px")},Ec=function(u,l){Ja(u,"width",l+"%")},nv=function(u,l){Ja(u,"height",l+"px")},hw=function(u){return Sm(u)+"px"},Oc=function(u,l,d,h){var y=_a(u).map(function(x){var A=d(x);return Math.floor(l/100*A)}).getOr(l);return h(u,y),y},ad=function(u,l,d,h){var y=parseFloat(u);return No(u,"%")&&Sr(l)!=="table"?Oc(l,y,d,h):y},e0=function(u){var l=hw(u);return l?ad(l,u,ku,nv):ku(u)},t0=function(u,l,d){var h=d(u),y=Io(u,l);return h/y},Cf=function(u,l){return Su(u,l).orThunk(function(){return _r(u,l).map(function(d){return d+"px"})})},Qs=function(u){return Cf(u,"width")},Ri=function(u){return Cf(u,"height")},Ap=function(u){return Ao(u,kc,Br)},n0=function(u){return DT(u)?kc(u):al(u)},od=function(u){return t0(u,"rowspan",e0)},km=function(u){var l=Qs(u);return l.bind(function(d){return Qb(d,["fixed","relative","empty"])})},Em=function(u,l,d){Ja(u,"width",l+d)},RT=function(u){return kc(u)+"px"},Om=function(u){return Ao(u,kc,Br)+"%"},r0=function(u){return Qs(u).exists(function(l){return gw.test(l)})},_T=function(u){return Qs(u).exists(function(l){return AT.test(l)})},qa=function(u){return Qs(u).isNone()},Dp=Ct(gw),rv=Ia("col"),a0=function(u){return Qs(u).getOrThunk(function(){return n0(u)+"px"})},o0=function(u){return Ri(u).getOrThunk(function(){return od(u)+"px"})},ec=function(u){return ut(Wn.justColumns(u),function(l){return W.from(l.element)})},$s=function(u){var l=mn().browser,d=l.isChrome()||l.isFirefox();return rv(u)?d:!0},id=function(u,l,d,h,y,x){return u.filter(h).fold(function(){return x(fs(d,l))},function(A){return y(A)})},av=function(u,l,d,h){var y=rd(u),x=Wn.hasColumns(u)?ec(u):y,A=[W.some(xm.edge(l))].concat(ut(xm.positions(y,l),function(j){return j.map(function(Y){return Y.x})})),P=Bt(ed);return ut(x,function(j,Y){return id(j,Y,A,P,function(le){if($s(le))return d(le);var Me=Cp(y[Y],_n);return id(Me,Y,A,P,function(Qe){return h(W.some(kc(Qe)))},h)},h)})},Rp=function(u){return u.map(function(l){return l+"px"}).getOr("")},Wg=function(u,l){return av(u,l,a0,Rp)},i0=function(u,l,d){return av(u,l,Ap,function(h){return h.fold(function(){return d.minCellWidth()},function(y){return y/d.pixelWidth()*100})})},ud=function(u,l,d){return av(u,l,n0,function(h){return h.getOrThunk(d.minCellWidth)})},_p=function(u,l,d,h,y){var x=tv(u),A=[W.some(d.edge(l))].concat(ut(d.positions(x,l),function(P){return P.map(function(j){return j.y})}));return ut(x,function(P,j){return id(P,j,A,Bt(Sp),h,y)})},BT=function(u,l,d){return _p(u,l,d,od,function(h){return h.getOrThunk(Za)})},u0=function(u,l,d){return _p(u,l,d,o0,Rp)},zs=function(u,l){return function(){return Kn(u)?l(u):parseFloat(Su(u,"width").getOr("0"))}},ds=function(u){var l=zs(u,kc),d=Ct(0),h=function(y,x){return ud(y,u,x)};return{width:l,pixelWidth:l,getWidths:h,getCellDelta:d,singleColumnWidth:Ct([0]),minCellWidth:d,setElementWidth:Ht,adjustTableWidth:Ht,isRelative:!0,label:"none"}},Am=function(u){var l=zs(u,function(j){return parseFloat(Om(j))}),d=zs(u,kc),h=function(j){return j/d()*100},y=function(j,Y){return[100-j]},x=function(){return lf()/d()*100},A=function(j){var Y=l(),le=j/100*Y,Me=Y+le;Ec(u,Me)},P=function(j,Y){return i0(j,u,Y)};return{width:l,pixelWidth:d,getWidths:P,getCellDelta:h,singleColumnWidth:y,minCellWidth:x,setElementWidth:Ec,adjustTableWidth:A,isRelative:!0,label:"percent"}},Ac=function(u){var l=zs(u,kc),d=_n,h=function(A,P){var j=Math.max(lf(),A+P);return[j-A]},y=function(A){var P=l()+A;Pl(u,P)},x=function(A,P){return ud(A,u,P)};return{width:l,pixelWidth:l,getWidths:x,getCellDelta:d,singleColumnWidth:h,minCellWidth:lf,setElementWidth:Pl,adjustTableWidth:y,isRelative:!1,label:"pixel"}},vu=function(u,l){var d=Dp().exec(l);return d!==null?Am(u):Ac(u)},Bp=function(u){var l=Qs(u);return l.fold(function(){return ds(u)},function(d){return vu(u,d)})},Sf={getTableSize:Bp,pixelSize:Ac,percentageSize:Am,noneSize:ds},pw=function(u,l,d,h,y,x){return{minRow:u,minCol:l,maxRow:d,maxCol:h,allCells:y,selectedCells:x}},_i=function(u,l){var d=u.grid.columns,h=u.grid.rows,y=h,x=d,A=0,P=0,j=[],Y=[];return qr(u.access,function(le){if(j.push(le),l(le)){Y.push(le);var Me=le.row,Qe=Me+le.rowspan-1,Ve=le.column,Pe=Ve+le.colspan-1;Me<y?y=Me:Qe>A&&(A=Qe),Ve<x?x=Ve:Pe>P&&(P=Pe)}}),pw(y,x,A,P,j,Y)},bw=function(u,l,d){var h=u[d].element,y=Xe.fromTag("td");Ga(y,Xe.fromTag("br"));var x=l?Ga:Di;x(h,y)},jg=function(u,l,d,h){for(var y=l.grid.columns,x=l.grid.rows,A=0;A<x;A++)for(var P=!1,j=0;j<y;j++)if(!(A<d.minRow||A>d.maxRow||j<d.minCol||j>d.maxCol)){var Y=Wn.getAt(l,A,j).filter(h).isNone();Y?bw(u,P,A):P=!0}},er=function(u,l,d,h){qr(d.columns,function(A){(A.column<l.minCol||A.column>l.maxCol)&&ju(A.element)});var y=Un(ff(u,"tr"),function(A){return A.dom.childElementCount===0});Et(y,ju),(l.minCol===l.maxCol||l.minRow===l.maxRow)&&Et(ff(u,"th,td"),function(A){ya(A,"rowspan"),ya(A,"colspan")}),ya(u,ho),ya(u,"data-snooker-col-series");var x=Sf.getTableSize(u);x.adjustTableWidth(h)},un=function(u,l,d,h){if(h.minCol===0&&l.grid.columns===h.maxCol+1)return 0;var y=ud(l,u,d),x=ee(y,function(Y,le){return Y+le},0),A=ee(y.slice(h.minCol,h.maxCol+1),function(Y,le){return Y+le},0),P=A/x*d.pixelWidth(),j=P-d.pixelWidth();return d.getCellDelta(j)},xf=function(u,l){var d=function(Qe){return Ya(Qe.element,l)},h=zr(u),y=xp(h),x=Sf.getTableSize(u),A=Wn.generate(y),P=_i(A,d),j="th:not("+l+"),td:not("+l+")",Y=vf(h,"th,td",function(Qe){return Ya(Qe,j)});Et(Y,ju),jg(y,A,P,d);var le=Wn.fromTable(u),Me=un(u,le,x,P);return er(h,P,A,Me),h},s0=" ",Dc=function(u){return Sr(u)==="img"?1:uw(u).fold(function(){return T(u).length},function(l){return l.length})},yw=function(u){return uw(u).filter(function(l){return l.trim().length!==0||l.indexOf(s0)>-1}).isSome()},ga=["img","br"],c0=function(u){var l=yw(u);return l||qn(ga,Sr(u))},Gg=function(u){return _g(u,c0)},Mp=function(u){return We(u,c0)},We=function(u,l){var d=function(h){for(var y=T(h),x=y.length-1;x>=0;x--){var A=y[x];if(l(A))return W.some(A);var P=d(A);if(P.isSome())return P}return W.none()};return d(u)},qg={scope:["row","col"]},Dm=function(u){return function(){var l=Xe.fromTag("td",u.dom);return Ga(l,Xe.fromTag("br",u.dom)),l}},Rm=function(u){return function(){return Xe.fromTag("col",u.dom)}},sd=function(u){return function(){return Xe.fromTag("colgroup",u.dom)}},cd=function(u){return function(){return Xe.fromTag("tr",u.dom)}},ov=function(u,l,d){var h=Zs(u,l);return qr(d,function(y,x){y===null?ya(h,x):zo(h,x,y)}),h},uo=function(u){return u},ka=function(u,l,d){var h=Gg(u);return h.map(function(y){var x=d.join(","),A=su(y,x,function(P){return Qn(P,u)});return Ca(A,function(P,j){var Y=Tc(j);return ya(Y,"contenteditable"),Ga(P,Y),Y},l)}).getOr(l)},Tf=function(u,l){qr(qg,function(d,h){return _r(u,h).filter(function(y){return qn(d,y)}).each(function(y){return zo(l,h,y)})})},Ma=function(u,l,d){var h=function(A,P){Zf(A.element,P),Oi(P,"height"),A.colspan!==1&&Oi(P,"width")},y=function(A){var P=Xe.fromTag(Sr(A.element),l.dom),j=d.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Y=j.length>0?ka(A.element,P,j):P;return Ga(Y,Xe.fromTag("br")),h(A,P),Tf(A.element,P),u(A.element,P),P},x=function(A){var P=Xe.fromTag(Sr(A.element),l.dom);return h(A,P),u(A.element,P),P};return{col:x,colgroup:sd(l),row:cd(l),cell:y,replace:ov,colGap:Rm(l),gap:Dm(l)}},ms=function(u){return{col:Rm(u),colgroup:sd(u),row:cd(u),cell:Dm(u),replace:uo,colGap:Rm(u),gap:Dm(u)}},l0=function(u,l){var d=l||document,h=d.createElement("div");return h.innerHTML=u,T(Xe.fromDom(h))},Rc=function(u){return ut(u,Xe.fromDom)},Pp=function(u){return u.nodeName.toLowerCase()},Ku=function(u){return Xe.fromDom(u.getBody())},il=function(u){return u.getBoundingClientRect().width},kf=function(u){return u.getBoundingClientRect().height},ci=function(u){return function(l){return Qn(l,Ku(u))}},Np=function(u){return u?u.replace(/px$/,""):""},Yi=function(u){return/^\d+(\.\d+)?$/.test(u)?u+"px":u},li=function(u){ya(u,"data-mce-style");var l=function(d){return ya(d,"data-mce-style")};Et(df(u),l),Et(tl(u),l),Et(Uu(u),l)},_m=function(u,l){var d=u.dom.getStyle(l,"width")||u.dom.getAttrib(l,"width");return W.from(d).filter(hr)},MT=function(u){return/^(\d+(\.\d+)?)%$/.test(u)},Kg=function(u){return/^(\d+(\.\d+)?)px$/.test(u)},Do=function(u){return Xe.fromDom(u.selection.getStart())},Nt=function(u){return Xe.fromDom(u.selection.getEnd())},tc=function(u){return kp(u.get(),Ct([]),_n,ft)},PT=function(u){var l=function(y,x){return _r(y,x).exists(function(A){return parseInt(A,10)>1})},d=function(y){return l(y,"rowspan")||l(y,"colspan")},h=tc(u);return h.length>0&&tn(h,d)?W.some(h):W.none()},ww=function(u,l,d){return kp(l.get(),W.none,function(h){return h.length<=1?W.none():si(u,d.firstSelectedSelector,d.lastSelectedSelector).map(function(y){return{bounds:y,cells:h}})},W.none)},Bm="data-mce-selected",Cw="td["+Bm+"],th["+Bm+"]",Xg="["+Bm+"]",Nl="data-mce-first-selected",ld="td["+Nl+"],th["+Nl+"]",f0="data-mce-last-selected",ul="td["+f0+"],th["+f0+"]",NT=Xg,fd={selected:Bm,selectedSelector:Cw,firstSelected:Nl,firstSelectedSelector:ld,lastSelected:f0,lastSelectedSelector:ul},$l=function(u){return{element:u,mergable:W.none(),unmergable:W.none(),selection:[u]}},iv=function(u,l,d){return{element:d,mergable:ww(l,u,fd),unmergable:PT(u),selection:tc(u)}},vd=function(u,l,d){return{element:u,clipboard:l,generators:d}},Sw=function(u,l,d,h){return{selection:tc(u),clipboard:d,generators:h}},po=function(u){return _a(u).bind(function(l){return io(l,fd.firstSelectedSelector)}).fold(Ct(u),function(l){return l[0]})},uv=function(u){return function(l,d){var h=Sr(l),y=h==="col"||h==="colgroup"?po(l):l;return Wa(y,u,d)}},dd=uv("th,td,caption"),gs=uv("th,td"),fi=function(u){return tc(u)},$T=function(u,l){var d=gs(u),h=d.bind(function(y){return _a(y)}).map(function(y){return Uu(y)});return ss(d,h,function(y,x){return Un(x,function(A){return D(Rc(A.dom.cells),function(P){return Rs(P,l)==="1"||Qn(P,y)})})}).getOr([])},zT=function(u){return _a(u[0]).map(function(l){var d=xf(l,NT);return li(d),[d]})},IT=function(u,l){return ut(l,function(d){return u.selection.serializer.serialize(d.dom,{})}).join("")},xw=function(u){return ut(u,function(l){return l.dom.innerText}).join("")},_c=function(u,l,d){u.on("BeforeGetContent",function(h){var y=function(x){h.preventDefault(),zT(x).each(function(A){h.content=h.format==="text"?xw(A):IT(u,A)})};h.selection===!0&&kp(l.get(),Ht,y,Ht)}),u.on("BeforeSetContent",function(h){if(h.selection===!0&&h.paste===!0){var y=fi(l);jt(y).each(function(x){_a(x).each(function(A){var P=Un(l0(h.content),function(Qe){return Sr(Qe)!=="meta"}),j=Ia("table");if(P.length===1&&j(P[0])){h.preventDefault();var Y=Xe.fromDom(u.getDoc()),le=ms(Y),Me=vd(x,P[0],le);d.pasteCells(A,Me).each(function(){u.focus()})}})})}})},$p=Rl.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Mm=an({},$p),FT=function(u,l){return u.length===0?Mm.none():u.length===1?Mm.only(0):l===0?Mm.left(0,1):l===u.length-1?Mm.right(l-1,l):l>0&&l<u.length-1?Mm.middle(l-1,l,l+1):Mm.none()},v0=function(u,l,d,h,y){var x=u.slice(0),A=FT(u,l),P=Ct(ut(x,Ct(0))),j=function(Qe){return h.singleColumnWidth(x[Qe],d)},Y=function(Qe,Ve){return y.calcLeftEdgeDeltas(x,Qe,Ve,d,h.minCellWidth(),h.isRelative)},le=function(Qe,Ve,Pe){return y.calcMiddleDeltas(x,Qe,Ve,Pe,d,h.minCellWidth(),h.isRelative)},Me=function(Qe,Ve){return y.calcRightEdgeDeltas(x,Qe,Ve,d,h.minCellWidth(),h.isRelative)};return A.fold(P,j,Y,le,Me)},Tw=function(u,l,d){for(var h=0,y=u;y<l;y++)h+=d[y]!==void 0?d[y]:0;return h},d0=function(u,l){var d=Wn.justCells(u);return ut(d,function(h){var y=Tw(h.column,h.column+h.colspan,l);return{element:h.element,width:y,colspan:h.colspan}})},m0=function(u,l){var d=Wn.justColumns(u);return ut(d,function(h,y){return{element:h.element,width:l[y],colspan:h.colspan}})},sv=function(u,l){var d=Wn.justCells(u);return ut(d,function(h){var y=Tw(h.row,h.row+h.rowspan,l);return{element:h.element,height:y,rowspan:h.rowspan}})},cv=function(u,l){return ut(u.all,function(d,h){return{element:d.element,height:l[h]}})},fa=function(u){return Ca(u,function(l,d){return l+d},0)},g0=function(u,l){return Wn.hasColumns(u)?m0(u,l):d0(u,l)},nc=function(u,l,d){var h=g0(u,l);Et(h,function(y){d.setElementWidth(y.element,y.width)})},h0=function(u,l,d,h,y){var x=Wn.fromTable(u),A=y.getCellDelta(l),P=y.getWidths(x,y),j=d===x.grid.columns-1,Y=h.clampTableDelta(P,d,A,y.minCellWidth(),j),le=v0(P,d,Y,y,h),Me=ut(le,function(Qe,Ve){return Qe+P[Ve]});nc(x,Me,y),h.resizeTable(y.adjustTableWidth,Y,j)},LT=function(u,l,d,h){var y=Wn.fromTable(u),x=BT(y,u,h),A=ut(x,function(le,Me){return d===Me?Math.max(l+le,Za()):le}),P=sv(y,A),j=cv(y,A);Et(j,function(le){nv(le.element,le.height)}),Et(P,function(le){nv(le.element,le.height)});var Y=fa(A);nv(u,Y)},HT=function(u,l,d,h,y){var x=Wn.generate(l),A=h.getWidths(x,h),P=h.pixelWidth(),j=y.calcRedestributedWidths(A,P,d.pixelDelta,h.isRelative),Y=j.newSizes,le=j.delta;nc(x,Y,h),h.adjustTableWidth(le)},Eu=function(u,l,d,h){var y=Wn.generate(l),x=h.getWidths(y,h);nc(y,x,h)},Bc=function(u){return ut(u,Ct(0))},p0=function(u,l,d,h,y){return y(u.slice(0,l)).concat(h).concat(y(u.slice(d)))},Yg=function(u){return function(l,d,h,y){if(u(h)){var x=Math.max(y,l[d]-Math.abs(h)),A=Math.abs(x-l[d]);return h>=0?A:-A}else return h}},Pm=Yg(function(u){return u<0}),b0=Yg(Mt),kw=function(){var u=function(P,j,Y,le,Me){var Qe=Pm(P,j,le,Me);return p0(P,j,Y+1,[Qe,0],Bc)},l=function(P,j,Y,le){var Me=(100+Y)/100,Qe=Math.max(le,(P[j]+Y)/Me);return ut(P,function(Ve,Pe){var lt=Pe===j?Qe:Ve/Me;return lt-Ve})},d=function(P,j,Y,le,Me,Qe){return Qe?l(P,j,le,Me):u(P,j,Y,le,Me)},h=function(P,j,Y,le,Me,Qe,Ve){return d(P,Y,le,Me,Qe,Ve)},y=function(P,j){return P(j)},x=function(P,j,Y,le,Me,Qe){if(Qe)return l(P,Y,le,Me);var Ve=Pm(P,Y,le,Me);return Bc(P.slice(0,Y)).concat([Ve])},A=function(P,j,Y,le){if(le){var Me=j+Y,Qe=Me/j,Ve=ut(P,function(Pe){return Pe/Qe});return{delta:Qe*100-100,newSizes:Ve}}else return{delta:Y,newSizes:P}};return{resizeTable:y,clampTableDelta:Pm,calcLeftEdgeDeltas:d,calcMiddleDeltas:h,calcRightEdgeDeltas:x,calcRedestributedWidths:A}},lv=function(){var u=function(A,P,j,Y,le){var Me=Y>=0?j:P,Qe=b0(A,Me,Y,le);return p0(A,P,j+1,[Qe,-Qe],Bc)},l=function(A,P,j,Y,le,Me){return u(A,j,Y,le,Me)},d=function(A,P,j){j&&A(P)},h=function(A,P,j,Y,le,Me){if(Me)return Bc(A);var Qe=Y/A.length;return ut(A,Ct(Qe))},y=function(A,P,j,Y,le){if(le){if(j>=0)return j;var Me=ee(A,function(Qe,Ve){return Qe+Ve-Y},0);return Math.max(-Me,j)}else return Pm(A,P,j,Y)},x=function(A,P,j,Y){return{delta:0,newSizes:A}};return{resizeTable:d,clampTableDelta:y,calcLeftEdgeDeltas:u,calcMiddleDeltas:l,calcRightEdgeDeltas:h,calcRedestributedWidths:x}},y0=function(u,l){var d=W.from(u.dom.documentElement).map(Xe.fromDom).getOr(u);return{parent:Ct(d),view:Ct(u),origin:Ct(aa(0,0)),isResizable:l}},w0=function(u,l,d){var h=function(){return yf(l)};return{parent:Ct(l),view:Ct(u),origin:h,isResizable:d}},zp=function(u,l,d){return{parent:Ct(l),view:Ct(u),origin:Ct(aa(0,0)),isResizable:d}},Ip={only:y0,detached:w0,body:zp},md=Rl.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ew=function(u,l,d){var h=d.substring(0,d.length-u.length),y=parseFloat(h);return h===y.toString()?l(y):md.invalid(d)},vi=function(u){return No(u,"%")?Ew("%",md.percent,u):No(u,"px")?Ew("px",md.pixels,u):md.invalid(u)},sl=an(an({},md),{from:vi}),Ro=function(u,l){return ut(u,function(d){var h=sl.from(d);return h.fold(function(){return d},function(y){var x=y/l*100;return x+"%"},function(y){return y+"%"})})},Ou=function(u,l,d){var h=d/l;return ut(u,function(y){var x=sl.from(y);return x.fold(function(){return y},function(A){return A*h+"px"},function(A){return A/100*d+"px"})})},Ef=function(u,l){var d=u.fold(function(){return Ct("")},function(h){var y=h/l;return Ct(y+"px")},function(){var h=100/l;return Ct(h+"%")});return ia(l,d)},zl=function(u,l,d){return u.fold(function(){return l},function(h){return Ou(l,d,h)},function(h){return Ro(l,d)})},C0=function(u,l,d){var h=sl.from(d),y=tn(u,function(x){return x==="0px"})?Ef(h,u.length):zl(h,u,l);return VT(y)},hs=function(u,l){return u.length===0?l:Ca(u,function(d,h){return sl.from(h).fold(Ct(0),_n,_n)+d},0)},Nm=function(u,l){var d=Math.floor(u);return{value:d+l,remainder:u-d}},Ow=function(u,l){return sl.from(u).fold(Ct(u),function(d){return d+l+"px"},function(d){return d+l+"%"})},VT=function(u){if(u.length===0)return u;var l=Ca(u,function(h,y){var x=sl.from(y).fold(function(){return{value:y,remainder:0}},function(A){return Nm(A,"px")},function(A){return{value:A+"%",remainder:0}});return{output:[x.value].concat(h.output),remainder:h.remainder+x.remainder}},{output:[],remainder:0}),d=l.output;return d.slice(0,d.length-1).concat([Ow(d[d.length-1],Math.round(l.remainder))])},UT=sl.from,WT=function(u,l,d){Et(l,function(h){var y=u.slice(h.column,h.colspan+h.column),x=hs(y,lf());Ja(h.element,"width",x+d)})},jT=function(u,l,d){Et(l,function(h,y){var x=hs([u[y]],lf());Ja(h.element,"width",x+d)})},S0=function(u,l,d,h){Et(d,function(y){var x=u.slice(y.row,y.rowspan+y.row),A=hs(x,Za());Ja(y.element,"height",A+h)}),Et(l,function(y,x){Ja(y.element,"height",u[x])})},Fp=function(u){return UT(u).fold(Ct("px"),Ct("px"),Ct("%"))},Is=function(u,l,d){var h=Wn.fromTable(u),y=h.all,x=Wn.justCells(h),A=Wn.justColumns(h);l.each(function(P){var j=Fp(P),Y=kc(u),le=Wg(h,u),Me=C0(le,Y,P);Wn.hasColumns(h)?jT(Me,A,j):WT(Me,x,j),Ja(u,"width",P)}),d.each(function(P){var j=Fp(P),Y=ku(u),le=u0(h,u,Zb),Me=C0(le,Y,P);S0(Me,y,x,j),Ja(u,"height",P)})},Aw=r0,fv=_T,Jg=qa,cl=function(u){var l=Wn.fromTable(u);return l.grid},rc=function(u){var l=[],d=function(x){if(x===void 0)throw new Error("Event bind error: undefined handler");l.push(x)},h=function(x){l=Un(l,function(A){return A!==x})},y=function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];var P={};Et(u,function(j,Y){P[j]=x[Y]}),Et(l,function(j){j(P)})};return{bind:d,unbind:h,trigger:y}},bo=function(u){var l=Ks(u,function(h){return{bind:h.bind,unbind:h.unbind}}),d=Ks(u,function(h){return h.trigger});return{registry:l,trigger:d}},Fs=function(u,l){var d=null,h=function(){Ar(d)||(clearTimeout(d),d=null)},y=function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];h(),d=setTimeout(function(){d=null,u.apply(null,x)},l)};return{cancel:h,throttle:y}},vv=function(u){return u.slice(0).sort()},x0=function(u,l){throw new Error("All required keys ("+vv(u).join(", ")+") were not specified. Specified keys were: "+vv(l).join(", ")+".")},Pn=function(u){throw new Error("Unsupported keys for object: "+vv(u).join(", "))},Zg=function(u,l){if(!ar(l))throw new Error("The "+u+" fields must be an array. Was: "+l+".");Et(l,function(d){if(!Xt(d))throw new Error("The value "+d+" in the "+u+" fields was not a string.")})},GT=function(u,l){throw new Error("All values need to be of type: "+l+". Keys ("+vv(u).join(", ")+") were not.")},Lp=function(u){var l=vv(u),d=nt(l,function(h,y){return y<l.length-1&&h===l[y+1]});d.each(function(h){throw new Error("The field: "+h+" occurs more than once in the combined fields: ["+l.join(", ")+"].")})},Hp=function(u,l){return qT(u,l,{validate:or,label:"function"})},qT=function(u,l,d){if(l.length===0)throw new Error("You must specify at least one required field.");return Zg("required",l),Lp(l),function(h){var y=ii(h),x=tn(l,function(P){return qn(y,P)});x||x0(l,y),u(l,y);var A=Un(l,function(P){return!d.validate(h[P],P)});return A.length>0&&GT(A,d.label),h}},_o=function(u,l){var d=Un(l,function(h){return!qn(u,h)});d.length>0&&Pn(d)},du=function(u){return Hp(_o,u)},Ea=du(["compare","extract","mutate","sink"]),Dw=du(["element","start","stop","destroy"]),T0=du(["forceDrop","drop","move","delayDrop"]),gd=function(){var u=W.none(),l=function(){u=W.none()},d=function(x,A){var P=u.map(function(j){return x.compare(j,A)});return u=W.some(A),P},h=function(x,A){var P=A.extract(x);P.each(function(j){var Y=d(A,j);Y.each(function(le){y.trigger.move(le)})})},y=bo({move:rc(["info"])});return{onEvent:h,reset:l,events:y.registry}},Rw=function(){var u=bo({move:rc(["info"])});return{onEvent:Ht,reset:Ht,events:u.registry}},hd=function(){var u=Rw(),l=gd(),d=u,h=function(){d.reset(),d=l},y=function(){d.reset(),d=u},x=function(P,j){d.onEvent(P,j)},A=function(){return d===l};return{on:h,off:y,isOn:A,onEvent:x,events:l.events}},$m=function(u,l,d){var h=!1,y=bo({start:rc([]),stop:rc([])}),x=hd(),A=function(){Ve.stop(),x.isOn()&&(x.off(),y.trigger.stop())},P=Fs(A,200),j=function(lt){Ve.start(lt),x.on(),y.trigger.start()},Y=function(lt){P.cancel(),x.onEvent(lt,l)};x.events.move.bind(function(lt){l.mutate(u,lt.info)});var le=function(){h=!0},Me=function(){h=!1},Qe=function(lt){return function(){for(var ct=[],qt=0;qt<arguments.length;qt++)ct[qt]=arguments[qt];h&&lt.apply(null,ct)}},Ve=l.sink(T0({forceDrop:A,drop:Qe(A),move:Qe(Y),delayDrop:Qe(P.throttle)}),d),Pe=function(){Ve.destroy()};return{element:Ve.element,go:j,on:le,off:Me,destroy:Pe,events:y.registry}},_w=function(u,l,d,h,y,x,A){return{target:u,x:l,y:d,stop:h,prevent:y,kill:x,raw:A}},Il=function(u){var l=Xe.fromDom(on(u).getOr(u.target)),d=function(){return u.stopPropagation()},h=function(){return u.preventDefault()},y=at(h,d);return _w(l,u.clientX,u.clientY,d,h,y,u)},Au=function(u,l){return function(d){u(d)&&l(Il(d))}},KT=function(u,l,d,h,y){var x=Au(d,h);return u.dom.addEventListener(l,x,y),{unbind:Lt(pd,u,l,x,y)}},XT=function(u,l,d,h){return KT(u,l,d,h,!1)},pd=function(u,l,d,h){u.dom.removeEventListener(l,d,h)},k0=Mt,dv=function(u,l,d){return XT(u,l,k0,d)},bd=Il,E0=function(u,l){var d=Rs(u,l);return d===void 0||d===""?[]:d.split(" ")},YT=function(u,l,d){var h=E0(u,l),y=h.concat([d]);return zo(u,l,y.join(" ")),!0},JT=function(u,l,d){var h=Un(E0(u,l),function(y){return y!==d});return h.length>0?zo(u,l,h.join(" ")):ya(u,l),!1},yd=function(u){return u.dom.classList!==void 0},wd=function(u){return E0(u,"class")},Vp=function(u,l){return YT(u,"class",l)},Yn=function(u,l){return JT(u,"class",l)},oa=function(u,l){yd(u)?u.dom.classList.add(l):Vp(u,l)},Cd=function(u){var l=yd(u)?u.dom.classList:wd(u);l.length===0&&ya(u,"class")},mv=function(u,l){if(yd(u)){var d=u.dom.classList;d.remove(l)}else Yn(u,l);Cd(u)},Zr=function(u,l){return yd(u)&&u.dom.classList.contains(l)},Up=function(u){var l=u.replace(/\./g,"-"),d=function(h){return l+"-"+h};return{resolve:d}},Wp=Up("ephox-dragster"),di=Wp.resolve,gv=function(u){var l=an({layerClass:di("blocker")},u),d=Xe.fromTag("div");zo(d,"role","presentation"),Ol(d,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),oa(d,di("blocker")),oa(d,l.layerClass);var h=Ct(d),y=function(){ju(d)};return{element:h,destroy:y}},jp=function(u,l){return aa(l.left-u.left,l.top-u.top)},ZT=function(u){return W.some(aa(u.x,u.y))},QT=function(u,l){u.mutate(l.left,l.top)},Gp=function(u,l){var d=gv(l),h=dv(d.element(),"mousedown",u.forceDrop),y=dv(d.element(),"mouseup",u.drop),x=dv(d.element(),"mousemove",u.move),A=dv(d.element(),"mouseout",u.delayDrop),P=function(){d.destroy(),y.unbind(),x.unbind(),A.unbind(),h.unbind()},j=function(le){Ga(le,d.element())},Y=function(){ju(d.element())};return Dw({element:d.element,start:j,stop:Y,destroy:P})},zm=Ea({compare:jp,extract:ZT,sink:Gp,mutate:QT}),O0=function(u,l){l===void 0&&(l={});var d=l.mode!==void 0?l.mode:zm;return $m(u,d,l)},qp=function(u){return Wa(u,"[contenteditable]")},Im=function(u,l){return l===void 0&&(l=!1),!mn().browser.isIE()&&Kn(u)?u.dom.isContentEditable:qp(u).fold(Ct(l),function(d){return Kp(d)==="true"})},Kp=function(u){return u.dom.contentEditable},Xu=Up("ephox-snooker"),Sd=Xu.resolve,Fl=function(){var u=bo({drag:rc(["xDelta","yDelta"])}),l=function(d,h){u.trigger.drag(d,h)};return{mutate:l,events:u.registry}},Yu=function(){var u=bo({drag:rc(["xDelta","yDelta","target"])}),l=W.none(),d=Fl();d.events.drag.bind(function(x){l.each(function(A){u.trigger.drag(x.xDelta,x.yDelta,A)})});var h=function(x){l=W.some(x)},y=function(){return l};return{assign:h,get:y,mutate:d.mutate,events:u.registry}},Bw=function(u,l,d,h,y){var x=Xe.fromTag("div");return Ol(x,{position:"absolute",left:l-h/2+"px",top:d+"px",height:y+"px",width:h+"px"}),go(x,{"data-column":u,role:"presentation"}),x},Bi=function(u,l,d,h,y){var x=Xe.fromTag("div");return Ol(x,{position:"absolute",left:l+"px",top:d-y/2+"px",height:y+"px",width:h+"px"}),go(x,{"data-row":u,role:"presentation"}),x},A0=Sd("resizer-bar"),Of=Sd("resizer-rows"),D0=Sd("resizer-cols"),R0=7,Mw=function(u,l){return Fr(u.all,function(d,h){return l(d.element)?[h]:[]})},Xp=function(u,l){var d=[];return ia(u.grid.columns,function(h){var y=Wn.getColumnAt(u,h).map(function(x){return x.element});y.forall(l)&&d.push(h)}),Un(d,function(h){var y=Wn.filterItems(u,function(x){return x.column===h});return tn(y,function(x){return l(x.element)})})},Fm=function(u){var l=is(u.parent(),"."+A0);Et(l,ju)},_0=function(u,l,d){var h=u.origin();Et(l,function(y){y.each(function(x){var A=d(h,x);oa(A,A0),Ga(u.parent(),A)})})},ek=function(u,l,d,h){_0(u,l,function(y,x){var A=Bw(x.col,x.x-y.left,d.top-y.top,R0,h);return oa(A,D0),A})},tk=function(u,l,d,h){_0(u,l,function(y,x){var A=Bi(x.row,d.left-y.left,x.y-y.top,h,R0);return oa(A,Of),A})},Ji=function(u,l,d,h,y){var x=yf(d),A=l.isResizable,P=h.length>0?Zb.positions(h,d):[],j=P.length>0?Mw(u,A):[],Y=Un(P,function(Ve,Pe){return D(j,function(lt){return Pe===lt})});tk(l,Y,x,Xi(d));var le=y.length>0?xm.positions(y,d):[],Me=le.length>0?Xp(u,A):[],Qe=Un(le,function(Ve,Pe){return D(Me,function(lt){return Pe===lt})});ek(l,Qe,x,ol(d))},Ho=function(u,l){if(Fm(u),u.isResizable(l)){var d=Wn.fromTable(l),h=tv(d),y=rd(d);Ji(d,u,l,h,y)}},mu=function(u,l){var d=is(u.parent(),"."+A0);Et(d,l)},mi=function(u){mu(u,function(l){Ja(l,"display","none")})},Ju=function(u){mu(u,function(l){Ja(l,"display","block")})},Mi=function(u){return Zr(u,Of)},Yp=function(u){return Zr(u,D0)},hv=Sd("resizer-bar-dragging"),pv=function(u){var l=Yu(),d=O0(l,{}),h=W.none(),y=function(Pe,lt){return W.from(Rs(Pe,lt))};l.events.drag.bind(function(Pe){y(Pe.target,"data-row").each(function(lt){var ct=cf(Pe.target,"top");Ja(Pe.target,"top",ct+Pe.yDelta+"px")}),y(Pe.target,"data-column").each(function(lt){var ct=cf(Pe.target,"left");Ja(Pe.target,"left",ct+Pe.xDelta+"px")})});var x=function(Pe,lt){var ct=cf(Pe,lt),qt=Js(Pe,"data-initial-"+lt,0);return ct-qt};d.events.stop.bind(function(){l.get().each(function(Pe){h.each(function(lt){y(Pe,"data-row").each(function(ct){var qt=x(Pe,"top");ya(Pe,"data-initial-top"),Ve.trigger.adjustHeight(lt,qt,parseInt(ct,10))}),y(Pe,"data-column").each(function(ct){var qt=x(Pe,"left");ya(Pe,"data-initial-left"),Ve.trigger.adjustWidth(lt,qt,parseInt(ct,10))}),Ho(u,lt)})})});var A=function(Pe,lt){Ve.trigger.startAdjust(),l.assign(Pe),zo(Pe,"data-initial-"+lt,cf(Pe,lt)),oa(Pe,hv),Ja(Pe,"opacity","0.2"),d.go(u.parent())},P=dv(u.parent(),"mousedown",function(Pe){Mi(Pe.target)&&A(Pe.target,"top"),Yp(Pe.target)&&A(Pe.target,"left")}),j=function(Pe){return Qn(Pe,u.view())},Y=function(Pe){return Wa(Pe,"table",j).filter(Im)},le=dv(u.view(),"mouseover",function(Pe){Y(Pe.target).fold(function(){Kn(Pe.target)&&Fm(u)},function(lt){h=W.some(lt),Ho(u,lt)})}),Me=function(){P.unbind(),le.unbind(),d.destroy(),Fm(u)},Qe=function(Pe){Ho(u,Pe)},Ve=bo({adjustHeight:rc(["table","delta","row"]),adjustWidth:rc(["table","delta","column"]),startAdjust:rc([])});return{destroy:Me,refresh:Qe,on:d.on,off:d.off,hideBars:Lt(mi,u),showBars:Lt(Ju,u),events:Ve.registry}},B0=function(u,l,d){var h=Zb,y=xm,x=pv(u),A=bo({beforeResize:rc(["table","type"]),afterResize:rc(["table","type"]),startDrag:rc([])});return x.events.adjustHeight.bind(function(P){var j=P.table;A.trigger.beforeResize(j,"row");var Y=h.delta(P.delta,j);LT(j,Y,P.row,h),A.trigger.afterResize(j,"row")}),x.events.startAdjust.bind(function(P){A.trigger.startDrag()}),x.events.adjustWidth.bind(function(P){var j=P.table;A.trigger.beforeResize(j,"col");var Y=y.delta(P.delta,j),le=d(j);h0(j,Y,P.column,l,le),A.trigger.afterResize(j,"col")}),{on:x.on,off:x.off,hideBars:x.hideBars,showBars:x.showBars,destroy:x.destroy,events:A.registry}},Pw={create:B0},Jp=function(u,l){return u.fire("newrow",{node:l})},Af=function(u,l){return u.fire("newcell",{node:l})},bv=function(u,l,d,h,y){u.fire("ObjectResizeStart",{target:l,width:d,height:h,origin:y})},Nw=function(u,l,d,h,y){u.fire("ObjectResized",{target:l,width:d,height:h,origin:y})},nk=function(u,l,d,h,y){u.fire("TableSelectionChange",{cells:l,start:d,finish:h,otherCells:y})},Zp=function(u){u.fire("TableSelectionClear")},Du=function(u,l,d){u.fire("TableModified",an(an({},d),{table:l}))},Qp={structure:!1,style:!0},Vo={structure:!0,style:!1},$w={structure:!0,style:!0},rk="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",M0={"border-collapse":"collapse",width:"100%"},zw=ia(5,function(u){var l=u+1+"px";return{title:l,value:l}}),Iw=ut(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(u){return{title:u,value:u.toLowerCase()}}),vt=function(u){var l;if(Hm(u)){var d=u.dom,h=(l=d.getParent(u.selection.getStart(),d.isBlock))!==null&&l!==void 0?l:u.getBody(),y=Br(Xe.fromDom(h));return an(an({},M0),{width:y+"px"})}else return wv(u)?ou(M0,function(x,A){return A!=="width"}):M0},ak={border:"1"},so="preservetable",P0=function(u){return u.getParam("table_sizing_mode","auto")},xd=function(u){return u.getParam("table_responsive_width")},e1=function(u){return u.getParam("table_border_widths",zw,"array")},ps=function(u){return u.getParam("table_border_styles",Iw,"array")},Lm=function(u){return u.getParam("table_default_attributes",ak,"object")},Qg=function(u){return u.getParam("table_default_styles",vt(u),"object")},t1=function(u){return u.getParam("table_resize_bars",!0,"boolean")},Ll=function(u){return u.getParam("table_tab_navigation",!0,"boolean")},eh=function(u){return u.getParam("table_cell_advtab",!0,"boolean")},n1=function(u){return u.getParam("table_row_advtab",!0,"boolean")},bs=function(u){return u.getParam("table_advtab",!0,"boolean")},Mc=function(u){return u.getParam("table_appearance_options",!0,"boolean")},Df=function(u){return u.getParam("table_grid",!0,"boolean")},Uo=function(u){return u.getParam("table_style_by_css",!1,"boolean")},N0=function(u){return u.getParam("table_cell_class_list",[],"array")},Re=function(u){return u.getParam("table_row_class_list",[],"array")},yv=function(u){return u.getParam("table_class_list",[],"array")},th=function(u){return P0(u)==="relative"||xd(u)===!0},Hm=function(u){return P0(u)==="fixed"||xd(u)===!1},wv=function(u){return P0(u)==="responsive"},ll=function(u){return u.getParam("table_toolbar",rk)},$0=function(u){return u.getParam("table_use_colgroups",!1,"boolean")},z0=function(u){var l="section",d=u.getParam("table_header_type",l,"string"),h=["section","cells","sectionCells","auto"];return qn(h,d)?d:l},r1=function(u){var l=["preservetable","resizetable"],d=u.getParam("table_column_resizing",so,"string");return nt(l,function(h){return h===d}).getOr(so)},a1=function(u){return r1(u)==="preservetable"},Fw=function(u){return r1(u)==="resizetable"},I0=function(u){var l=u.getParam("table_clone_elements");return Xt(l)?W.some(l.split(/[ ,]/)):Array.isArray(l)?W.some(l):W.none()},F0=function(u){var l=u.getParam("object_resizing",!0);return Xt(l)?l==="table":l},L0=function(u){return u.getParam("table_background_color_map",[],"array")},H0=function(u){return u.getParam("table_border_color_map",[],"array")},V0=function(u,l){return th(u)?Sf.percentageSize(l):Hm(u)?Sf.pixelSize(l):Sf.getTableSize(l)},Td=function(u){ya(u,"width")},ok=function(u){var l=Om(u);Is(u,W.some(l),W.none()),Td(u)},Lw=function(u){var l=RT(u);Is(u,W.some(l),W.none()),Td(u)},o1=function(u){Oi(u,"width");var l=tl(u),d=l.length>0?l:df(u);Et(d,function(h){Oi(h,"width"),Td(h)}),Td(u)},nh=ok,i1=Lw,u1=o1,s1=function(u){var l=Wn.fromTable(u);Wn.hasColumns(l)||Et(df(u),function(d){var h=Qc(d,"width");Ja(d,"width",h),ya(d,"width")})},kd=function(){var u=Xe.fromTag("div");return Ol(u,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ga(gn(),u),u},Hw=function(u,l){return u.inline?Ip.body(Ku(u),kd(),l):Ip.only(Xe.fromDom(u.getDoc()),l)},Qa=function(u,l){u.inline&&ju(l.parent())},c1="bar-",co=function(u){return Rs(u,"data-mce-resize")!=="false"},l1=function(u){var l=W.none(),d=W.none(),h=W.none(),y,x,A=function(Pe){return Pe.nodeName==="TABLE"},P=function(){return d},j=function(){return h.getOr(Ip.only(Xe.fromDom(u.getBody()),co))},Y=function(Pe){return V0(u,Pe)},le=function(){return a1(u)?lv():kw()},Me=function(Pe){return cl(Pe).columns},Qe=function(Pe,lt,ct){var qt=No(lt,"e");if(x===""&&nh(Pe),ct!==y&&x!==""){Ja(Pe,"width",x);var xr=le(),en=Y(Pe),yn=a1(u)||qt?Me(Pe)-1:0;h0(Pe,ct-y,yn,xr,en)}else if(MT(x)){var sr=parseFloat(x.replace("%","")),Gn=ct*sr/y;Ja(Pe,"width",Gn+"%")}Kg(x)&&s1(Pe)},Ve=function(){d.each(function(Pe){Pe.destroy()}),h.each(function(Pe){Qa(u,Pe)})};return u.on("init",function(){var Pe=Hw(u,co);if(h=W.some(Pe),F0(u)&&t1(u)){var lt=le(),ct=Pw.create(Pe,lt,Y);ct.on(),ct.events.startDrag.bind(function(qt){l=W.some(u.selection.getRng())}),ct.events.beforeResize.bind(function(qt){var xr=qt.table.dom;bv(u,xr,il(xr),kf(xr),c1+qt.type)}),ct.events.afterResize.bind(function(qt){var xr=qt.table,en=xr.dom;li(xr),l.each(function(yn){u.selection.setRng(yn),u.focus()}),Nw(u,en,il(en),kf(en),c1+qt.type),u.undoManager.add()}),d=W.some(ct)}}),u.on("ObjectResizeStart",function(Pe){var lt=Pe.target;if(A(lt)){var ct=Xe.fromDom(lt);Et(u.dom.select(".mce-clonedresizable"),function(qt){u.dom.addClass(qt,"mce-"+r1(u)+"-columns")}),!fv(ct)&&Hm(u)?i1(ct):!Aw(ct)&&th(u)&&nh(ct),Jg(ct)&&mo(Pe.origin,c1)&&nh(ct),y=Pe.width,x=wv(u)?"":_m(u,lt).getOr("")}}),u.on("ObjectResized",function(Pe){var lt=Pe.target;if(A(lt)){var ct=Xe.fromDom(lt),qt=Pe.origin;mo(qt,"corner-")&&Qe(ct,qt,Pe.width),li(ct),Du(u,ct.dom,Qp)}}),u.on("SwitchMode",function(){P().each(function(Pe){u.mode.isReadOnly()?Pe.hideBars():Pe.showBars()})}),{lazyResize:P,lazyWire:j,destroy:Ve}},Vm=function(u,l){return{element:u,offset:l}},f1=function(u,l,d){return u.property().isText(l)&&u.property().getText(l).trim().length===0||u.property().isComment(l)?d(l).bind(function(h){return f1(u,h,d).orThunk(function(){return W.some(h)})}):W.none()},Um=function(u,l){if(u.property().isText(l))return u.property().getText(l).length;var d=u.property().children(l);return d.length},Vw=function(u,l){var d=f1(u,l,u.query().prevSibling).getOr(l);if(u.property().isText(d))return Vm(d,Um(u,d));var h=u.property().children(d);return h.length>0?Vw(u,h[h.length-1]):Vm(d,Um(u,d))},Uw=Vw,ik=$g(),uk=function(u){return Uw(ik,u)},Ww=function(u,l){var d=Io(u,"colspan");if(d===1){var h=km(u);h.each(function(y){var x=y.value/2;Em(u,x,y.unit),Em(l,x,y.unit)})}},v1=Ia("th"),d1=function(u){return tn(u,function(l){return v1(l.element)})},sk=function(u,l){return u&&l?"sectionCells":u?"section":"cells"},jw=function(u){var l=u.section==="thead",d=Zc(U0(u.cells),"th");return l||d?{type:"header",subType:sk(l,d)}:u.section==="tfoot"?{type:"footer"}:{type:"body"}},U0=function(u){var l=Un(u,function(d){return v1(d.element)});return l.length===0?W.some("td"):l.length===u.length?W.some("th"):W.none()},Gw=function(u){var l=ut(u,function(x){return jw(x).type}),d=qn(l,"header"),h=qn(l,"footer");if(!d&&!h)return W.some("body");var y=qn(l,"body");return d&&!y&&!h?W.some("header"):!d&&!y&&h?W.some("footer"):W.none()},ck=function(u){return jr(u.all,function(l){var d=jw(l);return d.type==="header"?W.from(d.subType):W.none()})},Pi=function(u,l,d){return Eo(d(u.element,l),!0,u.isLocked)},Ed=function(u,l){return u.section!==l?Hu(u.element,u.cells,l,u.isNew):u},W0=function(){return{transformRow:Ed,transformCell:function(u,l,d){var h=d(u.element,l),y=Sr(h)!=="td"?xT(h,"td"):h;return Eo(y,u.isNew,u.isLocked)}}},qw=function(){return{transformRow:Ed,transformCell:Pi}},Wm=function(){return{transformRow:function(u,l){var d=l==="thead"?"tbody":l;return Ed(u,d)},transformCell:Pi}},Kw=function(){return{transformRow:_n,transformCell:Pi}},lk=function(u,l){var d=Wn.fromTable(u),h=ck(d).getOr(l);switch(h){case"section":return W0();case"sectionCells":return qw();case"cells":return Wm()}},rh={getTableSectionType:lk,section:W0,sectionCells:qw,cells:Wm,fallback:Kw},ah=function(u,l,d,h){d===h?ya(u,l):zo(u,l,d)},Cv=function(u,l,d){Jr(Mn(u,l)).fold(function(){return Di(u,d)},function(h){return la(h,d)})},m1=function(u,l){var d=pn(u,l).getOrThunk(function(){var h=Xe.fromTag(l,Xs(u).dom);return l==="thead"?Cv(u,"caption,colgroup",h):l==="colgroup"?Cv(u,"caption",h):Ga(u,h),h});return Pg(d),d},g1=function(u,l){var d=[],h=[],y=function(Ve){return ut(Ve,function(Pe){Pe.isNew&&d.push(Pe.element);var lt=Pe.element;return Pg(lt),Et(Pe.cells,function(ct){ct.isNew&&h.push(ct.element),ah(ct.element,"colspan",ct.colspan,1),ah(ct.element,"rowspan",ct.rowspan,1),Ga(lt,ct.element)}),lt})},x=function(Ve){return Fr(Ve,function(Pe){return ut(Pe.cells,function(lt){return ah(lt.element,"span",lt.colspan,1),lt.element})})},A=function(Ve,Pe){var lt=m1(u,Pe),ct=Pe==="colgroup"?x:y,qt=ct(Ve);nl(lt,qt)},P=function(Ve){pn(u,Ve).each(ju)},j=function(Ve,Pe){Ve.length>0?A(Ve,Pe):P(Pe)},Y=[],le=[],Me=[],Qe=[];return Et(l,function(Ve){switch(Ve.section){case"thead":Y.push(Ve);break;case"tbody":le.push(Ve);break;case"tfoot":Me.push(Ve);break;case"colgroup":Qe.push(Ve);break}}),j(Qe,"colgroup"),j(Y,"thead"),j(le,"tbody"),j(Me,"tfoot"),{newRows:d,newCells:h}},h1=function(u){return ut(u,function(l){var d=Tc(l.element);return Et(l.cells,function(h){var y=zr(h.element);ah(y,"colspan",h.colspan,1),ah(y,"rowspan",h.rowspan,1),Ga(d,y)}),d})},fk=function(u,l){return ut(u,function(d){return xu(d,l)})},Rf=function(u,l){return u[l]},p1=function(u,l){if(u.length===0)return 0;var d=u[0],h=kt(u,function(y){return!l(d.element,y.element)});return h.getOr(u.length)},vk=function(u,l,d,h){var y=Rf(u,l),x=y.section==="colgroup",A=p1(y.cells.slice(d),h),P=x?1:p1(fk(u.slice(l),d),h);return{colspan:A,rowspan:P}},Sv=function(u,l){var d=ut(u,function(y){return ut(y.cells,Rn)}),h=function(y,x,A,P){for(var j=y;j<y+A;j++)for(var Y=x;Y<x+P;Y++)d[j][Y]=!0};return ut(u,function(y,x){var A=Fr(y.cells,function(P,j){if(d[x][j]===!1){var Y=vk(u,x,j,l);return h(x,j,Y.rowspan,Y.colspan),[zn(P.element,Y.rowspan,Y.colspan,P.isNew)]}else return[]});return os(y.element,A,y.section,y.isNew)})},xv=function(u,l,d){var h=[];Et(u.colgroups,function(le){for(var Me=[],Qe=0;Qe<u.grid.columns;Qe++){var Ve=Wn.getColumnAt(u,Qe).map(function(Pe){return Eo(Pe.element,d,!1)}).getOrThunk(function(){return Eo(l.colGap(),!0,!1)});Me.push(Ve)}h.push(Hu(le.element,Me,"colgroup",d))});for(var y=0;y<u.grid.rows;y++){for(var x=[],A=0;A<u.grid.columns;A++){var P=Wn.getAt(u,y,A).map(function(le){return Eo(le.element,d,le.isLocked)}).getOrThunk(function(){return Eo(l.gap(),!0,!1)});x.push(P)}var j=u.all[y],Y=Hu(j.element,x,j.section,d);h.push(Y)}return h},Xw=function(u,l){return xv(u,l,!1)},oh=function(u){return Sv(u,Qn)},j0=function(u,l){return jr(u.all,function(d){return nt(d.cells,function(h){return Qn(l,h.element)})})},b1=function(u,l,d){var h=ut(l.selection,function(x){return el(x).bind(function(A){return j0(u,A)}).filter(d)}),y=Oo(h);return na(y.length>0,y)},gi=function(u,l,d,h,y){return function(x,A,P,j,Y){var le=Wn.fromTable(A),Me=W.from(Y==null?void 0:Y.section).getOrThunk(rh.fallback),Qe=l(le,P).map(function(Ve){var Pe=Xw(le,j),lt=u(Pe,Ve,Qn,y(j),Me),ct=Ai(lt.grid),qt=oh(lt.grid);return{info:Ve,grid:qt,cursor:lt.cursor,lockedColumns:ct}});return Qe.bind(function(Ve){var Pe=g1(A,Ve.grid),lt=W.from(Y==null?void 0:Y.sizing).getOrThunk(function(){return Sf.getTableSize(A)}),ct=W.from(Y==null?void 0:Y.resize).getOrThunk(lv);return d(A,Ve.grid,Ve.info,{sizing:lt,resize:ct,section:Me}),h(A),Ho(x,A),ya(A,ho),Ve.lockedColumns.length>0&&zo(A,ho,Ve.lockedColumns.join(",")),W.some({cursor:Ve.cursor,newRows:Pe.newRows,newCells:Pe.newCells})})}},dk=function(u,l){return el(l.element).bind(function(d){return j0(u,d).map(function(h){var y=an(an({},h),{generators:l.generators,clipboard:l.clipboard});return y})})},y1=function(u,l){return b1(u,l,Mt).map(function(d){return{cells:d,generators:l.generators,clipboard:l.clipboard}})},Yw=function(u,l){return l.mergable},mk=function(u,l){return l.unmergable},Pc=function(u,l){return b1(u,l,Mt)},_f=function(u,l){return b1(u,l,function(d){return!d.isLocked})},gk=function(u,l){return j0(u,l).exists(function(d){return!d.isLocked})},G0=function(u,l){return tn(l,function(d){return gk(u,d)})},q0=function(u,l){return Yw(u,l).filter(function(d){return G0(u,d.cells)})},Od=function(u,l){return mk(u,l).filter(function(d){return G0(u,d)})},Jw=function(u,l,d,h){var y=oo(u).rows;if(y.length===0)return u;for(var x=l.startRow;x<=l.finishRow;x++)for(var A=l.startCol;A<=l.finishCol;A++){var P=y[x],j=xu(P,A).isLocked;Al(P,A,Eo(h(),!1,j))}return u},jm=function(u,l,d,h){for(var y=oo(u).rows,x=!0,A=0;A<y.length;A++)for(var P=0;P<Bs(y[0]);P++){var j=y[A],Y=xu(j,P),le=Y.element,Me=d(le,l);Me===!0&&x===!1?Al(j,P,Eo(h(),!0,Y.isLocked)):Me===!0&&(x=!1)}return u},hk=function(u,l){return ee(u,function(d,h){return D(d,function(y){return l(y.element,h.element)})?d:d.concat([h])},[])},pk=function(u,l,d,h){return l>0&&l<u[0].cells.length&&Et(u,function(y){var x=y.cells[l-1],A=y.cells[l],P=d(A.element,x.element);P&&Al(y,l,Eo(h(),!0,A.isLocked))}),u},bk=function(u,l,d,h){var y=oo(u).rows;if(l>0&&l<y.length){var x=y[l-1].cells,A=hk(x,d);Et(A,function(P){for(var j=W.none(),Y=l;Y<y.length;Y++)for(var le=function(Qe){var Ve=y[Y],Pe=xu(Ve,Qe),lt=d(Pe.element,P.element);lt&&(j.isNone()&&(j=W.some(h())),j.each(function(ct){Al(Ve,Qe,Eo(ct,!0,Pe.isLocked))}))},Me=0;Me<Bs(y[0]);Me++)le(Me)})}return u},Gm=function(u){var l=function(Me){return Gm(u)},d=function(Me){return Gm(u)},h=function(Me){return Gm(Me(u))},y=function(Me){return Gm(u)},x=function(Me){Me(u)},A=function(Me){return Me(u)},P=function(Me,Qe){return Qe(u)},j=function(Me){return Me(u)},Y=function(Me){return Me(u)},le=function(){return W.some(u)};return{isValue:Mt,isError:Rn,getOr:Ct(u),getOrThunk:Ct(u),getOrDie:Ct(u),or:l,orThunk:d,fold:P,map:h,mapError:y,each:x,bind:A,exists:j,forall:Y,toOptional:le}},Ad=function(u){var l=function(Y){return Y()},d=function(){return Vr(String(u))()},h=_n,y=function(Y){return Y()},x=function(Y){return Ad(u)},A=function(Y){return Ad(Y(u))},P=function(Y){return Ad(u)},j=function(Y,le){return Y(u)};return{isValue:Rn,isError:Mt,getOr:_n,getOrThunk:l,getOrDie:d,or:h,orThunk:y,fold:j,map:x,mapError:A,each:Ht,bind:P,exists:Rn,forall:Mt,toOptional:W.none}},K0=function(u,l){return u.fold(function(){return Ad(l)},Gm)},Zw={value:Gm,error:Ad,fromOption:K0},yk=function(u,l,d){if(u.row>=l.length||u.column>Bs(l[0]))return Zw.error("invalid start address out of table bounds, row: "+u.row+", column: "+u.column);var h=l.slice(u.row),y=h[0].cells.slice(u.column),x=Bs(d[0]),A=d.length;return Zw.value({rowDelta:h.length-A,colDelta:y.length-x})},Qw=function(u,l){var d=Bs(u[0]),h=Bs(l[0]);return{rowDelta:0,colDelta:d-h}},eC=function(u,l){var d=u.length,h=l.length;return{rowDelta:d-h,colDelta:0}},X0=function(u,l,d,h){var y=l.section==="colgroup"?d.col:d.cell;return ia(u,function(x){return Eo(y(),!0,h(x))})},wk=function(u,l,d,h){var y=u[u.length-1];return u.concat(ia(l,function(){var x=y.section==="colgroup"?d.colgroup:d.row,A=Fo(y,x,_n),P=X0(A.cells.length,A,d,function(j){return V(h,j.toString())});return Sn(A,P)}))},w1=function(u,l,d,h){return ut(u,function(y){var x=X0(l,y,d,Rn);return mf(y,h,x)})},Ck=function(u,l,d){return ut(u,function(h){return ee(d,function(y,x){var A=X0(1,h,l,Mt)[0];return gf(y,x,A)},h)})},ih=function(u,l,d){var h=l.colDelta<0?w1:_n,y=l.rowDelta<0?wk:_n,x=Ai(u),A=Bs(u[0]),P=D(x,function(le){return le===A-1}),j=h(u,Math.abs(l.colDelta),d,P?A-1:A),Y=Ai(j);return y(j,Math.abs(l.rowDelta),d,Hn(Y,Mt))},Sk=function(u,l,d,h){var y=xu(u[l],d),x=Lt(h,y.element),A=u[l];return u.length>1&&Bs(A)>1&&(d>0&&x(qi(A,d-1))||d<A.cells.length-1&&x(qi(A,d+1))||l>0&&x(qi(u[l-1],d))||l<u.length-1&&x(qi(u[l+1],d)))},Y0=function(u,l,d,h,y,x){for(var A=u.row,P=u.column,j=d.length,Y=Bs(d[0]),le=A+j,Me=P+Y+x.length,Qe=Hn(x,Mt),Ve=A;Ve<le;Ve++)for(var Pe=0,lt=P;lt<Me;lt++){if(Qe[lt]){Pe++;continue}Sk(l,Ve,lt,y)&&jm(l,qi(l[Ve],lt),y,h.cell);var ct=lt-P-Pe,qt=xu(d[Ve-A],ct),xr=qt.element,en=h.replace(xr);Al(l[Ve],lt,Eo(en,!0,qt.isLocked))}return l},xk=function(u,l,d){var h=Bs(l[0]),y=oo(l).cols.length+u.row,x=ia(h-u.column,function(P){return P+u.column}),A=nt(x,function(P){return tn(d,function(j){return j!==P})}).getOr(h-1);return{row:y,column:A}},tC=function(u,l,d){return Un(d,function(h){return h>=u.column&&h<=Bs(l[0])+u.column})},Tk=function(u,l,d,h,y){var x=Ai(l),A=xk(u,l,x),P=oo(d).rows,j=tC(A,P,x),Y=yk(A,l,P);return Y.map(function(le){var Me=an(an({},le),{colDelta:le.colDelta-j.length}),Qe=ih(l,Me,h),Ve=Ai(Qe),Pe=tC(A,P,Ve);return Y0(A,Qe,P,h,y,Pe)})},qm=function(u,l,d,h,y){pk(l,u,y,h.cell);var x=eC(d,l),A=ih(d,x,h),P=eC(l,A),j=ih(l,P,h);return ut(j,function(Y,le){return mf(Y,u,A[le].cells)})},nC=function(u,l,d,h,y){bk(l,u,y,h.cell);var x=Ai(l),A=Qw(l,d),P=an(an({},A),{colDelta:A.colDelta-x.length}),j=ih(l,P,h),Y=oo(j),le=Y.cols,Me=Y.rows,Qe=Ai(j),Ve=Qw(d,l),Pe=an(an({},Ve),{colDelta:Ve.colDelta+Qe.length}),lt=Ck(d,h,Qe),ct=ih(lt,Pe,h);return le.concat(Me.slice(0,u)).concat(ct).concat(Me.slice(u,Me.length))},kk=function(u,l,d,h){return Fo(u,function(y){return h(y,d)},l)},J0=function(u,l,d,h,y){var x=oo(u),A=x.rows,P=x.cols,j=A.slice(0,l),Y=A.slice(l),le=kk(A[d],function(Me,Qe){var Ve=l>0&&l<A.length&&h(qi(A[l-1],Qe),qi(A[l],Qe)),Pe=Ve?xu(A[l],Qe):Eo(y(Me.element,h),!0,Me.isLocked);return Pe},h,y);return P.concat(j).concat([le]).concat(Y)},Z0=function(u,l,d,h,y,x,A){if(d==="colgroup"||!h){var P=xu(u,y);return Eo(A(P.element,x),!0,!1)}else return xu(u,l)},C1=function(u,l,d,h,y){return ut(u,function(x){var A=l>0&&l<Bs(x)&&h(qi(x,l-1),qi(x,l)),P=Z0(x,l,x.section,A,d,h,y);return gf(x,l,P)})},rC=function(u,l){return Fr(u,function(d){var h=d.cells,y=Ca(l,function(x,A){return A>=0&&A<x.length?x.slice(0,A).concat(x.slice(A+1)):x},h);return y.length>0?[Hu(d.element,y,d.section,d.isNew)]:[]})},aC=function(u,l,d){var h=oo(u),y=h.rows,x=h.cols;return x.concat(y.slice(0,l)).concat(y.slice(d+1))},Km=function(u,l,d,h){return qi(u[l],d)!==void 0&&l>0&&h(qi(u[l-1],d),qi(u[l],d))},oC=function(u,l,d){return l>0&&d(qi(u,l-1),qi(u,l))},iC=function(u,l,d,h){return Km(u,l,d,h)||oC(u[l],d,h)},Ek=function(u,l){var d=tn(l,_n)&&d1(u.cells);return d?Mt:function(h,y,x){var A=Sr(h.element);return!(A==="th"&&l[x])}},Ok=function(u,l){var d=tn(l,_n)&&d1(u);return d?Mt:function(h,y,x){var A=Sr(h.element);return!(A==="th"&&l[y])}},Q0=function(u,l,d,h){var y=function(P){return P==="row"?Sp(l):ed(l)},x=function(P){return y(P)?P+"group":P};if(u)return v1(l)?x(d):null;if(h&&v1(l)){var A=d==="row"?"col":"row";return x(A)}else return null},Dd=function(u,l){return function(d,h,y){return W.some(Q0(u,d.element,"col",l[y]))}},S1=function(u,l){return function(d,h){return W.some(Q0(u,d.element,"row",l[h]))}},uC=function(u,l,d){return Eo(d(u.element,l),!0,u.isLocked)},x1=function(u,l,d,h,y,x,A){var P=function(j){return D(l,function(Y){return d(j.element,Y.element)})};return ut(u,function(j,Y){return _s(j,function(le,Me){if(P(le)){var Qe=A(le,Y,Me)?y(le,d,h):le;return x(Qe,Y,Me).each(function(Ve){uf(Qe.element,{scope:W.from(Ve)})}),Qe}else return le})})},sC=function(u,l,d){return Fr(u,function(h,y){return iC(u,y,l,d)?[]:[xu(h,l)]})},Ak=function(u,l,d){var h=u[l];return Fr(h.cells,function(y,x){return iC(u,l,x,d)?[]:[y]})},ey=function(u,l,d,h,y){var x=oo(u).rows,A=Fr(l,function(le){return sC(x,le,h)}),P=ut(u,function(le){return d1(le.cells)}),j=Ok(A,P),Y=S1(d,P);return x1(u,A,h,y,uC,Y,j)},Dk=function(u,l,d,h,y,x,A){var P=oo(u),j=P.cols,Y=P.rows,le=Y[l[0]],Me=Fr(l,function(qt){return Ak(Y,qt,y)}),Qe=ut(le.cells,function(qt,xr){return d1(sC(Y,xr,y))}),Ve=ua([],Y,!0);Et(l,function(qt){Ve[qt]=A.transformRow(Y[qt],d)});var Pe=j.concat(Ve),lt=Ek(le,Qe),ct=Dd(h,Qe);return x1(Pe,Me,y,x,A.transformCell,ct,lt)},cC=function(u,l,d,h){var y=oo(u).rows,x=ut(l,function(A){return xu(y[A.row],A.column)});return x1(u,x,d,h,uC,W.none,Mt)},Rd=function(u){var l=function(d,h){var y=D(d,function(x){return x.column===h.column});return y?d:d.concat([h])};return ee(u,l,[]).sort(function(d,h){return d.column-h.column})},Yo=Ia("col"),Tv=Ia("colgroup"),T1=function(u){return Sr(u)==="tr"||Tv(u)},Rk=function(u){var l=Js(u,"colspan",1),d=Js(u,"rowspan",1);return{element:u,colspan:l,rowspan:d}},lC=function(u,l){l===void 0&&(l=Rk);var d=function(P){return Yo(P.element)?u.col(P):u.cell(P)},h=function(P){return Tv(P.element)?u.colgroup(P):u.row(P)},y=function(P){if(T1(P))return h({element:P});var j=d(l(P));return x=W.some({item:P,replacement:j}),j},x=W.none(),A=function(P,j){return x.fold(function(){return y(P)},function(Y){return j(P,Y.item)?Y.replacement:y(P)})};return{getOrInit:A}},fC=function(u){return function(l){var d=[],h=function(A,P){return nt(d,function(j){return P(j.item,A)})},y=function(A){var P=u==="td"?{scope:null}:{},j=l.replace(A,u,P);return d.push({item:A,sub:j}),j},x=function(A,P){return T1(A)||Yo(A)?A:h(A,P).fold(function(){return y(A)},function(j){return P(A,j.item)?j.sub:y(A)})};return{replaceOrInit:x}}},ty=function(u){return _r(u,"scope").map(function(l){return l.substr(0,3)})},ny=function(u){var l=function(h){var y=ty(h);return y.each(function(x){return zo(h,"scope",x)}),function(){var x=u.cell({element:h,colspan:1,rowspan:1});return Oi(x,"width"),Oi(h,"width"),y.each(function(A){return zo(x,"scope",A)}),x}},d=function(h){var y=function(){var x=Oo(ut(h,ty));if(x.length===0)return W.none();var A=x[0],P=["row","col"],j=D(x,function(Y){return Y!==A&&qn(P,Y)});return j?W.none():W.from(A)};return Oi(h[0],"width"),y().fold(function(){return ya(h[0],"scope")},function(x){return zo(h[0],"scope",x+"group")}),Ct(h[0])};return{unmerge:l,merge:d}},ys={modification:lC,transform:fC,merging:ny},Bf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],_d=function(u,l){var d=u.property().name(l);return qn(["ol","ul"],d)},uh=function(u,l){var d=u.property().name(l);return qn(Bf,d)},Bd=function(u,l){return qn(["br","img","hr","input"],u.property().name(l))},Hl=$g(),Nc=function(u){return uh(Hl,u)},Xm=function(u){return _d(Hl,u)},ry=function(u){return Bd(Hl,u)},vC=function(u){var l=function(j){return Sr(j)==="br"},d=function(j){return tn(j,function(Y){return l(Y)||uu(Y)&&Tp(Y).trim().length===0})},h=function(j){return Sr(j)==="li"||La(j,Xm).isSome()},y=function(j){return M(j).map(function(Y){return Nc(Y)?!0:ry(Y)?Sr(Y)!=="img":!1}).getOr(!1)},x=function(j){return Mp(j).bind(function(Y){var le=y(Y);return Fa(Y).map(function(Me){return le===!0||h(Me)||l(Y)||Nc(Me)&&!Qn(j,Me)?[]:[Xe.fromTag("br")]})}).getOr([])},A=function(){var j=Fr(u,function(Y){var le=T(Y);return d(le)?[]:le.concat(x(Y))});return j.length===0?[Xe.fromTag("br")]:j},P=A();Pg(u[0]),nl(u[0],P)},k1=function(u){return Im(u,!0)},Md=function(u){var l=df(u);l.length===0&&ju(u)},Mf=function(u,l){return{grid:u,cursor:l}},E1=function(u){return jr(u,function(l){return jr(l.cells,function(d){var h=d.element;return na(k1(h),h)})})},ay=function(u,l,d){var h,y,x=oo(u).rows;return W.from((y=(h=x[l])===null||h===void 0?void 0:h.cells[d])===null||y===void 0?void 0:y.element).filter(k1).orThunk(function(){return E1(x)})},hi=function(u,l,d){var h=ay(u,l,d);return Mf(u,h)},kv=function(u){var l=function(d,h){var y=D(d,function(x){return x.row===h.row});return y?d:d.concat([h])};return ee(u,l,[]).sort(function(d,h){return d.row-h.row})},dC=function(u,l,d,h){var y=l[0].row,x=kv(l),A=Ca(x,function(P,j){var Y=J0(P.grid,y,j.row+P.delta,d,h.getOrInit);return{grid:Y,delta:P.delta+1}},{grid:u,delta:0}).grid;return hi(A,y,l[0].column)},oy=function(u,l,d,h){var y=kv(l),x=y[y.length-1],A=x.row+x.rowspan,P=Ca(y,function(j,Y){return J0(j,A,Y.row,d,h.getOrInit)},u);return hi(P,A,l[0].column)},O1=function(u,l,d,h){var y=l.details,x=Rd(y),A=x[0].column,P=Ca(x,function(j,Y){var le=C1(j.grid,A,Y.column+j.delta,d,h.getOrInit);return{grid:le,delta:j.delta+1}},{grid:u,delta:0}).grid;return hi(P,y[0].row,A)},Ni=function(u,l,d,h){var y=l.details,x=y[y.length-1],A=x.column+x.colspan,P=Rd(y),j=Ca(P,function(Y,le){return C1(Y,A,le.column,d,h.getOrInit)},u);return hi(j,y[0].row,A)},_k=function(u,l,d,h){var y=Rd(l),x=ut(y,function(P){return P.column}),A=ey(u,x,!0,d,h.replaceOrInit);return hi(A,l[0].row,l[0].column)},Vl=function(u,l,d,h){var y=cC(u,l,d,h.replaceOrInit);return hi(y,l[0].row,l[0].column)},mC=function(u,l,d,h){var y=Rd(l),x=ut(y,function(P){return P.column}),A=ey(u,x,!1,d,h.replaceOrInit);return hi(A,l[0].row,l[0].column)},iy=function(u,l,d,h){var y=cC(u,l,d,h.replaceOrInit);return hi(y,l[0].row,l[0].column)},Ev=function(u,l){return function(d,h,y,x,A){var P=kv(h),j=ut(P,function(le){return le.row}),Y=Dk(d,j,u,l,y,x.replaceOrInit,A);return hi(Y,h[0].row,h[0].column)}},gC=Ev("thead",!0),A1=Ev("tbody",!1),hC=Ev("tfoot",!1),uy=function(u,l,d,h){var y=Rd(l.details),x=rC(u,ut(y,function(P){return P.column})),A=x.length>0?x[0].cells.length-1:0;return hi(x,y[0].row,Math.min(y[0].column,A))},pC=function(u,l,d,h){var y=kv(l),x=aC(u,y[0].row,y[y.length-1].row),A=x.length>0?x.length-1:0;return hi(x,Math.min(l[0].row,A),l[0].column)},Bk=function(u,l,d,h){var y=l.cells;vC(y);var x=Jw(u,l.bounds,d,h.merge(y));return Mf(x,W.from(y[0]))},sy=function(u,l,d,h){var y=function(A,P){return jm(A,P,d,h.unmerge(P))},x=Ca(l,y,u);return Mf(x,W.from(l[0]))},fl=function(u,l,d,h){var y=function(j,Y){var le=Wn.fromTable(j);return xv(le,Y,!0)},x=y(l.clipboard,l.generators),A=Or(l.row,l.column),P=Tk(A,u,x,l.generators,d);return P.fold(function(){return Mf(u,W.some(l.element))},function(j){return hi(j,l.row,l.column)})},D1=function(u,l,d){var h=Bg(u,d.section),y=Wn.generate(h);return xv(y,l,!0)},Ru=function(u,l,d,h){var y=oo(u).rows,x=l.cells[0].column,A=y[l.cells[0].row],P=D1(l.clipboard,l.generators,A),j=qm(x,u,P,l.generators,d);return hi(j,l.cells[0].row,l.cells[0].column)},sh=function(u,l,d,h){var y=oo(u).rows,x=l.cells[l.cells.length-1].column+l.cells[l.cells.length-1].colspan,A=y[l.cells[0].row],P=D1(l.clipboard,l.generators,A),j=qm(x,u,P,l.generators,d);return hi(j,l.cells[0].row,l.cells[0].column)},ch=function(u,l,d,h){var y=oo(u).rows,x=l.cells[0].row,A=y[x],P=D1(l.clipboard,l.generators,A),j=nC(x,u,P,l.generators,d);return hi(j,l.cells[0].row,l.cells[0].column)},cy=function(u,l,d,h){var y=oo(u).rows,x=l.cells[l.cells.length-1].row+l.cells[l.cells.length-1].rowspan,A=y[l.cells[0].row],P=D1(l.clipboard,l.generators,A),j=nC(x,u,P,l.generators,d);return hi(j,l.cells[0].row,l.cells[0].column)},Mk=function(u,l){var d=Wn.fromTable(u),h=Pc(d,l);return h.bind(function(y){var x=y[y.length-1],A=y[0].column,P=x.column+x.colspan,j=Ci(ut(d.all,function(Y){return Un(Y.cells,function(le){return le.column>=A&&le.column<P})}));return U0(j)}).getOr("")},bC=function(u,l){var d=Wn.fromTable(u),h=Pc(d,l);return h.bind(U0).getOr("")},Zi=function(u,l){var d=Wn.fromTable(u),h=Pc(d,l);return h.bind(function(y){var x=y[y.length-1],A=y[0].row,P=x.row+x.rowspan,j=d.all.slice(A,P);return Gw(j)}).getOr("")},Pd=function(u,l,d,h){return Eu(u,l,d,h.sizing)},lh=function(u,l,d,h){return HT(u,l,d,h.sizing,h.resize)},ac=function(u,l){return D(l,function(d){return d.column===0&&d.isLocked})},oc=function(u,l){return D(l,function(d){return d.column+d.colspan>=u.grid.columns&&d.isLocked})},ic=function(u,l){var d=rd(u),h=Rd(l);return ee(h,function(y,x){var A=d[x.column],P=A.map(Xi).getOr(0);return y+P},0)},_u=function(u){return function(l,d){return Pc(l,d).filter(function(h){var y=u?ac:oc;return!y(l,h)}).map(function(h){return{details:h,pixelDelta:ic(l,h)}})}},vl=function(u,l){return _f(u,l).map(function(d){return{details:d,pixelDelta:-ic(u,d)}})},R1=function(u){return function(l,d){return y1(l,d).filter(function(h){var y=u?ac:oc;return!y(l,h.cells)})}},uc=ys.transform("th"),dl=ys.transform("td"),Pk=gi(dC,Pc,Ht,Ht,ys.modification),Nk=gi(oy,Pc,Ht,Ht,ys.modification),yC=gi(O1,_u(!0),lh,Ht,ys.modification),wC=gi(Ni,_u(!1),lh,Ht,ys.modification),CC=gi(uy,vl,lh,Md,ys.modification),SC=gi(pC,Pc,Ht,Md,ys.modification),$k=gi(_k,_f,Ht,Ht,uc),zk=gi(mC,_f,Ht,Ht,dl),xC=gi(gC,_f,Ht,Ht,uc),Ik=gi(A1,_f,Ht,Ht,dl),ly=gi(hC,_f,Ht,Ht,dl),TC=gi(Vl,_f,Ht,Ht,uc),fy=gi(iy,_f,Ht,Ht,dl),kC=gi(Bk,q0,Pd,Ht,ys.merging),Fk=gi(sy,Od,Pd,Ht,ys.merging),Lk=gi(fl,dk,Pd,Ht,ys.modification),Hk=gi(Ru,R1(!0),Ht,Ht,ys.modification),fr=gi(sh,R1(!1),Ht,Ht,ys.modification),Nd=gi(ch,y1,Ht,Ht,ys.modification),Ym=gi(cy,y1,Ht,Ht,ys.modification),ws=Mk,Vk=bC,Ov=Zi,Jm=function(u,l,d){var h=function(zi){return Sr(Ku(zi))==="table"},y=function(zi){return h(u)===!1||cl(zi).rows>1},x=function(zi){return h(u)===!1||cl(zi).columns>1},A=I0(u),P=Fw(u)?Ht:Ww,j=function(zi){switch(z0(u)){case"section":return rh.section();case"sectionCells":return rh.sectionCells();case"cells":return rh.cells();default:return rh.getTableSectionType(zi,"section")}},Y=function(zi,Hh){return Hh.cursor.fold(function(){var Jd=df(zi);return jt(Jd).filter(Kn).map(function(hl){l.clear(zi);var fc=u.dom.createRng();return fc.selectNode(hl.dom),u.selection.setRng(fc),zo(hl,"data-mce-selected","1"),fc})},function(Jd){var hl=uk(Jd),fc=u.dom.createRng();return fc.setStart(hl.element.dom,hl.offset),fc.setEnd(hl.element.dom,hl.offset),u.selection.setRng(fc),l.clear(zi),W.some(fc)})},le=function(zi,Hh,Jd,hl,fc){return function(pl,Vh,bg){bg===void 0&&(bg=!1),li(pl);var Uh=hl(),Zd=Xe.fromDom(u.getDoc()),Lc=Ma(Jd,Zd,A),Qd={sizing:V0(u,pl),resize:Fw(u)?kw():lv(),section:j(pl)};return Hh(pl)?zi(Uh,pl,Vh,Lc,Qd).bind(function(mb){Et(mb.newRows,function(Wh){Jp(u,Wh.dom)}),Et(mb.newCells,function(Wh){Af(u,Wh.dom)});var gb=Y(pl,mb);return Kn(pl)&&(li(pl),bg||Du(u,pl.dom,fc)),gb.map(function(Wh){return{rng:Wh,effect:fc}})}):W.none()}},Me=le(SC,y,Ht,d,Vo),Qe=le(CC,x,Ht,d,Vo),Ve=le(Pk,Mt,Ht,d,Vo),Pe=le(Nk,Mt,Ht,d,Vo),lt=le(yC,Mt,P,d,Vo),ct=le(wC,Mt,P,d,Vo),qt=le(kC,Mt,Ht,d,Vo),xr=le(Fk,Mt,Ht,d,Vo),en=le(Hk,Mt,Ht,d,Vo),yn=le(fr,Mt,Ht,d,Vo),sr=le(Nd,Mt,Ht,d,Vo),Gn=le(Ym,Mt,Ht,d,Vo),eo=le(Lk,Mt,Ht,d,$w),Qo=le(TC,Mt,Ht,d,Vo),hu=le(fy,Mt,Ht,d,Vo),Dr=le($k,Mt,Ht,d,Vo),Dn=le(zk,Mt,Ht,d,Vo),mr=le(xC,Mt,Ht,d,Vo),Kr=le(Ik,Mt,Ht,d,Vo),Pa=le(ly,Mt,Ht,d,Vo),Xl=Vk,Ir=ws,Ss=Ov;return{deleteRow:Me,deleteColumn:Qe,insertRowsBefore:Ve,insertRowsAfter:Pe,insertColumnsBefore:lt,insertColumnsAfter:ct,mergeCells:qt,unmergeCells:xr,pasteColsBefore:en,pasteColsAfter:yn,pasteRowsBefore:sr,pasteRowsAfter:Gn,pasteCells:eo,makeCellsHeader:Qo,unmakeCellsHeader:hu,makeColumnsHeader:Dr,unmakeColumnsHeader:Dn,makeRowsHeader:mr,makeRowsBody:Kr,makeRowsFooter:Pa,getTableRowType:Ss,getTableCellType:Xl,getTableColType:Ir}},fh={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Zm=function(){return Xe.fromTag("th")},EC=function(){return Xe.fromTag("td")},OC=function(){return Xe.fromTag("col")},vy=function(u,l,d,h){for(var y=Xe.fromTag("tr"),x=0;x<u;x++){var A=h<l||x<d?Zm():EC();x<d&&zo(A,"scope","row"),h<l&&zo(A,"scope","col"),Ga(A,Xe.fromTag("br")),Ga(y,A)}return y},dy=function(u){var l=Xe.fromTag("colgroup");return ia(u,function(){return Ga(l,OC())}),l},$d=function(u,l,d,h){return ia(u,function(y){return vy(l,d,h,y)})},my=function(u,l,d,h,y,x){x===void 0&&(x=fh);var A=Xe.fromTag("table"),P=y!=="cells";Ol(A,x.styles),go(A,x.attributes),x.colGroups&&Ga(A,dy(l));var j=Math.min(u,d);if(P&&d>0){var Y=Xe.fromTag("thead");Ga(A,Y);var le=y==="sectionCells"?j:0,Me=$d(d,l,le,h);nl(Y,Me)}var Qe=Xe.fromTag("tbody");Ga(A,Qe);var Ve=P?u-j:u,Pe=P?0:d,lt=$d(Ve,l,Pe,h);return nl(Qe,lt),A},Uk=function(u){return u.dom.innerHTML},Ul=function(u){var l=Xe.fromTag("div"),d=Xe.fromDom(u.dom.cloneNode(!0));return Ga(l,d),Uk(l)},gy=function(u,l){u.selection.select(l.dom,!0),u.selection.collapse(!0)},_1=function(u,l){us(l,"td,th").each(Lt(gy,u))},B1=function(u,l){Et(is(l,"tr"),function(d){Jp(u,d.dom),Et(is(d,"th,td"),function(h){Af(u,h.dom)})})},AC=function(u){return Xt(u)&&u.indexOf("%")!==-1},Qm=function(u,l,d,h,y){var x=Qg(u),A={styles:x,attributes:Lm(u),colGroups:$0(u)};return u.undoManager.ignore(function(){var P=my(d,l,y,h,z0(u),A);zo(P,"data-mce-id","__mce");var j=Ul(P);u.insertContent(j),u.addVisual()}),us(Ku(u),'table[data-mce-id="__mce"]').map(function(P){return Hm(u)?i1(P):wv(u)?u1(P):(th(u)||AC(x.width))&&nh(P),li(P),ya(P,"data-mce-id"),B1(u,P),_1(u,P),P.dom}).getOr(null)},DC=function(u,l,d,h,y){h===void 0&&(h={});var x=function(j){return za(j)&&j>0};if(x(l)&&x(d)){var A=h.headerRows||0,P=h.headerColumns||0;return Qm(u,d,l,P,A)}else return console.error(y),null},RC=function(u){return function(){return u().fold(function(){return[]},function(l){return ut(l,function(d){return d.dom})})}},ml=function(u){return function(l){var d=l.length>0?W.some(Rc(l)):W.none();u(d)}},Ls=function(u){return function(l,d,h){h===void 0&&(h={});var y=DC(u,d,l,h,"Invalid values for insertTable - rows and columns values are required to insert a table.");return u.undoManager.add(),y}},$i=function(u,l,d,h){return{insertTable:Ls(u),setClipboardRows:ml(l.setRows),getClipboardRows:RC(l.getRows),setClipboardCols:ml(l.setColumns),getClipboardCols:RC(l.getColumns),resizeHandler:d,selectionTargets:h}},_C=function(u,l,d){var h=Js(u,l,1);d===1||h<=1?ya(u,l):zo(u,l,Math.min(d,h))},hy=function(u,l,d){if(Wn.hasColumns(u)){var h=Un(Wn.justColumns(u),function(A){return A.column>=l&&A.column<d}),y=ut(h,function(A){var P=zr(A.element);return _C(P,"span",d-l),P}),x=Xe.fromTag("colgroup");return nl(x,y),[x]}else return[]},eg=function(u,l,d){return ut(u.all,function(h){var y=Un(h.cells,function(P){return P.column>=l&&P.column<d}),x=ut(y,function(P){var j=zr(P.element);return _C(j,"colspan",d-l),j}),A=Xe.fromTag("tr");return nl(A,x),A})},BC=function(u,l){var d=Wn.fromTable(u),h=_f(d,l);return h.map(function(y){var x=y[y.length-1],A=y[0].column,P=x.column+x.colspan,j=hy(d,A,P),Y=eg(d,A,P);return ua(ua([],j,!0),Y,!0)})},MC=function(u,l,d){var h=Wn.fromTable(u),y=Pc(h,l);return y.bind(function(x){var A=xv(h,d,!1),P=oo(A).rows,j=P.slice(x[0].row,x[x.length-1].row+x[x.length-1].rowspan),Y=Fr(j,function(Me){var Qe=Un(Me.cells,function(Ve){return!Ve.isLocked});return Qe.length>0?[an(an({},Me),{cells:Qe})]:[]}),le=oh(Y);return na(le.length>0,le)}).map(function(x){return h1(x)})},PC=tinymce.util.Tools.resolve("tinymce.util.Tools"),M1=function(u,l,d){var h=u.select("td,th",l),y,x=function(A,P){for(var j=0;j<P.length;j++){var Y=u.getStyle(P[j],d);if(typeof A>"u"&&(A=Y),A!==Y)return""}return A};return x(y,h)},P1=function(u,l,d){d&&u.formatter.apply("align"+d,{},l)},NC=function(u,l,d){d&&u.formatter.apply("valign"+d,{},l)},yt=function(u,l){PC.each("left center right".split(" "),function(d){u.formatter.remove("align"+d,{},l)})},Jo=function(u,l){PC.each("top middle bottom".split(" "),function(d){u.formatter.remove("valign"+d,{},l)})},zd=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Zo=function(u){return{value:u}},sc=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,py=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Id=function(u){return sc.test(u)||py.test(u)},N1=function(u){return ro(u,"#").toUpperCase()},tg=function(u){return Id(u)?W.some({value:N1(u)}):W.none()},Fd=function(u){var l=u.toString(16);return(l.length===1?"0"+l:l).toUpperCase()},vh=function(u){var l=Fd(u.red)+Fd(u.green)+Fd(u.blue);return Zo(l)},Wk=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,jk=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,by=function(u,l,d,h){return{red:u,green:l,blue:d,alpha:h}},yy=function(u,l,d,h){var y=parseInt(u,10),x=parseInt(l,10),A=parseInt(d,10),P=parseFloat(h);return by(y,x,A,P)},$C=function(u){if(u==="transparent")return W.some(by(0,0,0,0));var l=Wk.exec(u);if(l!==null)return W.some(yy(l[1],l[2],l[3],"1"));var d=jk.exec(u);return d!==null?W.some(yy(d[1],d[2],d[3],d[4])):W.none()},Ld=function(u){return tg(u).orThunk(function(){return $C(u).map(vh)}).getOrThunk(function(){var l=document.createElement("canvas");l.height=1,l.width=1;var d=l.getContext("2d");d.clearRect(0,0,l.width,l.height),d.fillStyle="#FFFFFF",d.fillStyle=u,d.fillRect(0,0,1,1);var h=d.getImageData(0,0,1,1).data,y=h[0],x=h[1],A=h[2],P=h[3];return vh(by(y,x,A,P))})},$c=function(u){var l=u,d=function(){return l},h=function(y){l=y};return{get:d,set:h}},dh=function(u){var l=$c(W.none()),d=function(){return l.get().each(u)},h=function(){d(),l.set(W.none())},y=function(){return l.get().isSome()},x=function(){return l.get()},A=function(P){d(),l.set(W.some(P))};return{clear:h,isSet:y,get:x,set:A}},wy=function(){return dh(function(u){return u.unbind()})},Hd=function(){var u=dh(Ht),l=function(d){return u.get().each(d)};return an(an({},u),{on:l})},mh=function(u,l,d,h){return function(y){var x=wy(),A=ha(h),P=function(){var j=fi(l),Y=function(le){return u.formatter.match(d,{value:h},le.dom,A)};A?(y.setActive(!D(j,Y)),x.set(u.formatter.formatChanged(d,function(le){return y.setActive(!le)},!0))):(y.setActive(tn(j,Y)),x.set(u.formatter.formatChanged(d,y.setActive,!1,{value:h})))};return u.initialized?P():u.on("init",P),x.clear}},gh=function(u){return ce(u,"menu")},Wl=function(u){return ut(u,function(l){var d=l.text||l.title;return gh(l)?{text:d,items:Wl(l.menu)}:{text:d,value:l.value}})},cc=function(u,l,d,h,y){return ut(d,function(x){var A=x.text||x.title;return gh(x)?{type:"nestedmenuitem",text:A,getSubmenuItems:function(){return cc(u,l,x.menu,h,y)}}:{text:A,type:"togglemenuitem",onAction:function(){return y(x.value)},onSetup:mh(u,l,h,x.value)}})},Av=function(u,l){return function(d){var h;u.execCommand("mceTableApplyCellStyle",!1,(h={},h[l]=d,h))}},Vd=function(u){return Fr(u,function(l){return gh(l)?[an(an({},l),{menu:Vd(l.menu)})]:hr(l.value)?[l]:[]})},hh=function(u,l,d,h,y){return function(x){return x(cc(u,l,d,h,y))}},$1=function(u,l,d){var h=ut(l,function(y){return{text:y.title,value:"#"+Ld(y.value).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:h.length>0?h:void 0,allowCustomColors:!1},onAction:function(y){var x,A=y.value==="remove"?"":y.value;u.execCommand("mceTableApplyCellStyle",!1,(x={},x[d]=A,x))}}]},ph=function(u){return function(){var l=u.queryCommandValue("mceTableRowType"),d=l==="header"?"body":"header";u.execCommand("mceTableRowType",!1,{type:d})}},Cy=function(u){return function(){var l=u.queryCommandValue("mceTableColType"),d=l==="th"?"td":"th";u.execCommand("mceTableColType",!1,{type:d})}},Gk=function(u){var l=Wl(N0(u));return l.length>0?W.some({name:"class",type:"listbox",label:"Class",items:l}):W.none()},z1=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:zd}],pi=function(u){return z1.concat(Gk(u).toArray())},Hs=function(u,l){var d=[{text:"Select...",value:""}],h=[{name:"borderstyle",type:"listbox",label:"Border style",items:d.concat(Wl(ps(u)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],y={name:"borderwidth",type:"input",label:"Border width"},x=l==="cell"?[y].concat(h):h;return{title:"Advanced",name:"advanced",items:x}},zc=function(u){return function(l,d){var h=l.dom,y=function(P,j){(!u||j)&&h.setAttrib(d,P,j)},x=function(P,j){(!u||j)&&h.setStyle(d,P,j)},A=function(P,j){(!u||j)&&(j===""?l.formatter.remove(P,{value:null},d,!0):l.formatter.apply(P,{value:j},d))};return{setAttrib:y,setStyle:x,setFormat:A}}},gl={normal:zc(!1),ifTruthy:zc(!0)},jl=function(u){return function(l){return mo(l,"rgb")?u.toHex(l):l}},Dv=function(u,l){var d=Xe.fromDom(l);return{borderwidth:Su(d,"border-width").getOr(""),borderstyle:Su(d,"border-style").getOr(""),bordercolor:Su(d,"border-color").map(jl(u)).getOr(""),backgroundcolor:Su(d,"background-color").map(jl(u)).getOr("")}},ng=function(u){var l=u[0],d=u.slice(1);return Et(d,function(h){Et(ii(l),function(y){qr(h,function(x,A){var P=l[y];P!==""&&y===A&&P!==x&&(l[y]="")})})}),l},zC=function(u,l,d,h){return nt(u,function(y){return!So(d.formatter.matchNode(h,l+y))}).getOr("")},bh=Lt(zC,["left","center","right"],"align"),qk=Lt(zC,["top","middle","bottom"],"valign"),Sy=function(u,l){var d=Qg(u),h=Lm(u),y=function(le){return{borderstyle:Ei(d,"border-style").getOr(""),bordercolor:jl(le)(Ei(d,"border-color").getOr("")),backgroundcolor:jl(le)(Ei(d,"background-color").getOr(""))}},x={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},A=function(){var le=d["border-width"];return Uo(u)&&le?{border:le}:Ei(h,"border").fold(function(){return{}},function(Me){return{border:Me}})},P=l?y(u.dom):{},j=function(){var le=Ei(d,"border-spacing").or(Ei(h,"cellspacing")).fold(function(){return{}},function(Qe){return{cellspacing:Qe}}),Me=Ei(d,"border-padding").or(Ei(h,"cellpadding")).fold(function(){return{}},function(Qe){return{cellpadding:Qe}});return an(an({},le),Me)},Y=an(an(an(an(an(an({},x),d),h),P),A()),j());return Y},IC=function(u){return _a(Xe.fromDom(u)).map(function(l){var d={selection:Rc(u.cells)};return Ov(l,d)}).getOr("")},FC=function(u,l,d){var h=function(P,j){var Y=Su(Xe.fromDom(j),"border-width");return Uo(u)&&Y.isSome()?Y.getOr(""):P.getAttrib(j,"border")||M1(u.dom,j,"border-width")||M1(u.dom,j,"border")},y=u.dom,x=Uo(u)?y.getStyle(l,"border-spacing")||y.getAttrib(l,"cellspacing"):y.getAttrib(l,"cellspacing")||y.getStyle(l,"border-spacing"),A=Uo(u)?M1(y,l,"padding")||y.getAttrib(l,"cellpadding"):y.getAttrib(l,"cellpadding")||M1(y,l,"padding");return an({width:y.getStyle(l,"width")||y.getAttrib(l,"width"),height:y.getStyle(l,"height")||y.getAttrib(l,"height"),cellspacing:x,cellpadding:A,border:h(y,l),caption:!!y.select("caption",l)[0],class:y.getAttrib(l,"class",""),align:bh(u,l)},d?Dv(y,l):{})},xy=function(u,l,d){var h=u.dom;return an({height:h.getStyle(l,"height")||h.getAttrib(l,"height"),class:h.getAttrib(l,"class",""),type:IC(l),align:bh(u,l)},d?Dv(h,l):{})},Ty=function(u,l,d,h){var y=u.dom,x=h.getOr(l),A=function(P,j){return y.getStyle(P,j)||y.getAttrib(P,j)};return an({width:A(x,"width"),height:A(l,"height"),scope:y.getAttrib(l,"scope"),celltype:Pp(l),class:y.getAttrib(l,"class",""),halign:bh(u,l),valign:qk(u,l)},d?Dv(y,l):{})},Qr=function(u,l){var d=Wn.fromTable(u),h=Wn.justCells(d),y=Un(h,function(x){return D(l,function(A){return Qn(x.element,A)})});return ut(y,function(x){return{element:x.element.dom,column:Wn.getColumnAt(d,x.column).map(function(A){return A.element.dom})}})},Gl=function(u,l,d){u.setAttrib("scope",d.scope),u.setAttrib("class",d.class),u.setStyle("height",Yi(d.height)),l.setStyle("width",Yi(d.width))},LC=function(u,l){u.setFormat("tablecellbackgroundcolor",l.backgroundcolor),u.setFormat("tablecellbordercolor",l.bordercolor),u.setFormat("tablecellborderstyle",l.borderstyle),u.setFormat("tablecellborderwidth",Yi(l.borderwidth))},ky=function(u,l,d){var h=l.length===1;Et(l,function(y){var x=y.element,A=h?gl.normal(u,x):gl.ifTruthy(u,x),P=y.column.map(function(j){return h?gl.normal(u,j):gl.ifTruthy(u,j)}).getOr(A);Gl(A,P,d),eh(u)&&LC(A,d),h&&(yt(u,x),Jo(u,x)),d.halign&&P1(u,x,d.halign),d.valign&&NC(u,x,d.valign)})},Ey=function(u,l){u.execCommand("mceTableCellType",!1,{type:l.celltype,no_events:!0})},yh=function(u,l,d,h){var y=ou(h,function(x,A){return d[A]!==x});iu(y)>0&&l.length>=1&&_a(l[0]).each(function(x){var A=Qr(x,l),P=iu(ou(y,function(Y,le){return le!=="scope"&&le!=="celltype"}))>0,j=V(y,"celltype");(P||V(y,"scope"))&&ky(u,A,h),j&&Ey(u,h),Du(u,x.dom,{structure:j,style:P})})},ln=function(u,l,d,h){var y=h.getData();h.close(),u.undoManager.transact(function(){yh(u,l,d,y),u.focus()})},Oy=function(u,l){var d=_a(l[0]).map(function(h){return ut(Qr(h,l),function(y){return Ty(u,y.element,eh(u),y.column)})});return ng(d.getOrDie())},HC=function(u,l){var d=fi(l);if(d.length!==0){var h=Oy(u,d),y={type:"tabpanel",tabs:[{title:"General",name:"general",items:pi(u)},Hs(u,"cell")]},x={type:"panel",items:[{type:"grid",columns:2,items:pi(u)}]};u.windowManager.open({title:"Cell Properties",size:"normal",body:eh(u)?y:x,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onSubmit:Lt(ln,u,d,h)})}},Kk=function(u){var l=Wl(Re(u));return l.length>0?W.some({name:"class",type:"listbox",label:"Class",items:l}):W.none()},VC=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],UC=function(u){return VC.concat(Kk(u).toArray())},Ay=function(u,l){u.setAttrib("class",l.class),u.setStyle("height",Yi(l.height))},Dy=function(u,l){u.setStyle("background-color",l.backgroundcolor),u.setStyle("border-color",l.bordercolor),u.setStyle("border-style",l.borderstyle)},I1=function(u,l,d,h){var y=l.length===1;Et(l,function(x){var A=y?gl.normal(u,x):gl.ifTruthy(u,x);Ay(A,d),n1(u)&&Dy(A,d),d.align!==h.align&&(yt(u,x),P1(u,x,d.align))})},Xk=function(u,l){u.execCommand("mceTableRowType",!1,{type:l.type,no_events:!0})},WC=function(u,l,d,h){var y=ou(h,function(P,j){return d[j]!==P});if(iu(y)>0){var x=V(y,"type"),A=x?iu(y)>1:!0;A&&I1(u,l,h,d),x&&Xk(u,h),_a(Xe.fromDom(l[0])).each(function(P){return Du(u,P.dom,{structure:x,style:A})})}},Yk=function(u,l,d,h){var y=h.getData();h.close(),u.undoManager.transact(function(){WC(u,l,d,y),u.focus()})},Cs=function(u){var l=$T(Do(u),fd.selected);if(l.length!==0){var d=ut(l,function(A){return xy(u,A.dom,n1(u))}),h=ng(d),y={type:"tabpanel",tabs:[{title:"General",name:"general",items:UC(u)},Hs(u,"row")]},x={type:"panel",items:[{type:"grid",columns:2,items:UC(u)}]};u.windowManager.open({title:"Row Properties",size:"normal",body:n1(u)?y:x,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onSubmit:Lt(Yk,u,ut(l,function(A){return A.dom}),h)})}},Bu=function(u,l,d){var h=d?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],y=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],x=Mc(u)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],A=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],P=l.length>0?[{type:"listbox",name:"class",label:"Class",items:l}]:[];return h.concat(y).concat(x).concat(A).concat(P)},Rv=function(u,l,d,h){if(l.tagName==="TD"||l.tagName==="TH")Xt(d)?u.setStyle(l,d,h):u.setStyle(l,d);else if(l.children)for(var y=0;y<l.children.length;y++)Rv(u,l.children[y],d,h)},jC=function(u,l,d){var h=u.dom,y={},x={};if(y.class=d.class,x.height=Yi(d.height),h.getAttrib(l,"width")&&!Uo(u)?y.width=Np(d.width):x.width=Yi(d.width),Uo(u)?(x["border-width"]=Yi(d.border),x["border-spacing"]=Yi(d.cellspacing)):(y.border=d.border,y.cellpadding=d.cellpadding,y.cellspacing=d.cellspacing),Uo(u)&&l.children)for(var A=0;A<l.children.length;A++)Rv(h,l.children[A],{"border-width":Yi(d.border),padding:Yi(d.cellpadding)}),bs(u)&&Rv(h,l.children[A],{"border-color":d.bordercolor});bs(u)&&(x["background-color"]=d.backgroundcolor,x["border-color"]=d.bordercolor,x["border-style"]=d.borderstyle),y.style=h.serializeStyle(an(an({},Qg(u)),x)),h.setAttribs(l,an(an({},Lm(u)),y))},Jk=function(u,l,d,h){var y=u.dom,x=h.getData(),A=ou(x,function(P,j){return d[j]!==P});h.close(),x.class===""&&delete x.class,u.undoManager.transact(function(){if(!l){var P=parseInt(x.cols,10)||1,j=parseInt(x.rows,10)||1;l=Qm(u,P,j,0,0)}if(iu(A)>0){jC(u,l,x);var Y=y.select("caption",l)[0];(Y&&!x.caption||!Y&&x.caption)&&u.execCommand("mceTableToggleCaption"),x.align===""?yt(u,l):P1(u,l,x.align)}if(u.focus(),u.addVisual(),iu(A)>0){var le=V(A,"caption"),Me=le?iu(A)>1:!0;Du(u,l,{structure:le,style:Me})}})},GC=function(u,l){var d=u.dom,h,y=Sy(u,bs(u));l===!1?(h=d.getParent(u.selection.getStart(),"table",u.getBody()),h?y=FC(u,h,bs(u)):bs(u)&&(y.borderstyle="",y.bordercolor="",y.backgroundcolor="")):(y.cols="1",y.rows="1",bs(u)&&(y.borderstyle="",y.bordercolor="",y.backgroundcolor=""));var x=Wl(yv(u));x.length>0&&y.class&&(y.class=y.class.replace(/\s*mce\-item\-table\s*/g,""));var A={type:"grid",columns:2,items:Bu(u,x,l)},P=function(){return{type:"panel",items:[A]}},j=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[A]},Hs(u,"table")]}},Y=bs(u)?j():P();u.windowManager.open({title:"Table Properties",size:"normal",body:Y,onSubmit:Lt(Jk,u,h,y),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:y})},Jn=function(u){return dd(Do(u),ci(u))},qC=function(u){return gs(Do(u),ci(u))},wh=function(u,l,d,h,y){var x=ci(u),A=function(){return Jn(u).each(function(en){_a(en,x).filter(Bt(x)).each(function(yn){var sr=Xe.fromText("");if(la(yn,sr),ju(yn),u.dom.isEmpty(u.getBody()))u.setContent(""),u.selection.setCursorLocation();else{var Gn=u.dom.createRng();Gn.setStart(sr.dom,0),Gn.setEnd(sr.dom,0),u.selection.setRng(Gn),u.nodeChanged()}})})},P=function(en){return Jn(u).each(function(yn){var sr=wv(u)||Hm(u)||th(u);sr||_a(yn,x).each(function(Gn){en==="relative"&&!Aw(Gn)?nh(Gn):en==="fixed"&&!fv(Gn)?i1(Gn):en==="responsive"&&!Jg(Gn)&&u1(Gn),li(Gn),Du(u,Gn.dom,Vo)})})},j=function(en){return _a(en,x)},Y=function(en){return qC(u).bind(function(yn){return j(yn).map(function(sr){return en(sr,yn)})})},le=function(en,yn){Y(function(sr){u.formatter.toggle("tableclass",{value:yn},sr.dom),Du(u,sr.dom,Qp)})},Me=function(en,yn){Y(function(sr){var Gn=fi(h),eo=tn(Gn,function(hu){return u.formatter.match("tablecellclass",{value:yn},hu.dom)}),Qo=eo?u.formatter.remove:u.formatter.apply;Et(Gn,function(hu){return Qo("tablecellclass",{value:yn},hu.dom)}),Du(u,sr.dom,Qp)})},Qe=function(){Jn(u).each(function(en){_a(en,x).each(function(yn){pn(yn,"caption").fold(function(){var sr=Xe.fromTag("caption");Ga(sr,Xe.fromText("Caption")),hT(yn,sr,0),u.selection.setCursorLocation(sr.dom,0)},function(sr){Ia("caption")(en)&&Gs("td",yn).each(function(Gn){return u.selection.setCursorLocation(Gn.dom,0)}),ju(sr)}),Du(u,yn.dom,Vo)})})},Ve=function(en){u.focus()},Pe=function(en,yn){return yn===void 0&&(yn=!1),Y(function(sr,Gn){var eo=iv(h,sr,Gn);en(sr,eo,yn).each(Ve)})},lt=function(){return Y(function(en,yn){var sr=iv(h,en,yn),Gn=Ma(Ht,Xe.fromDom(u.getDoc()),W.none());return MC(en,sr,Gn)})},ct=function(){return Y(function(en,yn){var sr=iv(h,en,yn);return BC(en,sr)})},qt=function(en,yn){return yn().each(function(sr){var Gn=ut(sr,function(eo){return zr(eo)});Y(function(eo,Qo){var hu=ms(Xe.fromDom(u.getDoc())),Dr=Sw(h,Qo,Gn,hu);en(eo,Dr).each(Ve)})})},xr=function(en){return function(yn,sr){return Ei(sr,"type").each(function(Gn){Pe(en(Gn),sr.no_events)})}};qr({mceTableSplitCells:function(){return Pe(l.unmergeCells)},mceTableMergeCells:function(){return Pe(l.mergeCells)},mceTableInsertRowBefore:function(){return Pe(l.insertRowsBefore)},mceTableInsertRowAfter:function(){return Pe(l.insertRowsAfter)},mceTableInsertColBefore:function(){return Pe(l.insertColumnsBefore)},mceTableInsertColAfter:function(){return Pe(l.insertColumnsAfter)},mceTableDeleteCol:function(){return Pe(l.deleteColumn)},mceTableDeleteRow:function(){return Pe(l.deleteRow)},mceTableCutCol:function(){return ct().each(function(en){y.setColumns(en),Pe(l.deleteColumn)})},mceTableCutRow:function(){return lt().each(function(en){y.setRows(en),Pe(l.deleteRow)})},mceTableCopyCol:function(){return ct().each(function(en){return y.setColumns(en)})},mceTableCopyRow:function(){return lt().each(function(en){return y.setRows(en)})},mceTablePasteColBefore:function(){return qt(l.pasteColsBefore,y.getColumns)},mceTablePasteColAfter:function(){return qt(l.pasteColsAfter,y.getColumns)},mceTablePasteRowBefore:function(){return qt(l.pasteRowsBefore,y.getRows)},mceTablePasteRowAfter:function(){return qt(l.pasteRowsAfter,y.getRows)},mceTableDelete:A,mceTableCellToggleClass:Me,mceTableToggleClass:le,mceTableToggleCaption:Qe,mceTableSizingMode:function(en,yn){return P(yn)},mceTableCellType:xr(function(en){return en==="th"?l.makeCellsHeader:l.unmakeCellsHeader}),mceTableColType:xr(function(en){return en==="th"?l.makeColumnsHeader:l.unmakeColumnsHeader}),mceTableRowType:xr(function(en){switch(en){case"header":return l.makeRowsHeader;case"footer":return l.makeRowsFooter;default:return l.makeRowsBody}})},function(en,yn){return u.addCommand(yn,en)}),qr({mceTableProps:Lt(GC,u,!1),mceTableRowProps:Lt(Cs,u),mceTableCellProps:Lt(HC,u,h)},function(en,yn){return u.addCommand(yn,function(){return en()})}),u.addCommand("mceInsertTable",function(en,yn){yr(yn)&&ii(yn).length>0?DC(u,yn.rows,yn.columns,yn.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):GC(u,!0)}),u.addCommand("mceTableApplyCellStyle",function(en,yn){var sr=function(Qo){return"tablecell"+Qo.toLowerCase().replace("-","")};if(yr(yn)){var Gn=fi(h);if(Gn.length!==0){var eo=ou(yn,function(Qo,hu){return u.formatter.has(sr(hu))&&Xt(Qo)});Se(eo)||(qr(eo,function(Qo,hu){Et(Gn,function(Dr){gl.normal(u,Dr.dom).setFormat(sr(hu),Qo)})}),j(Gn[0]).each(function(Qo){return Du(u,Qo.dom,Qp)}))}}})},rg=function(u,l,d){var h=ci(u),y=function(x){return gs(Do(u)).bind(function(A){return _a(A,h).map(function(P){var j=iv(d,P,A);return x(P,j)})}).getOr("")};qr({mceTableRowType:function(){return y(l.getTableRowType)},mceTableCellType:function(){return y(l.getTableCellType)},mceTableColType:function(){return y(l.getTableColType)}},function(x,A){return u.addQueryValueHandler(A,x)})},F1=function(){var u=Hd(),l=Hd();return{getRows:u.get,setRows:function(d){d.fold(u.clear,u.set),l.clear()},clearRows:u.clear,getColumns:l.get,setColumns:function(d){d.fold(l.clear,l.set),u.clear()},clearColumns:l.clear}},ag={remove_similar:!0,inherit:!1},og=an({selector:"td,th"},ag),Zk={tablecellbackgroundcolor:an({styles:{backgroundColor:"%value"}},og),tablecellverticalalign:an({styles:{"vertical-align":"%value"}},og),tablecellbordercolor:an({styles:{borderColor:"%value"}},og),tablecellclass:an({classes:["%value"]},og),tableclass:an({selector:"table",classes:["%value"]},ag),tablecellborderstyle:an({styles:{borderStyle:"%value"}},og),tablecellborderwidth:an({styles:{borderWidth:"%value"}},og)},Qk=function(u){u.formatter.register(Zk)},Ry=Rl.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),_y=function(u){return u===void 0&&(u=void 0),Ry.none(u)},Ud=an(an({},Ry),{none:_y}),L1=function(u,l,d,h,y){y===void 0&&(y=Mt);var x=h===1;if(!x&&d<=0)return Ud.first(u[0]);if(x&&d>=u.length-1)return Ud.last(u[u.length-1]);var A=d+h,P=u[A];return y(P)?Ud.middle(l,P):L1(u,l,A,h,y)},KC=function(u,l){return _a(u,l).bind(function(d){var h=df(d),y=kt(h,function(x){return Qn(u,x)});return y.map(function(x){return{index:x,all:h}})})},e4=function(u,l,d){var h=KC(u,d);return h.fold(function(){return Ud.none(u)},function(y){return L1(y.all,u,y.index,1,l)})},By=function(u,l,d){var h=KC(u,d);return h.fold(function(){return Ud.none()},function(y){return L1(y.all,u,y.index,-1,l)})},t4=function(u,l,d,h){return{start:u,soffset:l,finish:d,foffset:h}},Ch={create:t4},My=Rl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Zt=function(u,l,d,h){return u.fold(l,d,h)},XC=function(u){return u.fold(_n,_n,_n)},n4=My.before,YC=My.on,ig=My.after,Mu={before:n4,on:YC,after:ig,cata:Zt,getStart:XC},Sh=Rl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),r4=function(u){return Sh.exact(u.start,u.soffset,u.finish,u.foffset)},Py=function(u){return u.match({domRange:function(l){return Xe.fromDom(l.startContainer)},relative:function(l,d){return Mu.getStart(l)},exact:function(l,d,h,y){return l}})},H1=Sh.domRange,JC=Sh.relative,ZC=Sh.exact,QC=function(u){var l=Py(u);return Jc(l)},eS=Ch.create,Pf={domRange:H1,relative:JC,exact:ZC,exactFromRange:r4,getWin:QC,range:eS},a4=function(u,l){var d=u.document.createRange();return d.selectNode(l.dom),d},o4=function(u,l){var d=u.document.createRange();return ug(d,l),d},ug=function(u,l){return u.selectNodeContents(l.dom)},i4=function(u,l){l.fold(function(d){u.setStartBefore(d.dom)},function(d,h){u.setStart(d.dom,h)},function(d){u.setStartAfter(d.dom)})},u4=function(u,l){l.fold(function(d){u.setEndBefore(d.dom)},function(d,h){u.setEnd(d.dom,h)},function(d){u.setEndAfter(d.dom)})},Mr=function(u,l,d){var h=u.document.createRange();return i4(h,l),u4(h,d),h},sg=function(u,l,d,h,y){var x=u.document.createRange();return x.setStart(l.dom,d),x.setEnd(h.dom,y),x},_v=function(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom,width:u.width,height:u.height}},ql=function(u){var l=u.getClientRects(),d=l.length>0?l[0]:u.getBoundingClientRect();return d.width>0||d.height>0?W.some(d).map(_v):W.none()},Bv=Rl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gu=function(u,l,d){return l(Xe.fromDom(d.startContainer),d.startOffset,Xe.fromDom(d.endContainer),d.endOffset)},V1=function(u,l){return l.match({domRange:function(d){return{ltr:Ct(d),rtl:W.none}},relative:function(d,h){return{ltr:Si(function(){return Mr(u,d,h)}),rtl:Si(function(){return W.some(Mr(u,h,d))})}},exact:function(d,h,y,x){return{ltr:Si(function(){return sg(u,d,h,y,x)}),rtl:Si(function(){return W.some(sg(u,y,x,d,h))})}}})},xh=function(u,l){var d=l.ltr();if(d.collapsed){var h=l.rtl().filter(function(y){return y.collapsed===!1});return h.map(function(y){return Bv.rtl(Xe.fromDom(y.endContainer),y.endOffset,Xe.fromDom(y.startContainer),y.startOffset)}).getOrThunk(function(){return gu(u,Bv.ltr,d)})}else return gu(u,Bv.ltr,d)},cg=function(u,l){var d=V1(u,l);return xh(u,d)},Mv=function(u,l){var d=cg(u,l);return d.match({ltr:function(h,y,x,A){var P=u.document.createRange();return P.setStart(h.dom,y),P.setEnd(x.dom,A),P},rtl:function(h,y,x,A){var P=u.document.createRange();return P.setStart(x.dom,A),P.setEnd(h.dom,y),P}})};Bv.ltr,Bv.rtl;var s4=function(u,l,d,h,y){if(y===0)return 0;if(l===h)return y-1;for(var x=h,A=1;A<y;A++){var P=u(A),j=Math.abs(l-P.left);if(d<=P.bottom){if(d<P.top||j>x)return A-1;x=j}}return 0},tS=function(u,l,d){return l>=u.left&&l<=u.right&&d>=u.top&&d<=u.bottom},U1=function(u,l,d,h,y){var x=function(Y){var le=u.dom.createRange();return le.setStart(l.dom,Y),le.collapse(!0),le},A=function(Y){var le=x(Y);return le.getBoundingClientRect()},P=Tp(l).length,j=s4(A,d,h,y.right,P);return x(j)},c4=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var x=y.getClientRects(),A=jr(x,function(P){return tS(P,d,h)?W.some(P):W.none()});return A.map(function(P){return U1(u,l,d,h,P)})},ur=function(u,l,d,h){var y=u.dom.createRange(),x=T(l);return jr(x,function(A){return y.selectNode(A.dom),tS(y.getBoundingClientRect(),d,h)?Ic(u,A,d,h):W.none()})},Ic=function(u,l,d,h){return uu(l)?c4(u,l,d,h):ur(u,l,d,h)},lg=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var x=y.getBoundingClientRect(),A=Math.max(x.left,Math.min(x.right,d)),P=Math.max(x.top,Math.min(x.bottom,h));return Ic(u,l,A,P)},nS=!0,Th=!1,vr=function(u,l){return l-u.left<u.right-l?nS:Th},Ny=function(u,l,d){var h=u.dom.createRange();return h.selectNode(l.dom),h.collapse(d),h},rS=function(u,l,d){var h=u.dom.createRange();h.selectNode(l.dom);var y=h.getBoundingClientRect(),x=vr(y,d),A=x===nS?Gg:Mp;return A(l).map(function(P){return Ny(u,P,x)})},kh=function(u,l,d){var h=l.dom.getBoundingClientRect(),y=vr(h,d);return W.some(Ny(u,l,y))},aS=function(u,l,d){var h=T(l).length===0?kh:rS;return h(u,l,d)},Eh=function(u,l,d){var h,y;return W.from((y=(h=u.dom).caretPositionFromPoint)===null||y===void 0?void 0:y.call(h,l,d)).bind(function(x){if(x.offsetNode===null)return W.none();var A=u.dom.createRange();return A.setStart(x.offsetNode,x.offset),A.collapse(),W.some(A)})},Nf=function(u,l,d){var h,y;return W.from((y=(h=u.dom).caretRangeFromPoint)===null||y===void 0?void 0:y.call(h,l,d))},$y=function(u,l,d,h){var y=u.dom.createRange();y.selectNode(l.dom);var x=y.getBoundingClientRect(),A=Math.max(x.left,Math.min(x.right,d)),P=Math.max(x.top,Math.min(x.bottom,h));return lg(u,l,A,P)},oS=function(u,l,d){return Xe.fromPoint(u,l,d).bind(function(h){var y=function(){return aS(u,h,l)};return T(h).length===0?y():$y(u,h,l,d).orThunk(y)})},l4=function(){return document.caretPositionFromPoint?Eh:document.caretRangeFromPoint?Nf:oS}(),f4=function(u,l,d){var h=Xe.fromDom(u.document);return l4(h,l,d).map(function(y){return Ch.create(Xe.fromDom(y.startContainer),y.startOffset,Xe.fromDom(y.endContainer),y.endOffset)})},Pv=function(u,l){var d=Sr(u);return d==="input"?Mu.after(u):qn(["br","img"],d)?l===0?Mu.before(u):Mu.after(u):Mu.on(u,l)},Wd=function(u,l){var d=u.fold(Mu.before,Pv,Mu.after),h=l.fold(Mu.before,Pv,Mu.after);return Pf.relative(d,h)},fg=function(u,l,d,h){var y=Pv(u,l),x=Pv(d,h);return Pf.relative(y,x)},iS=function(u){return u.match({domRange:function(l){var d=Xe.fromDom(l.startContainer),h=Xe.fromDom(l.endContainer);return fg(d,l.startOffset,h,l.endOffset)},relative:Wd,exact:fg})},zy=function(u,l,d,h){var y=Xs(u),x=y.dom.createRange();return x.setStart(u.dom,l),x.setEnd(d.dom,h),x},v4=function(u,l,d,h){var y=zy(u,l,d,h),x=Qn(u,d)&&l===h;return y.collapsed&&!x},W1=function(u){return W.from(u.getSelection())},j1=function(u,l){W1(u).each(function(d){d.removeAllRanges(),d.addRange(l)})},Iy=function(u,l,d,h,y){var x=sg(u,l,d,h,y);j1(u,x)},d4=function(u,l,d,h,y,x){l.collapse(d.dom,h),l.extend(y.dom,x)},Fy=function(u,l){return cg(u,l).match({ltr:function(d,h,y,x){Iy(u,d,h,y,x)},rtl:function(d,h,y,x){W1(u).each(function(A){if(A.setBaseAndExtent)A.setBaseAndExtent(d.dom,h,y.dom,x);else if(A.extend)try{d4(u,A,d,h,y,x)}catch{Iy(u,y,x,d,h)}else Iy(u,y,x,d,h)})}})},G1=function(u,l,d,h,y){var x=fg(l,d,h,y);Fy(u,x)},q1=function(u,l,d){var h=Wd(l,d);Fy(u,h)},Ly=function(u){var l=Pf.getWin(u).dom,d=function(y,x,A,P){return sg(l,y,x,A,P)},h=iS(u);return cg(l,h).match({ltr:d,rtl:d})},jd=function(u){if(u.rangeCount>0){var l=u.getRangeAt(0),d=u.getRangeAt(u.rangeCount-1);return W.some(Ch.create(Xe.fromDom(l.startContainer),l.startOffset,Xe.fromDom(d.endContainer),d.endOffset))}else return W.none()},K1=function(u){if(u.anchorNode===null||u.focusNode===null)return jd(u);var l=Xe.fromDom(u.anchorNode),d=Xe.fromDom(u.focusNode);return v4(l,u.anchorOffset,d,u.focusOffset)?W.some(Ch.create(l,u.anchorOffset,d,u.focusOffset)):jd(u)},Hy=function(u,l,d){d===void 0&&(d=!0);var h=d?o4:a4,y=h(u,l);j1(u,y)},X1=function(u){return W1(u).filter(function(l){return l.rangeCount>0}).bind(K1)},Oh=function(u){return X1(u).map(function(l){return Pf.exact(l.start,l.soffset,l.finish,l.foffset)})},uS=function(u,l){var d=Mv(u,l);return ql(d)},m4=function(u,l,d){return f4(u,l,d)},sS=function(u){W1(u).each(function(l){return l.removeAllRanges()})},cS=tinymce.util.Tools.resolve("tinymce.util.VK"),Vy=function(u,l,d){return Uy(u,l,e4(d,Im))},lS=function(u,l,d){return Uy(u,l,By(d,Im))},fS=function(u,l){var d=Pf.exact(l,0,l,0);return Ly(d)},Uy=function(u,l,d){return d.fold(W.none,W.none,function(h,y){return Gg(y).map(function(x){return fS(u,x)})},function(h){return u.execCommand("mceTableInsertRowAfter"),Vy(u,l,h)})},Wy=["table","li","dl"],g4=function(u,l,d){if(u.keyCode===cS.TAB){var h=Ku(l),y=function(P){var j=Sr(P);return Qn(P,h)||qn(Wy,j)},x=l.selection.getRng(),A=Xe.fromDom(u.shiftKey?x.startContainer:x.endContainer);el(A,y).each(function(P){u.preventDefault(),_a(P,y).each(d.clear),l.selection.collapse(u.shiftKey);var j=u.shiftKey?lS:Vy,Y=j(l,y,P);Y.each(function(le){l.selection.setRng(le)})})}},h4=function(u,l){return{selection:u,kill:l}},vg={create:h4},p4=function(u,l,d,h){return{start:Mu.on(u,l),finish:Mu.on(d,h)}},Nv={create:p4},vS=function(u,l){var d=Mv(u,l);return Ch.create(Xe.fromDom(d.startContainer),d.startOffset,Xe.fromDom(d.endContainer),d.endOffset)},Gd=Nv.create,Y1=function(u,l,d,h,y,x,A){return Qn(d,y)&&h===x?W.none():Wa(d,"td,th",l).bind(function(P){return Wa(y,"td,th",l).bind(function(j){return dS(u,l,P,j,A)})})},dS=function(u,l,d,h,y){return Qn(d,h)?W.none():Qf(d,h,l).bind(function(x){var A=x.boxes.getOr([]);return A.length>1?(y(u,A,x.start,x.finish),W.some(vg.create(W.some(Gd(d,0,d,Dc(d))),!0))):W.none()})},jy=function(u,l,d,h,y){var x=function(A){return y.clearBeforeUpdate(d),y.selectRange(d,A.boxes,A.start,A.finish),A.boxes};return ym(h,u,l,y.firstSelectedSelector,y.lastSelectedSelector).map(x)},Ah=function(u,l){return{item:u,mode:l}},Gy=function(u,l,d,h){return h===void 0&&(h=qd),u.property().parent(l).map(function(y){return Ah(y,h)})},qd=function(u,l,d,h){return h===void 0&&(h=Dh),d.sibling(u,l).map(function(y){return Ah(y,h)})},Dh=function(u,l,d,h){h===void 0&&(h=Dh);var y=u.property().children(l),x=d.first(y);return x.map(function(A){return Ah(A,h)})},b4=[{current:Gy,next:qd,fallback:W.none()},{current:qd,next:Dh,fallback:W.some(Gy)},{current:Dh,next:Dh,fallback:W.some(qd)}],mS=function(u,l,d,h,y){y===void 0&&(y=b4);var x=nt(y,function(A){return A.current===d});return x.bind(function(A){return A.current(u,l,h,A.next).orThunk(function(){return A.fallback.bind(function(P){return mS(u,l,P,h)})})})},dg=function(){var u=function(d,h){return d.query().prevSibling(h)},l=function(d){return d.length>0?W.some(d[d.length-1]):W.none()};return{sibling:u,first:l}},y4=function(){var u=function(d,h){return d.query().nextSibling(h)},l=function(d){return d.length>0?W.some(d[0]):W.none()};return{sibling:u,first:l}},Rh={left:dg,right:y4},_h=function(u,l,d,h,y,x){var A=mS(u,l,h,y);return A.bind(function(P){return x(P.item)?W.none():d(P.item)?W.some(P.item):_h(u,P.item,d,P.mode,y,x)})},gS=function(u,l,d,h){return _h(u,l,d,qd,Rh.left(),h)},lc=function(u,l,d,h){return _h(u,l,d,qd,Rh.right(),h)},qy=function(u){return function(l){return u.property().children(l).length===0}},J1=function(u,l,d){return Ky(u,l,qy(u),d)},w4=function(u,l,d){return hS(u,l,qy(u),d)},Ky=gS,hS=lc,Z1=$g(),Bh=function(u,l){return J1(Z1,u,l)},Xy=function(u,l){return w4(Z1,u,l)},pS=function(u,l,d){return Ky(Z1,u,l,d)},bS=function(u,l,d){return hS(Z1,u,l,d)},$f=function(u,l,d){return La(u,l,d).isSome()},Q1=Rl.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),C4=function(u,l,d){var h=u.getRect(l),y=u.getRect(d);return y.right>h.left&&y.left<h.right},Yy=function(u){return Wa(u,"tr")},S4=function(u,l,d,h,y,x,A){return Wa(h,"td,th",A).bind(function(P){return Wa(l,"td,th",A).map(function(j){return Qn(P,j)?Qn(h,P)&&Dc(P)===y?x(j):Q1.none("in same cell"):Yt(Yy,[P,j]).fold(function(){return C4(u,j,P)?Q1.success():x(j)},function(Y){return x(j)})})}).getOr(Q1.none("default"))},Jy=function(u,l,d,h,y){return u.fold(l,d,h,y)},mg=an(an({},Q1),{verify:S4,cata:Jy}),eb=function(u,l,d,h){return{parent:u,children:l,element:d,index:h}},x4=function(u){return Fa(u).bind(function(l){var d=T(l);return yS(d,u).map(function(h){return eb(l,d,u,h)})})},yS=function(u,l){return kt(u,Lt(Qn,l))},Zy=function(u){return Sr(u)==="br"},Qy=function(u,l,d){return l(u,d).bind(function(h){return uu(h)&&Tp(h).trim().length===0?Qy(h,l,d):W.some(h)})},T4=function(u,l,d){return d.traverse(l).orThunk(function(){return Qy(l,d.gather,u)}).map(d.relative)},tb=function(u,l){return I(u,l).filter(Zy).orThunk(function(){return I(u,l-1).filter(Zy)})},wS=function(u,l,d,h){return tb(l,d).bind(function(y){return h.traverse(y).fold(function(){return Qy(y,h.gather,u).map(h.relative)},function(x){return x4(x).map(function(A){return Mu.on(A.parent,A.index)})})})},CS=function(u,l,d,h){var y=Zy(l)?T4(u,l,h):wS(u,l,d,h);return y.map(function(x){return{start:x,finish:x}})},SS=function(u){return mg.cata(u,function(l){return W.none()},function(){return W.none()},function(l){return W.some(Vm(l,0))},function(l){return W.some(Vm(l,Dc(l)))})},Mh=function(u,l){return{left:u.left,top:u.top+l,right:u.right,bottom:u.bottom+l}},Ph=function(u,l){return{left:u.left,top:u.top-l,right:u.right,bottom:u.bottom-l}},Kd=function(u,l,d){return{left:u.left+l,top:u.top+d,right:u.right+l,bottom:u.bottom+d}},xS=function(u){return u.top},TS=function(u){return u.bottom},nb=function(u,l,d){return d>=0&&d<Dc(l)?u.getRangedRect(l,d,l,d+1):d>0?u.getRangedRect(l,d-1,l,d):W.none()},rb=function(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom}},e2=function(u,l){return W.some(u.getRect(l))},t2=function(u,l,d){return Lr(l)?e2(u,l).map(rb):uu(l)?nb(u,l,d).map(rb):W.none()},kS=function(u,l){return Lr(l)?e2(u,l).map(rb):uu(l)?u.getRangedRect(l,0,l,Dc(l)).map(rb):W.none()},Kl=5,n2=100,Fc=Rl.generate([{none:[]},{retry:["caret"]}]),k4=function(u,l){return u.left<l.left||Math.abs(l.right-u.left)<1||u.left>l.right},zf=function(u,l,d){return wp(l,Nc).fold(Rn,function(h){return kS(u,h).exists(function(y){return k4(d,y)})})},ES=function(u,l,d,h,y){var x=Mh(y,Kl);return Math.abs(d.bottom-h.bottom)<1||d.top>y.bottom?Fc.retry(x):d.top===y.bottom?Fc.retry(Mh(y,1)):zf(u,l,y)?Fc.retry(Kd(x,Kl,0)):Fc.none()},OS=function(u,l,d,h,y){var x=Ph(y,Kl);return Math.abs(d.top-h.top)<1||d.bottom<y.top?Fc.retry(x):d.bottom===y.top?Fc.retry(Ph(y,1)):zf(u,l,y)?Fc.retry(Kd(x,Kl,0)):Fc.none()},E4={point:xS,adjuster:OS,move:Ph,gather:Bh},O4={point:TS,adjuster:ES,move:Mh,gather:Xy},gg=function(u,l,d){return u.elementFromPoint(l,d).filter(function(h){return Sr(h)==="table"}).isSome()},hg=function(u,l,d,h,y){return ab(u,l,d,l.move(h,Kl),y)},ab=function(u,l,d,h,y){return y===0?W.some(h):gg(u,h.left,l.point(h))?hg(u,l,d,h,y-1):u.situsFromPoint(h.left,l.point(h)).bind(function(x){return x.start.fold(W.none,function(A){return kS(u,A).bind(function(P){return l.adjuster(u,A,P,d,h).fold(W.none,function(j){return ab(u,l,d,j,y-1)})}).orThunk(function(){return W.some(h)})},W.none)})},AS=function(u,l){return u.situsFromPoint(l.left,l.bottom+Kl)},$v=function(u,l){return u.situsFromPoint(l.left,l.top-Kl)},zv=function(u,l,d){return u.point(l)>d.getInnerHeight()?W.some(u.point(l)-d.getInnerHeight()):u.point(l)<0?W.some(-u.point(l)):W.none()},DS=function(u,l,d){var h=u.move(d,Kl),y=ab(l,u,d,h,n2).getOr(h);return zv(u,y,l).fold(function(){return l.situsFromPoint(y.left,u.point(y))},function(x){return l.scrollBy(0,x),l.situsFromPoint(y.left,u.point(y)-x)})},Nh={tryUp:Lt(DS,E4),tryDown:Lt(DS,O4),ieTryUp:$v,ieTryDown:AS,getJumpSize:Ct(Kl)},Xd=20,sn=function(u,l,d){return u.getSelection().bind(function(h){return CS(l,h.finish,h.foffset,d).fold(function(){return W.some(Vm(h.finish,h.foffset))},function(y){var x=u.fromSitus(y),A=mg.verify(u,h.finish,h.foffset,x.finish,x.foffset,d.failure,l);return SS(A)})})},r2=function(u,l,d,h,y,x){return x===0?W.none():If(u,l,d,h,y).bind(function(A){var P=u.fromSitus(A),j=mg.verify(u,d,h,P.finish,P.foffset,y.failure,l);return mg.cata(j,function(){return W.none()},function(){return W.some(A)},function(Y){return Qn(d,Y)&&h===0?ob(u,d,h,Ph,y):r2(u,l,Y,0,y,x-1)},function(Y){return Qn(d,Y)&&h===Dc(Y)?ob(u,d,h,Mh,y):r2(u,l,Y,Dc(Y),y,x-1)})})},ob=function(u,l,d,h,y){return t2(u,l,d).bind(function(x){return a2(u,y,h(x,Nh.getJumpSize()))})},a2=function(u,l,d){var h=mn().browser;return h.isChrome()||h.isSafari()||h.isFirefox()||h.isEdge()?l.otherRetry(u,d):h.isIE()?l.ieRetry(u,d):W.none()},If=function(u,l,d,h,y){return t2(u,d,h).bind(function(x){return a2(u,y,x)})},ib=function(u,l,d){return sn(u,l,d).bind(function(h){return r2(u,l,h.element,h.offset,d,Xd).map(u.fromSitus)})},$h=function(u,l){return $f(u,function(d){return Fa(d).exists(function(h){return Qn(h,l)})})},ub=function(u,l,d,h,y){return Wa(h,"td,th",l).bind(function(x){return Wa(x,"table",l).bind(function(A){return $h(y,A)?ib(u,l,d).bind(function(P){return Wa(P.finish,"td,th",l).map(function(j){return{start:x,finish:j,range:P}})}):W.none()})})},o2=function(u,l,d,h,y,x){return mn().browser.isIE()?W.none():x(h,l).orThunk(function(){return ub(u,l,d,h,y).map(function(A){var P=A.range;return vg.create(W.some(Gd(P.start,P.soffset,P.finish,P.foffset)),!0)})})},i2=function(u,l){return Wa(u,"tr",l).bind(function(d){return Wa(d,"table",l).bind(function(h){var y=is(h,"tr");return Qn(d,y[0])?pS(h,function(x){return Mp(x).isSome()},l).map(function(x){var A=Dc(x);return vg.create(W.some(Gd(x,A,x,A)),!0)}):W.none()})})},On=function(u,l){return Wa(u,"tr",l).bind(function(d){return Wa(d,"table",l).bind(function(h){var y=is(h,"tr");return Qn(d,y[y.length-1])?bS(h,function(x){return Gg(x).isSome()},l).map(function(x){return vg.create(W.some(Gd(x,0,x,0)),!0)}):W.none()})})},RS=function(u,l,d,h,y,x,A){return ub(u,d,h,y,x).bind(function(P){return dS(l,d,P.start,P.finish,A)})},Fn=function(u,l){return Wa(u,"td,th",l)},_S=function(u,l,d,h){var y=Hd(),x=y.clear,A=function(le){y.on(function(Me){h.clearBeforeUpdate(l),Fn(le.target,d).each(function(Qe){Qf(Me,Qe,d).each(function(Ve){var Pe=Ve.boxes.getOr([]);if(Pe.length===1){var lt=Pe[0],ct=Kp(lt)==="false",qt=Zc(qp(le.target),lt,Qn);ct&&qt&&(h.selectRange(l,Pe,lt,lt),u.selectContents(lt))}else Pe.length>1&&(h.selectRange(l,Pe,Ve.start,Ve.finish),u.selectContents(Qe))})})})},P=function(le){h.clear(l),Fn(le.target,d).each(y.set)},j=function(le){A(le)},Y=function(le){A(le),x()};return{clearstate:x,mousedown:P,mouseover:j,mouseup:Y}},zh={traverse:M,gather:Xy,relative:Mu.before,otherRetry:Nh.tryDown,ieRetry:Nh.ieTryDown,failure:mg.failedDown},sb={traverse:_,gather:Bh,relative:Mu.before,otherRetry:Nh.tryUp,ieRetry:Nh.ieTryUp,failure:mg.failedUp},Iv=function(u){return function(l){return l===u}},u2=Iv(38),cb=Iv(40),Ih=function(u){return u>=37&&u<=40},BS={isBackward:Iv(37),isForward:Iv(39)},bn={isBackward:Iv(39),isForward:Iv(37)},MS=function(u){var l=u!==void 0?u.dom:document,d=l.body.scrollLeft||l.documentElement.scrollLeft,h=l.body.scrollTop||l.documentElement.scrollTop;return aa(d,h)},PS=function(u,l,d){var h=d!==void 0?d.dom:document,y=h.defaultView;y&&y.scrollBy(u,l)},pg=function(u){var l=function(ct,qt){return Xe.fromPoint(Xe.fromDom(u.document),ct,qt)},d=function(ct){return ct.dom.getBoundingClientRect()},h=function(ct,qt,xr,en){var yn=Pf.exact(ct,qt,xr,en);return uS(u,yn)},y=function(){return Oh(u).map(function(ct){return vS(u,ct)})},x=function(ct){var qt=Pf.relative(ct.start,ct.finish);return vS(u,qt)},A=function(ct,qt){return m4(u,ct,qt).map(function(xr){return Nv.create(xr.start,xr.soffset,xr.finish,xr.foffset)})},P=function(){sS(u)},j=function(ct){ct===void 0&&(ct=!1),Oh(u).each(function(qt){return qt.fold(function(xr){return xr.collapse(ct)},function(xr,en){var yn=ct?xr:en;q1(u,yn,yn)},function(xr,en,yn,sr){var Gn=ct?xr:yn,eo=ct?en:sr;G1(u,Gn,eo,Gn,eo)})})},Y=function(ct){Hy(u,ct,!1)},le=function(ct){Hy(u,ct)},Me=function(ct){G1(u,ct.start,ct.soffset,ct.finish,ct.foffset)},Qe=function(ct,qt){q1(u,ct,qt)},Ve=function(){return u.innerHeight},Pe=function(){var ct=MS(Xe.fromDom(u.document));return ct.top},lt=function(ct,qt){PS(ct,qt,Xe.fromDom(u.document))};return{elementFromPoint:l,getRect:d,getRangedRect:h,getSelection:y,fromSitus:x,situsFromPoint:A,clearSelection:P,collapseSelection:j,setSelection:Me,setRelativeSelection:Qe,selectNode:Y,selectContents:le,getInnerHeight:Ve,getScrollY:Pe,scrollBy:lt}},Yd=function(u,l){return{rows:u,cols:l}},NS=function(u,l,d,h){var y=pg(u),x=_S(y,l,d,h);return{clearstate:x.clearstate,mousedown:x.mousedown,mouseover:x.mouseover,mouseup:x.mouseup}},$S=function(u,l,d,h){var y=pg(u),x=function(){return h.clear(l),W.none()},A=function(j,Y,le,Me,Qe,Ve){var Pe=j.raw,lt=Pe.which,ct=Pe.shiftKey===!0,qt=bm(l,h.selectedSelector).fold(function(){return Ih(lt)&&!ct&&h.clearBeforeUpdate(l),cb(lt)&&ct?Lt(RS,y,l,d,zh,Me,Y,h.selectRange):u2(lt)&&ct?Lt(RS,y,l,d,sb,Me,Y,h.selectRange):cb(lt)?Lt(o2,y,d,zh,Me,Y,On):u2(lt)?Lt(o2,y,d,sb,Me,Y,i2):W.none},function(xr){var en=function(yn){return function(){var sr=jr(yn,function(Gn){return jy(Gn.rows,Gn.cols,l,xr,h)});return sr.fold(function(){return xc(l,h.firstSelectedSelector,h.lastSelectedSelector).map(function(Gn){var eo=cb(lt)||Ve.isForward(lt)?Mu.after:Mu.before;return y.setRelativeSelection(Mu.on(Gn.first,0),eo(Gn.table)),h.clear(l),vg.create(W.none(),!0)})},function(Gn){return W.some(vg.create(W.none(),!0))})}};return cb(lt)&&ct?en([Yd(1,0)]):u2(lt)&&ct?en([Yd(-1,0)]):Ve.isBackward(lt)&&ct?en([Yd(0,-1),Yd(-1,0)]):Ve.isForward(lt)&&ct?en([Yd(0,1),Yd(1,0)]):Ih(lt)&&!ct?x:W.none});return qt()},P=function(j,Y,le,Me,Qe){return bm(l,h.selectedSelector).fold(function(){var Ve=j.raw,Pe=Ve.which,lt=Ve.shiftKey===!0;return lt&&Ih(Pe)?Y1(l,d,Y,le,Me,Qe,h.selectRange):W.none()},W.none)};return{keydown:A,keyup:P}},s2=function(u,l,d,h){var y=pg(u);return function(x,A){h.clearBeforeUpdate(l),Qf(x,A,d).each(function(P){var j=P.boxes.getOr([]);h.selectRange(l,j,P.start,P.finish),y.selectContents(A),y.collapseSelection()})}},lb=function(u,l){Et(l,function(d){mv(u,d)})},zS=function(u){return function(l){oa(l,u)}},fb=function(u){return function(l){lb(l,u)}},IS=function(u){var l=zS(u.selected),d=fb([u.selected,u.lastSelected,u.firstSelected]),h=function(x){var A=is(x,u.selectedSelector);Et(A,d)},y=function(x,A,P,j){h(x),Et(A,l),oa(P,u.firstSelected),oa(j,u.lastSelected)};return{clearBeforeUpdate:h,clear:h,selectRange:y,selectedSelector:u.selectedSelector,firstSelectedSelector:u.firstSelectedSelector,lastSelectedSelector:u.lastSelectedSelector}},FS=function(u,l,d){var h=function(j){ya(j,u.selected),ya(j,u.firstSelected),ya(j,u.lastSelected)},y=function(j){zo(j,u.selected,"1")},x=function(j){A(j),d()},A=function(j){var Y=is(j,u.selectedSelector+","+u.firstSelectedSelector+","+u.lastSelectedSelector);Et(Y,h)},P=function(j,Y,le,Me){x(j),Et(Y,y),zo(le,u.firstSelected,"1"),zo(Me,u.lastSelected,"1"),l(Y,le,Me)};return{clearBeforeUpdate:A,clear:x,selectRange:P,selectedSelector:u.selectedSelector,firstSelectedSelector:u.firstSelectedSelector,lastSelectedSelector:u.lastSelectedSelector}},A4={byClass:IS,byAttr:FS},D4=function(u,l){var d=u.slice(0,l[l.length-1].row+1),h=oh(d);return Fr(h,function(y){var x=y.cells.slice(0,l[l.length-1].column+1);return ut(x,function(A){return A.element})})},R4=function(u,l){var d=u.slice(l[0].row+l[0].rowspan-1,u.length),h=oh(d);return Fr(h,function(y){var x=y.cells.slice(l[0].column+l[0].colspan-1,y.cells.length);return ut(x,function(A){return A.element})})},_4=function(u,l,d){var h=Wn.fromTable(u),y=Pc(h,l);return y.map(function(x){var A=xv(h,d,!1),P=D4(A,x),j=R4(A,x);return{upOrLeftCells:P,downOrRightCells:j}})},LS=tinymce.util.Tools.resolve("tinymce.Env"),c2=function(u){return Zr(Xe.fromDom(u.target),"ephox-snooker-resizer-bar")===!1};function dr(u,l,d){var h=function(A,P,j){d.targets().each(function(Y){var le=_a(P);le.each(function(Me){var Qe=I0(u),Ve=Ma(Ht,Xe.fromDom(u.getDoc()),Qe),Pe=_4(Me,Y,Ve);nk(u,A,P,j,Pe)})})},y=function(){return Zp(u)},x=A4.byAttr(fd,h,y);return u.on("init",function(A){var P=u.getWin(),j=Ku(u),Y=ci(u),le=function(){var Dr=u.selection,Dn=Xe.fromDom(Dr.getStart()),mr=Xe.fromDom(Dr.getEnd()),Kr=Yt(_a,[Dn,mr]);Kr.fold(function(){return x.clear(j)},Ht)},Me=NS(P,j,Y,x),Qe=$S(P,j,Y,x),Ve=s2(P,j,Y,x),Pe=function(Dr){return Dr.raw.shiftKey===!0};u.on("TableSelectorChange",function(Dr){return Ve(Dr.start,Dr.finish)});var lt=function(Dr,Dn){Pe(Dr)&&(Dn.kill&&Dr.kill(),Dn.selection.each(function(mr){var Kr=Pf.relative(mr.start,mr.finish),Pa=Mv(P,Kr);u.selection.setRng(Pa)}))},ct=function(Dr){var Dn=bd(Dr);if(Dn.raw.shiftKey&&Ih(Dn.raw.which)){var mr=u.selection.getRng(),Kr=Xe.fromDom(mr.startContainer),Pa=Xe.fromDom(mr.endContainer);Qe.keyup(Dn,Kr,mr.startOffset,Pa,mr.endOffset).each(function(Xl){lt(Dn,Xl)})}},qt=function(Dr){var Dn=bd(Dr);l().each(function(Ir){return Ir.hideBars()});var mr=u.selection.getRng(),Kr=Xe.fromDom(mr.startContainer),Pa=Xe.fromDom(mr.endContainer),Xl=vs(BS,bn)(Xe.fromDom(u.selection.getStart()));Qe.keydown(Dn,Kr,mr.startOffset,Pa,mr.endOffset,Xl).each(function(Ir){lt(Dn,Ir)}),l().each(function(Ir){return Ir.showBars()})},xr=function(Dr){return Dr.button===0},en=function(Dr){return Dr.buttons===void 0||LS.browser.isEdge()&&Dr.buttons===0?!0:(Dr.buttons&1)!==0},yn=function(Dr){Me.clearstate()},sr=function(Dr){xr(Dr)&&c2(Dr)&&Me.mousedown(bd(Dr))},Gn=function(Dr){en(Dr)&&c2(Dr)&&Me.mouseover(bd(Dr))},eo=function(Dr){xr(Dr)&&c2(Dr)&&Me.mouseup(bd(Dr))},Qo=function(){var Dr=$c(Xe.fromDom(j)),Dn=$c(0),mr=function(Kr){var Pa=Xe.fromDom(Kr.target);if(Sr(Pa)==="td"||Sr(Pa)==="th"){var Xl=Dr.get(),Ir=Dn.get();Qn(Xl,Pa)&&Kr.timeStamp-Ir<300&&(Kr.preventDefault(),Ve(Pa,Pa))}Dr.set(Pa),Dn.set(Kr.timeStamp)};return{touchEnd:mr}},hu=Qo();u.on("dragstart",yn),u.on("mousedown",sr),u.on("mouseover",Gn),u.on("mouseup",eo),u.on("touchend",hu.touchEnd),u.on("keyup",ct),u.on("keydown",qt),u.on("NodeChange",le)}),{clear:x.clear}}var HS=function(u,l){return pn(u,l).isSome()},Fh=function(u,l){var d=$c(W.none()),h=$c([]),y=W.none(),x=Ia("caption"),A=function(Dn){return y.forall(function(mr){return!mr[Dn]})},P=function(){return dd(Do(u),ci(u))},j=function(){return dd(Nt(u),ci(u))},Y=function(){return P().bind(function(Dn){return sf(ss(_a(Dn),j().bind(_a),function(mr,Kr){return Qn(mr,Kr)?x(Dn)?W.some($l(Dn)):W.some(iv(l,mr,Dn)):W.none()}))})},le=function(Dn){var mr=_a(Dn.element);return mr.map(function(Kr){var Pa=Wn.fromTable(Kr),Xl=Pc(Pa,Dn).getOr([]),Ir=ee(Xl,function(Ss,zi){return zi.isLocked&&(Ss.onAny=!0,zi.column===0?Ss.onFirst=!0:zi.column+zi.colspan>=Pa.grid.columns&&(Ss.onLast=!0)),Ss},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:q0(Pa,Dn).isSome(),unmergeable:Od(Pa,Dn).isSome(),locked:Ir}})},Me=function(){d.set(Si(Y)()),y=d.get().bind(le),Et(h.get(),function(Dn){return Dn()})},Qe=function(Dn){return Dn(),h.set(h.get().concat([Dn])),function(){h.set(Un(h.get(),function(mr){return mr!==Dn}))}},Ve=function(Dn,mr){return Qe(function(){return d.get().fold(function(){Dn.setDisabled(!0)},function(Kr){Dn.setDisabled(mr(Kr))})})},Pe=function(Dn,mr,Kr){return Qe(function(){return d.get().fold(function(){Dn.setDisabled(!0),Dn.setActive(!1)},function(Pa){Dn.setDisabled(mr(Pa)),Dn.setActive(Kr(Pa))})})},lt=function(Dn){return y.exists(function(mr){return mr.locked[Dn]})},ct=function(Dn){return Ve(Dn,function(mr){return!1})},qt=function(Dn){return Ve(Dn,function(mr){return x(mr.element)})},xr=function(Dn){return function(mr){return Ve(mr,function(Kr){return x(Kr.element)||lt(Dn)})}},en=function(Dn){return function(mr){return Ve(mr,function(Kr){return x(Kr.element)||Dn().isNone()})}},yn=function(Dn,mr){return function(Kr){return Ve(Kr,function(Pa){return x(Pa.element)||Dn().isNone()||lt(mr)})}},sr=function(Dn){return Ve(Dn,function(mr){return A("mergeable")})},Gn=function(Dn){return Ve(Dn,function(mr){return A("unmergeable")})},eo=function(Dn){return Pe(Dn,Rn,function(mr){var Kr=_a(mr.element,ci(u));return Kr.exists(function(Pa){return HS(Pa,"caption")})})},Qo=function(Dn,mr){return function(Kr){return Pe(Kr,function(Pa){return x(Pa.element)},function(){return u.queryCommandValue(Dn)===mr})}},hu=Qo("mceTableRowType","header"),Dr=Qo("mceTableColType","th");return u.on("NodeChange ExecCommand TableSelectorChange",Me),{onSetupTable:ct,onSetupCellOrRow:qt,onSetupColumn:xr,onSetupPasteable:en,onSetupPasteableColumn:yn,onSetupMergeable:sr,onSetupUnmergeable:Gn,resetTargets:Me,onSetupTableWithCaption:eo,onSetupTableRowHeaders:hu,onSetupTableColumnHeaders:Dr,targets:d.get}},Lh=function(u,l,d,h){u.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(P){return P("inserttable | cell row column | advtablesort | tableprops deletetable")}});var y=function(P){return function(){return u.execCommand(P)}};u.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:y("mceTableProps"),icon:"table",onSetup:d.onSetupTable}),u.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:y("mceTableDelete"),icon:"table-delete-table",onSetup:d.onSetupTable}),u.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:y("mceTableCellProps"),icon:"table-cell-properties",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:y("mceTableMergeCells"),icon:"table-merge-cells",onSetup:d.onSetupMergeable}),u.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:y("mceTableSplitCells"),icon:"table-split-cells",onSetup:d.onSetupUnmergeable}),u.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:y("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:y("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:y("mceTableDeleteRow"),icon:"table-delete-row",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:y("mceTableRowProps"),icon:"table-row-properties",onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:y("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:d.onSetupColumn("onFirst")}),u.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:y("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:d.onSetupColumn("onLast")}),u.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:y("mceTableDeleteCol"),icon:"table-delete-column",onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:y("mceTableCutRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:y("mceTableCopyRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:y("mceTablePasteRowBefore"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:y("mceTablePasteRowAfter"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:y("mceTableCutCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:y("mceTableCopyCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:y("mceTablePasteColBefore"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onFirst")}),u.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:y("mceTablePasteColAfter"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onLast")}),u.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:y("mceInsertTable"),icon:"table"});var x=Vd(yv(u));x.length!==0&&u.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:hh(u,l,x,"tableclass",function(P){return u.execCommand("mceTableToggleClass",!1,P)}),onSetup:d.onSetupTable});var A=Vd(N0(u));A.length!==0&&u.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:hh(u,l,A,"tablecellclass",function(P){return u.execCommand("mceTableCellToggleClass",!1,P)}),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:hh(u,l,zd,"tablecellverticalalign",Av(u,"vertical-align")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:hh(u,l,e1(u),"tablecellborderwidth",Av(u,"border-width")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:hh(u,l,ps(u),"tablecellborderstyle",Av(u,"border-style")),onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:y("mceTableToggleCaption"),icon:"table-caption",onSetup:d.onSetupTableWithCaption}),u.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(P){return P($1(u,L0(u),"background-color"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(P){return P($1(u,H0(u),"border-color"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:ph(u),onSetup:d.onSetupTableRowHeaders}),u.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Cy(u),onSetup:d.onSetupTableColumnHeaders})},vb=function(u){var l=function(h){return u.dom.is(h,"table")&&u.getBody().contains(h)},d=ll(u);d.length>0&&u.ui.registry.addContextToolbar("table",{predicate:l,items:d,scope:"node",position:"node"})},db=function(u,l,d,h){var y=function(Ve){return function(){return u.execCommand(Ve)}},x=function(Ve){u.execCommand("mceInsertTable",!1,{rows:Ve.numRows,columns:Ve.numColumns})},A={text:"Table properties",onSetup:d.onSetupTable,onAction:y("mceTableProps")},P={text:"Delete table",icon:"table-delete-table",onSetup:d.onSetupTable,onAction:y("mceTableDelete")};u.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:y("mceTableInsertRowBefore"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:y("mceTableInsertRowAfter"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:y("mceTableDeleteRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:y("mceTableRowProps"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:y("mceTableCutRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:y("mceTableCopyRow"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:y("mceTablePasteRowBefore"),onSetup:d.onSetupPasteable(h.getRows)}),u.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:y("mceTablePasteRowAfter"),onSetup:d.onSetupPasteable(h.getRows)});var j={type:"nestedmenuitem",text:"Row",getSubmenuItems:Ct("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};u.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:y("mceTableInsertColBefore"),onSetup:d.onSetupColumn("onFirst")}),u.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:y("mceTableInsertColAfter"),onSetup:d.onSetupColumn("onLast")}),u.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:y("mceTableDeleteCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:y("mceTableCutCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:y("mceTableCopyCol"),onSetup:d.onSetupColumn("onAny")}),u.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:y("mceTablePasteColBefore"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onFirst")}),u.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:y("mceTablePasteColAfter"),onSetup:d.onSetupPasteableColumn(h.getColumns,"onLast")});var Y={type:"nestedmenuitem",text:"Column",getSubmenuItems:Ct("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};u.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:y("mceTableCellProps"),onSetup:d.onSetupCellOrRow}),u.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:y("mceTableMergeCells"),onSetup:d.onSetupMergeable}),u.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:y("mceTableSplitCells"),onSetup:d.onSetupUnmergeable});var le={type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ct("tablecellprops tablemergecells tablesplitcells")};Df(u)===!1?u.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:y("mceInsertTable")}):u.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:x}]}}),u.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:y("mceInsertTable")}),u.ui.registry.addMenuItem("tableprops",A),u.ui.registry.addMenuItem("deletetable",P),u.ui.registry.addNestedMenuItem("row",j),u.ui.registry.addNestedMenuItem("column",Y),u.ui.registry.addNestedMenuItem("cell",le),u.ui.registry.addContextMenu("table",{update:function(){return d.resetTargets(),d.targets().fold(Ct(""),function(Ve){return Sr(Ve.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var Me=Vd(yv(u));Me.length!==0&&u.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return cc(u,l,Me,"tableclass",function(Ve){return u.execCommand("mceTableToggleClass",!1,Ve)})},onSetup:d.onSetupTable});var Qe=Vd(N0(u));Qe.length!==0&&u.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return cc(u,l,Qe,"tablecellclass",function(Ve){return u.execCommand("mceTableCellToggleClass",!1,Ve)})},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return cc(u,l,zd,"tablecellverticalalign",Av(u,"vertical-align"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return cc(u,l,e1(u),"tablecellborderwidth",Av(u,"border-width"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return cc(u,l,ps(u),"tablecellborderstyle",Av(u,"border-style"))},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:y("mceTableToggleCaption"),onSetup:d.onSetupTableWithCaption}),u.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return $1(u,L0(u),"background-color")},onSetup:d.onSetupCellOrRow}),u.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return $1(u,H0(u),"border-color")},onSetup:d.onSetupCellOrRow}),u.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:ph(u),onSetup:d.onSetupTableRowHeaders}),u.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Cy(u),onSetup:d.onSetupTableColumnHeaders})},VS=function(u){var l=Ki(function(){return Ku(u)},function(){return gs(Do(u),ci(u))},fd.selectedSelector),d=Fh(u,l),h=l1(u),y=dr(u,h.lazyResize,d),x=Jm(u,y,h.lazyWire),A=F1();return wh(u,x,y,l,A),rg(u,x,l),_c(u,l,x),db(u,l,d,A),Lh(u,l,d,A),vb(u),u.on("PreInit",function(){u.serializer.addTempAttr(fd.firstSelected),u.serializer.addTempAttr(fd.lastSelected),Qk(u)}),Ll(u)&&u.on("keydown",function(P){g4(P,u,y)}),u.on("remove",function(){h.destroy()}),$i(u,A,h,d)};function US(){lw.add("table",VS)}US()})();(function(){var cn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ot=tinymce.util.Tools.resolve("tinymce.util.VK"),An=function(V){var ce=typeof V;return V===null?"null":ce==="object"&&(Array.prototype.isPrototypeOf(V)||V.constructor&&V.constructor.name==="Array")?"array":ce==="object"&&(String.prototype.isPrototypeOf(V)||V.constructor&&V.constructor.name==="String")?"string":ce},Ln=function(V){return function(ce){return An(ce)===V}},Xt=function(V){return function(ce){return typeof ce===V}},yr=function(V){return function(ce){return V===ce}},ar=Ln("string"),Ar=Ln("array"),no=yr(null),So=Xt("boolean"),fo=Xt("function"),Tn=function(){},or=function(V){return function(){return V}},za=function(V){return V},Ht=function(V,ce){return V===ce},at=or(!1),cr=or(!0),Ct=function(){return _n},_n=function(){var V=function(Fe){return Fe()},ce=za,Se={fold:function(Fe,ot){return Fe()},isSome:at,isNone:cr,getOr:ce,getOrThunk:V,getOrDie:function(Fe){throw new Error(Fe||"error: getOrDie called on none.")},getOrNull:or(null),getOrUndefined:or(void 0),or:ce,orThunk:V,map:Ct,each:Tn,bind:Ct,exists:at,forall:cr,filter:function(){return Ct()},toArray:function(){return[]},toString:or("none()")};return Se}(),ye=function(V){var ce=or(V),Se=function(){return ot},Fe=function(Ut){return Ut(V)},ot={fold:function(Ut,Or){return Or(V)},isSome:cr,isNone:at,getOr:ce,getOrThunk:ce,getOrDie:ce,getOrNull:ce,getOrUndefined:ce,or:Se,orThunk:Se,map:function(Ut){return ye(Ut(V))},each:function(Ut){Ut(V)},bind:Fe,exists:Fe,forall:Fe,filter:function(Ut){return Ut(V)?ot:_n},toArray:function(){return[V]},toString:function(){return"some("+V+")"}};return ot},Lt=function(V){return V==null?_n:ye(V)},Bt={some:ye,none:Ct,from:Lt},Vr=Array.prototype.indexOf,Rn=Array.prototype.push,Mt=function(V,ce){return Vr.call(V,ce)},kn=function(V,ce){return Mt(V,ce)>-1},Tt=function(V,ce){for(var Se=V.length,Fe=new Array(Se),ot=0;ot<Se;ot++){var Ut=V[ot];Fe[ot]=ce(Ut,ot)}return Fe},vo=function(V,ce){for(var Se=0,Fe=V.length;Se<Fe;Se++){var ot=V[Se];ce(ot,Se)}},ue=function(V,ce,Se){return vo(V,function(Fe,ot){Se=ce(Se,Fe,ot)}),Se},W=function(V){for(var ce=[],Se=0,Fe=V.length;Se<Fe;++Se){if(!Ar(V[Se]))throw new Error("Arr.flatten item "+Se+" was not an array, input: "+V);Rn.apply(ce,V[Se])}return ce},gt=function(V,ce){return W(Tt(V,ce))},nr=function(V,ce){for(var Se=0;Se<V.length;Se++){var Fe=ce(V[Se],Se);if(Fe.isSome())return Fe}return Bt.none()},et=function(V,ce,Se){return Se===void 0&&(Se=Ht),V.exists(function(Fe){return Se(Fe,ce)})},Ur=function(V){for(var ce=[],Se=function(ot){ce.push(ot)},Fe=0;Fe<V.length;Fe++)V[Fe].each(Se);return ce},qn=function(V,ce){return V?Bt.some(ce):Bt.none()},D=function(V){var ce=V.getParam("link_assume_external_targets",!1);return So(ce)&&ce?1:ar(ce)&&(ce==="http"||ce==="https")?ce:0},ia=function(V){return V.getParam("link_context_toolbar",!1,"boolean")},ut=function(V){return V.getParam("link_list")},Et=function(V){return V.getParam("default_link_target")},xo=function(V){return V.getParam("target_list",!0)},wi=function(V){return V.getParam("rel_list",[],"array")},Un=function(V){return V.getParam("link_class_list",[],"array")},Ca=function(V){return V.getParam("link_title",!0,"boolean")},ee=function(V){return V.getParam("allow_unsafe_link_target",!1,"boolean")},ni=function(V){return V.getParam("link_quicklink",!1,"boolean")},nt=function(V){return V.getParam("link_default_protocol","http","string")},kt=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ci=function(V){return ar(V.value)?V.value:""},Fr=function(V){return ar(V.text)?V.text:ar(V.title)?V.title:""},tn=function(V,ce){var Se=[];return kt.each(V,function(Fe){var ot=Fr(Fe);if(Fe.menu!==void 0){var Ut=tn(Fe.menu,ce);Se.push({text:ot,items:Ut})}else{var Or=ce(Fe);Se.push({text:ot,value:Or})}}),Se},Wr=function(V){return V===void 0&&(V=Ci),function(ce){return Bt.from(ce).map(function(Se){return tn(Se,V)})}},Hn=function(V){return Wr(Ci)(V)},ft=function(V,ce){return function(Se){return{name:V,type:"listbox",label:ce,items:Se}}},lr={sanitize:Hn,sanitizeWith:Wr,createUi:ft,getValue:Ci},Va=function(){return Va=Object.assign||function(ce){for(var Se,Fe=1,ot=arguments.length;Fe<ot;Fe++){Se=arguments[Fe];for(var Ut in Se)Object.prototype.hasOwnProperty.call(Se,Ut)&&(ce[Ut]=Se[Ut])}return ce},Va.apply(this,arguments)},jt=Object.keys,Jr=Object.hasOwnProperty,jr=function(V,ce){for(var Se=jt(V),Fe=0,ot=Se.length;Fe<ot;Fe++){var Ut=Se[Fe],Or=V[Ut];ce(Or,Ut)}},an=function(V){return function(ce,Se){V[Se]=ce}},ua=function(V,ce,Se,Fe){var ot={};return jr(V,function(Ut,Or){(ce(Ut,Or)?Se:Fe)(Ut,Or)}),ot},Si=function(V,ce){var Se={};return ua(V,ce,an(Se),Tn),Se},rs=function(V,ce){return Jr.call(V,ce)},nu=function(V,ce){return rs(V,ce)&&V[ce]!==void 0&&V[ce]!==null},Li=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),To=tinymce.util.Tools.resolve("tinymce.util.URI"),bu=function(V){return V&&V.nodeName.toLowerCase()==="a"},Go=function(V){return bu(V)&&!!Ua(V)},sa=function(V,ce){if(V.collapsed)return[];var Se=V.cloneContents(),Fe=new Li(Se.firstChild,Se),ot=[],Ut=Se.firstChild;do ce(Ut)&&ot.push(Ut);while(Ut=Fe.next());return ot},ta=function(V){return/^\w+:/i.test(V)},Ua=function(V){var ce=V.getAttribute("data-mce-href");return ce||V.getAttribute("href")},Gr=function(V,ce){var Se=["noopener"],Fe=V?V.split(/\s+/):[],ot=function(zn){return kt.trim(zn.sort().join(" "))},Ut=function(zn){return zn=Or(zn),zn.length>0?zn.concat(Se):Se},Or=function(zn){return zn.filter(function(ca){return kt.inArray(Se,ca)===-1})},Nr=ce?Ut(Fe):Or(Fe);return Nr.length>0?ot(Nr):""},kr=function(V){return V.replace(/\uFEFF/g,"")},Po=function(V,ce){return ce=ce||V.selection.getNode(),No(ce)?V.dom.select("a[href]",ce)[0]:V.dom.getParent(ce,"a[href]")},xi=function(V,ce){var Se=ce?ce.innerText||ce.textContent:V.getContent({format:"text"});return kr(Se)},ro=function(V){return kt.grep(V,Go).length>0},Zn=function(V){return sa(V,Go).length>0},mo=function(V){var ce=V.schema.getTextInlineElements(),Se=function(ot){return ot.nodeType===1&&!bu(ot)&&!rs(ce,ot.nodeName.toLowerCase())},Fe=sa(V.selection.getRng(),Se);return Fe.length===0},No=function(V){return V&&V.nodeName==="FIGURE"&&/\bimage\b/i.test(V.className)},$o=function(V){var ce=["title","rel","class","target"];return ue(ce,function(Se,Fe){return V[Fe].each(function(ot){Se[Fe]=ot.length>0?ot:null}),Se},{href:V.href})},Gt=function(V,ce){return(ce==="http"||ce==="https")&&!ta(V)?ce+"://"+V:V},hr=function(V,ce){var Se=Va({},ce);if(!(wi(V).length>0)&&ee(V)===!1){var Fe=Gr(Se.rel,Se.target==="_blank");Se.rel=Fe||null}return Bt.from(Se.target).isNone()&&xo(V)===!1&&(Se.target=Et(V)),Se.href=Gt(Se.href,D(V)),Se},ha=function(V,ce,Se,Fe){Se.each(function(ot){rs(ce,"innerText")?ce.innerText=ot:ce.textContent=ot}),V.dom.setAttribs(ce,Fe),V.selection.select(ce)},Ti=function(V,ce,Se,Fe){No(ce)?$u(V,ce,Fe):Se.fold(function(){V.execCommand("mceInsertLink",!1,Fe)},function(ot){V.insertContent(V.dom.createHTML("a",Fe,V.dom.encode(ot)))})},Es=function(V,ce,Se){var Fe=V.selection.getNode(),ot=Po(V,Fe),Ut=hr(V,$o(Se));V.undoManager.transact(function(){Se.href===ce.href&&ce.attach(),ot?(V.focus(),ha(V,ot,Se.text,Ut)):Ti(V,Fe,Se.text,Ut)})},pr=function(V){var ce=V.dom,Se=V.selection,Fe=Se.getBookmark(),ot=Se.getRng().cloneRange(),Ut=ce.getParent(ot.startContainer,"a[href]",V.getBody()),Or=ce.getParent(ot.endContainer,"a[href]",V.getBody());Ut&&ot.setStartBefore(Ut),Or&&ot.setEndAfter(Or),Se.setRng(ot),V.execCommand("unlink"),Se.moveToBookmark(Fe)},$n=function(V){V.undoManager.transact(function(){var ce=V.selection.getNode();No(ce)?ai(V,ce):pr(V),V.focus()})},ko=function(V){var ce=V.class,Se=V.href,Fe=V.rel,ot=V.target,Ut=V.text,Or=V.title;return Si({class:ce.getOrNull(),href:Se,rel:Fe.getOrNull(),target:ot.getOrNull(),text:Ut.getOrNull(),title:Or.getOrNull()},function(Nr,zn){return no(Nr)===!1})},as=function(V,ce){var Se=ce.href;return Va(Va({},ce),{href:To.isDomSafe(Se,"a",V.settings)?Se:""})},qo=function(V,ce,Se){var Fe=as(V,Se);V.hasPlugin("rtc",!0)?V.execCommand("createlink",!1,ko(Fe)):Es(V,ce,Fe)},ri=function(V){V.hasPlugin("rtc",!0)?V.execCommand("unlink"):$n(V)},ai=function(V,ce){var Se=V.dom.select("img",ce)[0];if(Se){var Fe=V.dom.getParents(Se,"a[href]",ce)[0];Fe&&(Fe.parentNode.insertBefore(Se,Fe),V.dom.remove(Fe))}},$u=function(V,ce,Se){var Fe=V.dom.select("img",ce)[0];if(Fe){var ot=V.dom.create("a",Se);Fe.parentNode.insertBefore(ot,Fe),ot.appendChild(Fe)}},Hi=function(V){return nu(V,"items")},oi=function(V,ce){return nr(ce,function(Se){return Hi(Se)?oi(V,Se.items):qn(Se.value===V,Se)})},zu=function(V,ce,Se,Fe){var ot=Fe[ce],Ut=V.length>0;return ot!==void 0?oi(ot,Se).map(function(Or){return{url:{value:Or.value,meta:{text:Ut?V:Or.text,attach:Tn}},text:Ut?V:Or.text}}):Bt.none()},Er=function(V,ce){return ce==="link"?V.link:ce==="anchor"?V.anchor:Bt.none()},Vi=function(V,ce){var Se={text:V.text,title:V.title},Fe=function(zn){return qn(Se.title.length<=0,Bt.from(zn.meta.title).getOr(""))},ot=function(zn){return qn(Se.text.length<=0,Bt.from(zn.meta.text).getOr(zn.value))},Ut=function(zn){var ca=ot(zn.url),ba=Fe(zn.url);return ca.isSome()||ba.isSome()?Bt.some(Va(Va({},ca.map(function(os){return{text:os}}).getOr({})),ba.map(function(os){return{title:os}}).getOr({}))):Bt.none()},Or=function(zn,ca){var ba=Er(ce,ca.name).getOr([]);return zu(Se.text,ca.name,ba,zn)},Nr=function(zn,ca){var ba=ca.name;return ba==="url"?Ut(zn()):kn(["anchor","link"],ba)?Or(zn(),ca):((ba==="text"||ba==="title")&&(Se[ba]=zn()[ba]),Bt.none())};return{onChange:Nr}},Jt={init:Vi,getDelta:zu},Us=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ko=tinymce.util.Tools.resolve("tinymce.util.Promise"),ru=function(V,ce,Se){var Fe=V.selection.getRng();Us.setEditorTimeout(V,function(){V.windowManager.confirm(ce,function(ot){V.selection.setRng(Fe),Se(ot)})})},Xo=function(V){var ce=V.href,Se=ce.indexOf("@")>0&&ce.indexOf("/")===-1&&ce.indexOf("mailto:")===-1;return Se?Bt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(Fe){return Va(Va({},Fe),{href:"mailto:"+ce})}}):Bt.none()},au=function(V,ce){return function(Se){var Fe=Se.href,ot=V===1&&!ta(Fe)||V===0&&/^\s*www(\.|\d\.)/i.test(Fe);return ot?Bt.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+ce+":// prefix?",preprocess:function(Ut){return Va(Va({},Ut),{href:ce+"://"+Fe})}}):Bt.none()}},Ws=function(V,ce){return nr([Xo,au(D(V),nt(V))],function(Se){return Se(ce)}).fold(function(){return Ko.resolve(ce)},function(Se){return new Ko(function(Fe){ru(V,Se.message,function(ot){Fe(ot?Se.preprocess(ce):ce)})})})},Ui={preprocess:Ws},js=function(V){var ce=V.dom.select("a:not([href])"),Se=gt(ce,function(Fe){var ot=Fe.name||Fe.id;return ot?[{text:ot,value:"#"+ot}]:[]});return Se.length>0?Bt.some([{text:"None",value:""}].concat(Se)):Bt.none()},Q={getAnchors:js},be=function(V){var ce=Un(V);return ce.length>0?lr.sanitize(ce):Bt.none()},re={getClasses:be},Te=tinymce.util.Tools.resolve("tinymce.util.XHR"),dt=function(V){try{return Bt.some(JSON.parse(V))}catch{return Bt.none()}},zt=function(V){var ce=function(Fe){return V.convertURL(Fe.value||Fe.url,"href")},Se=ut(V);return new Ko(function(Fe){ar(Se)?Te.send({url:Se,success:function(ot){return Fe(dt(ot))},error:function(ot){return Fe(Bt.none())}}):fo(Se)?Se(function(ot){return Fe(Bt.some(ot))}):Fe(Bt.from(Se))}).then(function(Fe){return Fe.bind(lr.sanitizeWith(ce)).map(function(ot){if(ot.length>0){var Ut=[{text:"None",value:""}];return Ut.concat(ot)}else return ot})})},mn={getLinks:zt},wn=function(V,ce){var Se=wi(V);if(Se.length>0){var Fe=et(ce,"_blank"),ot=ee(V)===!1,Ut=function(Nr){return Gr(lr.getValue(Nr),Fe)},Or=ot?lr.sanitizeWith(Ut):lr.sanitize;return Or(Se)}return Bt.none()},wr={getRels:wn},Cr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],rr=function(V){var ce=xo(V);return Ar(ce)?lr.sanitize(ce).orThunk(function(){return Bt.some(Cr)}):ce===!1?Bt.none():Bt.some(Cr)},Oa={getTargets:rr},Sa=function(V,ce,Se){var Fe=V.getAttrib(ce,Se);return Fe!==null&&Fe.length>0?Bt.some(Fe):Bt.none()},yu=function(V,ce){var Se=V.dom,Fe=mo(V),ot=Fe?Bt.some(xi(V.selection,ce)):Bt.none(),Ut=ce?Bt.some(Se.getAttrib(ce,"href")):Bt.none(),Or=ce?Bt.from(Se.getAttrib(ce,"target")):Bt.none(),Nr=Sa(Se,ce,"rel"),zn=Sa(Se,ce,"class"),ca=Sa(Se,ce,"title");return{url:Ut,text:ot,title:ca,target:Or,rel:Nr,linkClass:zn}},ao=function(V,ce){return mn.getLinks(V).then(function(Se){var Fe=yu(V,ce);return{anchor:Fe,catalogs:{targets:Oa.getTargets(V),rels:wr.getRels(V,Fe.target),classes:re.getClasses(V),anchor:Q.getAnchors(V),link:Se},optNode:Bt.from(ce),flags:{titleEnabled:Ca(V)}}})},Wi={collect:ao},Iu=function(V,ce){return function(Se){var Fe=Se.getData();if(!Fe.url.value){ri(V),Se.close();return}var ot=function(Nr){return Bt.from(Fe[Nr]).filter(function(zn){return!et(ce.anchor[Nr],zn)})},Ut={href:Fe.url.value,text:ot("text"),target:ot("target"),rel:ot("rel"),class:ot("linkClass"),title:ot("title")},Or={href:Fe.url.value,attach:Fe.url.meta!==void 0&&Fe.url.meta.attach?Fe.url.meta.attach:Tn};Ui.preprocess(V,Ut).then(function(Nr){qo(V,Or,Nr)}),Se.close()}},pa=function(V){var ce=Po(V);return Wi.collect(V,ce)},xa=function(V,ce){var Se=V.anchor,Fe=Se.url.getOr("");return{url:{value:Fe,meta:{original:{value:Fe}}},text:Se.text.getOr(""),title:Se.title.getOr(""),anchor:Fe,link:Fe,rel:Se.rel.getOr(""),target:Se.target.or(ce).getOr(""),linkClass:Se.linkClass.getOr("")}},Xe=function(V,ce,Se){var Fe=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],ot=V.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),Ut=V.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Or=Bt.from(Et(Se)),Nr=xa(V,Or),zn=V.catalogs,ca=Jt.init(Nr,zn),ba={type:"panel",items:W([Fe,ot,Ut,Ur([zn.anchor.map(lr.createUi("anchor","Anchors")),zn.rels.map(lr.createUi("rel","Rel")),zn.targets.map(lr.createUi("target","Open link in...")),zn.link.map(lr.createUi("link","Link list")),zn.classes.map(lr.createUi("linkClass","Class"))])])};return{title:"Insert/Edit Link",size:"normal",body:ba,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Nr,onChange:function(os,Eo){var Hu=Eo.name;ca.onChange(os.getData,{name:Hu}).each(function(Qt){os.setData(Qt)})},onSubmit:ce}},Ya=function(V){var ce=pa(V);ce.then(function(Se){var Fe=Iu(V,Se);return Xe(Se,Fe,V)}).then(function(Se){V.windowManager.open(Se)})},Fu=function(V,ce){document.body.appendChild(V),V.dispatchEvent(ce),document.body.removeChild(V)},Xc=function(V){var ce=document.createElement("a");ce.target="_blank",ce.href=V,ce.rel="noreferrer noopener";var Se=document.createEvent("MouseEvents");Se.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Fu(ce,Se)},Gs=function(V,ce){return V.dom.getParent(ce,"a[href]")},Qn=function(V){return Gs(V,V.selection.getStart())},bc=function(V){return V.altKey===!0&&V.shiftKey===!1&&V.ctrlKey===!1&&V.metaKey===!1},Lu=function(V,ce){if(ce){var Se=Ua(ce);if(/^#/.test(Se)){var Fe=V.$(Se);Fe.length&&V.selection.scrollIntoView(Fe[0],!0)}else Xc(ce.href)}},Aa=function(V){return function(){Ya(V)}},qs=function(V){return function(){Lu(V,Qn(V))}},ii=function(V){V.on("click",function(ce){var Se=Gs(V,ce.target);Se&&Ot.metaKeyPressed(ce)&&(ce.preventDefault(),Lu(V,Se))}),V.on("keydown",function(ce){var Se=Qn(V);Se&&ce.keyCode===13&&bc(ce)&&(ce.preventDefault(),Lu(V,Se))})},ki=function(V,ce){return V.on("NodeChange",ce),function(){return V.off("NodeChange",ce)}},qr=function(V){return function(ce){var Se=function(){return ce.setActive(!V.mode.isReadOnly()&&Po(V,V.selection.getNode())!==null)};return Se(),ki(V,Se)}},Ks=function(V){return function(ce){var Se=function(){return ce.setDisabled(Po(V,V.selection.getNode())===null)};return Se(),ki(V,Se)}},Os=function(V){return function(ce){var Se=function(ot){return ro(ot)||Zn(V.selection.getRng())},Fe=V.dom.getParents(V.selection.getStart());return ce.setDisabled(!Se(Fe)),ki(V,function(ot){return ce.setDisabled(!Se(ot.parents))})}},As=function(V){V.addCommand("mceLink",function(){ni(V)?V.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Aa(V)()})},yc=function(V){V.addShortcut("Meta+K","",function(){V.execCommand("mceLink")})},ou=function(V){V.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Aa(V),onSetup:qr(V)}),V.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:qs(V),onSetup:Ks(V)}),V.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return ri(V)},onSetup:Os(V)})},wu=function(V){V.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:qs(V),onSetup:Ks(V)}),V.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Aa(V)}),V.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return ri(V)},onSetup:Os(V)})},wc=function(V){var ce="link unlink openlink",Se="link";V.ui.registry.addContextMenu("link",{update:function(Fe){return ro(V.dom.getParents(Fe,"a"))?ce:Se}})},iu=function(V){var ce=function(ot){ot.selection.collapse(!1)},Se=function(ot){var Ut=V.selection.getNode();return ot.setDisabled(!Po(V,Ut)),Tn},Fe=function(ot){var Ut=Po(V),Or=mo(V);if(!Ut&&Or){var Nr=xi(V.selection,Ut);return Bt.some(Nr.length>0?Nr:ot)}else return Bt.none()};V.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:qr(V)},label:"Link",predicate:function(ot){return!!Po(V,ot)&&ia(V)},initValue:function(){var ot=Po(V);return ot?Ua(ot):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(ot){var Ut=V.selection.getNode();return ot.setActive(!!Po(V,Ut)),qr(V)(ot)},onAction:function(ot){var Ut=ot.getValue(),Or=Fe(Ut),Nr={href:Ut,attach:Tn};qo(V,Nr,{href:Ut,text:Or,title:Bt.none(),rel:Bt.none(),target:Bt.none(),class:Bt.none()}),ce(V),ot.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Se,onAction:function(ot){ri(V),ot.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Se,onAction:function(ot){qs(V)(),ot.hide()}}]})};function Ei(){cn.add("link",function(V){ou(V),wu(V),wc(V),iu(V),ii(V),As(V),yc(V)})}Ei()})();(function(){var cn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ot=function(E){var $=typeof E;return E===null?"null":$==="object"&&(Array.prototype.isPrototypeOf(E)||E.constructor&&E.constructor.name==="Array")?"array":$==="object"&&(String.prototype.isPrototypeOf(E)||E.constructor&&E.constructor.name==="String")?"string":$},An=function(E){return function($){return Ot($)===E}},Ln=function(E){return function($){return typeof $===E}},Xt=An("string"),yr=An("object"),ar=An("array"),Ar=Ln("boolean"),no=Ln("function"),So=Ln("number"),fo=function(){},Tn=function(E){return function(){return E}},or=function(E){return E},za=function(E,$){return E===$},Ht=function(E){return function($){return!E($)}},at=Tn(!1),cr=Tn(!0),Ct=function(){return _n},_n=function(){var E=function(te){return te()},$=or,H={fold:function(te,we){return te()},isSome:at,isNone:cr,getOr:$,getOrThunk:E,getOrDie:function(te){throw new Error(te||"error: getOrDie called on none.")},getOrNull:Tn(null),getOrUndefined:Tn(void 0),or:$,orThunk:E,map:Ct,each:fo,bind:Ct,exists:at,forall:cr,filter:function(){return Ct()},toArray:function(){return[]},toString:Tn("none()")};return H}(),ye=function(E){var $=Tn(E),H=function(){return we},te=function($e){return $e(E)},we={fold:function($e,Wt){return Wt(E)},isSome:cr,isNone:at,getOr:$,getOrThunk:$,getOrDie:$,getOrNull:$,getOrUndefined:$,or:H,orThunk:H,map:function($e){return ye($e(E))},each:function($e){$e(E)},bind:te,exists:te,forall:te,filter:function($e){return $e(E)?we:_n},toArray:function(){return[E]},toString:function(){return"some("+E+")"}};return we},Lt=function(E){return E==null?_n:ye(E)},Bt={some:ye,none:Ct,from:Lt},Vr=Array.prototype.slice,Rn=Array.prototype.push,Mt=function(E,$){for(var H=E.length,te=new Array(H),we=0;we<H;we++){var $e=E[we];te[we]=$($e,we)}return te},kn=function(E,$){for(var H=0,te=E.length;H<te;H++){var we=E[H];$(we,H)}},Tt=function(E,$){for(var H=[],te=0,we=E.length;te<we;te++){var $e=E[te];$($e,te)&&H.push($e)}return H},vo=function(E,$){if(E.length===0)return[];for(var H=$(E[0]),te=[],we=[],$e=0,Wt=E.length;$e<Wt;$e++){var En=E[$e],ir=$(En);ir!==H&&(te.push(we),we=[]),H=ir,we.push(En)}return we.length!==0&&te.push(we),te},ue=function(E,$,H){return kn(E,function(te,we){H=$(H,te,we)}),H},W=function(E,$,H){for(var te=0,we=E.length;te<we;te++){var $e=E[te];if($($e,te))return Bt.some($e);if(H($e,te))break}return Bt.none()},gt=function(E,$){return W(E,$,at)},nr=function(E){for(var $=[],H=0,te=E.length;H<te;++H){if(!ar(E[H]))throw new Error("Arr.flatten item "+H+" was not an array, input: "+E);Rn.apply($,E[H])}return $},et=function(E,$){return nr(Mt(E,$))},Ur=function(E){var $=Vr.call(E,0);return $.reverse(),$},qn=function(E,$){return $>=0&&$<E.length?Bt.some(E[$]):Bt.none()},D=function(E){return qn(E,0)},ia=function(E){return qn(E,E.length-1)},ut=function(E,$){for(var H=0;H<E.length;H++){var te=$(E[H],H);if(te.isSome())return te}return Bt.none()},Et=function(){return Et=Object.assign||function($){for(var H,te=1,we=arguments.length;te<we;te++){H=arguments[te];for(var $e in H)Object.prototype.hasOwnProperty.call(H,$e)&&($[$e]=H[$e])}return $},Et.apply(this,arguments)};function xo(E,$,H){if(H||arguments.length===2)for(var te=0,we=$.length,$e;te<we;te++)($e||!(te in $))&&($e||($e=Array.prototype.slice.call($,0,te)),$e[te]=$[te]);return E.concat($e||Array.prototype.slice.call($))}var wi=function(E){var $=!1,H;return function(){for(var te=[],we=0;we<arguments.length;we++)te[we]=arguments[we];return $||($=!0,H=E.apply(null,te)),H}},Un=function(E,$,H,te){var we=E.isiOS()&&/ipad/i.test(H)===!0,$e=E.isiOS()&&!we,Wt=E.isiOS()||E.isAndroid(),En=Wt||te("(pointer:coarse)"),ir=we||!$e&&Wt&&te("(min-device-width:768px)"),jn=$e||Wt&&!ir,la=$.isSafari()&&E.isiOS()&&/safari/i.test(H)===!1,Di=!jn&&!ir&&!la;return{isiPad:Tn(we),isiPhone:Tn($e),isTablet:Tn(ir),isPhone:Tn(jn),isTouch:Tn(En),isAndroid:E.isAndroid,isiOS:E.isiOS,isWebView:Tn(la),isDesktop:Tn(Di)}},Ca=function(E,$){for(var H=0;H<E.length;H++){var te=E[H];if(te.test($))return te}},ee=function(E,$){var H=Ca(E,$);if(!H)return{major:0,minor:0};var te=function(we){return Number($.replace(H,"$"+we))};return kt(te(1),te(2))},ni=function(E,$){var H=String($).toLowerCase();return E.length===0?nt():ee(E,H)},nt=function(){return kt(0,0)},kt=function(E,$){return{major:E,minor:$}},Ci={nu:kt,detect:ni,unknown:nt},Fr=function(E,$){return ut($.brands,function(H){var te=H.brand.toLowerCase();return gt(E,function(we){var $e;return te===(($e=we.brand)===null||$e===void 0?void 0:$e.toLowerCase())}).map(function(we){return{current:we.name,version:Ci.nu(parseInt(H.version,10),0)}})})},tn=function(E,$){var H=String($).toLowerCase();return gt(E,function(te){return te.search(H)})},Wr=function(E,$){return tn(E,$).map(function(H){var te=Ci.detect(H.versionRegexes,$);return{current:H.name,version:te}})},Hn=function(E,$){return tn(E,$).map(function(H){var te=Ci.detect(H.versionRegexes,$);return{current:H.name,version:te}})},ft=function(E,$){return E.indexOf($)!==-1},lr=function(E){return function($){return $.replace(E,"")}},Va=lr(/^\s+|\s+$/g),jt=function(E){return E.length>0},Jr=function(E){return!jt(E)},jr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,an=function(E){return function($){return ft($,E)}},ua=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(E){return ft(E,"edge/")&&ft(E,"chrome")&&ft(E,"safari")&&ft(E,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,jr],search:function(E){return ft(E,"chrome")&&!ft(E,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(E){return ft(E,"msie")||ft(E,"trident")}},{name:"Opera",versionRegexes:[jr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:an("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:an("firefox")},{name:"Safari",versionRegexes:[jr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(E){return(ft(E,"safari")||ft(E,"mobile/"))&&ft(E,"applewebkit")}}],Si=[{name:"Windows",search:an("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(E){return ft(E,"iphone")||ft(E,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:an("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:an("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:an("linux"),versionRegexes:[]},{name:"Solaris",search:an("sunos"),versionRegexes:[]},{name:"FreeBSD",search:an("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:an("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rs={browsers:Tn(ua),oses:Tn(Si)},nu="Edge",Li="Chrome",To="IE",bu="Opera",Go="Firefox",sa="Safari",ta=function(){return Ua({current:void 0,version:Ci.unknown()})},Ua=function(E){var $=E.current,H=E.version,te=function(we){return function(){return $===we}};return{current:$,version:H,isEdge:te(nu),isChrome:te(Li),isIE:te(To),isOpera:te(bu),isFirefox:te(Go),isSafari:te(sa)}},Gr={unknown:ta,nu:Ua,edge:Tn(nu),chrome:Tn(Li),ie:Tn(To),opera:Tn(bu),firefox:Tn(Go),safari:Tn(sa)},kr="Windows",Po="iOS",xi="Android",ro="Linux",Zn="OSX",mo="Solaris",No="FreeBSD",$o="ChromeOS",Gt=function(){return hr({current:void 0,version:Ci.unknown()})},hr=function(E){var $=E.current,H=E.version,te=function(we){return function(){return $===we}};return{current:$,version:H,isWindows:te(kr),isiOS:te(Po),isAndroid:te(xi),isOSX:te(Zn),isLinux:te(ro),isSolaris:te(mo),isFreeBSD:te(No),isChromeOS:te($o)}},ha={unknown:Gt,nu:hr,windows:Tn(kr),ios:Tn(Po),android:Tn(xi),linux:Tn(ro),osx:Tn(Zn),solaris:Tn(mo),freebsd:Tn(No),chromeos:Tn($o)},Ti=function(E,$,H){var te=rs.browsers(),we=rs.oses(),$e=$.bind(function(ir){return Fr(te,ir)}).orThunk(function(){return Wr(te,E)}).fold(Gr.unknown,Gr.nu),Wt=Hn(we,E).fold(ha.unknown,ha.nu),En=Un(Wt,$e,E,H);return{browser:$e,os:Wt,deviceType:En}},Es={detect:Ti},pr=function(E){return window.matchMedia(E).matches},$n=wi(function(){return Es.detect(navigator.userAgent,Bt.from(navigator.userAgentData),pr)}),ko=function(){return $n()},as=function(E,$,H){return(E.compareDocumentPosition($)&H)!==0},qo=function(E,$){return as(E,$,Node.DOCUMENT_POSITION_CONTAINED_BY)},ri=1,ai=function(E,$){var H=$||document,te=H.createElement("div");if(te.innerHTML=E,!te.hasChildNodes()||te.childNodes.length>1)throw console.error("HTML does not have a single root node",E),new Error("HTML must have a single root node");return oi(te.childNodes[0])},$u=function(E,$){var H=$||document,te=H.createElement(E);return oi(te)},Hi=function(E,$){var H=$||document,te=H.createTextNode(E);return oi(te)},oi=function(E){if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},zu=function(E,$,H){return Bt.from(E.dom.elementFromPoint($,H)).map(oi)},Er={fromHtml:ai,fromTag:$u,fromText:Hi,fromDom:oi,fromPoint:zu},Vi=function(E,$){var H=E.dom;if(H.nodeType!==ri)return!1;var te=H;if(te.matches!==void 0)return te.matches($);if(te.msMatchesSelector!==void 0)return te.msMatchesSelector($);if(te.webkitMatchesSelector!==void 0)return te.webkitMatchesSelector($);if(te.mozMatchesSelector!==void 0)return te.mozMatchesSelector($);throw new Error("Browser lacks native selectors")},Jt=function(E,$){return E.dom===$.dom},Us=function(E,$){var H=E.dom,te=$.dom;return H===te?!1:H.contains(te)},Ko=function(E,$){return qo(E.dom,$.dom)},ru=function(E,$){return ko().browser.isIE()?Ko(E,$):Us(E,$)},Xo=Vi,au=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Ws=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ui=tinymce.util.Tools.resolve("tinymce.util.VK"),js=Object.keys,Q=function(E,$){for(var H=js(E),te=0,we=H.length;te<we;te++){var $e=H[te],Wt=E[$e];$(Wt,$e)}},be=function(E){return function($,H){E[H]=$}},re=function(E,$,H,te){var we={};return Q(E,function($e,Wt){($($e,Wt)?H:te)($e,Wt)}),we},Te=function(E,$){var H={};return re(E,$,be(H),fo),H};typeof window<"u"||Function("return this;")();var dt=function(E){var $=E.dom.nodeName;return $.toLowerCase()},zt=function(E){return E.dom.nodeType},mn=function(E){return function($){return zt($)===E}},wn=mn(ri),wr=function(E){return function($){return wn($)&&dt($)===E}},Cr=function(E,$,H){if(Xt(H)||Ar(H)||So(H))E.setAttribute($,H+"");else throw console.error("Invalid call to Attribute.set. Key ",$,":: Value ",H,":: Element ",E),new Error("Attribute value was not simple")},rr=function(E,$){var H=E.dom;Q($,function(te,we){Cr(H,we,te)})},Oa=function(E){return ue(E.dom.attributes,function($,H){return $[H.name]=H.value,$},{})},Sa=function(E){return Bt.from(E.dom.parentNode).map(Er.fromDom)},yu=function(E){return Mt(E.dom.childNodes,Er.fromDom)},ao=function(E,$){var H=E.dom.childNodes;return Bt.from(H[$]).map(Er.fromDom)},Wi=function(E){return ao(E,0)},Iu=function(E){return ao(E,E.dom.childNodes.length-1)},pa=function(E,$){var H=Sa(E);H.each(function(te){te.dom.insertBefore($.dom,E.dom)})},xa=function(E,$){E.dom.appendChild($.dom)},Xe=function(E,$){kn($,function(H){pa(E,H)})},Ya=function(E,$){kn($,function(H){xa(E,H)})},Fu=function(E){var $=E.dom;$.parentNode!==null&&$.parentNode.removeChild($)},Xc=function(E,$){return Er.fromDom(E.dom.cloneNode($))},Gs=function(E){return Xc(E,!0)},Qn=function(E,$){var H=Er.fromTag($),te=Oa(E);return rr(H,te),H},bc=function(E,$){var H=Qn(E,$);pa(E,H);var te=yu(E);return Ya(H,te),Fu(E),H},Lu=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Aa=tinymce.util.Tools.resolve("tinymce.util.Tools"),qs=function(E){return function($){return $&&$.nodeName.toLowerCase()===E}},ii=function(E){return function($){return $&&E.test($.nodeName)}},ki=function(E){return E&&E.nodeType===3},qr=ii(/^(OL|UL|DL)$/),Ks=ii(/^(OL|UL)$/),Os=qs("ol"),As=ii(/^(LI|DT|DD)$/),yc=ii(/^(DT|DD)$/),ou=ii(/^(TH|TD)$/),wu=qs("br"),wc=function(E){return E.parentNode.firstChild===E},iu=function(E,$){return $&&!!E.schema.getTextBlockElements()[$.nodeName]},Ei=function(E,$){return E&&E.nodeName in $},V=function(E,$){return wu($)?E.isBlock($.nextSibling)&&!wu($.previousSibling):!1},ce=function(E,$,H){var te=E.isEmpty($);return H&&E.select("span[data-mce-type=bookmark]",$).length>0?!1:te},Se=function(E,$){return E.isChildOf($,E.getRoot())},Fe=function(E){return E.getParam("lists_indent_on_tab",!0)},ot=function(E){var $=E.getParam("forced_root_block","p");return $===!1?"":$===!0?"p":$},Ut=function(E){return E.getParam("forced_root_block_attrs",{})},Or=function(E,$){var H=E.dom,te=E.schema.getBlockElements(),we=H.createFragment(),$e=ot(E),Wt,En,ir;if($e&&(En=H.create($e),En.tagName===$e.toUpperCase()&&H.setAttribs(En,Ut(E)),Ei($.firstChild,te)||we.appendChild(En)),$)for(;Wt=$.firstChild;){var jn=Wt.nodeName;!ir&&(jn!=="SPAN"||Wt.getAttribute("data-mce-type")!=="bookmark")&&(ir=!0),Ei(Wt,te)?(we.appendChild(Wt),En=null):$e?(En||(En=H.create($e),we.appendChild(En)),En.appendChild(Wt)):we.appendChild(Wt)}return $e?ir||En.appendChild(H.create("br",{"data-mce-bogus":"1"})):we.appendChild(H.create("br")),we},Nr=Lu.DOM,zn=function(E,$,H){var te=function(jn){Aa.each(we,function(la){jn.parentNode.insertBefore(la,H.parentNode)}),Nr.remove(jn)},we=Nr.select('span[data-mce-type="bookmark"]',$),$e=Or(E,H),Wt=Nr.createRng();Wt.setStartAfter(H),Wt.setEndAfter($);for(var En=Wt.extractContents(),ir=En.firstChild;ir;ir=ir.firstChild)if(ir.nodeName==="LI"&&E.dom.isEmpty(ir)){Nr.remove(ir);break}E.dom.isEmpty(En)||Nr.insertAfter(En,$),Nr.insertAfter($e,$),ce(E.dom,H.parentNode)&&te(H.parentNode),Nr.remove(H),ce(E.dom,$)&&Nr.remove($)},ca=wr("dd"),ba=wr("dt"),os=function(E,$){ca($)?bc($,"dt"):ba($)&&Sa($).each(function(H){return zn(E,H.dom,$.dom)})},Eo=function(E){ba(E)&&bc(E,"dd")},Hu=function(E,$,H){$==="Indent"?kn(H,Eo):kn(H,function(te){return os(E,te)})},Qt=function(E,$){if(ki(E))return{container:E,offset:$};var H=au.getNode(E,$);return ki(H)?{container:H,offset:$>=E.childNodes.length?H.data.length:0}:H.previousSibling&&ki(H.previousSibling)?{container:H.previousSibling,offset:H.previousSibling.data.length}:H.nextSibling&&ki(H.nextSibling)?{container:H.nextSibling,offset:0}:{container:E,offset:$}},Yc=function(E){var $=E.cloneRange(),H=Qt(E.startContainer,E.startOffset);$.setStart(H.container,H.offset);var te=Qt(E.endContainer,E.endOffset);return $.setEnd(te.container,te.offset),$},af=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Sr=function(E,$){var H=$||E.selection.getStart(!0);return E.dom.getParent(H,"OL,UL,DL",Vu(E,H))},of=function(E,$){return E&&$.length===1&&$[0]===E},kl=function(E){return Tt(E.querySelectorAll("ol,ul,dl"),qr)},Yf=function(E){var $=Sr(E),H=E.selection.getSelectedBlocks();return of($,H)?kl($):Tt(H,function(te){return qr(te)&&$!==te})},Lr=function(E,$){var H=Aa.map($,function(te){var we=E.dom.getParent(te,"li,dd,dt",Vu(E,te));return we||te});return af.unique(H)},uu=function(E){var $=E.selection.getSelectedBlocks();return Tt(Lr(E,$),As)},Qv=function(E){return Tt(uu(E),yc)},Vu=function(E,$){var H=E.dom.getParents($,"TD,TH");return H.length>0?H[0]:E.getBody()},Ia=function(E,$){var H=E.dom.getParents($,"ol,ul",Vu(E,$));return ia(H)},Xs=function(E){var $=Ia(E,E.selection.getStart()),H=Tt(E.selection.getSelectedBlocks(),Ks);return $.toArray().concat(H)},Ne=function(E){var $=Xs(E);return Jc(E,$)},Jc=function(E,$){var H=Mt($,function(te){return Ia(E,te).getOr(te)});return af.unique(H)},Fa=function(E,$,H){return H===void 0&&(H=za),E.exists(function(te){return H(te,$)})},Jf=function(E,$,H){return E.isSome()&&$.isSome()?Bt.some(H(E.getOrDie(),$.getOrDie())):Bt.none()},Ds=function(E,$){var H=$||document,te=H.createDocumentFragment();return kn(E,function(we){te.appendChild(we.dom)}),Er.fromDom(te)},_=function(E,$,H){return E.fire("ListMutation",{action:$,element:H})},M=function(E){return E.style!==void 0&&no(E.style.getPropertyValue)},T=function(E,$,H){if(!Xt(H))throw console.error("Invalid call to CSS.set. Property ",$,":: Value ",H,":: Element ",E),new Error("CSS value must be a string: "+H);M(E)&&E.style.setProperty($,H)},I=function(E,$,H){var te=E.dom;T(te,$,H)},ae=function(E,$){xa(E.item,$.list)},fe=function(E){for(var $=1;$<E.length;$++)ae(E[$-1],E[$])},De=function(E,$){Jf(ia(E),D($),ae)},st=function(E,$){var H={list:Er.fromTag($,E),item:Er.fromTag("li",E)};return xa(H.list,H.item),H},dn=function(E,$,H){for(var te=[],we=0;we<H;we++)te.push(st(E,$.listType));return te},Cn=function(E,$){for(var H=0;H<E.length-1;H++)I(E[H].item,"list-style-type","none");ia(E).each(function(te){rr(te.list,$.listAttributes),rr(te.item,$.itemAttributes),Ya(te.item,$.content)})},xt=function(E,$){dt(E.list)!==$.listType&&(E.list=bc(E.list,$.listType)),rr(E.list,$.listAttributes)},on=function(E,$,H){var te=Er.fromTag("li",E);return rr(te,$),Ya(te,H),te},Vn=function(E,$){xa(E.list,$),E.item=$},Kn=function(E,$,H){var te=$.slice(0,H.depth);return ia(te).each(function(we){var $e=on(E,H.itemAttributes,H.content);Vn(we,$e),xt(we,H)}),te},gn=function(E,$,H){var te=dn(E,H,H.depth-$.length);return fe(te),Cn(te,H),De($,te),$.concat(te)},Ta=function(E,$){var H=ue($,function(te,we){return we.depth>te.length?gn(E,te,we):Kn(E,te,we)},[]);return D(H).map(function(te){return te.list})},fn=function(E){return Xo(E,"OL,UL")},Hr=function(E){return Wi(E).exists(fn)},va=function(E){return Iu(E).exists(fn)},su=function(E){return E.depth>0},Mn=function(E){return E.isSelected},is=function(E){var $=yu(E),H=va(E)?$.slice(0,-1):$;return Mt(H,Gs)},Da=function(E,$,H){return Sa(E).filter(wn).map(function(te){return{depth:$,dirty:!1,isSelected:H,content:is(E),itemAttributes:Oa(E),listAttributes:Oa(te),listType:dt(te)}})},La=function(E,$){switch(E){case"Indent":$.depth++;break;case"Outdent":$.depth--;break;case"Flatten":$.depth=0}$.dirty=!0},wp=function(E,$){E.listType=$.listType,E.listAttributes=Et({},$.listAttributes)},ui=function(E){E.listAttributes=Te(E.listAttributes,function($,H){return H!=="start"})},_g=function(E,$){var H=E[$].depth,te=function($e){return $e.depth===H&&!$e.dirty},we=function($e){return $e.depth<H};return W(Ur(E.slice(0,$)),te,we).orThunk(function(){return W(E.slice($+1),te,we)})},Cc=function(E){return kn(E,function($,H){_g(E,H).fold(function(){$.dirty&&ui($)},function(te){return wp($,te)})}),E},pn=function(E){var $=E,H=function(){return $},te=function(we){$=we};return{get:H,set:te}},us=function(E,$,H,te){return Wi(te).filter(fn).fold(function(){$.each(function(Wt){Jt(Wt.start,te)&&H.set(!0)});var we=Da(te,E,H.get());$.each(function(Wt){Jt(Wt.end,te)&&H.set(!1)});var $e=Iu(te).filter(fn).map(function(Wt){return Wa(E,$,H,Wt)}).getOr([]);return we.toArray().concat($e)},function(we){return Wa(E,$,H,we)})},Wa=function(E,$,H,te){return et(yu(te),function(we){var $e=fn(we)?Wa:us,Wt=E+1;return $e(Wt,$,H,we)})},ja=function(E,$){var H=pn(!1),te=0;return Mt(E,function(we){return{sourceList:we,entries:Wa(te,$,H,we)}})},zo=function(E,$){var H=Cc($);return Mt(H,function(te){var we=Ds(te.content);return Er.fromDom(Or(E,we.dom))})},go=function(E,$){var H=Cc($);return Ta(E.contentDocument,H).toArray()},uf=function(E,$){return et(vo($,su),function(H){var te=D(H).exists(su);return te?go(E,H):zo(E,H)})},Rs=function(E,$){kn(Tt(E,Mn),function(H){return La($,H)})},_r=function(E){var $=Mt(uu(E),Er.fromDom);return Jf(gt($,Ht(Hr)),gt(Ur($),Ht(Hr)),function(H,te){return{start:H,end:te}})},ya=function(E,$,H){var te=ja($,_r(E));kn(te,function(we){Rs(we.entries,H);var $e=uf(E,we.entries);kn($e,function(Wt){_(E,H==="Indent"?"IndentList":"OutdentList",Wt.dom)}),Xe(we.sourceList,$e),Fu(we.sourceList)})},cu=function(E,$){var H=Mt(Ne(E),Er.fromDom),te=Mt(Qv(E),Er.fromDom),we=!1;if(H.length||te.length){var $e=E.selection.getBookmark();ya(E,H,$),Hu(E,$,te),E.selection.moveToBookmark($e),E.selection.setRng(Yc(E.selection.getRng())),E.nodeChanged(),we=!0}return we},Zc=function(E){return cu(E,"Indent")},Oo=function(E){return cu(E,"Outdent")},ss=function(E){return cu(E,"Flatten")},Cp=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),sf=Lu.DOM,na=function(E){var $={},H=function(te){var we=E[te?"startContainer":"endContainer"],$e=E[te?"startOffset":"endOffset"];if(we.nodeType===1){var Wt=sf.create("span",{"data-mce-type":"bookmark"});we.hasChildNodes()?($e=Math.min($e,we.childNodes.length-1),te?we.insertBefore(Wt,we.childNodes[$e]):sf.insertAfter(Wt,we.childNodes[$e])):we.appendChild(Wt),we=Wt,$e=0}$[te?"startContainer":"endContainer"]=we,$[te?"startOffset":"endOffset"]=$e};return H(!0),E.collapsed||H(),$},Ys=function(E){var $=function(te){var we,$e=function(ir){for(var jn=ir.parentNode.firstChild,la=0;jn;){if(jn===ir)return la;(jn.nodeType!==1||jn.getAttribute("data-mce-type")!=="bookmark")&&la++,jn=jn.nextSibling}return-1},Wt=we=E[te?"startContainer":"endContainer"],En=E[te?"startOffset":"endOffset"];Wt&&(Wt.nodeType===1&&(En=$e(Wt),Wt=Wt.parentNode,sf.remove(we),!Wt.hasChildNodes()&&sf.isBlock(Wt)&&Wt.appendChild(sf.create("br"))),E[te?"startContainer":"endContainer"]=Wt,E[te?"startOffset":"endOffset"]=En)};$(!0),$();var H=sf.createRng();return H.setStart(E.startContainer,E.startOffset),E.endContainer&&H.setEnd(E.endContainer,E.endOffset),Yc(H)},El=function(E){switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Cu=function(E){return/\btox\-/.test(E.className)},Ja=function(E,$,H){var te=function($e){var Wt=W($e.parents,qr,ou).filter(function(En){return En.nodeName===$&&!Cu(En)}).isSome();H(Wt)},we=E.dom.getParents(E.selection.getNode());return te({parents:we}),E.on("NodeChange",te),function(){return E.off("NodeChange",te)}},Ol=function(E,$,H){var te=H["list-style-type"]?H["list-style-type"]:null;E.setStyle($,"list-style-type",te)},Qc=function(E,$){Aa.each($,function(H,te){E.setAttribute(te,H)})},ji=function(E,$,H){Qc($,H["list-attributes"]),Aa.each(E.select("li",$),function(te){Qc(te,H["list-item-attributes"])})},Su=function(E,$,H){Ol(E,$,H),ji(E,$,H)},Oi=function(E,$,H){Aa.each(H,function(te){var we;return E.setStyle($,(we={},we[te]="",we))})},Zf=function(E,$,H,te){var we=$[H?"startContainer":"endContainer"],$e=$[H?"startOffset":"endOffset"];for(we.nodeType===1&&(we=we.childNodes[Math.min($e,we.childNodes.length-1)]||we),!H&&wu(we.nextSibling)&&(we=we.nextSibling);we.parentNode!==te;){if(iu(E,we)||/^(TD|TH)$/.test(we.parentNode.nodeName))return we;we=we.parentNode}return we},Js=function(E,$,H){for(var te=[],we=E.dom,$e=Zf(E,$,!0,H),Wt=Zf(E,$,!1,H),En,ir=[],jn=$e;jn&&(ir.push(jn),jn!==Wt);jn=jn.nextSibling);return Aa.each(ir,function(la){if(iu(E,la)){te.push(la),En=null;return}if(we.isBlock(la)||wu(la)){wu(la)&&we.remove(la),En=null;return}var Di=la.nextSibling;if(Cp.isBookmarkNode(la)&&(qr(Di)||iu(E,Di)||!Di&&la.parentNode===H)){En=null;return}En||(En=we.create("p"),la.parentNode.insertBefore(En,la),te.push(En)),En.appendChild(la)}),te},Io=function(E,$,H){var te=E.getStyle($,"list-style-type"),we=H?H["list-style-type"]:"";return we=we===null?"":we,te===we},ed=function(E,$,H){var te=E.selection.getRng(),we="LI",$e=Vu(E,E.selection.getStart(!0)),Wt=E.dom;if(Wt.getContentEditable(E.selection.getNode())!=="false"){$=$.toUpperCase(),$==="DL"&&(we="DT");var En=na(te),ir=Js(E,te,$e);Aa.each(ir,function(jn){var la,Di=jn.previousSibling,Ga=jn.parentNode;As(Ga)||(Di&&qr(Di)&&Di.nodeName===$&&Io(Wt,Di,H)?(la=Di,jn=Wt.rename(jn,we),Di.appendChild(jn)):(la=Wt.create($),jn.parentNode.insertBefore(la,jn),la.appendChild(jn),jn=Wt.rename(jn,we)),Oi(Wt,jn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Su(Wt,la,H),ff(E.dom,la))}),E.selection.setRng(Ys(En))}},Sp=function(E,$){return E&&$&&qr(E)&&E.nodeName===$.nodeName},cf=function(E,$,H){var te=E.getStyle($,"list-style-type",!0),we=E.getStyle(H,"list-style-type",!0);return te===we},lf=function(E,$){return E.className===$.className},Za=function(E,$,H){return Sp($,H)&&cf(E,$,H)&&lf($,H)},ff=function(E,$){var H,te;if(H=$.nextSibling,Za(E,$,H)){for(;te=H.firstChild;)$.appendChild(te);E.remove(H)}if(H=$.previousSibling,Za(E,$,H)){for(;te=H.lastChild;)$.insertBefore(te,$.firstChild);E.remove(H)}},vf=function(E,$,H,te){if($.nodeName!==H){var we=E.dom.rename($,H);Su(E.dom,we,te),_(E,El(H),we)}else Su(E.dom,$,te),_(E,El(H),$)},Gi=function(E,$,H,te,we){var $e=qr($);if($e&&$.nodeName===te&&!el(we))ss(E);else{ed(E,te,we);var Wt=na(E.selection.getRng()),En=$e?xo([$],H,!0):H;Aa.each(En,function(ir){vf(E,ir,te,we)}),E.selection.setRng(Ys(Wt))}},el=function(E){return"list-style-type"in E},df=function(E,$,H,te){if($!==E.getBody())if($)if($.nodeName===H&&!el(te)&&!Cu($))ss(E);else{var we=na(E.selection.getRng());Su(E.dom,$,te);var $e=E.dom.rename($,H);ff(E.dom,$e),E.selection.setRng(Ys(we)),ed(E,H,te),_(E,El(H),$e)}else ed(E,H,te),_(E,El(H),$)},tl=function(E,$,H){var te=Sr(E),we=Yf(E),$e=yr(H)?H:{};we.length>0?Gi(E,te,we,$,$e):df(E,te,$,$e)},_a=Lu.DOM,Uu=function(E,$){var H=$.parentNode;if(H.nodeName==="LI"&&H.firstChild===$){var te=H.previousSibling;te&&te.nodeName==="LI"?(te.appendChild($),ce(E,H)&&_a.remove(H)):_a.setStyle(H,"listStyleType","none")}if(qr(H)){var te=H.previousSibling;te&&te.nodeName==="LI"&&te.appendChild($)}},fm=function(E,$){var H=Aa.grep(E.select("ol,ul",$));Aa.each(H,function(te){Uu(E,te)})},cs=function(E,$,H,te){var we=$.startContainer,$e=$.startOffset;if(ki(we)&&(H?$e<we.data.length:$e>0))return we;var Wt=E.schema.getNonEmptyElements();we.nodeType===1&&(we=au.getNode(we,$e));var En=new Ws(we,te);for(H&&V(E.dom,we)&&En.next();we=En[H?"next":"prev2"]();)if(we.nodeName==="LI"&&!we.hasChildNodes()||Wt[we.nodeName]||ki(we)&&we.data.length>0)return we},vm=function(E,$){var H=$.childNodes;return H.length===1&&!qr(H[0])&&E.isBlock(H[0])},xp=function(E,$){vm(E,$)&&E.remove($.firstChild,!0)},Bg=function(E,$,H){var te,we=vm(E,H)?H.firstChild:H;if(xp(E,$),!ce(E,$,!0))for(;te=$.firstChild;)we.appendChild(te)},mf=function(E,$,H){var te,we=$.parentNode;if(!(!Se(E,$)||!Se(E,H))){qr(H.lastChild)&&(te=H.lastChild),we===H.lastChild&&wu(we.previousSibling)&&E.remove(we.previousSibling);var $e=H.lastChild;$e&&wu($e)&&$.hasChildNodes()&&E.remove($e),ce(E,H,!0)&&E.$(H).empty(),Bg(E,$,H),te&&H.appendChild(te);var Wt=ru(Er.fromDom(H),Er.fromDom($)),En=Wt?E.getParents($,qr,H):[];E.remove($),kn(En,function(ir){ce(E,ir)&&ir!==E.getRoot()&&E.remove(ir)})}},gf=function(E,$,H){E.dom.$(H).empty(),mf(E.dom,$,H),E.selection.setCursorLocation(H,0)},Al=function(E,$,H,te){var we=E.dom;if(we.isEmpty(te))gf(E,H,te);else{var $e=na($);mf(we,H,te),E.selection.setRng(Ys($e))}},Sn=function(E,$,H,te){var we=na($);mf(E.dom,H,te);var $e=Ys(we);E.selection.setRng($e)},_s=function(E,$){var H=E.dom,te=E.selection,we=te.getStart(),$e=Vu(E,we),Wt=H.getParent(te.getStart(),"LI",$e);if(Wt){var En=Wt.parentNode;if(En===E.getBody()&&ce(H,En))return!0;var ir=Yc(te.getRng()),jn=H.getParent(cs(E,ir,$,$e),"LI",$e);if(jn&&jn!==Wt)return E.undoManager.transact(function(){$?Al(E,ir,jn,Wt):wc(Wt)?Oo(E):Sn(E,ir,Wt,jn)}),!0;if(!jn&&!$&&ir.startOffset===0&&ir.endOffset===0)return E.undoManager.transact(function(){ss(E)}),!0}return!1},xu=function(E,$,H){var te=E.getParent($.parentNode,E.isBlock,H);E.remove($),te&&E.isEmpty(te)&&E.remove(te)},qi=function(E,$){var H=E.dom,te=E.selection.getStart(),we=Vu(E,te),$e=H.getParent(te,H.isBlock,we);if($e&&H.isEmpty($e)){var Wt=Yc(E.selection.getRng()),En=H.getParent(cs(E,Wt,$,we),"LI",we);if(En)return E.undoManager.transact(function(){xu(H,$e,we),ff(H,En.parentNode),E.selection.select(En,!0),E.selection.collapse($)}),!0}return!1},Bs=function(E,$){return _s(E,$)||qi(E,$)},oo=function(E){var $=E.selection.getStart(),H=Vu(E,$),te=E.dom.getParent($,"LI,DT,DD",H);return te||uu(E).length>0?(E.undoManager.transact(function(){E.execCommand("Delete"),fm(E.dom,E.getBody())}),!0):!1},Fo=function(E,$){return E.selection.isCollapsed()?Bs(E,$):oo(E)},ho=function(E){E.on("keydown",function($){$.keyCode===Ui.BACKSPACE?Fo(E,!1)&&$.preventDefault():$.keyCode===Ui.DELETE&&Fo(E,!0)&&$.preventDefault()})},Dl=function(E){return{backspaceDelete:function($){Fo(E,$)}}},Ai=function(E,$){var H=Sr(E);E.undoManager.transact(function(){yr($.styles)&&E.dom.setStyles(H,$.styles),yr($.attrs)&&Q($.attrs,function(te,we){return E.dom.setAttrib(H,we,te)})})},Pt=function(E){var $=Ur(Va(E).split("")),H=Mt($,function(te,we){var $e=te.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,we)*$e});return ue(H,function(te,we){return te+we},0)},hf=function(E){if(E--,E<0)return"";var $=E%26,H=Math.floor(E/26),te=hf(H),we=String.fromCharCode("A".charCodeAt(0)+$);return te+we},Mg=function(E){return/^[A-Z]+$/.test(E)},In=function(E){return/^[a-z]+$/.test(E)},ra=function(E){return/^[0-9]+$/.test(E)},dm=function(E){return ra(E)?2:Mg(E)?0:In(E)?1:Jr(E)?3:4},Sc=function(E){switch(dm(E)){case 2:return Bt.some({listStyleType:Bt.none(),start:E});case 0:return Bt.some({listStyleType:Bt.some("upper-alpha"),start:Pt(E).toString()});case 1:return Bt.some({listStyleType:Bt.some("lower-alpha"),start:Pt(E).toString()});case 3:return Bt.some({listStyleType:Bt.none(),start:""});case 4:return Bt.none()}},Ra=function(E){var $=parseInt(E.start,10);return Fa(E.listStyleType,"upper-alpha")?hf($):Fa(E.listStyleType,"lower-alpha")?hf($).toLowerCase():E.start},mm=function(E){var $=Sr(E);Os($)&&E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ra({start:E.dom.getAttrib($,"start","1"),listStyleType:Bt.some(E.dom.getStyle($,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(H){var te=H.getData();Sc(te.start).each(function(we){E.execCommand("mceListUpdate",!1,{attrs:{start:we.start==="1"?"":we.start},styles:{"list-style-type":we.listStyleType.getOr("")}})}),H.close()}})},Wu=function(E,$){return function(){var H=Sr(E);return H&&H.nodeName===$}},td=function(E){E.addCommand("mceListProps",function(){mm(E)})},Wn=function(E){E.on("BeforeExecCommand",function($){var H=$.command.toLowerCase();H==="indent"?Zc(E):H==="outdent"&&Oo(E)}),E.addCommand("InsertUnorderedList",function($,H){tl(E,"UL",H)}),E.addCommand("InsertOrderedList",function($,H){tl(E,"OL",H)}),E.addCommand("InsertDefinitionList",function($,H){tl(E,"DL",H)}),E.addCommand("RemoveList",function(){ss(E)}),td(E),E.addCommand("mceListUpdate",function($,H){yr(H)&&Ai(E,H)}),E.addQueryStateHandler("InsertUnorderedList",Wu(E,"UL")),E.addQueryStateHandler("InsertOrderedList",Wu(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",Wu(E,"DL"))},lu=function(E){E.on("keydown",function($){$.keyCode!==Ui.TAB||Ui.metaKeyPressed($)||E.undoManager.transact(function(){($.shiftKey?Oo(E):Zc(E))&&$.preventDefault()})})},Wb=function(E){Fe(E)&&lu(E),ho(E)},jb=function(E){var $=function(H){return function(){return E.execCommand(H)}};E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:$("InsertOrderedList"),onSetup:function(H){return Ja(E,"OL",H.setActive)}}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:$("InsertUnorderedList"),onSetup:function(H){return Ja(E,"UL",H.setActive)}}))},Ba=function(E){var $={text:"List properties...",icon:"ordered-list",onAction:function(){return E.execCommand("mceListProps")},onSetup:function(H){return Ja(E,"OL",function(te){return H.setDisabled(!te)})}};E.ui.registry.addMenuItem("listprops",$),E.ui.registry.addContextMenu("lists",{update:function(H){var te=Sr(E,H);return Os(te)?["listprops"]:[]}})};function gm(){cn.add("lists",function(E){return E.hasPlugin("rtc",!0)===!1?(Wb(E),Wn(E)):td(E),jb(E),Ba(E),Dl(E)})}gm()})();(function(){var cn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ot=function(){return Ot=Object.assign||function(be){for(var re,Te=1,dt=arguments.length;Te<dt;Te++){re=arguments[Te];for(var zt in re)Object.prototype.hasOwnProperty.call(re,zt)&&(be[zt]=re[zt])}return be},Ot.apply(this,arguments)},An=function(Q){var be=typeof Q;return Q===null?"null":be==="object"&&(Array.prototype.isPrototypeOf(Q)||Q.constructor&&Q.constructor.name==="Array")?"array":be==="object"&&(String.prototype.isPrototypeOf(Q)||Q.constructor&&Q.constructor.name==="String")?"string":be},Ln=function(Q){return function(be){return An(be)===Q}},Xt=Ln("string"),yr=Ln("object"),ar=Ln("array"),Ar=function(Q){return Q==null},no=function(Q){return!Ar(Q)},So=function(){},fo=function(Q){return function(){return Q}},Tn=function(Q){return Q},or=fo(!1),za=fo(!0),Ht=function(){return at},at=function(){var Q=function(Te){return Te()},be=Tn,re={fold:function(Te,dt){return Te()},isSome:or,isNone:za,getOr:be,getOrThunk:Q,getOrDie:function(Te){throw new Error(Te||"error: getOrDie called on none.")},getOrNull:fo(null),getOrUndefined:fo(void 0),or:be,orThunk:Q,map:Ht,each:So,bind:Ht,exists:or,forall:za,filter:function(){return Ht()},toArray:function(){return[]},toString:fo("none()")};return re}(),cr=function(Q){var be=fo(Q),re=function(){return dt},Te=function(zt){return zt(Q)},dt={fold:function(zt,mn){return mn(Q)},isSome:za,isNone:or,getOr:be,getOrThunk:be,getOrDie:be,getOrNull:be,getOrUndefined:be,or:re,orThunk:re,map:function(zt){return cr(zt(Q))},each:function(zt){zt(Q)},bind:Te,exists:Te,forall:Te,filter:function(zt){return zt(Q)?dt:at},toArray:function(){return[Q]},toString:function(){return"some("+Q+")"}};return dt},Ct=function(Q){return Q==null?at:cr(Q)},_n={some:cr,none:Ht,from:Ct},ye=Array.prototype.push,Lt=function(Q,be){for(var re=0,Te=Q.length;re<Te;re++){var dt=Q[re];be(dt,re)}},Bt=function(Q){for(var be=[],re=0,Te=Q.length;re<Te;++re){if(!ar(Q[re]))throw new Error("Arr.flatten item "+re+" was not an array, input: "+Q);ye.apply(be,Q[re])}return be},Vr=function(Q){var be=Q,re=function(){return be},Te=function(dt){be=dt};return{get:re,set:Te}},Rn=Object.keys,Mt=Object.hasOwnProperty,kn=function(Q,be){for(var re=Rn(Q),Te=0,dt=re.length;Te<dt;Te++){var zt=re[Te],mn=Q[zt];be(mn,zt)}},Tt=function(Q,be){return vo(Q,be)?_n.from(Q[be]):_n.none()},vo=function(Q,be){return Mt.call(Q,be)},ue=function(Q){return Q.getParam("media_scripts")},W=function(Q){return Q.getParam("audio_template_callback")},gt=function(Q){return Q.getParam("video_template_callback")},nr=function(Q){return Q.getParam("media_live_embeds",!0)},et=function(Q){return Q.getParam("media_filter_html",!0)},Ur=function(Q){return Q.getParam("media_url_resolver")},qn=function(Q){return Q.getParam("media_alt_source",!0)},D=function(Q){return Q.getParam("media_poster",!0)},ia=function(Q){return Q.getParam("media_dimensions",!0)},ut=tinymce.util.Tools.resolve("tinymce.util.Tools"),Et=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),xo=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),wi=function(Q,be){if(Q){for(var re=0;re<Q.length;re++)if(be.indexOf(Q[re].filter)!==-1)return Q[re]}},Un=Et.DOM,Ca=function(Q){return Q.replace(/px$/,"")},ee=function(Q){var be=Q.map.style,re=be?Un.parseStyle(be):{};return{type:"ephox-embed-iri",source:Q.map["data-ephox-embed-iri"],altsource:"",poster:"",width:Tt(re,"max-width").map(Ca).getOr(""),height:Tt(re,"max-height").map(Ca).getOr("")}},ni=function(Q,be){var re=Vr(!1),Te={};return xo({validate:!1,allow_conditional_comments:!0,start:function(dt,zt){if(!re.get())if(vo(zt.map,"data-ephox-embed-iri"))re.set(!0),Te=ee(zt);else{if(!Te.source&&dt==="param"&&(Te.source=zt.map.movie),(dt==="iframe"||dt==="object"||dt==="embed"||dt==="video"||dt==="audio")&&(Te.type||(Te.type=dt),Te=ut.extend(zt.map,Te)),dt==="script"){var mn=wi(Q,zt.map.src);if(!mn)return;Te={type:"script",source:zt.map.src,width:String(mn.width),height:String(mn.height)}}dt==="source"&&(Te.source?Te.altsource||(Te.altsource=zt.map.src):Te.source=zt.map.src),dt==="img"&&!Te.poster&&(Te.poster=zt.map.src)}}}).parse(be),Te.source=Te.source||Te.src||Te.data,Te.altsource=Te.altsource||"",Te.poster=Te.poster||"",Te},nt=function(Q){var be={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},re=Q.toLowerCase().split(".").pop(),Te=be[re];return Te||""},kt=tinymce.util.Tools.resolve("tinymce.html.Schema"),Ci=tinymce.util.Tools.resolve("tinymce.html.Writer"),Fr=Et.DOM,tn=function(Q){return/^[0-9.]+$/.test(Q)?Q+"px":Q},Wr=function(Q,be){kn(be,function(re,Te){var dt=""+re;if(Q.map[Te])for(var zt=Q.length;zt--;){var mn=Q[zt];mn.name===Te&&(dt?(Q.map[Te]=dt,mn.value=dt):(delete Q.map[Te],Q.splice(zt,1)))}else dt&&(Q.push({name:Te,value:dt}),Q.map[Te]=dt)})},Hn=function(Q,be){var re=be.map.style,Te=re?Fr.parseStyle(re):{};Te["max-width"]=tn(Q.width),Te["max-height"]=tn(Q.height),Wr(be,{style:Fr.serializeStyle(Te)})},ft=["source","altsource"],lr=function(Q,be,re){var Te=Ci(),dt=Vr(!1),zt=0,mn;return xo({validate:!1,allow_conditional_comments:!0,comment:function(wn){Te.comment(wn)},cdata:function(wn){Te.cdata(wn)},text:function(wn,wr){Te.text(wn,wr)},start:function(wn,wr,Cr){if(!dt.get())if(vo(wr.map,"data-ephox-embed-iri"))dt.set(!0),Hn(be,wr);else{switch(wn){case"video":case"object":case"embed":case"img":case"iframe":be.height!==void 0&&be.width!==void 0&&Wr(wr,{width:be.width,height:be.height});break}if(re)switch(wn){case"video":Wr(wr,{poster:be.poster,src:""}),be.altsource&&Wr(wr,{src:""});break;case"iframe":Wr(wr,{src:be.source});break;case"source":if(zt<2&&(Wr(wr,{src:be[ft[zt]],type:be[ft[zt]+"mime"]}),!be[ft[zt]]))return;zt++;break;case"img":if(!be.poster)return;mn=!0;break}}Te.start(wn,wr,Cr)},end:function(wn){if(!dt.get()){if(wn==="video"&&re){for(var wr=0;wr<2;wr++)if(be[ft[wr]]){var Cr=[];Cr.map={},zt<=wr&&(Wr(Cr,{src:be[ft[wr]],type:be[ft[wr]+"mime"]}),Te.start("source",Cr,!0))}}if(be.poster&&wn==="object"&&re&&!mn){var rr=[];rr.map={},Wr(rr,{src:be.poster,width:be.width,height:be.height}),Te.start("img",rr,!0)}}Te.end(wn)}},kt({})).parse(Q),Te.getContent()},Va=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],jt=function(Q){var be=Q.match(/^(https?:\/\/|www\.)(.+)$/i);return be&&be.length>1?be[1]==="www."?"https://":be[1]:"https://"},Jr=function(Q,be){for(var re=jt(be),Te=Q.regex.exec(be),dt=re+Q.url,zt=function(wn){dt=dt.replace("$"+wn,function(){return Te[wn]?Te[wn]:""})},mn=0;mn<Te.length;mn++)zt(mn);return dt.replace(/\?$/,"")},jr=function(Q){var be=Va.filter(function(re){return re.regex.test(Q)});return be.length>0?ut.extend({},be[0],{url:Jr(be[0],Q)}):null},an=function(Q){var be=Q.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+Q.source+'" width="'+Q.width+'" height="'+Q.height+'"'+be+"></iframe>"},ua=function(Q){var be='<object data="'+Q.source+'" width="'+Q.width+'" height="'+Q.height+'" type="application/x-shockwave-flash">';return Q.poster&&(be+='<img src="'+Q.poster+'" width="'+Q.width+'" height="'+Q.height+'" />'),be+="</object>",be},Si=function(Q,be){return be?be(Q):'<audio controls="controls" src="'+Q.source+'">'+(Q.altsource?`
<source src="`+Q.altsource+'"'+(Q.altsourcemime?' type="'+Q.altsourcemime+'"':"")+` />
`:"")+"</audio>"},rs=function(Q,be){return be?be(Q):'<video width="'+Q.width+'" height="'+Q.height+'"'+(Q.poster?' poster="'+Q.poster+'"':"")+` controls="controls">
<source src="`+Q.source+'"'+(Q.sourcemime?' type="'+Q.sourcemime+'"':"")+` />
`+(Q.altsource?'<source src="'+Q.altsource+'"'+(Q.altsourcemime?' type="'+Q.altsourcemime+'"':"")+` />
`:"")+"</video>"},nu=function(Q){return'<script src="'+Q.source+'"><\/script>'},Li=function(Q,be){var re=ut.extend({},be);if(!re.source&&(ut.extend(re,ni(ue(Q),re.embed)),!re.source))return"";re.altsource||(re.altsource=""),re.poster||(re.poster=""),re.source=Q.convertURL(re.source,"source"),re.altsource=Q.convertURL(re.altsource,"source"),re.sourcemime=nt(re.source),re.altsourcemime=nt(re.altsource),re.poster=Q.convertURL(re.poster,"poster");var Te=jr(re.source);if(Te&&(re.source=Te.url,re.type=Te.type,re.allowfullscreen=Te.allowFullscreen,re.width=re.width||String(Te.w),re.height=re.height||String(Te.h)),re.embed)return lr(re.embed,re,!0);var dt=wi(ue(Q),re.source);dt&&(re.type="script",re.width=String(dt.width),re.height=String(dt.height));var zt=W(Q),mn=gt(Q);return re.width=re.width||"300",re.height=re.height||"150",ut.each(re,function(wn,wr){re[wr]=Q.dom.encode(""+wn)}),re.type==="iframe"?an(re):re.sourcemime==="application/x-shockwave-flash"?ua(re):re.sourcemime.indexOf("audio")!==-1?Si(re,zt):re.type==="script"?nu(re):rs(re,mn)},To=function(Q){return Q.hasAttribute("data-mce-object")||Q.hasAttribute("data-ephox-embed-iri")},bu=function(Q){Q.on("click keyup touchend",function(){var be=Q.selection.getNode();be&&Q.dom.hasClass(be,"mce-preview-object")&&Q.dom.getAttrib(be,"data-mce-selected")&&be.setAttribute("data-mce-selected","2")}),Q.on("ObjectSelected",function(be){var re=be.target.getAttribute("data-mce-object");re==="script"&&be.preventDefault()}),Q.on("ObjectResized",function(be){var re=be.target;if(re.getAttribute("data-mce-object")){var Te=re.getAttribute("data-mce-html");Te&&(Te=unescape(Te),re.setAttribute("data-mce-html",escape(lr(Te,{width:String(be.width),height:String(be.height)}))))}})},Go=tinymce.util.Tools.resolve("tinymce.util.Promise"),sa={},ta=function(Q,be,re){return new Go(function(Te,dt){var zt=function(mn){return mn.html&&(sa[Q.source]=mn),Te({url:Q.source,html:mn.html?mn.html:be(Q)})};sa[Q.source]?zt(sa[Q.source]):re({url:Q.source},zt,dt)})},Ua=function(Q,be){return Go.resolve({html:be(Q),url:Q.source})},Gr=function(Q){return function(be){return Li(Q,be)}},kr=function(Q,be){var re=Ur(Q);return re?ta(be,Gr(Q),re):Ua(be,Gr(Q))},Po=function(Q){return vo(sa,Q)},xi=function(Q,be){return Tt(be,Q).bind(function(re){return Tt(re,"meta")})},ro=function(Q,be,re){return function(Te){var dt,zt=function(){return Tt(Q,Te)},mn=function(){return Tt(be,Te)},wn=function(rr){return Tt(rr,"value").bind(function(Oa){return Oa.length>0?_n.some(Oa):_n.none()})},wr=function(){return zt().bind(function(rr){return yr(rr)?wn(rr).orThunk(mn):mn().orThunk(function(){return _n.from(rr)})})},Cr=function(){return mn().orThunk(function(){return zt().bind(function(rr){return yr(rr)?wn(rr):_n.from(rr)})})};return dt={},dt[Te]=(Te===re?wr():Cr()).getOr(""),dt}},Zn=function(Q,be){var re={};return Tt(Q,"dimensions").each(function(Te){Lt(["width","height"],function(dt){Tt(be,dt).orThunk(function(){return Tt(Te,dt)}).each(function(zt){return re[dt]=zt})})}),re},mo=function(Q,be){var re=be?xi(be,Q).getOr({}):{},Te=ro(Q,re,be);return Ot(Ot(Ot(Ot(Ot({},Te("source")),Te("altsource")),Te("poster")),Te("embed")),Zn(Q,re))},No=function(Q){var be=Ot(Ot({},Q),{source:{value:Tt(Q,"source").getOr("")},altsource:{value:Tt(Q,"altsource").getOr("")},poster:{value:Tt(Q,"poster").getOr("")}});return Lt(["width","height"],function(re){Tt(Q,re).each(function(Te){var dt=be.dimensions||{};dt[re]=Te,be.dimensions=dt})}),be},$o=function(Q){return function(be){var re=be&&be.msg?"Media embed handler error: "+be.msg:"Media embed handler threw unknown error.";Q.notificationManager.open({type:"error",text:re})}},Gt=function(Q,be){return ni(ue(Q),be)},hr=function(Q){var be=Q.selection.getNode(),re=To(be)?Q.serializer.serialize(be,{selection:!0}):"";return Ot({embed:re},ni(ue(Q),re))},ha=function(Q,be){return function(re){if(Xt(re.url)&&re.url.trim().length>0){var Te=re.html,dt=Gt(be,Te),zt=Ot(Ot({},dt),{source:re.url,embed:Te});Q.setData(No(zt))}}},Ti=function(Q,be){for(var re=Q.dom.select("*[data-mce-object]"),Te=0;Te<be.length;Te++)for(var dt=re.length-1;dt>=0;dt--)be[Te]===re[dt]&&re.splice(dt,1);Q.selection.select(re[0])},Es=function(Q,be){var re=Q.dom.select("*[data-mce-object]");Q.insertContent(be),Ti(Q,re),Q.nodeChanged()},pr=function(Q,be,re){be.embed=lr(be.embed,be),be.embed&&(Q.source===be.source||Po(be.source))?Es(re,be.embed):kr(re,be).then(function(Te){Es(re,Te.html)}).catch($o(re))},$n=function(Q){var be=hr(Q),re=Vr(be),Te=No(be),dt=function(pa,xa){var Xe=mo(xa.getData(),"source");pa.source!==Xe.source&&(ha(Iu,Q)({url:Xe.source,html:""}),kr(Q,Xe).then(ha(Iu,Q)).catch($o(Q)))},zt=function(pa){var xa=mo(pa.getData()),Xe=Gt(Q,xa.embed);pa.setData(No(Xe))},mn=function(pa,xa){var Xe=mo(pa.getData(),xa),Ya=Li(Q,Xe);pa.setData(No(Ot(Ot({},Xe),{embed:Ya})))},wn=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],wr=ia(Q)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Cr={title:"General",name:"general",items:Bt([wn,wr])},rr={type:"textarea",name:"embed",label:"Paste your embed code below:"},Oa={title:"Embed",items:[rr]},Sa=[];qn(Q)&&Sa.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),D(Q)&&Sa.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var yu={title:"Advanced",name:"advanced",items:Sa},ao=[Cr,Oa];Sa.length>0&&ao.push(yu);var Wi={type:"tabpanel",tabs:ao},Iu=Q.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Wi,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(pa){var xa=mo(pa.getData());pr(re.get(),xa,Q),pa.close()},onChange:function(pa,xa){switch(xa.name){case"source":dt(re.get(),pa);break;case"embed":zt(pa);break;case"dimensions":case"altsource":case"poster":mn(pa,xa.name);break}re.set(mo(pa.getData()))},initialData:Te})},ko=function(Q){var be=function(){$n(Q)};return{showDialog:be}},as=function(Q){var be=function(){$n(Q)};Q.addCommand("mceMedia",be)},qo=tinymce.util.Tools.resolve("tinymce.html.Node"),ri=tinymce.util.Tools.resolve("tinymce.Env"),ai=tinymce.util.Tools.resolve("tinymce.html.DomParser"),$u=function(Q,be){if(et(Q)===!1)return be;var re=Ci(),Te;return xo({validate:!1,allow_conditional_comments:!1,comment:function(dt){Te||re.comment(dt)},cdata:function(dt){Te||re.cdata(dt)},text:function(dt,zt){Te||re.text(dt,zt)},start:function(dt,zt,mn){if(Te=!0,!(dt==="script"||dt==="noscript"||dt==="svg")){for(var wn=zt.length-1;wn>=0;wn--){var wr=zt[wn].name;wr.indexOf("on")===0&&(delete zt.map[wr],zt.splice(wn,1)),wr==="style"&&(zt[wn].value=Q.dom.serializeStyle(Q.dom.parseStyle(zt[wn].value),dt))}re.start(dt,zt,mn),Te=!1}},end:function(dt){Te||re.end(dt)}},kt({})).parse(be),re.getContent()},Hi=function(Q){var be=Q.name;return be==="iframe"||be==="video"||be==="audio"},oi=function(Q,be,re,Te){Te===void 0&&(Te=null);var dt=Q.attr(re);return no(dt)?dt:vo(be,re)?null:Te},zu=function(Q,be,re){var Te=be.name==="img"||Q.name==="video",dt=Te?"300":null,zt=Q.name==="audio"?"30":"150",mn=Te?zt:null;be.attr({width:oi(Q,re,"width",dt),height:oi(Q,re,"height",mn)})},Er=function(Q,be,re,Te){for(var dt=ai({forced_root_block:!1,validate:!1},Q.schema).parse(Te,{context:be});dt.firstChild;)re.append(dt.firstChild)},Vi=function(Q,be){var re=be.name,Te=new qo("img",1);return Te.shortEnded=!0,Us(Q,be,Te),zu(be,Te,{}),Te.attr({style:be.attr("style"),src:ri.transparentSrc,"data-mce-object":re,class:"mce-object mce-object-"+re}),Te},Jt=function(Q,be){var re=be.name,Te=new qo("span",1);Te.attr({contentEditable:"false",style:be.attr("style"),"data-mce-object":re,class:"mce-preview-object mce-object-"+re}),Us(Q,be,Te);var dt=Q.dom.parseStyle(be.attr("style")),zt=new qo(re,1);if(zu(be,zt,dt),zt.attr({src:be.attr("src"),style:be.attr("style"),class:be.attr("class")}),re==="iframe")zt.attr({allowfullscreen:be.attr("allowfullscreen"),frameborder:"0"});else{var mn=["controls","crossorigin","currentTime","loop","muted","poster","preload"];Lt(mn,function(Cr){zt.attr(Cr,be.attr(Cr))});var wn=Te.attr("data-mce-html");no(wn)&&Er(Q,re,zt,unescape(wn))}var wr=new qo("span",1);return wr.attr("class","mce-shim"),Te.append(zt),Te.append(wr),Te},Us=function(Q,be,re){for(var Te=be.attributes,dt=Te.length;dt--;){var zt=Te[dt].name,mn=Te[dt].value;zt!=="width"&&zt!=="height"&&zt!=="style"&&((zt==="data"||zt==="src")&&(mn=Q.convertURL(mn,zt)),re.attr("data-mce-p-"+zt,mn))}var wn=be.firstChild&&be.firstChild.value;wn&&(re.attr("data-mce-html",escape($u(Q,wn))),re.firstChild=null)},Ko=function(Q){var be=Q.attr("class");return be&&/\btiny-pageembed\b/.test(be)},ru=function(Q){for(;Q=Q.parent;)if(Q.attr("data-ephox-embed-iri")||Ko(Q))return!0;return!1},Xo=function(Q){return function(be){for(var re=be.length,Te,dt;re--;)Te=be[re],Te.parent&&(Te.parent.attr("data-mce-object")||Te.name==="script"&&(dt=wi(ue(Q),Te.attr("src")),!dt)||(dt&&(dt.width&&Te.attr("width",dt.width.toString()),dt.height&&Te.attr("height",dt.height.toString())),Hi(Te)&&nr(Q)&&ri.ceFalse?ru(Te)||Te.replace(Jt(Q,Te)):ru(Te)||Te.replace(Vi(Q,Te))))}},au=function(Q){Q.on("preInit",function(){var be=Q.schema.getSpecialElements();ut.each("video audio iframe object".split(" "),function(Te){be[Te]=new RegExp("</"+Te+"[^>]*>","gi")});var re=Q.schema.getBoolAttrs();ut.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(Te){re[Te]={}}),Q.parser.addNodeFilter("iframe,video,audio,object,embed,script",Xo(Q)),Q.serializer.addAttributeFilter("data-mce-object",function(Te,dt){for(var zt=Te.length,mn,wn,wr,Cr,rr,Oa,Sa,yu;zt--;)if(mn=Te[zt],!!mn.parent){for(Sa=mn.attr(dt),wn=new qo(Sa,1),Sa!=="audio"&&Sa!=="script"&&(yu=mn.attr("class"),yu&&yu.indexOf("mce-preview-object")!==-1?wn.attr({width:mn.firstChild.attr("width"),height:mn.firstChild.attr("height")}):wn.attr({width:mn.attr("width"),height:mn.attr("height")})),wn.attr({style:mn.attr("style")}),Cr=mn.attributes,wr=Cr.length;wr--;){var ao=Cr[wr].name;ao.indexOf("data-mce-p-")===0&&wn.attr(ao.substr(11),Cr[wr].value)}Sa==="script"&&wn.attr("type","text/javascript"),rr=mn.attr("data-mce-html"),rr&&(Oa=new qo("#text",3),Oa.raw=!0,Oa.value=$u(Q,unescape(rr)),wn.append(Oa)),mn.replace(wn)}})}),Q.on("SetContent",function(){Q.$("span.mce-preview-object").each(function(be,re){var Te=Q.$(re);Te.find("span.mce-shim").length===0&&Te.append('<span class="mce-shim"></span>')})})},Ws=function(Q){Q.on("ResolveName",function(be){var re;be.target.nodeType===1&&(re=be.target.getAttribute("data-mce-object"))&&(be.name=re)})},Ui=function(Q){var be=function(){return Q.execCommand("mceMedia")};Q.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:be,onSetup:function(re){var Te=Q.selection;return re.setActive(To(Te.getNode())),Te.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",re.setActive).unbind}}),Q.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:be})};function js(){cn.add("media",function(Q){return as(Q),Ui(Q),Ws(Q),au(Q),bu(Q),ko(Q)})}js()})();(function(){var cn=function(T){var I=T,ae=function(){return I},fe=function(De){I=De};return{get:ae,set:fe}},Ot=tinymce.util.Tools.resolve("tinymce.PluginManager"),An=function(T){return T.hasPlugin("powerpaste",!0)?(typeof window.console<"u"&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0):!1},Ln=function(T){return{clipboard:T}},Xt=function(T){var I=typeof T;return T===null?"null":I==="object"&&(Array.prototype.isPrototypeOf(T)||T.constructor&&T.constructor.name==="Array")?"array":I==="object"&&(String.prototype.isPrototypeOf(T)||T.constructor&&T.constructor.name==="String")?"string":I},yr=function(T){return function(I){return Xt(I)===T}},ar=function(T){return function(I){return typeof I===T}},Ar=yr("array"),no=function(T){return T==null},So=function(T){return!no(T)},fo=ar("function"),Tn=function(){},or=function(T){return function(){return T}},za=function(T){return T},Ht=or(!1),at=or(!0),cr=function(){return Ct},Ct=function(){var T=function(fe){return fe()},I=za,ae={fold:function(fe,De){return fe()},isSome:Ht,isNone:at,getOr:I,getOrThunk:T,getOrDie:function(fe){throw new Error(fe||"error: getOrDie called on none.")},getOrNull:or(null),getOrUndefined:or(void 0),or:I,orThunk:T,map:cr,each:Tn,bind:cr,exists:Ht,forall:at,filter:function(){return cr()},toArray:function(){return[]},toString:or("none()")};return ae}(),_n=function(T){var I=or(T),ae=function(){return De},fe=function(st){return st(T)},De={fold:function(st,dn){return dn(T)},isSome:at,isNone:Ht,getOr:I,getOrThunk:I,getOrDie:I,getOrNull:I,getOrUndefined:I,or:ae,orThunk:ae,map:function(st){return _n(st(T))},each:function(st){st(T)},bind:fe,exists:fe,forall:fe,filter:function(st){return st(T)?De:Ct},toArray:function(){return[T]},toString:function(){return"some("+T+")"}};return De},ye=function(T){return T==null?Ct:_n(T)},Lt={some:_n,none:cr,from:ye},Bt=Array.prototype.slice,Vr=Array.prototype.push,Rn=function(T,I){for(var ae=0,fe=T.length;ae<fe;ae++){var De=T[ae];if(I(De,ae))return!0}return!1},Mt=function(T,I){for(var ae=T.length,fe=new Array(ae),De=0;De<ae;De++){var st=T[De];fe[De]=I(st,De)}return fe},kn=function(T,I){for(var ae=0,fe=T.length;ae<fe;ae++){var De=T[ae];I(De,ae)}},Tt=function(T,I){for(var ae=[],fe=0,De=T.length;fe<De;fe++){var st=T[fe];I(st,fe)&&ae.push(st)}return ae},vo=function(T,I,ae){return kn(T,function(fe,De){ae=I(ae,fe,De)}),ae},ue=function(T){for(var I=[],ae=0,fe=T.length;ae<fe;++ae){if(!Ar(T[ae]))throw new Error("Arr.flatten item "+ae+" was not an array, input: "+T);Vr.apply(I,T[ae])}return I},W=function(T,I){return ue(Mt(T,I))},gt=fo(Array.from)?Array.from:function(T){return Bt.call(T)},nr=function(){return nr=Object.assign||function(I){for(var ae,fe=1,De=arguments.length;fe<De;fe++){ae=arguments[fe];for(var st in ae)Object.prototype.hasOwnProperty.call(ae,st)&&(I[st]=ae[st])}return I},nr.apply(this,arguments)},et=function(T){var I=cn(Lt.none()),ae=function(){return I.get().each(T)},fe=function(){ae(),I.set(Lt.none())},De=function(){return I.get().isSome()},st=function(){return I.get()},dn=function(Cn){ae(),I.set(Lt.some(Cn))};return{clear:fe,isSet:De,get:st,set:dn}},Ur=function(){var T=et(Tn),I=function(ae){return T.get().each(ae)};return nr(nr({},T),{on:I})},qn=function(T,I,ae){return I===""||T.length>=I.length&&T.substr(ae,ae+I.length)===I},D=function(T,I){return qn(T,I,0)},ia=function(T,I){return qn(T,I,T.length-I.length)},ut=function(T,I){return I<=0?"":new Array(I+1).join(T)},Et=tinymce.util.Tools.resolve("tinymce.Env"),xo=tinymce.util.Tools.resolve("tinymce.util.Delay"),wi=tinymce.util.Tools.resolve("tinymce.util.Promise"),Un=tinymce.util.Tools.resolve("tinymce.util.VK"),Ca=function(T,I,ae,fe){return T.fire("PastePreProcess",{content:I,internal:ae,wordContent:fe})},ee=function(T,I,ae,fe){return T.fire("PastePostProcess",{node:I,internal:ae,wordContent:fe})},ni=function(T,I){return T.fire("PastePlainTextToggle",{state:I})},nt=function(T,I){return T.fire("paste",{ieFake:I})},kt=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ci=function(T){return T.getParam("paste_block_drop",!1)},Fr=function(T){return T.getParam("paste_data_images",!1)},tn=function(T){return T.getParam("paste_filter_drop",!0)},Wr=function(T){return T.getParam("paste_preprocess")},Hn=function(T){return T.getParam("paste_postprocess")},ft=function(T){return T.getParam("paste_webkit_styles")},lr=function(T){return T.getParam("paste_remove_styles_if_webkit",!0)},Va=function(T){return T.getParam("paste_merge_formats",!0)},jt=function(T){return T.getParam("smart_paste",!0)},Jr=function(T){return T.getParam("paste_as_text",!1)},jr=function(T){return T.getParam("paste_retain_style_properties")},an=function(T){var I="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return T.getParam("paste_word_valid_elements",I)},ua=function(T){return T.getParam("paste_convert_word_fake_lists",!0)},Si=function(T){return T.getParam("paste_enable_default_filters",!0)},rs=function(T){return T.getParam("validate")},nu=function(T){return T.getParam("allow_html_data_urls",!1,"boolean")},Li=function(T){return T.getParam("paste_data_images",!1,"boolean")},To=function(T){return T.getParam("images_dataimg_filter")},bu=function(T){return T.getParam("images_reuse_filename")},Go=function(T){return T.getParam("forced_root_block")},sa=function(T){return T.getParam("forced_root_block_attrs")},ta=function(T){return T.getParam("paste_tab_spaces",4,"number")},Ua=function(T){var I="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp";return kt.explode(T.getParam("images_file_types",I,"string"))},Gr="x-tinymce/html",kr="<!-- "+Gr+" -->",Po=function(T){return kr+T},xi=function(T){return T.replace(kr,"")},ro=function(T){return T.indexOf(kr)!==-1},Zn=or(Gr),mo=Object.hasOwnProperty,No=function(T,I){return mo.call(T,I)},$o=tinymce.util.Tools.resolve("tinymce.html.Entities"),Gt=function(T){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(T)},hr=function(T){return T.replace(/\r?\n/g,"<br>")},ha=function(T,I){var ae=[],fe="<"+T;if(typeof I=="object"){for(var De in I)No(I,De)&&ae.push(De+'="'+$o.encodeAllRaw(I[De])+'"');ae.length&&(fe+=" "+ae.join(" "))}return fe+">"},Ti=function(T,I,ae){var fe=T.split(/\n\n/),De=ha(I,ae),st="</"+I+">",dn=kt.map(fe,function(xt){return xt.split(/\n/).join("<br />")}),Cn=function(xt){return De+xt+st};return dn.length===1?dn[0]:kt.map(dn,Cn).join("")},Es=function(T,I,ae){return I?Ti(T,I===!0?"p":I,ae):hr(T)},pr=tinymce.util.Tools.resolve("tinymce.html.DomParser"),$n=tinymce.util.Tools.resolve("tinymce.html.Serializer"),ko=" ",as=tinymce.util.Tools.resolve("tinymce.html.Node"),qo=tinymce.util.Tools.resolve("tinymce.html.Schema"),ri=function(T){return T.constructor===RegExp},ai=function(T,I){return kt.each(I,function(ae){ri(ae)?T=T.replace(ae,""):T=T.replace(ae[0],ae[1])}),T},$u=function(T){var I=qo(),ae=pr({},I),fe="",De=I.getShortEndedElements(),st=kt.makeMap("script noscript style textarea video audio iframe object"," "),dn=I.getBlockElements(),Cn=function(xt){var on=xt.name,Vn=xt;if(on==="br"){fe+=`
`;return}if(on!=="wbr"){if(De[on]&&(fe+=" "),st[on]){fe+=" ";return}if(xt.type===3&&(fe+=xt.value),!xt.shortEnded&&(xt=xt.firstChild))do Cn(xt);while(xt=xt.next);dn[on]&&Vn.next&&(fe+=`
`,on==="p"&&(fe+=`
`))}};return T=ai(T,[/<!\[[^\]]+\]>/g]),Cn(ae.parse(T)),fe},Hi=function(T){var I=function(ae,fe,De){return!fe&&!De?" ":ko};return T=ai(T,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,I],/<br class="Apple-interchange-newline">/g,/<br>$/i]),T},oi=function(T){var I=0;return function(){return T+I++}},zu=function(T){var I=T.toLowerCase(),ae={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return kt.hasOwn(ae,I)?"image/"+ae[I]:"image/"+I},Er=function(T){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(T)||/class="OutlineElement/.test(T)||/id="?docs\-internal\-guid\-/.test(T)},Vi=function(T){var I=!1,ae=[/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];return T=T.replace(/^[\u00a0 ]+/,""),kt.each(ae,function(fe){if(fe.test(T))return I=!0,!1}),I},Jt=function(T){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(T)},Us=function(T){for(var I,ae,fe=1,De=function(fn){var Hr="";if(fn.type===3)return fn.value;if(fn=fn.firstChild)do Hr+=De(fn);while(fn=fn.next);return Hr},st=function(fn,Hr){if(fn.type===3&&Hr.test(fn.value))return fn.value=fn.value.replace(Hr,""),!1;if(fn=fn.firstChild)do if(!st(fn,Hr))return!1;while(fn=fn.next);return!0},dn=function(fn){if(fn._listIgnore){fn.remove();return}if(fn=fn.firstChild)do dn(fn);while(fn=fn.next)},Cn=function(fn,Hr,va){var su=fn._listLevel||fe;su!==fe&&(su<fe?I&&(I=I.parent.parent):(ae=I,I=null)),!I||I.name!==Hr?(ae=ae||I,I=new as(Hr,1),va>1&&I.attr("start",""+va),fn.wrap(I)):I.append(fn),fn.name="li",su>fe&&ae&&ae.lastChild.append(I),fe=su,dn(fn),st(fn,/^\u00a0+/),st(fn,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),st(fn,/^\u00a0+/)},xt=[],on=T.firstChild;typeof on<"u"&&on!==null;)if(xt.push(on),on=on.walk(),on!==null)for(;typeof on<"u"&&on.parent!==T;)on=on.walk();for(var Vn=0;Vn<xt.length;Vn++)if(T=xt[Vn],T.name==="p"&&T.firstChild){var Kn=De(T);if(Jt(Kn)){Cn(T,"ul");continue}if(Vi(Kn)){var gn=/([0-9]+)\./.exec(Kn),Ta=1;gn&&(Ta=parseInt(gn[1],10)),Cn(T,"ol",Ta);continue}if(T._listLevel){Cn(T,"ul",1);continue}I=null}else ae=I,I=null},Ko=function(T,I,ae,fe){var De={},st=T.dom.parseStyle(fe);kt.each(st,function(Cn,xt){switch(xt){case"mso-list":var on=/\w+ \w+([0-9]+)/i.exec(fe);on&&(ae._listLevel=parseInt(on[1],10)),/Ignore/i.test(Cn)&&ae.firstChild&&(ae._listIgnore=!0,ae.firstChild._listIgnore=!0);break;case"horiz-align":xt="text-align";break;case"vert-align":xt="vertical-align";break;case"font-color":case"mso-foreground":xt="color";break;case"mso-background":case"mso-highlight":xt="background";break;case"font-weight":case"font-style":Cn!=="normal"&&(De[xt]=Cn);return;case"mso-element":if(/^(comment|comment-list)$/i.test(Cn)){ae.remove();return}break}if(xt.indexOf("mso-comment")===0){ae.remove();return}xt.indexOf("mso-")!==0&&(jr(T)==="all"||I&&I[xt])&&(De[xt]=Cn)}),/(bold)/i.test(De["font-weight"])&&(delete De["font-weight"],ae.wrap(new as("b",1))),/(italic)/i.test(De["font-style"])&&(delete De["font-style"],ae.wrap(new as("i",1)));var dn=T.dom.serializeStyle(De,ae.name);return dn||null},ru=function(T,I){var ae,fe=jr(T);fe&&(ae=kt.makeMap(fe.split(/[, ]/))),I=ai(I,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,ko],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(xt,on){return on.length>0?on.replace(/./," ").slice(Math.floor(on.length/2)).split("").join(ko):""}]]);var De=an(T),st=qo({valid_elements:De,valid_children:"-li[p]"});kt.each(st.elements,function(xt){xt.attributes.class||(xt.attributes.class={},xt.attributesOrder.push("class")),xt.attributes.style||(xt.attributes.style={},xt.attributesOrder.push("style"))});var dn=pr({},st);dn.addAttributeFilter("style",function(xt){for(var on=xt.length,Vn;on--;)Vn=xt[on],Vn.attr("style",Ko(T,ae,Vn,Vn.attr("style"))),Vn.name==="span"&&Vn.parent&&!Vn.attributes.length&&Vn.unwrap()}),dn.addAttributeFilter("class",function(xt){for(var on=xt.length,Vn,Kn;on--;)Vn=xt[on],Kn=Vn.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(Kn)&&Vn.remove(),Vn.attr("class",null)}),dn.addNodeFilter("del",function(xt){for(var on=xt.length;on--;)xt[on].remove()}),dn.addNodeFilter("a",function(xt){for(var on=xt.length,Vn,Kn,gn;on--;){if(Vn=xt[on],Kn=Vn.attr("href"),gn=Vn.attr("name"),Kn&&Kn.indexOf("#_msocom_")!==-1){Vn.remove();continue}if(Kn&&Kn.indexOf("file://")===0&&(Kn=Kn.split("#")[1],Kn&&(Kn="#"+Kn)),!Kn&&!gn)Vn.unwrap();else{if(gn&&!/^_?(?:toc|edn|ftn)/i.test(gn)){Vn.unwrap();continue}Vn.attr({href:Kn,name:gn})}}});var Cn=dn.parse(I);return ua(T)&&Us(Cn),I=$n({validate:rs(T)},st).serialize(Cn),I},Xo=function(T,I){return Si(T)?ru(T,I):I},au=function(T,I){var ae=pr({},T.schema);ae.addNodeFilter("meta",function(De){kt.each(De,function(st){st.remove()})});var fe=ae.parse(I,{forced_root_block:!1,isRootContent:!0});return $n({validate:rs(T)},T.schema).serialize(fe)},Ws=function(T,I){return{content:T,cancelled:I}},Ui=function(T,I,ae,fe){var De=T.dom.create("div",{style:"display:none"},I),st=ee(T,De,ae,fe);return Ws(st.node.innerHTML,st.isDefaultPrevented())},js=function(T,I,ae,fe){var De=Ca(T,I,ae,fe),st=au(T,De.content);return T.hasEventListeners("PastePostProcess")&&!De.isDefaultPrevented()?Ui(T,st,ae,fe):Ws(st,De.isDefaultPrevented())},Q=function(T,I,ae){var fe=Er(I),De=fe?Xo(T,I):I;return js(T,De,ae,fe)},be=function(T,I){return T.insertContent(I,{merge:Va(T),paste:!0}),!0},re=function(T){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(T)},Te=function(T,I){return re(I)&&Rn(Ua(T),function(ae){return ia(I.toLowerCase(),"."+ae.toLowerCase())})},dt=function(T,I,ae){return T.undoManager.extra(function(){ae(T,I)},function(){T.insertContent('<img src="'+I+'">')}),!0},zt=function(T,I,ae){return T.undoManager.extra(function(){ae(T,I)},function(){T.execCommand("mceInsertLink",!1,I)}),!0},mn=function(T,I,ae){return T.selection.isCollapsed()===!1&&re(I)?zt(T,I,ae):!1},wn=function(T,I,ae){return Te(T,I)?dt(T,I,ae):!1},wr=function(T,I){kt.each([mn,wn,be],function(ae){return ae(T,I,be)!==!0})},Cr=function(T,I,ae){ae||jt(T)===!1?be(T,I):wr(T,I)},rr=function(T){return" \f	\v".indexOf(T)!==-1},Oa=function(T){return T===`
`||T==="\r"},Sa=function(T,I){return I<T.length&&I>=0?Oa(T[I]):!1},yu=function(T,I){var ae=ut(" ",ta(T)),fe=I.replace(/\t/g,ae),De=vo(fe,function(st,dn){return rr(dn)||dn===ko?st.pcIsSpace||st.str===""||st.str.length===fe.length-1||Sa(fe,st.str.length+1)?{pcIsSpace:!1,str:st.str+ko}:{pcIsSpace:!0,str:st.str+" "}:{pcIsSpace:Oa(dn),str:st.str+dn}},{pcIsSpace:!1,str:""});return De.str},ao=function(T,I,ae,fe){var De=Q(T,I,ae);De.cancelled===!1&&Cr(T,De.content,fe)},Wi=function(T,I,ae){var fe=ae||ro(I);ao(T,xi(I),fe,!1)},Iu=function(T,I){var ae=T.dom.encode(I).replace(/\r\n/g,`
`),fe=yu(T,ae),De=Es(fe,Go(T),sa(T));ao(T,De,!1,!0)},pa=function(T){var I={},ae="data:text/mce-internal,";if(T){if(T.getData){var fe=T.getData("Text");fe&&fe.length>0&&fe.indexOf(ae)===-1&&(I["text/plain"]=fe)}if(T.types)for(var De=0;De<T.types.length;De++){var st=T.types[De];try{I[st]=T.getData(st)}catch{I[st]=""}}}return I},xa=function(T,I){return pa(I.clipboardData||T.getDoc().dataTransfer)},Xe=function(T,I){return I in T&&T[I].length>0},Ya=function(T){return Xe(T,"text/html")||Xe(T,"text/plain")},Fu=function(T){var I=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(T);return I?{type:I[1],data:decodeURIComponent(I[2])}:{type:null,data:null}},Xc=function(T,I){var ae=To(T);return ae?ae(I):!0},Gs=function(T,I){var ae=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return So(ae)?T.dom.encode(ae[1]):null},Qn=oi("mceclip"),bc=function(T,I){var ae=Fu(I.uri),fe=ae.data,De=ae.type,st=Qn(),dn=I.blob,Cn=new Image;if(Cn.src=I.uri,Xc(T,Cn)){var xt=T.editorUpload.blobCache,on=void 0,Vn=xt.getByData(fe,De);if(Vn)on=Vn;else{var Kn=bu(T)&&So(dn.name),gn=Kn?Gs(T,dn.name):st,Ta=Kn?dn.name:void 0;on=xt.create(st,dn,fe,gn,Ta),xt.add(on)}Wi(T,'<img src="'+on.blobUri()+'">',!1)}else Wi(T,'<img src="'+I.uri+'">',!1)},Lu=function(T){return T.type==="paste"},Aa=function(T){return So(T.getAsFile)},qs=function(T){return wi.all(Mt(T,function(I){return new wi(function(ae){var fe=Aa(I)?I.getAsFile():I,De=new window.FileReader;De.onload=function(){ae({blob:fe,uri:De.result})},De.readAsDataURL(fe)})}))},ii=function(T){var I=Ua(T);return function(ae){return D(ae.type,"image/")&&Rn(I,function(fe){return zu(fe)===ae.type})}},ki=function(T,I){var ae=I.items?W(gt(I.items),function(De){return De.kind==="file"?[De.getAsFile()]:[]}):[],fe=I.files?gt(I.files):[];return Tt(ae.length>0?ae:fe,ii(T))},qr=function(T,I,ae){var fe=Lu(I)?I.clipboardData:I.dataTransfer;if(Li(T)&&fe){var De=ki(T,fe);if(De.length>0)return I.preventDefault(),qs(De).then(function(st){ae&&T.selection.setRng(ae),kn(st,function(dn){bc(T,dn)})}),!0}return!1},Ks=function(T){var I=T.clipboardData;return navigator.userAgent.indexOf("Android")!==-1&&I&&I.items&&I.items.length===0},Os=function(T){return Un.metaKeyPressed(T)&&T.keyCode===86||T.shiftKey&&T.keyCode===45},As=function(T,I,ae){var fe=Ur(),De=Ur(),st;T.on("keyup",De.clear),T.on("keydown",function(xt){var on=function(Vn){Os(Vn)&&!Vn.isDefaultPrevented()&&I.remove()};if(Os(xt)&&!xt.isDefaultPrevented()){if(st=xt.shiftKey&&xt.keyCode===86,st&&Et.webkit&&navigator.userAgent.indexOf("Version/")!==-1)return;if(xt.stopImmediatePropagation(),fe.set(xt),De.set(!0),Et.ie&&st){xt.preventDefault(),nt(T,!0);return}I.remove(),I.create(),T.once("keyup",on),T.once("paste",function(){T.off("keyup",on)})}});var dn=function(xt,on,Vn,Kn,gn){var Ta;Xe(on,"text/html")?Ta=on["text/html"]:(Ta=I.getHtml(),gn=gn||ro(Ta),I.isDefaultContent(Ta)&&(Kn=!0)),Ta=Hi(Ta),I.remove();var fn=gn===!1&&Gt(Ta),Hr=re(Ta);if((!Ta.length||fn&&!Hr)&&(Kn=!0),(Kn||Hr)&&(Xe(on,"text/plain")&&fn?Ta=on["text/plain"]:Ta=$u(Ta)),I.isDefaultContent(Ta)){Vn||xt.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}Kn?Iu(xt,Ta):Wi(xt,Ta,gn)},Cn=function(){return I.getLastRng()||T.selection.getRng()};T.on("paste",function(xt){var on=fe.isSet()||De.isSet();on&&fe.clear();var Vn=xa(T,xt),Kn=ae.get()==="text"||st,gn=Xe(Vn,Zn());if(st=!1,xt.isDefaultPrevented()||Ks(xt)){I.remove();return}if(!Ya(Vn)&&qr(T,xt,Cn())){I.remove();return}on||xt.preventDefault(),Et.ie&&(!on||xt.ieFake)&&!Xe(Vn,"text/html")&&(I.create(),T.dom.bind(I.getEl(),"paste",function(Ta){Ta.stopPropagation()}),T.getDoc().execCommand("Paste",!1,null),Vn["text/html"]=I.getHtml()),Xe(Vn,"text/html")?(xt.preventDefault(),gn||(gn=ro(Vn["text/html"])),dn(T,Vn,on,Kn,gn)):xo.setEditorTimeout(T,function(){dn(T,Vn,on,Kn,gn)},0)})},yc=function(T,I,ae){As(T,I,ae);var fe;T.parser.addNodeFilter("img",function(De,st,dn){var Cn=function(gn){return gn.data&&gn.data.paste===!0},xt=function(gn){!gn.attr("data-mce-object")&&fe!==Et.transparentSrc&&gn.remove()},on=function(gn){return gn.indexOf("webkit-fake-url")===0},Vn=function(gn){return gn.indexOf("data:")===0};if(!Li(T)&&Cn(dn))for(var Kn=De.length;Kn--;)fe=De[Kn].attr("src"),fe&&(on(fe)||!nu(T)&&Vn(fe))&&xt(De[Kn])})},ou=function(T){return Et.ie&&T.inline?document.body:T.getBody()},wu=function(T){return ou(T)!==T.getBody()},wc=function(T,I,ae){wu(T)&&T.dom.bind(I,"paste keyup",function(fe){ot(T,ae)||T.fire("paste")})},iu=function(T,I,ae){var fe=T.dom,De=T.getBody();I.set(T.selection.getRng());var st=T.dom.add(ou(T),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ae);(Et.ie||Et.gecko)&&fe.setStyle(st,"left",fe.getStyle(De,"direction",!0)==="rtl"?65535:-65535),fe.bind(st,"beforedeactivate focusin focusout",function(dn){dn.stopPropagation()}),wc(T,st,ae),st.focus(),T.selection.select(st,!0)},Ei=function(T,I){if(V(T)){for(var ae=void 0,fe=I.get();ae=T.dom.get("mcepastebin");)T.dom.remove(ae),T.dom.unbind(ae);fe&&T.selection.setRng(fe)}I.set(null)},V=function(T){return T.dom.get("mcepastebin")},ce=function(T){var I=function(Cn,xt){Cn.appendChild(xt),T.dom.remove(xt,!0)},ae=kt.grep(ou(T).childNodes,function(Cn){return Cn.id==="mcepastebin"}),fe=ae.shift();kt.each(ae,function(Cn){I(fe,Cn)});for(var De=T.dom.select("div[id=mcepastebin]",fe),st=De.length-1;st>=0;st--){var dn=T.dom.create("div");fe.insertBefore(dn,De[st]),I(dn,De[st])}return fe?fe.innerHTML:""},Se=function(T,I){return I===T},Fe=function(T){return T&&T.id==="mcepastebin"},ot=function(T,I){var ae=V(T);return Fe(ae)&&Se(I,ae.innerHTML)},Ut=function(T){var I=cn(null),ae="%MCEPASTEBIN%";return{create:function(){return iu(T,I,ae)},remove:function(){return Ei(T,I)},getEl:function(){return V(T)},getHtml:function(){return ce(T)},getLastRng:I.get,isDefault:function(){return ot(T,ae)},isDefaultContent:function(fe){return Se(ae,fe)}}},Or=function(T,I){var ae=Ut(T);return T.on("PreInit",function(){return yc(T,ae,I)}),{pasteFormat:I,pasteHtml:function(fe,De){return Wi(T,fe,De)},pasteText:function(fe){return Iu(T,fe)},pasteImageData:function(fe,De){return qr(T,fe,De)},getDataTransferItems:pa,hasHtmlOrText:Ya,hasContentType:Xe}},Nr=function(T,I){I.pasteFormat.get()==="text"?(I.pasteFormat.set("html"),ni(T,!1)):(I.pasteFormat.set("text"),ni(T,!0)),T.focus()},zn=function(T,I){T.addCommand("mceTogglePlainTextPaste",function(){Nr(T,I)}),T.addCommand("mceInsertClipboardContent",function(ae,fe){fe.content&&I.pasteHtml(fe.content,fe.internal),fe.text&&I.pasteText(fe.text)})},ca=function(T){return Et.iOS===!1&&typeof(T==null?void 0:T.setData)=="function"},ba=function(T,I,ae){if(ca(T))try{return T.clearData(),T.setData("text/html",I),T.setData("text/plain",ae),T.setData(Zn(),I),!0}catch{return!1}else return!1},os=function(T,I,ae,fe){ba(T.clipboardData,I.html,I.text)?(T.preventDefault(),fe()):ae(I.html,fe)},Eo=function(T){return function(I,ae){var fe=Po(I),De=T.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),st=T.dom.create("div",{contenteditable:"true"},fe);T.dom.setStyles(De,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),De.appendChild(st),T.dom.add(T.getBody(),De);var dn=T.selection.getRng();st.focus();var Cn=T.dom.createRng();Cn.selectNodeContents(st),T.selection.setRng(Cn),xo.setTimeout(function(){T.selection.setRng(dn),De.parentNode.removeChild(De),ae()},0)}},Hu=function(T){return{html:T.selection.getContent({contextual:!0}),text:T.selection.getContent({format:"text"})}},Qt=function(T){return!!T.dom.getParent(T.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",T.getBody())},Yc=function(T){return!T.selection.isCollapsed()||Qt(T)},af=function(T){return function(I){Yc(T)&&os(I,Hu(T),Eo(T),function(){if(Et.browser.isChrome()||Et.browser.isFirefox()){var ae=T.selection.getRng();xo.setEditorTimeout(T,function(){T.selection.setRng(ae),T.execCommand("Delete")},0)}else T.execCommand("Delete")})}},Sr=function(T){return function(I){Yc(T)&&os(I,Hu(T),Eo(T),Tn)}},of=function(T){T.on("cut",af(T)),T.on("copy",Sr(T))},kl=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Yf=function(T,I){return kl.getCaretRangeFromPoint(I.clientX,I.clientY,T.getDoc())},Lr=function(T){var I=T["text/plain"];return I?I.indexOf("file://")===0:!1},uu=function(T,I){T.focus(),T.selection.setRng(I)},Qv=function(T,I,ae){Ci(T)&&T.on("dragend dragover draggesture dragdrop drop drag",function(fe){fe.preventDefault(),fe.stopPropagation()}),Fr(T)||T.on("drop",function(fe){var De=fe.dataTransfer;De&&De.files&&De.files.length>0&&fe.preventDefault()}),T.on("drop",function(fe){var De=Yf(T,fe);if(!(fe.isDefaultPrevented()||ae.get())){var st=I.getDataTransferItems(fe.dataTransfer),dn=I.hasContentType(st,Zn());if(!((!I.hasHtmlOrText(st)||Lr(st))&&I.pasteImageData(fe,De))&&De&&tn(T)){var Cn=st["mce-internal"]||st["text/html"]||st["text/plain"];Cn&&(fe.preventDefault(),xo.setEditorTimeout(T,function(){T.undoManager.transact(function(){st["mce-internal"]&&T.execCommand("Delete"),uu(T,De),Cn=Hi(Cn),st["text/html"]?I.pasteHtml(Cn,dn):I.pasteText(Cn)})}))}}}),T.on("dragstart",function(fe){ae.set(!0)}),T.on("dragover dragend",function(fe){Fr(T)&&ae.get()===!1&&(fe.preventDefault(),uu(T,Yf(T,fe))),fe.type==="dragend"&&ae.set(!1)})},Vu=function(T){var I=T.plugins.paste,ae=Wr(T);ae&&T.on("PastePreProcess",function(De){ae.call(I,I,De)});var fe=Hn(T);fe&&T.on("PastePostProcess",function(De){fe.call(I,I,De)})},Ia=function(T,I){T.on("PastePreProcess",function(ae){ae.content=I(T,ae.content,ae.internal,ae.wordContent)})},Xs=function(T,I){T.on("PastePostProcess",function(ae){I(T,ae.node)})},Ne=function(T,I){if(!Er(I))return I;var ae=[];kt.each(T.schema.getBlockElements(),function(De,st){ae.push(st)});var fe=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+ae.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return I=ai(I,[[fe,"$1"]]),I=ai(I,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]),I},Jc=function(T,I,ae,fe){if(fe||ae)return I;var De=ft(T),st;if(lr(T)===!1||De==="all")return I;if(De&&(st=De.split(/[, ]/)),st){var dn=T.dom,Cn=T.selection.getNode();I=I.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(xt,on,Vn,Kn){var gn=dn.parseStyle(dn.decode(Vn)),Ta={};if(st==="none")return on+Kn;for(var fn=0;fn<st.length;fn++){var Hr=gn[st[fn]],va=dn.getStyle(Cn,st[fn],!0);/color/.test(st[fn])&&(Hr=dn.toHex(Hr),va=dn.toHex(va)),va!==Hr&&(Ta[st[fn]]=Hr)}var su=dn.serializeStyle(Ta,"span");return su?on+' style="'+su+'"'+Kn:on+Kn})}else I=I.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return I=I.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(xt,on,Vn,Kn){return on+' style="'+Vn+'"'+Kn}),I},Fa=function(T,I){T.$("a",I).find("font,u").each(function(ae,fe){T.dom.remove(fe,!0)})},Jf=function(T){Et.webkit&&Ia(T,Jc),Et.ie&&(Ia(T,Ne),Xs(T,Fa))},Ds=function(T,I){return function(ae){ae.setActive(I.pasteFormat.get()==="text");var fe=function(De){return ae.setActive(De.state)};return T.on("PastePlainTextToggle",fe),function(){return T.off("PastePlainTextToggle",fe)}}},_=function(T,I){var ae=function(){return T.execCommand("mceTogglePlainTextPaste")};T.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:ae,onSetup:Ds(T,I)}),T.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:ae,onSetup:Ds(T,I)})};function M(){Ot.add("paste",function(T){if(An(T)===!1){var I=cn(!1),ae=cn(Jr(T)?"text":"html"),fe=Or(T,ae);return Jf(T),_(T,fe),zn(T,fe),Vu(T),of(T),Qv(T,fe,I),Ln(fe)}})}M()})();(function(){var cn=function(t){var r=typeof t;return t===null?"null":r==="object"&&(Array.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="Array")?"array":r==="object"&&(String.prototype.isPrototypeOf(t)||t.constructor&&t.constructor.name==="String")?"string":r},Ot=function(t){return function(r){return cn(r)===t}},An=function(t){return function(r){return typeof r===t}},Ln=function(t){return function(r){return t===r}},Xt=Ot("string"),yr=Ot("object"),ar=Ot("array"),Ar=Ln(null),no=An("boolean"),So=Ln(void 0),fo=function(t){return t==null},Tn=function(t){return!fo(t)},or=An("function"),za=An("number"),Ht=function(t,r){if(ar(t)){for(var o=0,c=t.length;o<c;++o)if(!r(t[o]))return!1;return!0}return!1},at=function(){},cr=function(t){return function(){return t()}},Ct=function(t,r){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return t(r.apply(null,o))}},_n=function(t,r){return function(o){return t(r(o))}},ye=function(t){return function(){return t}},Lt=function(t){return t},Bt=function(t,r){return t===r};function Vr(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var c=[],v=0;v<arguments.length;v++)c[v]=arguments[v];var m=r.concat(c);return t.apply(null,m)}}var Rn=function(t){return function(r){return!t(r)}},Mt=function(t){return function(){throw new Error(t)}},kn=ye(!1),Tt=ye(!0),vo=tinymce.util.Tools.resolve("tinymce.ThemeManager"),ue=function(){return ue=Object.assign||function(r){for(var o,c=1,v=arguments.length;c<v;c++){o=arguments[c];for(var m in o)Object.prototype.hasOwnProperty.call(o,m)&&(r[m]=o[m])}return r},ue.apply(this,arguments)};function W(t,r){var o={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&r.indexOf(c)<0&&(o[c]=t[c]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,c=Object.getOwnPropertySymbols(t);v<c.length;v++)r.indexOf(c[v])<0&&Object.prototype.propertyIsEnumerable.call(t,c[v])&&(o[c[v]]=t[c[v]]);return o}function gt(t,r,o){if(o||arguments.length===2)for(var c=0,v=r.length,m;c<v;c++)(m||!(c in r))&&(m||(m=Array.prototype.slice.call(r,0,c)),m[c]=r[c]);return t.concat(m||Array.prototype.slice.call(r))}var nr=function(){return et},et=function(){var t=function(c){return c()},r=Lt,o={fold:function(c,v){return c()},isSome:kn,isNone:Tt,getOr:r,getOrThunk:t,getOrDie:function(c){throw new Error(c||"error: getOrDie called on none.")},getOrNull:ye(null),getOrUndefined:ye(void 0),or:r,orThunk:t,map:nr,each:at,bind:nr,exists:kn,forall:Tt,filter:function(){return nr()},toArray:function(){return[]},toString:ye("none()")};return o}(),Ur=function(t){var r=ye(t),o=function(){return v},c=function(m){return m(t)},v={fold:function(m,p){return p(t)},isSome:Tt,isNone:kn,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:o,orThunk:o,map:function(m){return Ur(m(t))},each:function(m){m(t)},bind:c,exists:c,forall:c,filter:function(m){return m(t)?v:et},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return v},qn=function(t){return t==null?et:Ur(t)},D={some:Ur,none:nr,from:qn},ia=Array.prototype.slice,ut=Array.prototype.indexOf,Et=Array.prototype.push,xo=function(t,r){return ut.call(t,r)},wi=function(t,r){var o=xo(t,r);return o===-1?D.none():D.some(o)},Un=function(t,r){return xo(t,r)>-1},Ca=function(t,r){for(var o=0,c=t.length;o<c;o++){var v=t[o];if(r(v,o))return!0}return!1},ee=function(t,r){for(var o=[],c=0;c<t;c++)o.push(r(c));return o},ni=function(t,r){for(var o=[],c=0;c<t.length;c+=r){var v=ia.call(t,c,c+r);o.push(v)}return o},nt=function(t,r){for(var o=t.length,c=new Array(o),v=0;v<o;v++){var m=t[v];c[v]=r(m,v)}return c},kt=function(t,r){for(var o=0,c=t.length;o<c;o++){var v=t[o];r(v,o)}},Ci=function(t,r){for(var o=t.length-1;o>=0;o--){var c=t[o];r(c,o)}},Fr=function(t,r){for(var o=[],c=[],v=0,m=t.length;v<m;v++){var p=t[v],C=r(p,v)?o:c;C.push(p)}return{pass:o,fail:c}},tn=function(t,r){for(var o=[],c=0,v=t.length;c<v;c++){var m=t[c];r(m,c)&&o.push(m)}return o},Wr=function(t,r,o){return Ci(t,function(c,v){o=r(o,c,v)}),o},Hn=function(t,r,o){return kt(t,function(c,v){o=r(o,c,v)}),o},ft=function(t,r,o){for(var c=0,v=t.length;c<v;c++){var m=t[c];if(r(m,c))return D.some(m);if(o(m,c))break}return D.none()},lr=function(t,r){return ft(t,r,kn)},Va=function(t,r){for(var o=0,c=t.length;o<c;o++){var v=t[o];if(r(v,o))return D.some(o)}return D.none()},jt=function(t){for(var r=[],o=0,c=t.length;o<c;++o){if(!ar(t[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+t);Et.apply(r,t[o])}return r},Jr=function(t,r){return jt(nt(t,r))},jr=function(t,r){for(var o=0,c=t.length;o<c;++o){var v=t[o];if(r(v,o)!==!0)return!1}return!0},an=function(t){var r=ia.call(t,0);return r.reverse(),r},ua=function(t,r){return tn(t,function(o){return!Un(r,o)})},Si=function(t,r){for(var o={},c=0,v=t.length;c<v;c++){var m=t[c];o[String(m)]=r(m,c)}return o},rs=function(t){return[t]},nu=function(t,r){var o=ia.call(t,0);return o.sort(r),o},Li=function(t,r){return r>=0&&r<t.length?D.some(t[r]):D.none()},To=function(t){return Li(t,0)},bu=function(t){return Li(t,t.length-1)},Go=or(Array.from)?Array.from:function(t){return ia.call(t)},sa=function(t,r){for(var o=0;o<t.length;o++){var c=r(t[o],o);if(c.isSome())return c}return D.none()},ta=Object.keys,Ua=Object.hasOwnProperty,Gr=function(t,r){for(var o=ta(t),c=0,v=o.length;c<v;c++){var m=o[c],p=t[m];r(p,m)}},kr=function(t,r){return Po(t,function(o,c){return{k:c,v:r(o,c)}})},Po=function(t,r){var o={};return Gr(t,function(c,v){var m=r(c,v);o[m.k]=m.v}),o},xi=function(t){return function(r,o){t[o]=r}},ro=function(t,r,o,c){var v={};return Gr(t,function(m,p){(r(m,p)?o:c)(m,p)}),v},Zn=function(t,r){var o={};return ro(t,r,xi(o),at),o},mo=function(t,r){var o=[];return Gr(t,function(c,v){o.push(r(c,v))}),o},No=function(t,r){for(var o=ta(t),c=0,v=o.length;c<v;c++){var m=o[c],p=t[m];if(r(p,m,t))return D.some(p)}return D.none()},$o=function(t){return mo(t,Lt)},Gt=function(t,r){return hr(t,r)?D.from(t[r]):D.none()},hr=function(t,r){return Ua.call(t,r)},ha=function(t,r){return hr(t,r)&&t[r]!==void 0&&t[r]!==null},Ti=function(t,r,o){return o===void 0&&(o=Bt),t.exists(function(c){return o(c,r)})},Es=function(t,r,o){return o===void 0&&(o=Bt),ko(t,r,o).getOr(t.isNone()&&r.isNone())},pr=function(t){for(var r=[],o=function(v){r.push(v)},c=0;c<t.length;c++)t[c].each(o);return r},$n=function(t){for(var r=[],o=0;o<t.length;o++){var c=t[o];if(c.isSome())r.push(c.getOrDie());else return D.none()}return D.some(r)},ko=function(t,r,o){return t.isSome()&&r.isSome()?D.some(o(t.getOrDie(),r.getOrDie())):D.none()},as=function(t,r,o,c){return t.isSome()&&r.isSome()&&o.isSome()?D.some(c(t.getOrDie(),r.getOrDie(),o.getOrDie())):D.none()},qo=function(t,r){return t!=null?D.some(r(t)):D.none()},ri=function(t,r){return t?D.some(r):D.none()},ai=function(t,r){return t+r},$u=function(t,r){return t.substring(r)},Hi=function(t,r,o){return r===""||t.length>=r.length&&t.substr(o,o+r.length)===r},oi=function(t,r){return Vi(t,r)?$u(t,r.length):t},zu=function(t,r){return Jt(t,r)?t:ai(t,r)},Er=function(t,r){return t.indexOf(r)!==-1},Vi=function(t,r){return Hi(t,r,0)},Jt=function(t,r){return Hi(t,r,t.length-r.length)},Us=function(t){return function(r){return r.replace(t,"")}},Ko=Us(/^\s+|\s+$/g),ru=function(t){return t.length>0},Xo=function(t){return!ru(t)},au=function(t){return t.style!==void 0&&or(t.style.getPropertyValue)},Ws=function(t,r){var o=r||document,c=o.createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Q(c.childNodes[0])},Ui=function(t,r){var o=r||document,c=o.createElement(t);return Q(c)},js=function(t,r){var o=r||document,c=o.createTextNode(t);return Q(c)},Q=function(t){if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},be=function(t,r,o){return D.from(t.dom.elementFromPoint(r,o)).map(Q)},re={fromHtml:Ws,fromTag:Ui,fromText:js,fromDom:Q,fromPoint:be};typeof window<"u"||Function("return this;")();var Te=9,dt=11,zt=1,mn=3,wn=function(t){var r=t.dom.nodeName;return r.toLowerCase()},wr=function(t){return t.dom.nodeType},Cr=function(t){return function(r){return wr(r)===t}},rr=Cr(zt),Oa=Cr(mn),Sa=Cr(Te),yu=Cr(dt),ao=function(t){var r=!1,o;return function(){for(var c=[],v=0;v<arguments.length;v++)c[v]=arguments[v];return r||(r=!0,o=t.apply(null,c)),o}},Wi=function(t,r,o,c){var v=t.isiOS()&&/ipad/i.test(o)===!0,m=t.isiOS()&&!v,p=t.isiOS()||t.isAndroid(),C=p||c("(pointer:coarse)"),S=v||!m&&p&&c("(min-device-width:768px)"),k=m||p&&!S,R=r.isSafari()&&t.isiOS()&&/safari/i.test(o)===!1,B=!k&&!S&&!R;return{isiPad:ye(v),isiPhone:ye(m),isTablet:ye(S),isPhone:ye(k),isTouch:ye(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ye(R),isDesktop:ye(B)}},Iu=function(t,r){for(var o=0;o<t.length;o++){var c=t[o];if(c.test(r))return c}},pa=function(t,r){var o=Iu(t,r);if(!o)return{major:0,minor:0};var c=function(v){return Number(r.replace(o,"$"+v))};return Ya(c(1),c(2))},xa=function(t,r){var o=String(r).toLowerCase();return t.length===0?Xe():pa(t,o)},Xe=function(){return Ya(0,0)},Ya=function(t,r){return{major:t,minor:r}},Fu={nu:Ya,detect:xa,unknown:Xe},Xc=function(t,r){return sa(r.brands,function(o){var c=o.brand.toLowerCase();return lr(t,function(v){var m;return c===((m=v.brand)===null||m===void 0?void 0:m.toLowerCase())}).map(function(v){return{current:v.name,version:Fu.nu(parseInt(o.version,10),0)}})})},Gs=function(t,r){var o=String(r).toLowerCase();return lr(t,function(c){return c.search(o)})},Qn=function(t,r){return Gs(t,r).map(function(o){var c=Fu.detect(o.versionRegexes,r);return{current:o.name,version:c}})},bc=function(t,r){return Gs(t,r).map(function(o){var c=Fu.detect(o.versionRegexes,r);return{current:o.name,version:c}})},Lu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Aa=function(t){return function(r){return Er(r,t)}},qs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Er(t,"edge/")&&Er(t,"chrome")&&Er(t,"safari")&&Er(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Lu],search:function(t){return Er(t,"chrome")&&!Er(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Er(t,"msie")||Er(t,"trident")}},{name:"Opera",versionRegexes:[Lu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Aa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Aa("firefox")},{name:"Safari",versionRegexes:[Lu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Er(t,"safari")||Er(t,"mobile/"))&&Er(t,"applewebkit")}}],ii=[{name:"Windows",search:Aa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Er(t,"iphone")||Er(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Aa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Aa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Aa("linux"),versionRegexes:[]},{name:"Solaris",search:Aa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Aa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Aa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ki={browsers:ye(qs),oses:ye(ii)},qr="Edge",Ks="Chrome",Os="IE",As="Opera",yc="Firefox",ou="Safari",wu=function(){return wc({current:void 0,version:Fu.unknown()})},wc=function(t){var r=t.current,o=t.version,c=function(v){return function(){return r===v}};return{current:r,version:o,isEdge:c(qr),isChrome:c(Ks),isIE:c(Os),isOpera:c(As),isFirefox:c(yc),isSafari:c(ou)}},iu={unknown:wu,nu:wc,edge:ye(qr),chrome:ye(Ks),ie:ye(Os),opera:ye(As),firefox:ye(yc),safari:ye(ou)},Ei="Windows",V="iOS",ce="Android",Se="Linux",Fe="OSX",ot="Solaris",Ut="FreeBSD",Or="ChromeOS",Nr=function(){return zn({current:void 0,version:Fu.unknown()})},zn=function(t){var r=t.current,o=t.version,c=function(v){return function(){return r===v}};return{current:r,version:o,isWindows:c(Ei),isiOS:c(V),isAndroid:c(ce),isOSX:c(Fe),isLinux:c(Se),isSolaris:c(ot),isFreeBSD:c(Ut),isChromeOS:c(Or)}},ca={unknown:Nr,nu:zn,windows:ye(Ei),ios:ye(V),android:ye(ce),linux:ye(Se),osx:ye(Fe),solaris:ye(ot),freebsd:ye(Ut),chromeos:ye(Or)},ba=function(t,r,o){var c=ki.browsers(),v=ki.oses(),m=r.bind(function(S){return Xc(c,S)}).orThunk(function(){return Qn(c,t)}).fold(iu.unknown,iu.nu),p=bc(v,t).fold(ca.unknown,ca.nu),C=Wi(p,m,t,o);return{browser:m,os:p,deviceType:C}},os={detect:ba},Eo=function(t){return window.matchMedia(t).matches},Hu=ao(function(){return os.detect(navigator.userAgent,D.from(navigator.userAgentData),Eo)}),Qt=function(){return Hu()},Yc=function(t,r,o){return(t.compareDocumentPosition(r)&o)!==0},af=function(t,r){return Yc(t,r,Node.DOCUMENT_POSITION_CONTAINED_BY)},Sr=function(t,r){var o=t.dom;if(o.nodeType!==zt)return!1;var c=o;if(c.matches!==void 0)return c.matches(r);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(r);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(r);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")},of=function(t){return t.nodeType!==zt&&t.nodeType!==Te&&t.nodeType!==dt||t.childElementCount===0},kl=function(t,r){var o=r===void 0?document:r.dom;return of(o)?[]:nt(o.querySelectorAll(t),re.fromDom)},Yf=function(t,r){var o=r===void 0?document:r.dom;return of(o)?D.none():D.from(o.querySelector(t)).map(re.fromDom)},Lr=function(t,r){return t.dom===r.dom},uu=function(t,r){var o=t.dom,c=r.dom;return o===c?!1:o.contains(c)},Qv=function(t,r){return af(t.dom,r.dom)},Vu=function(t,r){return Qt().browser.isIE()?Qv(t,r):uu(t,r)},Ia=function(t){return re.fromDom(t.dom.ownerDocument)},Xs=function(t){return Sa(t)?t:Ia(t)},Ne=function(t){return re.fromDom(Xs(t).dom.documentElement)},Jc=function(t){return re.fromDom(Xs(t).dom.defaultView)},Fa=function(t){return D.from(t.dom.parentNode).map(re.fromDom)},Jf=function(t){return Fa(t)},Ds=function(t){return D.from(t.dom.offsetParent).map(re.fromDom)},_=function(t){return D.from(t.dom.nextSibling).map(re.fromDom)},M=function(t){return nt(t.dom.childNodes,re.fromDom)},T=function(t,r){var o=t.dom.childNodes;return D.from(o[r]).map(re.fromDom)},I=function(t){return T(t,0)},ae=function(t,r){return{element:t,offset:r}},fe=function(t,r){var o=M(t);return o.length>0&&r<o.length?ae(o[r],0):ae(t,r)},De=function(t){return yu(t)&&Tn(t.dom.host)},st=or(Element.prototype.attachShadow)&&or(Node.prototype.getRootNode),dn=ye(st),Cn=st?function(t){return re.fromDom(t.dom.getRootNode())}:Xs,xt=function(t){return De(t)?t:re.fromDom(Xs(t).dom.body)},on=function(t){return Vn(t).isSome()},Vn=function(t){var r=Cn(t);return De(r)?D.some(r):D.none()},Kn=function(t){return re.fromDom(t.dom.host)},gn=function(t){if(dn()&&Tn(t.target)){var r=re.fromDom(t.target);if(rr(r)&&Ta(r)&&t.composed&&t.composedPath){var o=t.composedPath();if(o)return To(o)}}return D.from(t.target)},Ta=function(t){return Tn(t.dom.shadowRoot)},fn=function(t){var r=Oa(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;var o=r.ownerDocument;return Vn(re.fromDom(r)).fold(function(){return o.body.contains(r)},_n(fn,Kn))},Hr=function(){return va(re.fromDom(document))},va=function(t){var r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return re.fromDom(r)},su=function(t,r,o){if(Xt(o)||no(o)||za(o))t.setAttribute(r,o+"");else throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",o,":: Element ",t),new Error("Attribute value was not simple")},Mn=function(t,r,o){su(t.dom,r,o)},is=function(t,r){var o=t.dom;Gr(r,function(c,v){su(o,v,c)})},Da=function(t,r){var o=t.dom.getAttribute(r);return o===null?void 0:o},La=function(t,r){return D.from(Da(t,r))},wp=function(t,r){var o=t.dom;return o&&o.hasAttribute?o.hasAttribute(r):!1},ui=function(t,r){t.dom.removeAttribute(r)},_g=function(t,r,o){if(!Xt(o))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",o,":: Element ",t),new Error("CSS value must be a string: "+o);au(t)&&t.style.setProperty(r,o)},Cc=function(t,r){au(t)&&t.style.removeProperty(r)},pn=function(t,r,o){var c=t.dom;_g(c,r,o)},us=function(t,r){var o=t.dom;Gr(r,function(c,v){_g(o,v,c)})},Wa=function(t,r){var o=t.dom;Gr(r,function(c,v){c.fold(function(){Cc(o,v)},function(m){_g(o,v,m)})})},ja=function(t,r){var o=t.dom,c=window.getComputedStyle(o),v=c.getPropertyValue(r);return v===""&&!fn(t)?zo(o,r):v},zo=function(t,r){return au(t)?t.style.getPropertyValue(r):""},go=function(t,r){var o=t.dom,c=zo(o,r);return D.from(c).filter(function(v){return v.length>0})},uf=function(t){var r={},o=t.dom;if(au(o))for(var c=0;c<o.style.length;c++){var v=o.style.item(c);r[v]=o.style[v]}return r},Rs=function(t,r,o){var c=re.fromTag(t);pn(c,r,o);var v=go(c,r);return v.isSome()},_r=function(t,r){var o=t.dom;Cc(o,r),Ti(La(t,"style").map(Ko),"")&&ui(t,"style")},ya=function(t){return t.dom.offsetWidth},cu=function(t,r){var o=function(C,S){if(!za(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);var k=C.dom;au(k)&&(k.style[t]=S+"px")},c=function(C){var S=r(C);if(S<=0||S===null){var k=ja(C,t);return parseFloat(k)||0}return S},v=c,m=function(C,S){return Hn(S,function(k,R){var B=ja(C,R),L=B===void 0?0:parseInt(B,10);return isNaN(L)?k:k+L},0)},p=function(C,S,k){var R=m(C,k),B=S>R?S-R:0;return B};return{set:o,get:c,getOuter:v,aggregate:m,max:p}},Zc=cu("height",function(t){var r=t.dom;return fn(t)?r.getBoundingClientRect().height:r.offsetHeight}),Oo=function(t){return Zc.get(t)},ss=function(t){return Zc.getOuter(t)},Cp=function(t,r){var o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=Zc.max(t,r,o);pn(t,"max-height",c+"px")},sf=function(t,r){var o=function(c,v){return sf(t+c,r+v)};return{left:t,top:r,translate:o}},na=sf,Ys=function(t){var r=t.getBoundingClientRect();return na(r.left,r.top)},El=function(t,r){return t!==void 0?t:r!==void 0?r:0},Cu=function(t){var r=t.dom.ownerDocument,o=r.body,c=r.defaultView,v=r.documentElement;if(o===t.dom)return na(o.offsetLeft,o.offsetTop);var m=El(c==null?void 0:c.pageYOffset,v.scrollTop),p=El(c==null?void 0:c.pageXOffset,v.scrollLeft),C=El(v.clientTop,o.clientTop),S=El(v.clientLeft,o.clientLeft);return Ja(t).translate(p-S,m-C)},Ja=function(t){var r=t.dom,o=r.ownerDocument,c=o.body;return c===r?na(c.offsetLeft,c.offsetTop):fn(t)?Ys(r):na(0,0)},Ol=cu("width",function(t){return t.dom.offsetWidth}),Qc=function(t,r){return Ol.set(t,r)},ji=function(t){return Ol.get(t)},Su=function(t){return Ol.getOuter(t)},Oi=function(t,r){var o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Ol.max(t,r,o);pn(t,"max-width",c+"px")},Zf=function(t,r,o,c,v,m,p){return{target:t,x:r,y:o,stop:c,prevent:v,kill:m,raw:p}},Js=function(t){var r=re.fromDom(gn(t).getOr(t.target)),o=function(){return t.stopPropagation()},c=function(){return t.preventDefault()},v=Ct(c,o);return Zf(r,t.clientX,t.clientY,o,c,v,t)},Io=function(t,r){return function(o){t(o)&&r(Js(o))}},ed=function(t,r,o,c,v){var m=Io(o,c);return t.dom.addEventListener(r,m,v),{unbind:Vr(lf,t,r,m,v)}},Sp=function(t,r,o,c){return ed(t,r,o,c,!1)},cf=function(t,r,o,c){return ed(t,r,o,c,!0)},lf=function(t,r,o,c){t.dom.removeEventListener(r,o,c)},Za=function(t,r){var o=Fa(t);o.each(function(c){c.dom.insertBefore(r.dom,t.dom)})},ff=function(t,r){var o=_(t);o.fold(function(){var c=Fa(t);c.each(function(v){Gi(v,r)})},function(c){Za(c,r)})},vf=function(t,r){var o=I(t);o.fold(function(){Gi(t,r)},function(c){t.dom.insertBefore(r.dom,c.dom)})},Gi=function(t,r){t.dom.appendChild(r.dom)},el=function(t,r,o){T(t,o).fold(function(){Gi(t,r)},function(c){Za(c,r)})},df=function(t,r){kt(r,function(o){Za(t,o)})},tl=function(t,r){kt(r,function(o){Gi(t,o)})},_a=function(t){t.dom.textContent="",kt(M(t),function(r){Uu(r)})},Uu=function(t){var r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},fm=function(t){var r=M(t);r.length>0&&df(t,r),Uu(t)},cs=function(t){var r=t!==void 0?t.dom:document,o=r.body.scrollLeft||r.documentElement.scrollLeft,c=r.body.scrollTop||r.documentElement.scrollTop;return na(o,c)},vm=function(t,r,o){var c=o!==void 0?o.dom:document,v=c.defaultView;v&&v.scrollTo(t,r)},xp=function(t){var r=t===void 0?window:t;return Qt().browser.isFirefox()?D.none():D.from(r.visualViewport)},Bg=function(t,r,o,c){return{x:t,y:r,width:o,height:c,right:t+o,bottom:r+c}},mf=function(t){var r=t===void 0?window:t,o=r.document,c=cs(re.fromDom(o));return xp(r).fold(function(){var v=r.document.documentElement,m=v.clientWidth,p=v.clientHeight;return Bg(c.left,c.top,m,p)},function(v){return Bg(Math.max(v.pageLeft,c.left),Math.max(v.pageTop,c.top),v.width,v.height)})},gf=function(t,r){var o=t.view(r);return o.fold(ye([]),function(c){var v=t.owner(c),m=gf(t,v);return[c].concat(m)})},Al=function(t,r){var o=r.owner(t),c=gf(r,o);return D.some(c)},Sn=function(t){var r,o=t.dom===document?D.none():D.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement);return o.map(re.fromDom)},_s=function(t){return Ia(t)},xu=Object.freeze({__proto__:null,view:Sn,owner:_s}),qi=function(t){var r=re.fromDom(document),o=cs(r),c=Al(t,xu);return c.fold(Vr(Cu,t),function(v){var m=Ja(t),p=Wr(v,function(C,S){var k=Ja(S);return{left:C.left+k.left,top:C.top+k.top}},{left:0,top:0});return na(p.left+m.left+o.left,p.top+m.top+o.top)})},Bs=function(t,r,o){return{point:t,width:r,height:o}},oo=function(t,r,o,c){return{x:t,y:r,width:o,height:c}},Fo=function(t,r,o,c){return{x:t,y:r,width:o,height:c,right:t+o,bottom:r+c}},ho=function(t){var r=Cu(t),o=Su(t),c=ss(t);return Fo(r.left,r.top,o,c)},Dl=function(t){var r=qi(t),o=Su(t),c=ss(t);return Fo(r.left,r.top,o,c)},Ai=function(){return mf(window)},Pt=function(t){var r=function(B){return Pt(t)},o=function(B){return Pt(t)},c=function(B){return Pt(B(t))},v=function(B){return Pt(t)},m=function(B){B(t)},p=function(B){return B(t)},C=function(B,L){return L(t)},S=function(B){return B(t)},k=function(B){return B(t)},R=function(){return D.some(t)};return{isValue:Tt,isError:kn,getOr:ye(t),getOrThunk:ye(t),getOrDie:ye(t),or:r,orThunk:o,fold:C,map:c,mapError:v,each:m,bind:p,exists:S,forall:k,toOptional:R}},hf=function(t){var r=function(k){return k()},o=function(){return Mt(String(t))()},c=Lt,v=function(k){return k()},m=function(k){return hf(t)},p=function(k){return hf(k(t))},C=function(k){return hf(t)},S=function(k,R){return k(t)};return{isValue:kn,isError:Tt,getOr:Lt,getOrThunk:r,getOrDie:o,or:c,orThunk:v,fold:S,map:m,mapError:p,each:at,bind:C,exists:kn,forall:Tt,toOptional:D.none}},Mg=function(t,r){return t.fold(function(){return hf(r)},Pt)},In={value:Pt,error:hf,fromOption:Mg},ra;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(ra||(ra={}));var dm=function(t,r,o){return t.stype===ra.Error?r(t.serror):o(t.svalue)},Sc=function(t){var r=[],o=[];return kt(t,function(c){dm(c,function(v){return o.push(v)},function(v){return r.push(v)})}),{values:r,errors:o}},Ra=function(t,r){return t.stype===ra.Error?{stype:ra.Error,serror:r(t.serror)}:t},mm=function(t,r){return t.stype===ra.Value?{stype:ra.Value,svalue:r(t.svalue)}:t},Wu=function(t,r){return t.stype===ra.Value?r(t.svalue):t},td=function(t,r){return t.stype===ra.Error?r(t.serror):t},Wn=function(t){return{stype:ra.Value,svalue:t}},lu=function(t){return{stype:ra.Error,serror:t}},Wb=function(t){return dm(t,In.error,In.value)},jb=function(t){return t.fold(lu,Wn)},Ba={fromResult:jb,toResult:Wb,svalue:Wn,partition:Sc,serror:lu,bind:Wu,bindError:td,map:mm,mapError:Ra,fold:dm},gm=function(t,r,o,c){return{tag:"field",key:t,newKey:r,presence:o,prop:c}},E=function(t,r){return{tag:"custom",newKey:t,instantiator:r}},$=function(t,r,o){switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return o(t.newKey,t.instantiator)}},H=function(t,r){return r},te=function(t,r){var o=yr(t)&&yr(r);return o?$e(t,r):r},we=function(t){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(r.length===0)throw new Error("Can't merge zero objects");for(var c={},v=0;v<r.length;v++){var m=r[v];for(var p in m)hr(m,p)&&(c[p]=t(c[p],m[p]))}return c}},$e=we(te),Wt=we(H),En=function(){return{tag:"required",process:{}}},ir=function(t){return{tag:"defaultedThunk",process:t}},jn=function(t){return ir(ye(t))},la=function(){return{tag:"option",process:{}}},Di=function(t){return{tag:"mergeWithThunk",process:t}},Ga=function(t){return Di(ye(t))},hT=function(t,r){return t.length>0?Ba.svalue($e(r,Wt.apply(void 0,t))):Ba.svalue(r)},ow=function(t){return Ct(Ba.serror,jt)(t)},iw=function(t,r){var o=Ba.partition(t);return o.errors.length>0?ow(o.errors):hT(o.values,r)},pT=function(t){var r=Ba.partition(t);return r.errors.length>0?ow(r.errors):Ba.svalue(r.values)},nl={consolidateObj:iw,consolidateArr:pT},Pg=function(t){return yr(t)&&ta(t).length>100?" removed due to size":JSON.stringify(t,null,2)},ju=function(t){var r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ye("... (only showing first ten failures)")}]):t;return nt(r,function(o){return"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo()})},hm=function(t,r){return Ba.serror([{path:t,getErrorInfo:r}])},Gb=function(t,r,o){return hm(t,function(){return'Could not find valid *required* value for "'+r+'" in '+Pg(o)})},Ng=function(t,r){return hm(t,function(){return'Choice schema did not contain choice key: "'+r+'"'})},Tp=function(t,r,o){return hm(t,function(){return'The chosen schema: "'+o+'" did not exist in branches: '+Pg(r)})},uw=function(t,r){return hm(t,function(){return"There are unsupported fields: ["+r.join(", ")+"] specified"})},bT=function(t,r){return hm(t,ye(r))},rl=function(t){var r=function(c,v){return Ba.bindError(t(v),function(m){return bT(c,m)})},o=ye("val");return{extract:r,toString:o}},$g=rl(Ba.svalue),yT=function(t,r,o,c){return Gt(r,o).fold(function(){return Gb(t,o,r)},c)},qb=function(t,r,o,c){var v=Gt(t,r).getOrThunk(function(){return o(t)});return c(v)},wT=function(t,r,o){return o(Gt(t,r))},CT=function(t,r,o,c){var v=Gt(t,r).map(function(m){return m===!0?o(t):m});return c(v)},pm=function(t,r,o,c,v){var m=function(C){return v.extract(r.concat([c]),C)},p=function(C){return C.fold(function(){return Ba.svalue(D.none())},function(S){var k=v.extract(r.concat([c]),S);return Ba.map(k,D.some)})};switch(t.tag){case"required":return yT(r,o,c,m);case"defaultedThunk":return qb(o,c,t.process,m);case"option":return wT(o,c,p);case"defaultedOptionThunk":return CT(o,c,t.process,p);case"mergeWithThunk":return qb(o,c,ye({}),function(C){var S=$e(t.process(o),C);return m(S)})}},zg=function(t,r,o){for(var c={},v=[],m=0,p=o;m<p.length;m++){var C=p[m];$(C,function(S,k,R,B){var L=pm(R,t,r,S,B);Ba.fold(L,function(U){v.push.apply(v,U)},function(U){c[k]=U})},function(S,k){c[S]=k(r)})}return v.length>0?Ba.serror(v):Ba.svalue(c)},sw=function(t){var r=function(c,v){return t().extract(c,v)},o=function(){return t().toString()};return{extract:r,toString:o}},cw=function(t){return ta(Zn(t,Tn))},ls=function(t){var r=Yt(t),o=Wr(t,function(v,m){return $(m,function(p){var C;return $e(v,(C={},C[p]=!0,C))},ye(v))},{}),c=function(v,m){var p=no(m)?[]:cw(m),C=tn(p,function(S){return!ha(o,S)});return C.length===0?r.extract(v,m):uw(v,C)};return{extract:c,toString:r.toString}},Yt=function(t){var r=function(c,v){return zg(c,v,t)},o=function(){var c=nt(t,function(v){return $(v,function(m,p,C,S){return m+" -> "+S.toString()},function(m,p){return"state("+m+")"})});return`obj{
`+c.join(`
`)+"}"};return{extract:r,toString:o}},pf=function(t){var r=function(c,v){var m=nt(v,function(p,C){return t.extract(c.concat(["["+C+"]"]),p)});return nl.consolidateArr(m)},o=function(){return"array("+t.toString()+")"};return{extract:r,toString:o}},Ig=function(t){var r=function(c,v){for(var m=[],p=0,C=t;p<C.length;p++){var S=C[p],k=S.extract(c,v);if(k.stype===ra.Value)return k;m.push(k)}return nl.consolidateArr(m)},o=function(){return"oneOf("+nt(t,function(c){return c.toString()}).join(", ")+")"};return{extract:r,toString:o}},Qf=function(t,r){var o=function(m,p){return pf(rl(t)).extract(m,p)},c=function(m,p){var C=ta(p),S=o(m,C);return Ba.bind(S,function(k){var R=nt(k,function(B){return gm(B,B,En(),r)});return Yt(R).extract(m,p)})},v=function(){return"setOf("+r.toString()+")"};return{extract:c,toString:v}},bm=function(t,r){var o=ao(r),c=function(m,p){return o().extract(m,p)},v=function(){return o().toString()};return{extract:c,toString:v}},Kb=Ct(pf,Yt),xc=ye($g),nd=function(t,r){return rl(function(o){var c=typeof o;return t(o)?Ba.svalue(o):Ba.serror("Expected type: "+r+" but got: "+c)})},ym=nd(za,"number"),io=nd(Xt,"string"),si=nd(no,"boolean"),Fg=nd(or,"function"),Rl=function(t){if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(function(r){return Rl(t[r])});default:return!1}},Lg=rl(function(t){return Rl(t)?Ba.svalue(t):Ba.serror("Expected value to be acceptable for sending via postMessage")}),kp=function(t,r,o,c){var v=Gt(o,c);return v.fold(function(){return Tp(t,o,c)},function(m){return m.extract(t.concat(["branch: "+c]),r)})},Ep=function(t,r){var o=function(v,m){var p=Gt(m,t);return p.fold(function(){return Ng(v,t)},function(C){return kp(v,m,r,C)})},c=function(){return"chooseOn("+t+"). Possible values: "+ta(r)};return{extract:o,toString:c}},ST=function(){return pf($g)},wm=function(t){return rl(function(r){return t(r).fold(Ba.serror,Ba.svalue)})},Ki=function(t,r){return Qf(function(o){return Ba.fromResult(t(o))},r)},lw=function(t,r,o){var c=r.extract([t],o);return Ba.mapError(c,function(v){return{input:o,errors:v}})},Ha=function(t,r,o){return Ba.toResult(lw(t,r,o))},Tc=function(t){return t.fold(function(r){throw new Error(ev(r))},Lt)},zr=function(t,r,o){return Tc(Ha(t,r,o))},ev=function(t){return`Errors: 
`+ju(t.errors).join(`
`)+`

Input object: `+Pg(t.input)},Zs=function(t,r){return Ep(t,kr(r,Yt))},xT=function(t,r){return bm(t,r)},Lo=gm,Tu=E,fw=function(t){return wm(function(r){return Un(t,r)?In.value(r):In.error('Unsupported value: "'+r+'", choose one of "'+t.join(", ")+'".')})},He=function(t){return Lo(t,t,En(),xc())},Gu=function(t,r){return Lo(t,t,En(),r)},bf=function(t){return Gu(t,ym)},xn=function(t){return Gu(t,io)},Ms=function(t,r){return Lo(t,t,En(),fw(r))},TT=function(t){return Gu(t,si)},fu=function(t){return Gu(t,Fg)},Cm=function(t,r){return Lo(t,t,la(),rl(function(o){return Ba.serror("The field: "+t+" is forbidden. "+r)}))},_l=function(t,r){return Lo(t,t,En(),Yt(r))},kc=function(t,r){return Lo(t,t,En(),Kb(r))},Xi=function(t,r){return Lo(t,t,En(),pf(r))},Br=function(t){return Lo(t,t,la(),xc())},al=function(t,r){return Lo(t,t,la(),r)},rd=function(t){return al(t,ym)},da=function(t){return al(t,io)},tv=function(t){return al(t,Fg)},fs=function(t,r){return al(t,pf(r))},vs=function(t,r){return al(t,Yt(r))},kT=function(t,r){return al(t,ls(r))},he=function(t,r){return Lo(t,t,jn(r),xc())},ku=function(t,r,o){return Lo(t,t,jn(r),o)},ol=function(t,r){return ku(t,r,ym)},Sm=function(t,r){return ku(t,r,io)},Ps=function(t,r,o){return ku(t,r,fw(o))},aa=function(t,r){return ku(t,r,si)},ma=function(t,r){return ku(t,r,Fg)},qu=function(t,r){return ku(t,r,Lg)},yf=function(t,r,o){return ku(t,r,pf(o))},Xb=function(t,r,o){return ku(t,r,Yt(o))},nn=function(t){var r=t,o=function(){return r},c=function(v){r=v};return{get:o,set:c}},Op=function(t){if(!ar(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");var r=[],o={};return kt(t,function(c,v){var m=ta(c);if(m.length!==1)throw new Error("one and only one name per case");var p=m[0],C=c[p];if(o[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ar(C))throw new Error("case arguments must be an array");r.push(p),o[p]=function(){for(var S=[],k=0;k<arguments.length;k++)S[k]=arguments[k];var R=S.length;if(R!==C.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+C.length+" ("+C+"), got "+R);var B=function(L){var U=ta(L);if(r.length!==U.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+U.join(","));var K=jr(r,function(ne){return Un(U,ne)});if(!K)throw new Error("Not all branches were specified when using match. Specified: "+U.join(", ")+`
Required: `+r.join(", "));return L[p].apply(null,S)};return{fold:function(){for(var L=[],U=0;U<arguments.length;U++)L[U]=arguments[U];if(L.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+L.length);var K=L[v];return K.apply(null,S)},match:B,log:function(L){console.log(L,{constructors:r,constructor:p,params:S})}}}}),o},Ns={generate:Op};Ns.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var vw=function(t){var r=[],o=[];return kt(t,function(c){c.fold(function(v){r.push(v)},function(v){o.push(v)})}),{errors:r,values:o}},Hg=function(t,r){var o={};return Gr(t,function(c,v){Un(r,v)||(o[v]=c)}),o},Vg=function(t,r){var o;return o={},o[t]=r,o},Yb=function(t){var r={};return kt(t,function(o){r[o.key]=o.value}),r},Jb=function(t,r){return Hg(t,r)},Bl=function(t,r){return Vg(t,r)},wf=function(t){return Yb(t)},ET=function(t,r){return t.length===0?In.value(r):In.value($e(r,Wt.apply(void 0,t)))},Zb=function(t){return In.error(jt(t))},OT=function(t,r){var o=vw(t);return o.errors.length>0?Zb(o.errors):ET(o.values,r)},dw=function(t){return or(t)?t:kn},Ug=function(t,r,o){for(var c=t.dom,v=dw(o);c.parentNode;){c=c.parentNode;var m=re.fromDom(c),p=r(m);if(p.isSome())return p;if(v(m))break}return D.none()},xm=function(t,r,o){var c=r(t),v=dw(o);return c.orThunk(function(){return v(t)?D.none():Ug(t,r,v)})},mw=function(t,r){return Lr(t.element,r.event.target)},Ml={can:Tt,abort:kn,run:at},Tm=function(t){if(!ha(t,"can")&&!ha(t,"abort")&&!ha(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return ue(ue({},Ml),t)},Qb=function(t,r){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return Hn(t,function(v,m){return v&&r(m).apply(void 0,o)},!0)}},gw=function(t,r){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return Hn(t,function(v,m){return v||r(m).apply(void 0,o)},!1)}},AT=function(t){return or(t)?{can:Tt,abort:kn,run:t}:t},DT=function(t){var r=Qb(t,function(v){return v.can}),o=gw(t,function(v){return v.abort}),c=function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];kt(t,function(p){p.run.apply(void 0,v)})};return{can:r,abort:o,run:c}},Ao=ye,Pl=Ao("touchstart"),Ec=Ao("touchmove"),nv=Ao("touchend"),hw=Ao("touchcancel"),Oc=Ao("mousedown"),ad=Ao("mousemove"),e0=Ao("mouseout"),t0=Ao("mouseup"),Cf=Ao("mouseover"),Qs=Ao("focusin"),Ri=Ao("focusout"),Ap=Ao("keydown"),n0=Ao("keyup"),od=Ao("input"),km=Ao("change"),Em=Ao("click"),RT=Ao("transitioncancel"),Om=Ao("transitionend"),r0=Ao("transitionstart"),_T=Ao("selectstart"),qa=function(t){return ye("alloy."+t)},Dp={tap:qa("tap")},rv=qa("focus"),a0=qa("blur.post"),o0=qa("paste.post"),ec=qa("receive"),$s=qa("execute"),id=qa("focus.item"),av=Dp.tap,Rp=qa("longpress"),Wg=qa("sandbox.close"),i0=qa("typeahead.cancel"),ud=qa("system.init"),_p=qa("system.touchmove"),BT=qa("system.touchend"),u0=qa("system.scroll"),zs=qa("system.resize"),ds=qa("system.attached"),Am=qa("system.detached"),Ac=qa("system.dismissRequested"),vu=qa("system.repositionRequested"),Bp=qa("focusmanager.shifted"),Sf=qa("slotcontainer.visibility"),pw=qa("change.tab"),_i=qa("dismiss.tab"),bw=qa("highlight"),jg=qa("dehighlight"),er=function(t,r){Dc(t,t.element,r,{})},un=function(t,r,o){Dc(t,t.element,r,o)},xf=function(t){er(t,$s())},s0=function(t,r,o){Dc(t,r,o,{})},Dc=function(t,r,o,c){var v=ue({target:r},c);t.getSystem().triggerEvent(o,r,v)},yw=function(t,r,o,c){t.getSystem().triggerEvent(o,r,c.event)},ga=function(t){return wf(t)},c0=function(t,r){return{key:t,value:Tm({abort:r})}},Gg=function(t,r){return{key:t,value:Tm({can:r})}},Mp=function(t){return{key:t,value:Tm({run:function(r,o){o.event.prevent()}})}},We=function(t,r){return{key:t,value:Tm({run:r})}},qg=function(t,r,o){return{key:t,value:Tm({run:function(c,v){r.apply(void 0,[c,v].concat(o))}})}},Dm=function(t){return function(r){return We(t,r)}},Rm=function(t){return function(r){return{key:t,value:Tm({run:function(o,c){mw(o,c)&&r(o,c)}})}}},sd=function(t,r){return We(t,function(o,c){o.getSystem().getByUid(r).each(function(v){yw(v,v.element,t,c)})})},cd=function(t,r,o){var c=r.partUids[o];return sd(t,c)},ov=function(t,r){return We(t,function(o,c){var v=c.event,m=o.getSystem().getByDom(v.target).getOrThunk(function(){var p=xm(v.target,function(C){return o.getSystem().getByDom(C).toOptional()},kn);return p.getOr(o)});r(o,m,c)})},uo=function(t){return We(t,function(r,o){o.cut()})},ka=function(t){return We(t,function(r,o){o.stop()})},Tf=function(t,r){return Rm(t)(r)},Ma=Rm(ds()),ms=Rm(Am()),l0=Rm(ud()),Rc=Dm($s()),Pp=function(t,r){var o=r||document,c=o.createElement("div");return c.innerHTML=t,M(re.fromDom(c))},Ku=function(t){return t.dom.innerHTML},il=function(t,r){var o=Ia(t),c=o.dom,v=re.fromDom(c.createDocumentFragment()),m=Pp(r,c);tl(v,m),_a(t),Gi(t,v)},kf=function(t){var r=re.fromTag("div"),o=re.fromDom(t.dom.cloneNode(!0));return Gi(r,o),Ku(r)},ci=function(t,r){return re.fromDom(t.dom.cloneNode(r))},Np=function(t){return ci(t,!1)},Yi=function(t){if(De(t))return"#shadow-root";var r=Np(t);return kf(r)},li=function(t){return Yi(t)},_m=function(t,r,o){return Lr(r,t.element)&&!Lr(r,o)},MT=ga([Gg(rv(),function(t,r){var o=r.event,c=o.originator,v=o.target;return _m(t,c,v)?(console.warn(rv()+` did not get interpreted by the desired target. 
Originator: `+li(c)+`
Target: `+li(v)+`
Check the `+rv()+" event handlers"),!1):!0})]),Kg=Object.freeze({__proto__:null,events:MT}),Do=0,Nt=function(t){var r=new Date,o=r.getTime(),c=Math.floor(Math.random()*1e9);return Do++,t+"_"+c+Do+String(o)},tc=ye("alloy-id-"),PT=ye("data-alloy-id"),ww=tc(),Bm=PT(),Cw=function(t,r){var o=Nt(ww+t);return Xg(r,o),o},Xg=function(t,r){Object.defineProperty(t.dom,Bm,{value:r,writable:!0})},Nl=function(t){var r=rr(t)?t.dom[Bm]:null;return D.from(r)},ld=function(t){return Nt(t)},f0=Lt,ul=function(t){var r=function(v){return"The component must be in a context to execute: "+v+(t?`
`+li(t().element)+" is not in context.":"")},o=function(v){return function(){throw new Error(r(v))}},c=function(v){return function(){console.warn(r(v))}};return{debugInfo:ye("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:o("build"),addToWorld:o("addToWorld"),removeFromWorld:o("removeFromWorld"),addToGui:o("addToGui"),removeFromGui:o("removeFromGui"),getByUid:o("getByUid"),getByDom:o("getByDom"),isConnected:kn}},NT=ul(),fd=function(t,r,o){var c=o.toString(),v=c.indexOf(")")+1,m=c.indexOf("("),p=c.substring(m+1,v-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:r,parameters:$l(p.slice(0,1).concat(p.slice(3)))}},t},$l=function(t){return nt(t,function(r){return Jt(r,"/*")?r.substring(0,r.length-2):r})},iv=function(t,r){var o=t.toString(),c=o.indexOf(")")+1,v=o.indexOf("("),m=o.substring(v+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:r,parameters:$l(m)}},t},vd=function(t,r){var o=r.toString(),c=o.indexOf(")")+1,v=o.indexOf("("),m=o.substring(v+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:$l(m.slice(1))}},t},Sw=Nt("alloy-premade"),po=function(t){return Bl(Sw,t)},uv=function(t){return Gt(t,Sw)},dd=function(t){return vd(function(r){for(var o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];return t.apply(void 0,gt([r.getApis(),r],o,!1))},t)},gs={init:function(){return fi({readState:ye("No State required")})}},fi=function(t){return t},$T=function(t,r){var o=nt(r,function(v){return vs(v.name(),[He("config"),he("state",gs)])}),c=Ha("component.behaviours",Yt(o),t.behaviours).fold(function(v){throw new Error(ev(v)+`
Complete spec:
`+JSON.stringify(t,null,2))},Lt);return{list:r,data:kr(c,function(v){var m=v.map(function(p){return{config:p.config,state:p.state.init(p.config)}});return ye(m)})}},zT=function(t){return t.list},IT=function(t){return t.data},xw=function(t,r){var o={};return Gr(t,function(c,v){Gr(c,function(m,p){var C=Gt(o,p).getOr([]);o[p]=C.concat([r(v,m)])})}),o},_c=function(t){return{classes:So(t.classes)?[]:t.classes,attributes:So(t.attributes)?{}:t.attributes,styles:So(t.styles)?{}:t.styles}},$p=function(t,r){return ue(ue({},t),{attributes:ue(ue({},t.attributes),r.attributes),styles:ue(ue({},t.styles),r.styles),classes:t.classes.concat(r.classes)})},Mm=function(t,r,o,c){var v=ue({},r);kt(o,function(R){v[R.name()]=R.exhibit(t,c)});var m=xw(v,function(R,B){return{name:R,modification:B}}),p=function(R){return Wr(R,function(B,L){return ue(ue({},L.modification),B)},{})},C=Wr(m.classes,function(R,B){return B.modification.concat(R)},[]),S=p(m.attributes),k=p(m.styles);return _c({classes:C,attributes:S,styles:k})},FT=function(t,r,o,c){try{var v=nu(o,function(m,p){var C=m[r],S=p[r],k=c.indexOf(C),R=c.indexOf(S);if(k===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(c,null,2));if(R===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(c,null,2));return k<R?-1:R<k?1:0});return In.value(v)}catch(m){return In.error([m])}},v0=function(t,r){return{handler:t,purpose:r}},Tw=function(t,r){return{cHandler:t,purpose:r}},d0=function(t,r){return Tw(Vr.apply(void 0,[t.handler].concat(r)),t.purpose)},m0=function(t){return t.cHandler},sv=function(t,r){return{name:t,handler:r}},cv=function(t,r){var o={};return kt(t,function(c){o[c.name()]=c.handlers(r)}),o},fa=function(t,r,o){var c=ue(ue({},o),cv(r,t));return xw(c,sv)},g0=function(t,r,o,c){var v=fa(t,o,c);return HT(v,r)},nc=function(t){var r=AT(t);return function(o,c){for(var v=[],m=2;m<arguments.length;m++)v[m-2]=arguments[m];var p=[o,c].concat(v);r.abort.apply(void 0,p)?c.stop():r.can.apply(void 0,p)&&r.run.apply(void 0,p)}},h0=function(t,r){return In.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(nt(r,function(o){return o.name}),null,2)])},LT=function(t,r,o){var c=r[o];return c?FT("Event: "+o,"name",t,c).map(function(v){var m=nt(v,function(p){return p.handler});return DT(m)}):h0(o,t)},HT=function(t,r){var o=mo(t,function(c,v){var m=c.length===1?In.value(c[0].handler):LT(c,r,v);return m.map(function(p){var C=nc(p),S=c.length>1?tn(r[v],function(k){return Ca(c,function(R){return R.name===k})}).join(" > "):c[0].name;return Bl(v,v0(C,S))})});return OT(o,{})},Eu,Bc="alloy.base.behaviour",p0=Yt([Lo("dom","dom",En(),Yt([He("tag"),he("styles",{}),he("classes",[]),he("attributes",{}),Br("value"),Br("innerHtml")])),He("components"),He("uid"),he("events",{}),he("apis",{}),Lo("eventOrder","eventOrder",Ga((Eu={},Eu[$s()]=["disabling",Bc,"toggling","typeaheadevents"],Eu[rv()]=[Bc,"focusing","keying"],Eu[ud()]=[Bc,"disabling","toggling","representing"],Eu[od()]=[Bc,"representing","streaming","invalidating"],Eu[Am()]=[Bc,"representing","item-events","tooltipping"],Eu[Oc()]=["focusing",Bc,"item-type-events"],Eu[Pl()]=["focusing",Bc,"item-type-events"],Eu[Cf()]=["item-type-events","tooltipping"],Eu[ec()]=["receiving","reflecting","tooltipping"],Eu)),xc()),Br("domModification")]),Yg=function(t){return Ha("custom.definition",p0,t)},Pm=function(t){return ue(ue({},t.dom),{uid:t.uid,domChildren:nt(t.components,function(r){return r.element})})},b0=function(t){return t.domModification.fold(function(){return _c({})},_c)},kw=function(t){return t.events},lv=function(t,r){var o=Da(t,r);return o===void 0||o===""?[]:o.split(" ")},y0=function(t,r,o){var c=lv(t,r),v=c.concat([o]);return Mn(t,r,v.join(" ")),!0},w0=function(t,r,o){var c=tn(lv(t,r),function(v){return v!==o});return c.length>0?Mn(t,r,c.join(" ")):ui(t,r),!1},zp=function(t){return t.dom.classList!==void 0},Ip=function(t){return lv(t,"class")},md=function(t,r){return y0(t,"class",r)},Ew=function(t,r){return w0(t,"class",r)},vi=function(t,r){zp(t)?t.dom.classList.add(r):md(t,r)},sl=function(t){var r=zp(t)?t.dom.classList:Ip(t);r.length===0&&ui(t,"class")},Ro=function(t,r){if(zp(t)){var o=t.dom.classList;o.remove(r)}else Ew(t,r);sl(t)},Ou=function(t,r){return zp(t)&&t.dom.classList.contains(r)},Ef=function(t,r){kt(r,function(o){vi(t,o)})},zl=function(t,r){kt(r,function(o){Ro(t,o)})},C0=function(t,r){return jr(r,function(o){return Ou(t,o)})},hs=function(t){return t.dom.value},Nm=function(t,r){if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},Ow=function(t){var r=re.fromTag(t.tag);is(r,t.attributes),Ef(r,t.classes),us(r,t.styles),t.innerHtml.each(function(c){return il(r,c)});var o=t.domChildren;if(tl(r,o),t.value.each(function(c){Nm(r,c)}),!t.uid)debugger;return Xg(r,t.uid),r},VT=function(t){var r=Gt(t,"behaviours").getOr({});return Jr(ta(r),function(o){var c=r[o];return Tn(c)?[c.me]:[]})},UT=function(t,r){return $T(t,r)},WT=function(t){var r=VT(t);return UT(t,r)},jT=function(t,r,o){var c=Pm(t),v=b0(t),m={"alloy.base.modification":v},p=r.length>0?Mm(o,m,r,c):v;return $p(c,p)},S0=function(t,r,o){var c={"alloy.base.behaviour":kw(t)};return g0(o,t.eventOrder,r,c).getOrDie()},Fp=function(t){var r=function(){return pe},o=nn(NT),c=Tc(Yg(t)),v=WT(t),m=zT(v),p=IT(v),C=jT(c,m,p),S=Ow(C),k=S0(c,m,p),R=nn(c.components),B=function(_e){o.set(_e)},L=function(){o.set(ul(r))},U=function(){var _e=M(S),ze=Jr(_e,function(ge){return o.get().getByDom(ge).fold(function(){return[]},rs)});R.set(ze)},K=function(_e){var ze=p,ge=or(ze[_e.name()])?ze[_e.name()]:function(){throw new Error("Could not find "+_e.name()+" in "+JSON.stringify(t,null,2))};return ge()},ne=function(_e){return or(p[_e.name()])},me=function(){return c.apis},Z=function(_e){return p[_e]().map(function(ze){return ze.state.readState()}).getOr("not enabled")},pe={uid:t.uid,getSystem:o.get,config:K,hasConfigured:ne,spec:t,readState:Z,getApis:me,connect:B,disconnect:L,element:S,syncComponents:U,components:R.get,events:k};return pe},Is=function(t){var r=Gt(t,"components").getOr([]);return nt(r,bo)},Aw=function(t){var r=f0(t),o=r.events,c=W(r,["events"]),v=Is(c),m=ue(ue({},c),{events:ue(ue({},Kg),o),components:v});return In.value(Fp(m))},fv=function(t){var r=re.fromText(t);return Jg({element:r})},Jg=function(t){var r=zr("external.component",ls([He("element"),Br("uid")]),t),o=nn(ul()),c=function(C){o.set(C)},v=function(){o.set(ul(function(){return p}))},m=r.uid.getOrThunk(function(){return ld("external")});Xg(r.element,m);var p={uid:m,getSystem:o.get,config:D.none,hasConfigured:kn,connect:c,disconnect:v,getApis:function(){return{}},element:r.element,spec:t,readState:ye("No state"),syncComponents:at,components:ye([]),events:{}};return po(p)},cl=ld,rc=function(t){return hr(t,"uid")},bo=function(t){return uv(t).getOrThunk(function(){var r=rc(t)?t:ue({uid:cl("")},t);return Aw(r).getOrDie()})},Fs=po;function vv(t,r,o,c,v){return t(o,c)?D.some(o):or(v)&&v(o)?D.none():r(o,c,v)}var x0=function(t,r,o){for(var c=t.dom,v=or(o)?o:kn;c.parentNode;){c=c.parentNode;var m=re.fromDom(c);if(r(m))return D.some(m);if(v(m))break}return D.none()},Pn=function(t,r,o){var c=function(v,m){return m(v)};return vv(c,x0,t,r,o)},Zg=function(t,r){var o=function(v){return r(re.fromDom(v))},c=lr(t.dom.childNodes,o);return c.map(re.fromDom)},GT=function(t,r){var o=function(c){for(var v=0;v<c.childNodes.length;v++){var m=re.fromDom(c.childNodes[v]);if(r(m))return D.some(m);var p=o(c.childNodes[v]);if(p.isSome())return p}return D.none()};return o(t.dom)},Lp=function(t,r,o){return Pn(t,r,o).isSome()},Hp=function(t,r,o){return x0(t,function(c){return Sr(c,r)},o)},qT=function(t,r){return Zg(t,function(o){return Sr(o,r)})},_o=function(t,r){return Yf(r,t)},du=function(t,r,o){var c=function(v,m){return Sr(v,m)};return vv(c,Hp,t,r,o)},Ea=function(t){var r=Pn(t,function(o){if(!rr(o))return!1;var c=Da(o,"id");return c!==void 0&&c.indexOf("aria-owns")>-1});return r.bind(function(o){var c=Da(o,"id"),v=Cn(o);return _o(v,'[aria-owns="'+c+'"]')})},Dw=function(){var t=Nt("aria-owns"),r=function(c){Mn(c,"aria-owns",t)},o=function(c){ui(c,"aria-owns")};return{id:t,link:r,unlink:o}},T0=function(t,r){return Ea(r).exists(function(o){return gd(t,o)})},gd=function(t,r){return Lp(r,function(o){return Lr(o,t.element)},kn)||T0(t,r)},Rw="unknown",hd;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(hd||(hd={}));var $m=nn({}),_w=function(t,r){var o=[],c=new Date().getTime();return{logEventCut:function(v,m,p){o.push({outcome:"cut",target:m,purpose:p})},logEventStopped:function(v,m,p){o.push({outcome:"stopped",target:m,purpose:p})},logNoParent:function(v,m,p){o.push({outcome:"no-parent",target:m,purpose:p})},logEventNoHandlers:function(v,m){o.push({outcome:"no-handlers-left",target:m})},logEventResponse:function(v,m,p){o.push({outcome:"response",purpose:p,target:m})},write:function(){var v=new Date().getTime();Un(["mousemove","mouseover","mouseout",ud()],t)||console.log(t,{event:t,time:v-c,target:r.dom,sequence:nt(o,function(m){return Un(["cut","stopped","response"],m.outcome)?"{"+m.purpose+"} "+m.outcome+" at ("+li(m.target)+")":m.outcome})})}}},Il=function(t,r,o){var c=Gt($m.get(),t).orThunk(function(){var p=ta($m.get());return sa(p,function(C){return t.indexOf(C)>-1?D.some($m.get()[C]):D.none()})}).getOr(hd.NORMAL);switch(c){case hd.NORMAL:return o(k0());case hd.LOGGING:{var v=_w(t,r),m=o(v);return v.write(),m}case hd.STOP:return!0}},Au=["alloy/data/Fields","alloy/debugging/Debugging"],KT=function(){var t=new Error;if(t.stack!==void 0){var r=t.stack.split(`
`);return lr(r,function(o){return o.indexOf("alloy")>0&&!Ca(Au,function(c){return o.indexOf(c)>-1})}).getOr(Rw)}else return Rw},XT={logEventCut:at,logEventStopped:at,logNoParent:at,logEventNoHandlers:at,logEventResponse:at,write:at},pd=function(t,r,o){return Il(t,r,o)},k0=ye(XT),dv=ye([He("menu"),He("selectedMenu")]),bd=ye([He("item"),He("selectedItem")]);ye(Yt(bd().concat(dv())));var E0=ye(Yt(bd())),YT=_l("initSize",[He("numColumns"),He("numRows")]),JT=function(){return Gu("markers",E0())},yd=function(){return _l("markers",[He("backgroundMenu")].concat(dv()).concat(bd()))},wd=function(t){return _l("markers",nt(t,He))},Vp=function(t,r,o){return KT(),Lo(r,r,o,wm(function(c){return In.value(function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];return c.apply(void 0,v)})}))},Yn=function(t){return Vp("onHandler",t,jn(at))},oa=function(t){return Vp("onKeyboardHandler",t,jn(D.none))},Cd=function(t){return Vp("onHandler",t,En())},mv=function(t){return Vp("onKeyboardHandler",t,En())},Zr=function(t,r){return Tu(t,ye(r))},Up=function(t){return Tu(t,Lt)},Wp=ye(YT),di=function(t,r,o,c,v,m,p,C){return C===void 0&&(C=!1),{x:t,y:r,bubble:o,direction:c,placement:v,restriction:m,label:p+"-"+v,alwaysFit:C}},gv=Ns.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),jp=function(t,r,o,c,v,m,p,C,S){return t.fold(r,o,c,v,m,p,C,S)},ZT=function(t,r,o,c){return t.fold(r,r,c,c,r,c,o,o)},QT=function(t,r,o,c){return t.fold(r,c,r,c,o,o,r,c)},Gp=gv.southeast,zm=gv.southwest,O0=gv.northeast,qp=gv.northwest,Im=gv.south,Kp=gv.north,Xu=gv.east,Sd=gv.west,Fl=function(t,r,o,c){var v=t+r;return v>c?o:v<o?c:v},Yu=function(t,r,o){return Math.min(Math.max(t,r),o)},Bw=function(t,r){switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Bi=function(t,r){return Si(["left","right","top","bottom"],function(o){return Gt(r,o).map(function(c){return Bw(t,c)})})},A0=function(t,r,o){var c=function(S,k){return r[S].map(function(R){var B=S==="top"||S==="bottom",L=B?o.top:o.left,U=S==="left"||S==="top"?Math.max:Math.min,K=U(R,k)+L;return B?Yu(K,t.y,t.bottom):Yu(K,t.x,t.right)}).getOr(k)},v=c("left",t.x),m=c("top",t.y),p=c("right",t.right),C=c("bottom",t.bottom);return Fo(v,m,p-v,C-m)},Of="layout",D0=function(t){return t.x},R0=function(t,r){return t.x+t.width/2-r.width/2},Mw=function(t,r){return t.x+t.width-r.width},Xp=function(t,r){return t.y-r.height},Fm=function(t){return t.y+t.height},_0=function(t,r){return t.y+t.height/2-r.height/2},ek=function(t){return t.x+t.width},tk=function(t,r){return t.x-r.width},Ji=function(t,r,o){return di(D0(t),Fm(t),o.southeast(),Gp(),"southeast",Bi(t,{left:1,top:3}),Of)},Ho=function(t,r,o){return di(Mw(t,r),Fm(t),o.southwest(),zm(),"southwest",Bi(t,{right:0,top:3}),Of)},mu=function(t,r,o){return di(D0(t),Xp(t,r),o.northeast(),O0(),"northeast",Bi(t,{left:1,bottom:2}),Of)},mi=function(t,r,o){return di(Mw(t,r),Xp(t,r),o.northwest(),qp(),"northwest",Bi(t,{right:0,bottom:2}),Of)},Ju=function(t,r,o){return di(R0(t,r),Xp(t,r),o.north(),Kp(),"north",Bi(t,{bottom:2}),Of)},Mi=function(t,r,o){return di(R0(t,r),Fm(t),o.south(),Im(),"south",Bi(t,{top:3}),Of)},Yp=function(t,r,o){return di(ek(t),_0(t,r),o.east(),Xu(),"east",Bi(t,{left:0}),Of)},hv=function(t,r,o){return di(tk(t,r),_0(t,r),o.west(),Sd(),"west",Bi(t,{right:1}),Of)},pv=function(){return[Ji,Ho,mu,mi,Mi,Ju,Yp,hv]},B0=function(){return[Ho,Ji,mi,mu,Mi,Ju,Yp,hv]},Pw=function(){return[mu,mi,Ji,Ho,Ju,Mi]},Jp=function(){return[mi,mu,Ho,Ji,Ju,Mi]},Af=function(){return[Ji,Ho,mu,mi,Mi,Ju]},bv=function(){return[Ho,Ji,mi,mu,Mi,Ju]},Nw=function(t,r){return r.universal?t:tn(t,function(o){return Un(r.channels,o)})},nk=function(t){return ga([We(ec(),function(r,o){var c=t.channels,v=ta(c),m=o,p=Nw(v,m);kt(p,function(C){var S=c[C],k=S.schema,R=zr("channel["+C+`] data
Receiver: `+li(r.element),k,m.data);S.onReceive(r,R)})})])},Zp=Object.freeze({__proto__:null,events:nk}),Du=[Gu("channels",Ki(In.value,ls([Cd("onReceive"),he("schema",xc())])))],Qp=function(t,r,o){return Rc(function(c){o(c,t,r)})},Vo=function(t,r,o){return l0(function(c,v){o(c,t,r)})},$w=function(t,r,o,c,v,m){var p=ls(t),C=vs(r,[kT("config",t)]);return Iw(p,C,r,o,c,v,m)},rk=function(t,r,o,c,v,m){var p=t,C=vs(r,[al("config",t)]);return Iw(p,C,r,o,c,v,m)},M0=function(t,r,o){var c=function(v){for(var m=[],p=1;p<arguments.length;p++)m[p-1]=arguments[p];var C=[v].concat(m);return v.config({name:ye(t)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+o)},function(S){var k=Array.prototype.slice.call(C,1);return r.apply(void 0,[v,S.config,S.state].concat(k))})};return fd(c,o,r)},zw=function(t){return{key:t,value:void 0}},Iw=function(t,r,o,c,v,m,p){var C=function(B){return ha(B,o)?B[o]():D.none()},S=kr(v,function(B,L){return M0(o,B,L)}),k=kr(m,function(B,L){return iv(B,L)}),R=ue(ue(ue({},k),S),{revoke:Vr(zw,o),config:function(B){var L=zr(o+"-config",t,B);return{key:o,value:{config:L,me:R,configAsRaw:ao(function(){return zr(o+"-config",t,B)}),initialConfig:B,state:p}}},schema:ye(r),exhibit:function(B,L){return ko(C(B),Gt(c,"exhibit"),function(U,K){return K(L,U.config,U.state)}).getOrThunk(function(){return _c({})})},name:ye(o),handlers:function(B){return C(B).map(function(L){var U=Gt(c,"events").getOr(function(){return{}});return U(L.config,L.state)}).getOr({})}});return R},vt=function(t){return wf(t)},ak=ls([He("fields"),He("name"),he("active",{}),he("apis",{}),he("state",gs),he("extra",{})]),so=function(t){var r=zr("Creating behaviour: "+t.name,ak,t);return $w(r.fields,r.name,r.active,r.apis,r.extra,r.state)},P0=ls([He("branchKey"),He("branches"),He("name"),he("active",{}),he("apis",{}),he("state",gs),he("extra",{})]),xd=function(t){var r=zr("Creating behaviour: "+t.name,P0,t);return rk(Zs(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},e1=ye(void 0),ps=so({fields:Du,name:"receiving",active:Zp}),Lm=function(t,r){return _c({classes:[],styles:r.useFixed()?{}:{position:"relative"}})},Qg=Object.freeze({__proto__:null,exhibit:Lm}),t1=function(){return re.fromDom(document)},Ll=function(t){return t.dom.focus()},eh=function(t){return t.dom.blur()},n1=function(t){var r=Cn(t).dom;return t.dom===r.activeElement},bs=function(t){return t===void 0&&(t=t1()),D.from(t.dom.activeElement).map(re.fromDom)},Mc=function(t){return bs(Cn(t)).filter(function(r){return t.dom.contains(r.dom)})},Df=function(t,r){var o=Cn(r),c=bs(o).bind(function(m){var p=function(C){return Lr(m,C)};return p(r)?D.some(r):GT(r,p)}),v=t(r);return c.each(function(m){bs(o).filter(function(p){return Lr(p,m)}).fold(function(){Ll(m)},at)}),v},Uo=function(t,r,o,c,v){var m=function(p){return p+"px"};return{position:t,left:r.map(m),top:o.map(m),right:c.map(m),bottom:v.map(m)}},N0=function(t){return ue(ue({},t),{position:D.some(t.position)})},Re=function(t,r){Wa(t,N0(r))},yv=Ns.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),th=function(t,r,o,c,v,m){var p=r.rect,C=p.x-o,S=p.y-c,k=p.width,R=p.height,B=v-(C+k),L=m-(S+R),U=D.some(C),K=D.some(S),ne=D.some(B),me=D.some(L),Z=D.none();return jp(r.direction,function(){return Uo(t,U,K,Z,Z)},function(){return Uo(t,Z,K,ne,Z)},function(){return Uo(t,U,Z,Z,me)},function(){return Uo(t,Z,Z,ne,me)},function(){return Uo(t,U,K,Z,Z)},function(){return Uo(t,U,Z,Z,me)},function(){return Uo(t,U,K,Z,Z)},function(){return Uo(t,Z,K,ne,Z)})},Hm=function(t,r){return t.fold(function(){var o=r.rect;return Uo("absolute",D.some(o.x),D.some(o.y),D.none(),D.none())},function(o,c,v,m){return th("absolute",r,o,c,v,m)},function(o,c,v,m){return th("fixed",r,o,c,v,m)})},wv=function(t,r){var o=Vr(qi,r),c=t.fold(o,o,function(){var p=cs();return qi(r).translate(-p.left,-p.top)}),v=Su(r),m=ss(r);return Fo(c.left,c.top,v,m)},ll=function(t,r){return r.fold(function(){return t.fold(Ai,Ai,Fo)},function(o){return t.fold(o,o,function(){var c=o(),v=$0(t,c.x,c.y);return Fo(v.left,v.top,c.width,c.height)})})},$0=function(t,r,o){var c=na(r,o),v=function(){var m=cs();return c.translate(-m.left,-m.top)};return t.fold(ye(c),ye(c),v)},z0=function(t,r,o,c){return t.fold(r,o,c)};yv.none;var r1=yv.relative,a1=yv.fixed,Fw=function(t,r){return{anchorBox:t,origin:r}},I0=function(t,r){return Fw(t,r)},F0="data-alloy-placement",L0=function(t,r){Mn(t,F0,r)},H0=function(t){return La(t,F0)},V0=function(t){return ui(t,F0)},Td=Ns.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),ok=function(t,r){var o=r.x,c=r.y,v=r.right,m=r.bottom,p=t.x,C=t.y,S=t.right,k=t.bottom,R=t.width,B=t.height,L=p>=o&&p<=v,U=C>=c&&C<=m,K=L&&U,ne=S<=v&&S>=o,me=k<=m&&k>=c,Z=ne&&me,pe=Math.min(R,p>=o?v-p:S-o),_e=Math.min(B,C>=c?m-C:k-c);return{originInBounds:K,sizeInBounds:Z,visibleW:pe,visibleH:_e}},Lw=function(t,r){var o=r.x,c=r.y,v=r.right,m=r.bottom,p=t.x,C=t.y,S=t.width,k=t.height,R=Math.max(o,v-S),B=Math.max(c,m-k),L=Yu(p,o,R),U=Yu(C,c,B),K=Math.min(L+S,v)-L,ne=Math.min(U+k,m)-U;return Fo(L,U,K,ne)},o1=function(t,r,o){var c=ye(r.bottom-o.y),v=ye(o.bottom-r.y),m=ZT(t,v,v,c),p=ye(r.right-o.x),C=ye(o.right-r.x),S=QT(t,C,C,p);return{maxWidth:S,maxHeight:m}},nh=function(t,r,o,c){var v=t.bubble,m=v.offset,p=A0(c,t.restriction,m),C=t.x+m.left,S=t.y+m.top,k=Fo(C,S,r,o),R=ok(k,p),B=R.originInBounds,L=R.sizeInBounds,U=R.visibleW,K=R.visibleH,ne=B&&L,me=ne?k:Lw(k,p),Z=me.width>0&&me.height>0,pe=o1(t.direction,me,c),_e=pe.maxWidth,ze=pe.maxHeight,ge={rect:me,maxHeight:ze,maxWidth:_e,direction:t.direction,placement:t.placement,classes:{on:v.classesOn,off:v.classesOff},layout:t.label,testY:S};return ne||t.alwaysFit?Td.fit(ge):Td.nofit(ge,U,K,Z)},i1=function(t,r,o,c,v,m){var p=c.width,C=c.height,S=function(R,B,L,U,K){var ne=R(o,c,v,t,m),me=nh(ne,p,C,m);return me.fold(ye(me),function(Z,pe,_e,ze){var ge=K===ze?_e>U||pe>L:!K&&ze;return ge?me:Td.nofit(B,L,U,K)})},k=Hn(r,function(R,B){var L=Vr(S,B);return R.fold(ye(R),L)},Td.nofit({rect:o,maxHeight:c.height,maxWidth:c.width,direction:Gp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:o.y},-1,-1,!1));return k.fold(Lt,Lt)},u1=function(t){var r=nn(D.none()),o=function(){return r.get().each(t)},c=function(){o(),r.set(D.none())},v=function(){return r.get().isSome()},m=function(){return r.get()},p=function(C){o(),r.set(D.some(C))};return{clear:c,isSet:v,get:m,set:p}},s1=function(){return u1(function(t){return t.destroy()})},kd=function(){return u1(function(t){return t.unbind()})},Hw=function(){var t=s1(),r=function(o){return t.get().each(o)};return ue(ue({},t),{run:r})},Qa=function(){var t=u1(at),r=function(o){return t.get().each(o)};return ue(ue({},t),{on:r})},c1=Tt,co=function(t,r,o){return Sp(t,r,c1,o)},l1=function(t,r,o){return cf(t,r,c1,o)},Vm=Js,f1=["top","bottom","right","left"],Um="data-alloy-transition-timer",Vw=function(t,r){return C0(t,r.classes)},Uw=function(t,r,o){return o.exists(function(c){var v=t.mode;return v==="all"?!0:c[v]!==r[v]})},ik=function(t,r){var o=function(c){return parseFloat(c).toFixed(3)};return No(r,function(c,v){var m=t[v].map(o),p=c.map(o);return!Es(m,p)}).isSome()},uk=function(t){var r=function(m){var p=ja(t,m),C=Xt(p)?p.split(/\s*,\s*/):[];return tn(C,ru)},o=function(m){if(Xt(m)&&/^[\d.]+/.test(m)){var p=parseFloat(m);return Jt(m,"ms")?p:p*1e3}else return 0},c=r("transition-delay"),v=r("transition-duration");return Hn(v,function(m,p,C){var S=o(c[C])+o(p);return Math.max(m,S)},0)},Ww=function(t,r){var o=kd(),c=kd(),v,m=function(R){var B,L=(B=R.raw.pseudoElement)!==null&&B!==void 0?B:"";return Lr(R.target,t)&&Xo(L)&&Un(f1,R.raw.propertyName)},p=function(R){if(fo(R)||m(R)){o.clear(),c.clear();var B=R==null?void 0:R.raw.type;(fo(B)||B===Om())&&(clearTimeout(v),ui(t,Um),zl(t,r.classes))}},C=function(){o.set(co(t,Om(),p)),c.set(co(t,RT(),p))};if("ontransitionstart"in t.dom)var S=co(t,r0(),function(R){m(R)&&(S.unbind(),C())});else C();var k=uk(t);requestAnimationFrame(function(){v=setTimeout(p,k+17),Mn(t,Um,v)})},v1=function(t,r){Ef(t,r.classes),La(t,Um).each(function(o){clearTimeout(parseInt(o,10)),ui(t,Um)}),Ww(t,r)},d1=function(t,r,o,c,v,m){var p=Uw(c,v,m);if(p||Vw(t,c)){pn(t,"position",o.position);var C=wv(r,t),S=Hm(r,ue(ue({},v),{rect:C})),k=Si(f1,function(R){return S[R]});ik(o,k)&&(Wa(t,k),p&&v1(t,c),ya(t))}else zl(t,c.classes)},sk=function(t){return{width:Su(t),height:ss(t)}},jw=function(t,r,o,c){_r(r,"max-height"),_r(r,"max-width");var v=sk(r);return i1(r,c.preference,t,v,o,c.bounds)},U0=function(t,r){var o=r.classes;zl(t,o.off),Ef(t,o.on)},Gw=function(t,r,o){var c=o.maxHeightFunction;c(t,r.maxHeight)},ck=function(t,r,o){var c=o.maxWidthFunction;c(t,r.maxWidth)},Pi=function(t,r,o){var c=Hm(o.origin,r);o.transition.each(function(v){d1(t,o.origin,c,v,r,o.lastPlacement)}),Re(t,c)},Ed=function(t,r){L0(t,r.placement)},W0=function(t,r){Cp(t,Math.floor(r))},qw=ye(function(t,r){W0(t,r),us(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Wm=ye(function(t,r){W0(t,r)}),Kw=function(t,r,o){return t[r]===void 0?o:t[r]},lk=function(t,r,o,c,v,m,p,C){var S=Kw(p,"maxHeightFunction",qw()),k=Kw(p,"maxWidthFunction",at),R=t.anchorBox,B=t.origin,L={bounds:ll(B,m),origin:B,preference:c,maxHeightFunction:S,maxWidthFunction:k,lastPlacement:v,transition:C};return rh(R,r,o,L)},rh=function(t,r,o,c){var v=jw(t,r,o,c);return Pi(r,v,c),Ed(r,v),U0(r,v),Gw(r,v,c),ck(r,v,c),{layout:v.layout,placement:v.placement}},ah=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Cv=function(t,r,o,c){c===void 0&&(c=1);var v=t*c,m=r*c,p=function(S){return Gt(o,S).getOr([])},C=function(S,k,R){var B=ua(ah,R);return{offset:na(S,k),classesOn:Jr(R,p),classesOff:Jr(B,p)}};return{southeast:function(){return C(-t,r,["top","alignLeft"])},southwest:function(){return C(t,r,["top","alignRight"])},south:function(){return C(-t/2,r,["top","alignCentre"])},northeast:function(){return C(-t,-r,["bottom","alignLeft"])},northwest:function(){return C(t,-r,["bottom","alignRight"])},north:function(){return C(-t/2,-r,["bottom","alignCentre"])},east:function(){return C(t,-r/2,["valignCentre","left"])},west:function(){return C(-t,-r/2,["valignCentre","right"])},insetNortheast:function(){return C(v,m,["top","alignLeft","inset"])},insetNorthwest:function(){return C(-v,m,["top","alignRight","inset"])},insetNorth:function(){return C(-v/2,m,["top","alignCentre","inset"])},insetSoutheast:function(){return C(v,-m,["bottom","alignLeft","inset"])},insetSouthwest:function(){return C(-v,-m,["bottom","alignRight","inset"])},insetSouth:function(){return C(-v/2,-m,["bottom","alignCentre","inset"])},insetEast:function(){return C(-v,-m/2,["valignCentre","right","inset"])},insetWest:function(){return C(v,-m/2,["valignCentre","left","inset"])}}},m1=function(){return Cv(0,0,{})},g1=Lt,h1=function(t,r){return function(o){return fk(o)==="rtl"?r:t}},fk=function(t){return ja(t,"direction")==="rtl"?"rtl":"ltr"},Rf;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Rf||(Rf={}));var p1="data-alloy-vertical-dir",vk=function(t){return Lp(t,function(r){return rr(r)&&Da(r,"data-alloy-vertical-dir")===Rf.BottomToTop})},Sv=function(){return vs("layouts",[He("onLtr"),He("onRtl"),Br("onBottomLtr"),Br("onBottomRtl")])},xv=function(t,r,o,c,v,m,p){var C=p.map(vk).getOr(!1),S=r.layouts.map(function(U){return U.onLtr(t)}),k=r.layouts.map(function(U){return U.onRtl(t)}),R=C?r.layouts.bind(function(U){return U.onBottomLtr.map(function(K){return K(t)})}).or(S).getOr(v):S.getOr(o),B=C?r.layouts.bind(function(U){return U.onBottomRtl.map(function(K){return K(t)})}).or(k).getOr(m):k.getOr(c),L=h1(R,B);return L(t)},Xw=function(t,r,o){var c=r.hotspot,v=wv(o,c.element),m=xv(t.element,r,Af(),bv(),Pw(),Jp(),D.some(r.hotspot.element));return D.some(g1({anchorBox:v,bubble:r.bubble.getOr(m1()),overrides:r.overrides,layouts:m,placer:D.none()}))},oh=[He("hotspot"),Br("bubble"),he("overrides",{}),Sv(),Zr("placement",Xw)],j0=function(t,r,o){var c=$0(o,r.x,r.y),v=Fo(c.left,c.top,r.width,r.height),m=xv(t.element,r,pv(),B0(),pv(),B0(),D.none());return D.some(g1({anchorBox:v,bubble:r.bubble,overrides:r.overrides,layouts:m,placer:D.none()}))},b1=[He("x"),He("y"),he("height",0),he("width",0),he("bubble",m1()),he("overrides",{}),Sv(),Zr("placement",j0)],gi=Ns.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),dk=function(t){return t.fold(Lt,function(r,o,c){return r.translate(-o,-c)})},y1=function(t){return t.fold(Lt,Lt)},Yw=function(t){return Hn(t,function(r,o){return r.translate(o.left,o.top)},na(0,0))},mk=function(t){var r=nt(t,dk);return Yw(r)},Pc=function(t){var r=nt(t,y1);return Yw(r)},_f=gi.screen,gk=gi.absolute,G0=function(t,r,o){var c=Jc(o.root).dom,v=function(m){var p=Ia(m),C=Ia(t.element);return Lr(p,C)};return D.from(c.frameElement).map(re.fromDom).filter(v).map(Cu)},q0=function(t,r,o){var c=Ia(t.element),v=cs(c),m=G0(t,r,o).getOr(v);return gk(m,v.left,v.top)},Od=function(t,r,o,c){var v=_f(na(t,r));return D.some(Bs(v,o,c))},Jw=function(t,r,o,c,v){return t.map(function(m){var p=[r,m.point],C=z0(c,function(){return Pc(p)},function(){return Pc(p)},function(){return mk(p)}),S=oo(C.left,C.top,m.width,m.height),k=o.showAbove?Pw():Af(),R=o.showAbove?Jp():bv(),B=xv(v,o,k,R,k,R,D.none());return g1({anchorBox:S,bubble:o.bubble.getOr(m1()),overrides:o.overrides,layouts:B,placer:D.none()})})},jm=function(t,r,o){var c=q0(t,o,r);return r.node.filter(fn).bind(function(v){var m=v.dom.getBoundingClientRect(),p=Od(m.left,m.top,m.width,m.height),C=r.node.getOr(t.element);return Jw(p,c,r,o,C)})},hk=[He("node"),He("root"),Br("bubble"),Sv(),he("overrides",{}),he("showAbove",!1),Zr("placement",jm)],pk="\uFEFF",bk=" ",Gm=function(t,r,o,c){return{start:t,soffset:r,finish:o,foffset:c}},Ad={create:Gm},K0=Ns.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Zw=function(t,r,o,c){return t.fold(r,o,c)},yk=function(t){return t.fold(Lt,Lt,Lt)},Qw=K0.before,eC=K0.on,X0=K0.after,wk={before:Qw,on:eC,after:X0,cata:Zw,getStart:yk},w1=Ns.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ck=function(t){return w1.exact(t.start,t.soffset,t.finish,t.foffset)},ih=function(t){return t.match({domRange:function(r){return re.fromDom(r.startContainer)},relative:function(r,o){return wk.getStart(r)},exact:function(r,o,c,v){return r}})},Sk=w1.domRange,Y0=w1.relative,xk=w1.exact,tC=function(t){var r=ih(t);return Jc(r)},Tk=Ad.create,qm={domRange:Sk,relative:Y0,exact:xk,exactFromRange:Ck,getWin:tC,range:Tk},nC=function(t,r){r.fold(function(o){t.setStartBefore(o.dom)},function(o,c){t.setStart(o.dom,c)},function(o){t.setStartAfter(o.dom)})},kk=function(t,r){r.fold(function(o){t.setEndBefore(o.dom)},function(o,c){t.setEnd(o.dom,c)},function(o){t.setEndAfter(o.dom)})},J0=function(t,r,o){var c=t.document.createRange();return nC(c,r),kk(c,o),c},Z0=function(t,r,o,c,v){var m=t.document.createRange();return m.setStart(r.dom,o),m.setEnd(c.dom,v),m},C1=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},rC=function(t){var r=t.getClientRects(),o=r.length>0?r[0]:t.getBoundingClientRect();return o.width>0||o.height>0?D.some(o).map(C1):D.none()},aC=function(t){var r=t.getBoundingClientRect();return r.width>0||r.height>0?D.some(r).map(C1):D.none()},Km=Ns.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),oC=function(t,r,o){return r(re.fromDom(o.startContainer),o.startOffset,re.fromDom(o.endContainer),o.endOffset)},iC=function(t,r){return r.match({domRange:function(o){return{ltr:ye(o),rtl:D.none}},relative:function(o,c){return{ltr:ao(function(){return J0(t,o,c)}),rtl:ao(function(){return D.some(J0(t,c,o))})}},exact:function(o,c,v,m){return{ltr:ao(function(){return Z0(t,o,c,v,m)}),rtl:ao(function(){return D.some(Z0(t,v,m,o,c))})}}})},Ek=function(t,r){var o=r.ltr();if(o.collapsed){var c=r.rtl().filter(function(v){return v.collapsed===!1});return c.map(function(v){return Km.rtl(re.fromDom(v.endContainer),v.endOffset,re.fromDom(v.startContainer),v.startOffset)}).getOrThunk(function(){return oC(t,Km.ltr,o)})}else return oC(t,Km.ltr,o)},Ok=function(t,r){var o=iC(t,r);return Ek(t,o)},Q0=function(t,r){var o=Ok(t,r);return o.match({ltr:function(c,v,m,p){var C=t.document.createRange();return C.setStart(c.dom,v),C.setEnd(m.dom,p),C},rtl:function(c,v,m,p){var C=t.document.createRange();return C.setStart(m.dom,p),C.setEnd(c.dom,v),C}})};Km.ltr,Km.rtl;var Dd=function(t,r){var o=function(m){if(!t(m))throw new Error("Can only get "+r+" value of a "+r+" node");return c(m).getOr("")},c=function(m){return t(m)?D.from(m.dom.nodeValue):D.none()},v=function(m,p){if(!t(m))throw new Error("Can only set raw "+r+" value of a "+r+" node");m.dom.nodeValue=p};return{get:o,getOption:c,set:v}},S1=Dd(Oa,"text"),uC=function(t){return S1.get(t)},x1=function(t){return S1.getOption(t)},sC=function(t){return wn(t)==="img"?1:x1(t).fold(function(){return M(t).length},function(r){return r.length})},Ak=function(t){return x1(t).filter(function(r){return r.trim().length!==0||r.indexOf(bk)>-1}).isSome()},ey=["img","br"],Dk=function(t){var r=Ak(t);return r||Un(ey,wn(t))},cC=function(t){return Rd(t,Dk)},Rd=function(t,r){var o=function(c){for(var v=M(c),m=v.length-1;m>=0;m--){var p=v[m];if(r(p))return D.some(p);var C=o(p);if(C.isSome())return C}return D.none()};return o(t)},Yo=function(t,r){return kl(r,t)},Tv=function(t,r,o,c){var v=Ia(t),m=v.dom.createRange();return m.setStart(t.dom,r),m.setEnd(o.dom,c),m},T1=function(t,r,o,c){var v=Tv(t,r,o,c),m=Lr(t,o)&&r===c;return v.collapsed&&!m},Rk=function(t){return D.from(t.getSelection())},lC=function(t){if(t.rangeCount>0){var r=t.getRangeAt(0),o=t.getRangeAt(t.rangeCount-1);return D.some(Ad.create(re.fromDom(r.startContainer),r.startOffset,re.fromDom(o.endContainer),o.endOffset))}else return D.none()},fC=function(t){if(t.anchorNode===null||t.focusNode===null)return lC(t);var r=re.fromDom(t.anchorNode),o=re.fromDom(t.focusNode);return T1(r,t.anchorOffset,o,t.focusOffset)?D.some(Ad.create(r,t.anchorOffset,o,t.focusOffset)):lC(t)},ty=function(t){return Rk(t).filter(function(r){return r.rangeCount>0}).bind(fC)},ny=function(t,r){var o=Q0(t,r);return rC(o)},ys=function(t,r){var o=Q0(t,r);return aC(o)},Bf=function(t,r){return{element:t,offset:r}},_d=function(t,r){var o=M(t);if(o.length===0)return Bf(t,r);if(r<o.length)return Bf(o[r],0);var c=o[o.length-1],v=Oa(c)?uC(c).length:M(c).length;return Bf(c,v)},uh=function(t,r){return Oa(t)?Bf(t,r):_d(t,r)},Bd=function(t,r){var o=r.getSelection.getOrThunk(function(){return function(){return ty(t)}});return o().map(function(c){var v=uh(c.start,c.soffset),m=uh(c.finish,c.foffset);return qm.range(v.element,v.offset,m.element,m.offset)})},Hl=function(t,r,o){var c=Jc(r.root).dom,v=q0(t,o,r),m=Bd(c,r).bind(function(S){var k=ys(c,qm.exactFromRange(S)).orThunk(function(){var R=re.fromText(pk);Za(S.start,R);var B=ny(c,qm.exact(R,0,R,1));return Uu(R),B});return k.bind(function(R){return Od(R.left,R.top,R.width,R.height)})}),p=Bd(c,r).bind(function(S){return rr(S.start)?D.some(S.start):Jf(S.start)}),C=p.getOr(t.element);return Jw(m,v,r,o,C)},Nc=[Br("getSelection"),He("root"),Br("bubble"),Sv(),he("overrides",{}),he("showAbove",!1),Zr("placement",Hl)],Xm="link-layout",ry=function(t){return t.x+t.width},vC=function(t,r){return t.x-r.width},k1=function(t,r){return t.y-r.height+t.height},Md=function(t){return t.y},Mf=function(t,r,o){return di(ry(t),Md(t),o.southeast(),Gp(),"southeast",Bi(t,{left:0,top:2}),Xm)},E1=function(t,r,o){return di(vC(t,r),Md(t),o.southwest(),zm(),"southwest",Bi(t,{right:1,top:2}),Xm)},ay=function(t,r,o){return di(ry(t),k1(t,r),o.northeast(),O0(),"northeast",Bi(t,{left:0,bottom:3}),Xm)},hi=function(t,r,o){return di(vC(t,r),k1(t,r),o.northwest(),qp(),"northwest",Bi(t,{right:1,bottom:3}),Xm)},kv=function(){return[Mf,E1,ay,hi]},dC=function(){return[E1,Mf,hi,ay]},oy=function(t,r,o){var c=wv(o,r.item.element),v=xv(t.element,r,kv(),dC(),kv(),dC(),D.none());return D.some(g1({anchorBox:c,bubble:m1(),overrides:r.overrides,layouts:v,placer:D.none()}))},O1=[He("item"),Sv(),he("overrides",{}),Zr("placement",oy)],Ni=Zs("type",{selection:Nc,node:hk,hotspot:oh,submenu:O1,makeshift:b1}),_k=[Xi("classes",io),Ps("mode","all",["all","layout","placement"])],Vl=[he("useFixed",kn),Br("getBounds")],mC=[Gu("anchor",Ni),vs("transition",_k)],iy=function(){var t=document.documentElement;return a1(0,0,t.clientWidth,t.clientHeight)},Ev=function(t){var r=Cu(t.element),o=t.element.dom.getBoundingClientRect();return r1(r.left,r.top,o.width,o.height)},gC=function(t,r,o,c,v,m,p){var C=I0(o.anchorBox,r);return lk(C,v.element,o.bubble,o.layouts,m,c,o.overrides,p)},A1=function(t,r,o,c,v){hC(t,r,o,c,v,D.none())},hC=function(t,r,o,c,v,m){var p=m.map(ho);return uy(t,r,o,c,v,p)},uy=function(t,r,o,c,v,m){var p=zr("placement.info",Yt(mC),v),C=p.anchor,S=c.element,k=o.get(c.uid);Df(function(){pn(S,"position","fixed");var R=go(S,"visibility");pn(S,"visibility","hidden");var B=r.useFixed()?iy():Ev(t),L=C.placement,U=m.map(ye).or(r.getBounds);L(t,C,B).each(function(K){var ne=K.placer.getOr(gC),me=ne(t,B,K,U,c,k,p.transition);o.set(c.uid,me)}),R.fold(function(){_r(S,"visibility")},function(K){pn(S,"visibility",K)}),go(S,"left").isNone()&&go(S,"top").isNone()&&go(S,"right").isNone()&&go(S,"bottom").isNone()&&Ti(go(S,"position"),"fixed")&&_r(S,"position")},S)},pC=function(t,r,o){return r.useFixed()?"fixed":"absolute"},Bk=function(t,r,o,c){var v=c.element;kt(["position","left","right","top","bottom"],function(m){return _r(v,m)}),V0(v),o.clear(c.uid)},sy=Object.freeze({__proto__:null,position:A1,positionWithin:hC,positionWithinBounds:uy,getMode:pC,reset:Bk}),fl=function(){var t={},r=function(v,m){t[v]=m},o=function(v){return Gt(t,v)},c=function(v){Tn(v)?delete t[v]:t={}};return fi({readState:function(){return t},clear:c,set:r,get:o})},D1=Object.freeze({__proto__:null,init:fl}),Ru=so({fields:Vl,name:"positioning",active:Qg,apis:sy,state:D1}),sh=function(t){er(t,Am());var r=t.components();kt(r,sh)},ch=function(t){var r=t.components();kt(r,ch),er(t,ds())},cy=function(t,r){Gi(t.element,r.element)},Mk=function(t){kt(t.components(),function(r){return Uu(r.element)}),_a(t.element),t.syncComponents()},bC=function(t,r){var o=t.components();Mk(t);var c=ua(o,r);kt(c,function(v){sh(v),t.getSystem().removeFromWorld(v)}),kt(r,function(v){v.getSystem().isConnected()?cy(t,v):(t.getSystem().addToWorld(v),cy(t,v),fn(t.element)&&ch(v)),t.syncComponents()})},Zi=function(t,r){Pd(t,r,Gi)},Pd=function(t,r,o){t.getSystem().addToWorld(r),o(t.element,r.element),fn(t.element)&&ch(r),t.syncComponents()},lh=function(t){sh(t),Uu(t.element),t.getSystem().removeFromWorld(t)},ac=function(t){var r=Fa(t.element).bind(function(o){return t.getSystem().getByDom(o).toOptional()});lh(t),r.each(function(o){o.syncComponents()})},oc=function(t){var r=t.components();kt(r,lh),_a(t.element),t.syncComponents()},ic=function(t,r){vl(t,r,Gi)},_u=function(t,r){vl(t,r,ff)},vl=function(t,r,o){o(t,r.element);var c=M(r.element);kt(c,function(v){r.getByDom(v).each(ch)})},R1=function(t){var r=M(t.element);kt(r,function(o){t.getByDom(o).each(sh)}),Uu(t.element)},uc=function(t,r,o,c){o.get().each(function(p){oc(t)});var v=r.getAttachPoint(t);Zi(v,t);var m=t.getSystem().build(c);return Zi(t,m),o.set(m),m},dl=function(t,r,o,c){var v=uc(t,r,o,c);return r.onOpen(t,v),v},Pk=function(t,r,o,c){return o.get().map(function(){return uc(t,r,o,c)})},Nk=function(t,r,o,c,v){xC(t,r),dl(t,r,o,c),v(),ly(t,r)},yC=function(t,r,o){o.get().each(function(c){oc(t),ac(t),r.onClose(t,c),o.clear()})},wC=function(t,r,o){return o.isOpen()},CC=function(t,r,o,c){return wC(t,r,o)&&o.get().exists(function(v){return r.isPartOf(t,v,c)})},SC=function(t,r,o){return o.get()},$k=function(t,r,o,c){go(t.element,r).fold(function(){ui(t.element,o)},function(v){Mn(t.element,o,v)}),pn(t.element,r,c)},zk=function(t,r,o){La(t.element,o).fold(function(){return _r(t.element,r)},function(c){return pn(t.element,r,c)})},xC=function(t,r,o){var c=r.getAttachPoint(t);pn(t.element,"position",Ru.getMode(c)),$k(t,"visibility",r.cloakVisibilityAttr,"hidden")},Ik=function(t){return Ca(["top","left","right","bottom"],function(r){return go(t,r).isSome()})},ly=function(t,r,o){Ik(t.element)||_r(t.element,"position"),zk(t,"visibility",r.cloakVisibilityAttr)},TC=Object.freeze({__proto__:null,cloak:xC,decloak:ly,open:dl,openWhileCloaked:Nk,close:yC,isOpen:wC,isPartOf:CC,getState:SC,setContent:Pk}),fy=function(t,r){return ga([We(Wg(),function(o,c){yC(o,t,r)})])},kC=Object.freeze({__proto__:null,events:fy}),Fk=[Yn("onOpen"),Yn("onClose"),He("isPartOf"),He("getAttachPoint"),he("cloakVisibilityAttr","data-precloak-visibility")],Lk=function(){var t=Qa(),r=ye("not-implemented");return fi({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})},Hk=Object.freeze({__proto__:null,init:Lk}),fr=so({fields:Fk,name:"sandboxing",active:kC,apis:TC,state:Hk}),Nd=ye("dismiss.popups"),Ym=ye("reposition.popups"),ws=ye("mouse.released"),Vk=ls([he("isExtraPart",kn),vs("fireEventInstead",[he("event",Ac())])]),Ov=function(t){var r,o=zr("Dismissal",Vk,t);return r={},r[Nd()]={schema:ls([He("target")]),onReceive:function(c,v){if(fr.isOpen(c)){var m=fr.isPartOf(c,v.target)||o.isExtraPart(c,v.target);m||o.fireEventInstead.fold(function(){return fr.close(c)},function(p){return er(c,p.event)})}}},r},Jm=ls([vs("fireEventInstead",[he("event",vu())]),fu("doReposition")]),fh=function(t){var r,o=zr("Reposition",Jm,t);return r={},r[Ym()]={onReceive:function(c){fr.isOpen(c)&&o.fireEventInstead.fold(function(){return o.doReposition(c)},function(v){return er(c,v.event)})}},r},Zm=function(t,r,o){r.store.manager.onLoad(t,r,o)},EC=function(t,r,o){r.store.manager.onUnload(t,r,o)},OC=function(t,r,o,c){r.store.manager.setValue(t,r,o,c)},vy=function(t,r,o){return r.store.manager.getValue(t,r,o)},dy=function(t,r,o){return o},$d=Object.freeze({__proto__:null,onLoad:Zm,onUnload:EC,setValue:OC,getValue:vy,getState:dy}),my=function(t,r){var o=t.resetOnDom?[Ma(function(c,v){Zm(c,t,r)}),ms(function(c,v){EC(c,t,r)})]:[Vo(t,r,Zm)];return ga(o)},Uk=Object.freeze({__proto__:null,events:my}),Ul=function(){var t=nn(null),r=function(){return{mode:"memory",value:t.get()}},o=function(){return t.get()===null},c=function(){t.set(null)};return fi({set:t.set,get:t.get,isNotSet:o,clear:c,readState:r})},gy=function(){var t=at;return fi({readState:t})},_1=function(){var t=nn({}),r=nn({}),o=function(){return{mode:"dataset",dataByValue:t.get(),dataByText:r.get()}},c=function(){t.set({}),r.set({})},v=function(p){return Gt(t.get(),p).orThunk(function(){return Gt(r.get(),p)})},m=function(p){var C=t.get(),S=r.get(),k={},R={};kt(p,function(B){k[B.value]=B,Gt(B,"meta").each(function(L){Gt(L,"text").each(function(U){R[U]=B})})}),t.set(ue(ue({},C),k)),r.set(ue(ue({},S),R))};return fi({readState:o,lookup:v,update:m,clear:c})},B1=function(t){return t.store.manager.state(t)},AC=Object.freeze({__proto__:null,memory:Ul,dataset:_1,manual:gy,init:B1}),Qm=function(t,r,o,c){var v=r.store;o.update([c]),v.setValue(t,c),r.onSetValue(t,c)},DC=function(t,r,o){var c=r.store,v=c.getDataKey(t);return o.lookup(v).getOrThunk(function(){return c.getFallbackEntry(v)})},RC=function(t,r,o){var c=r.store;c.initialValue.each(function(v){Qm(t,r,o,v)})},ml=function(t,r,o){o.clear()},Ls=[Br("initialValue"),He("getFallbackEntry"),He("getDataKey"),He("setValue"),Zr("manager",{setValue:Qm,getValue:DC,onLoad:RC,onUnload:ml,state:_1})],$i=function(t,r,o){return r.store.getValue(t)},_C=function(t,r,o,c){r.store.setValue(t,c),r.onSetValue(t,c)},hy=function(t,r,o){r.store.initialValue.each(function(c){r.store.setValue(t,c)})},eg=[He("getValue"),he("setValue",at),Br("initialValue"),Zr("manager",{setValue:_C,getValue:$i,onLoad:hy,onUnload:at,state:gs.init})],BC=function(t,r,o,c){o.set(c),r.onSetValue(t,c)},MC=function(t,r,o){return o.get()},PC=function(t,r,o){r.store.initialValue.each(function(c){o.isNotSet()&&o.set(c)})},M1=function(t,r,o){o.clear()},P1=[Br("initialValue"),Zr("manager",{setValue:BC,getValue:MC,onLoad:PC,onUnload:M1,state:Ul})],NC=[ku("store",{mode:"memory"},Zs("mode",{memory:P1,manual:eg,dataset:Ls})),Yn("onSetValue"),he("resetOnDom",!1)],yt=so({fields:NC,name:"representing",active:Uk,apis:$d,extra:{setValueFrom:function(t,r){var o=yt.getValue(r);yt.setValue(t,o)}},state:AC}),Jo=function(t,r){return Xb(t,{},nt(r,function(o){return Cm(o.name(),"Cannot configure "+o.name()+" for "+t)}).concat([Tu("dump",Lt)]))},zd=function(t){return t.dump},Zo=function(t,r){return ue(ue({},vt(r)),t.dump)},sc={field:Jo,augment:Zo,get:zd},py="placeholder",Id=Ns.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),N1=function(t){return hr(t,"uiType")},tg=function(t,r,o,c){return t.exists(function(v){return v!==o.owner})?Id.single(!0,ye(o)):Gt(c,o.name).fold(function(){throw new Error("Unknown placeholder component: "+o.name+`
Known: [`+ta(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(o,null,2))},function(v){return v.replace()})},Fd=function(t,r,o,c){return N1(o)&&o.uiType===py?tg(t,r,o,c):Id.single(!1,ye(o))},vh=function(t,r,o,c){var v=Fd(t,r,o,c);return v.fold(function(m,p){var C=N1(o)?p(r,o.config,o.validated):p(r),S=Gt(C,"components").getOr([]),k=Jr(S,function(R){return vh(t,r,R,c)});return[ue(ue({},C),{components:k})]},function(m,p){if(N1(o)){var C=p(r,o.config,o.validated),S=o.validated.preprocess.getOr(Lt);return S(C)}else return p(r)})},Wk=function(t,r,o,c){return Jr(o,function(v){return vh(t,r,v,c)})},jk=function(t,r){var o=!1,c=function(){return o},v=function(){if(o)throw new Error("Trying to use the same placeholder more than once: "+t);return o=!0,r},m=function(){return r.fold(function(p,C){return p},function(p,C){return p})};return{name:ye(t),required:m,used:c,replace:v}},by=function(t,r,o,c){var v=kr(c,function(p,C){return jk(C,p)}),m=Wk(t,r,o,v);return Gr(v,function(p){if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),m},yy=Id.single,$C=Id.multiple,Ld=ye(py),$c=Ns.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),dh=he("factory",{sketch:Lt}),wy=he("schema",[]),Hd=He("name"),mh=Lo("pname","pname",ir(function(t){return"<alloy."+Nt(t.name)+">"}),xc()),gh=Tu("schema",function(){return[Br("preprocess")]}),Wl=he("defaults",ye({})),cc=he("overrides",ye({})),Av=Yt([dh,wy,Hd,mh,Wl,cc]),Vd=Yt([dh,wy,Hd,Wl,cc]),hh=Yt([dh,wy,Hd,mh,Wl,cc]),$1=Yt([dh,gh,Hd,He("unit"),mh,Wl,cc]),ph=function(t){return t.fold(D.some,D.none,D.some,D.some)},Cy=function(t){var r=function(o){return o.name};return t.fold(r,r,r,r)},Gk=function(t){return t.fold(Lt,Lt,Lt,Lt)},z1=function(t,r){return function(o){var c=zr("Converting part type",r,o);return t(c)}},pi=z1($c.required,Av),Hs=z1($c.external,Vd),zc=z1($c.optional,hh),gl=z1($c.group,$1),jl=ye("entirety"),Dv=Object.freeze({__proto__:null,required:pi,external:Hs,optional:zc,group:gl,asNamedPart:ph,name:Cy,asCommon:Gk,original:jl}),ng=function(t,r,o,c){return $e(r.defaults(t,o,c),o,{uid:t.partUids[r.name]},r.overrides(t,o,c))},zC=function(t,r,o){var c={},v={};return kt(o,function(m){m.fold(function(p){c[p.pname]=yy(!0,function(C,S,k){return p.factory.sketch(ng(C,p,S,k))})},function(p){var C=r.parts[p.name];v[p.name]=ye(p.factory.sketch(ng(r,p,C[jl()]),C))},function(p){c[p.pname]=yy(!1,function(C,S,k){return p.factory.sketch(ng(C,p,S,k))})},function(p){c[p.pname]=$C(!0,function(C,S,k){var R=C[p.name];return nt(R,function(B){return p.factory.sketch($e(p.defaults(C,B,k),B,p.overrides(C,B)))})})})}),{internals:ye(c),externals:ye(v)}},bh=function(t,r){var o={};return kt(r,function(c){ph(c).each(function(v){var m=qk(t,v.pname);o[v.name]=function(p){var C=zr("Part: "+v.name+" in "+t,Yt(v.schema),p);return ue(ue({},m),{config:p,validated:C})}})}),o},qk=function(t,r){return{uiType:Ld(),owner:t,name:r}},Sy=function(t,r,o){return{uiType:Ld(),owner:t,name:r,config:o,validated:{}}},IC=function(t){return Jr(t,function(r){return r.fold(D.none,D.some,D.none,D.none).map(function(o){return _l(o.name,o.schema.concat([Up(jl())]))}).toArray()})},FC=function(t){return nt(t,Cy)},xy=function(t,r,o){return zC(t,r,o)},Ty=function(t,r,o){return by(D.some(t),r,r.components,o)},Qr=function(t,r,o){var c=r.partUids[o];return t.getSystem().getByUid(c).toOptional()},Gl=function(t,r,o){return Qr(t,r,o).getOrDie("Could not find part: "+o)},LC=function(t,r,o){var c={},v=r.partUids,m=t.getSystem();return kt(o,function(p){c[p]=ye(m.getByUid(v[p]))}),c},ky=function(t,r){var o=t.getSystem();return kr(r.partUids,function(c,v){return ye(o.getByUid(c))})},Ey=function(t){return ta(t.partUids)},yh=function(t,r,o){var c={},v=r.partUids,m=t.getSystem();return kt(o,function(p){c[p]=ye(m.getByUid(v[p]).getOrDie())}),c},ln=function(t,r){var o=FC(r);return wf(nt(o,function(c){return{key:c,value:t+"-"+c}}))},Oy=function(t){return Lo("partUids","partUids",Di(function(r){return ln(r.uid,t)}),xc())},HC=Object.freeze({__proto__:null,generate:bh,generateOne:Sy,schemas:IC,names:FC,substitutes:xy,components:Ty,defaultUids:ln,defaultUidsSchema:Oy,getAllParts:ky,getAllPartNames:Ey,getPart:Qr,getPartOrDie:Gl,getParts:LC,getPartsOrDie:yh}),Kk=function(t,r){var o=t.length>0?[_l("parts",t)]:[];return o.concat([He("uid"),he("dom",{}),he("components",[]),Up("originalSpec"),he("debug.sketcher",{})]).concat(r)},VC=function(t,r,o,c,v){var m=Kk(c,v);return zr(t+" [SpecSchema]",ls(m.concat(r)),o)},UC=function(t,r,o,c){var v=I1(c),m=VC(t,r,v,[],[]);return o(m,v)},Ay=function(t,r,o,c,v){var m=I1(v),p=IC(o),C=Oy(o),S=VC(t,r,m,p,[C]),k=xy(t,S,o),R=Ty(t,S,k.internals());return c(S,R,m,k.externals())},Dy=function(t){return hr(t,"uid")},I1=function(t){return Dy(t)?t:ue(ue({},t),{uid:ld("uid")})},Xk=function(t){return t.uid!==void 0},WC=ls([He("name"),He("factory"),He("configFields"),he("apis",{}),he("extraApis",{})]),Yk=ls([He("name"),He("factory"),He("configFields"),He("partFields"),he("apis",{}),he("extraApis",{})]),Cs=function(t){var r=zr("Sketcher for "+t.name,WC,t),o=function(m){return UC(r.name,r.configFields,r.factory,m)},c=kr(r.apis,dd),v=kr(r.extraApis,function(m,p){return iv(m,p)});return ue(ue({name:r.name,configFields:r.configFields,sketch:o},c),v)},Bu=function(t){var r=zr("Sketcher for "+t.name,Yk,t),o=function(p){return Ay(r.name,r.configFields,r.partFields,r.factory,p)},c=bh(r.name,r.partFields),v=kr(r.apis,dd),m=kr(r.extraApis,function(p,C){return iv(p,C)});return ue(ue({name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:o,parts:c},v),m)},Rv=function(t){return wn(t)==="input"&&Da(t,"type")!=="radio"||wn(t)==="textarea"},jC=function(t,r,o){return r.find(t)},Jk=Object.freeze({__proto__:null,getCurrent:jC}),GC=[He("find")],Jn=so({fields:GC,name:"composing",apis:Jk}),qC=["input","button","textarea","select"],wh=function(t,r,o){var c=r.disabled()?_y:Ud;c(t,r)},rg=function(t,r){return r.useNative===!0&&Un(qC,wn(t.element))},F1=function(t){return wp(t.element,"disabled")},ag=function(t){Mn(t.element,"disabled","disabled")},og=function(t){ui(t.element,"disabled")},Zk=function(t){return Da(t.element,"aria-disabled")==="true"},Qk=function(t){Mn(t.element,"aria-disabled","true")},Ry=function(t){Mn(t.element,"aria-disabled","false")},_y=function(t,r,o){r.disableClass.each(function(v){vi(t.element,v)});var c=rg(t,r)?ag:Qk;c(t),r.onDisabled(t)},Ud=function(t,r,o){r.disableClass.each(function(v){Ro(t.element,v)});var c=rg(t,r)?og:Ry;c(t),r.onEnabled(t)},L1=function(t,r){return rg(t,r)?F1(t):Zk(t)},KC=function(t,r,o,c){var v=c?_y:Ud;v(t,r)},e4=Object.freeze({__proto__:null,enable:Ud,disable:_y,isDisabled:L1,onLoad:wh,set:KC}),By=function(t,r){return _c({classes:r.disabled()?r.disableClass.toArray():[]})},t4=function(t,r){return ga([c0($s(),function(o,c){return L1(o,t)}),Vo(t,r,wh)])},Ch=Object.freeze({__proto__:null,exhibit:By,events:t4}),My=[ma("disabled",kn),he("useNative",!0),Br("disableClass"),Yn("onDisabled"),Yn("onEnabled")],Zt=so({fields:My,name:"disabling",active:Ch,apis:e4}),XC=function(t,r,o,c){var v=Yo(t.element,"."+r.highlightClass);kt(v,function(m){Ca(c,function(p){return p.element===m})||(Ro(m,r.highlightClass),t.getSystem().getByDom(m).each(function(p){r.onDehighlight(t,p),er(p,jg())}))})},n4=function(t,r,o){return XC(t,r,o,[])},YC=function(t,r,o,c){H1(t,r,o,c)&&(Ro(c.element,r.highlightClass),r.onDehighlight(t,c),er(c,jg()))},ig=function(t,r,o,c){XC(t,r,o,[c]),H1(t,r,o,c)||(vi(c.element,r.highlightClass),r.onHighlight(t,c),er(c,bw()))},Mu=function(t,r,o){QC(t,r).each(function(c){ig(t,r,o,c)})},Sh=function(t,r,o){eS(t,r).each(function(c){ig(t,r,o,c)})},r4=function(t,r,o,c){ZC(t,r,o,c).fold(function(v){throw v},function(v){ig(t,r,o,v)})},Py=function(t,r,o,c){var v=ug(t,r),m=lr(v,c);m.each(function(p){ig(t,r,o,p)})},H1=function(t,r,o,c){return Ou(c.element,r.highlightClass)},JC=function(t,r,o){return _o(t.element,"."+r.highlightClass).bind(function(c){return t.getSystem().getByDom(c).toOptional()})},ZC=function(t,r,o,c){var v=Yo(t.element,"."+r.itemClass);return D.from(v[c]).fold(function(){return In.error(new Error("No element found with index "+c))},t.getSystem().getByDom)},QC=function(t,r,o){return _o(t.element,"."+r.itemClass).bind(function(c){return t.getSystem().getByDom(c).toOptional()})},eS=function(t,r,o){var c=Yo(t.element,"."+r.itemClass),v=c.length>0?D.some(c[c.length-1]):D.none();return v.bind(function(m){return t.getSystem().getByDom(m).toOptional()})},Pf=function(t,r,o,c){var v=Yo(t.element,"."+r.itemClass),m=Va(v,function(p){return Ou(p,r.highlightClass)});return m.bind(function(p){var C=Fl(p,c,0,v.length-1);return t.getSystem().getByDom(v[C]).toOptional()})},a4=function(t,r,o){return Pf(t,r,o,-1)},o4=function(t,r,o){return Pf(t,r,o,1)},ug=function(t,r,o){var c=Yo(t.element,"."+r.itemClass);return pr(nt(c,function(v){return t.getSystem().getByDom(v).toOptional()}))},i4=Object.freeze({__proto__:null,dehighlightAll:n4,dehighlight:YC,highlight:ig,highlightFirst:Mu,highlightLast:Sh,highlightAt:r4,highlightBy:Py,isHighlighted:H1,getHighlighted:JC,getFirst:QC,getLast:eS,getPrevious:a4,getNext:o4,getCandidates:ug}),u4=[He("highlightClass"),He("itemClass"),Yn("onHighlight"),Yn("onDehighlight")],Mr=so({fields:u4,name:"highlighting",apis:i4}),sg=[8],_v=[9],ql=[13],Bv=[27],gu=[32],V1=[37],xh=[38],cg=[39],Mv=[40],s4=function(t,r,o){var c=an(t.slice(0,r)),v=an(t.slice(r+1));return lr(c.concat(v),o)},tS=function(t,r,o){var c=an(t.slice(0,r));return lr(c,o)},U1=function(t,r,o){var c=t.slice(0,r),v=t.slice(r+1);return lr(v.concat(c),o)},c4=function(t,r,o){var c=t.slice(r+1);return lr(c,o)},ur=function(t){return function(r){var o=r.raw;return Un(t,o.which)}},Ic=function(t){return function(r){return jr(t,function(o){return o(r)})}},lg=function(t){var r=t.raw;return r.shiftKey===!0},nS=function(t){var r=t.raw;return r.ctrlKey===!0},Th=Rn(lg),vr=function(t,r){return{matches:t,classification:r}},Ny=function(t,r){var o=lr(t,function(c){return c.matches(r)});return o.map(function(c){return c.classification})},rS=function(t,r,o){var c=r.exists(function(v){return o.exists(function(m){return Lr(m,v)})});c||un(t,Bp(),{prevFocus:r,newFocus:o})},kh=function(){var t=function(o){return Mc(o.element)},r=function(o,c){var v=t(o);o.getSystem().triggerFocus(c,o.element);var m=t(o);rS(o,v,m)};return{get:t,set:r}},aS=function(){var t=function(o){return Mr.getHighlighted(o).map(function(c){return c.element})},r=function(o,c){var v=t(o);o.getSystem().getByDom(c).fold(at,function(p){Mr.highlight(o,p)});var m=t(o);rS(o,v,m)};return{get:t,set:r}},Eh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Eh||(Eh={}));var Nf=function(t,r,o,c,v){var m=function(){return t.concat([he("focusManager",kh()),ku("focusInside","onFocus",wm(function(k){return Un(["onFocus","onEnterOrSpace","onApi"],k)?In.value(k):In.error("Invalid value for focusInside")})),Zr("handler",S),Zr("state",r),Zr("sendFocusIn",v)])},p=function(k,R,B,L,U){var K=B(k,R,L,U);return Ny(K,R.event).bind(function(ne){return ne(k,R,L,U)})},C=function(k,R){var B=k.focusInside!==Eh.OnFocusMode?D.none():v(k).map(function(K){return We(rv(),function(ne,me){K(ne,k,R),me.stop()})}),L=function(K,ne){var me=ur(gu.concat(ql))(ne.event);k.focusInside===Eh.OnEnterOrSpaceMode&&me&&mw(K,ne)&&v(k).each(function(Z){Z(K,k,R),ne.stop()})},U=[We(Ap(),function(K,ne){p(K,ne,o,k,R).fold(function(){L(K,ne)},function(me){ne.stop()})}),We(n0(),function(K,ne){p(K,ne,c,k,R).each(function(me){ne.stop()})})];return ga(B.toArray().concat(U))},S={schema:m,processKey:p,toEvents:C};return S},$y=function(t){var r=[Br("onEscape"),Br("onEnter"),he("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),he("firstTabstop",0),he("useTabstopAt",Tt),Br("visibilitySelector")].concat([t]),o=function(ne,me){var Z=ne.visibilitySelector.bind(function(pe){return du(me,pe)}).getOr(me);return Oo(Z)>0},c=function(ne,me){var Z=Yo(ne.element,me.selector),pe=tn(Z,function(_e){return o(me,_e)});return D.from(pe[me.firstTabstop])},v=function(ne,me){return me.focusManager.get(ne).bind(function(Z){return du(Z,me.selector)})},m=function(ne,me){return o(ne,me)&&ne.useTabstopAt(me)},p=function(ne,me,Z){c(ne,me).each(function(pe){me.focusManager.set(ne,pe)})},C=function(ne,me,Z,pe,_e){return _e(me,Z,function(ze){return m(pe,ze)}).fold(function(){return pe.cyclic?D.some(!0):D.none()},function(ze){return pe.focusManager.set(ne,ze),D.some(!0)})},S=function(ne,me,Z,pe){var _e=Yo(ne.element,Z.selector);return v(ne,Z).bind(function(ze){var ge=Va(_e,Vr(Lr,ze));return ge.bind(function(ke){return C(ne,_e,ke,Z,pe)})})},k=function(ne,me,Z){var pe=Z.cyclic?s4:tS;return S(ne,me,Z,pe)},R=function(ne,me,Z){var pe=Z.cyclic?U1:c4;return S(ne,me,Z,pe)},B=function(ne,me,Z){return Z.onEnter.bind(function(pe){return pe(ne,me)})},L=function(ne,me,Z){return Z.onEscape.bind(function(pe){return pe(ne,me)})},U=ye([vr(Ic([lg,ur(_v)]),k),vr(ur(_v),R),vr(ur(Bv),L),vr(Ic([Th,ur(ql)]),B)]),K=ye([]);return Nf(r,gs.init,U,K,function(){return D.some(p)})},oS=$y(Tu("cyclic",kn)),l4=$y(Tu("cyclic",Tt)),f4=function(t,r,o){return s0(t,o,$s()),D.some(!0)},Pv=function(t,r,o){var c=Rv(o)&&ur(gu)(r.event);return c?D.none():f4(t,r,o)},Wd=function(t,r){return D.some(!0)},fg=[he("execute",Pv),he("useSpace",!1),he("useEnter",!0),he("useControlEnter",!1),he("useDown",!1)],iS=function(t,r,o){return o.execute(t,r,t.element)},zy=function(t,r,o,c){var v=o.useSpace&&!Rv(t.element)?gu:[],m=o.useEnter?ql:[],p=o.useDown?Mv:[],C=v.concat(m).concat(p);return[vr(ur(C),iS)].concat(o.useControlEnter?[vr(Ic([nS,ur(ql)]),iS)]:[])},v4=function(t,r,o,c){return o.useSpace&&!Rv(t.element)?[vr(ur(gu),Wd)]:[]},W1=Nf(fg,gs.init,zy,v4,function(){return D.none()}),j1=function(){var t=Qa(),r=function(v,m){t.set({numRows:v,numColumns:m})},o=function(){return t.get().map(function(v){return v.numRows})},c=function(){return t.get().map(function(v){return v.numColumns})};return fi({readState:function(){return t.get().map(function(v){return{numRows:String(v.numRows),numColumns:String(v.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:r,getNumRows:o,getNumColumns:c})},Iy=function(t){return t.state(t)},d4=Object.freeze({__proto__:null,flatgrid:j1,init:Iy}),Fy=function(t){return function(r,o,c,v){var m=t(r.element);return jd(m,r,o,c,v)}},G1=function(t,r){var o=h1(t,r);return Fy(o)},q1=function(t,r){var o=h1(r,t);return Fy(o)},Ly=function(t){return function(r,o,c,v){return jd(t,r,o,c,v)}},jd=function(t,r,o,c,v){var m=c.focusManager.get(r).bind(function(p){return t(r.element,p,c,v)});return m.map(function(p){return c.focusManager.set(r,p),!0})},K1=Ly,Hy=Ly,X1=Ly,Oh=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},uS=function(t){return!Oh(t.dom)},m4=function(t,r){return Va(t,r).map(function(o){return{index:o,candidates:t}})},sS=function(t,r,o){var c=function(p){return Lr(p,r)},v=Yo(t,o),m=tn(v,uS);return m4(m,c)},cS=function(t,r){return Va(t,function(o){return Lr(r,o)})},Vy=function(t,r,o,c){var v=Math.floor(r/o),m=r%o;return c(v,m).bind(function(p){var C=p.row*o+p.column;return C>=0&&C<t.length?D.some(t[C]):D.none()})},lS=function(t,r,o,c,v){return Vy(t,r,c,function(m,p){var C=m===o-1,S=C?t.length-m*c:c,k=Fl(p,v,0,S-1);return D.some({row:m,column:k})})},fS=function(t,r,o,c,v){return Vy(t,r,c,function(m,p){var C=Fl(m,v,0,o-1),S=C===o-1,k=S?t.length-C*c:c,R=Yu(p,0,k-1);return D.some({row:C,column:R})})},Uy=function(t,r,o,c){return lS(t,r,o,c,1)},Wy=function(t,r,o,c){return lS(t,r,o,c,-1)},g4=function(t,r,o,c){return fS(t,r,o,c,-1)},h4=function(t,r,o,c){return fS(t,r,o,c,1)},vg=[He("selector"),he("execute",Pv),oa("onEscape"),he("captureTab",!1),Wp()],p4=function(t,r,o){_o(t.element,r.selector).each(function(c){r.focusManager.set(t,c)})},Nv=function(t,r){return r.focusManager.get(t).bind(function(o){return du(o,r.selector)})},vS=function(t,r,o,c){return Nv(t,o).bind(function(v){return o.execute(t,r,v)})},Gd=function(t){return function(r,o,c,v){return sS(r,o,c.selector).bind(function(m){return t(m.candidates,m.index,v.getNumRows().getOr(c.initSize.numRows),v.getNumColumns().getOr(c.initSize.numColumns))})}},Y1=function(t,r,o){return o.captureTab?D.some(!0):D.none()},dS=function(t,r,o){return o.onEscape(t,r)},jy=Gd(Wy),Ah=Gd(Uy),Gy=Gd(g4),qd=Gd(h4),Dh=ye([vr(ur(V1),G1(jy,Ah)),vr(ur(cg),q1(jy,Ah)),vr(ur(xh),K1(Gy)),vr(ur(Mv),Hy(qd)),vr(Ic([lg,ur(_v)]),Y1),vr(Ic([Th,ur(_v)]),Y1),vr(ur(Bv),dS),vr(ur(gu.concat(ql)),vS)]),b4=ye([vr(ur(gu),Wd)]),mS=Nf(vg,j1,Dh,b4,function(){return D.some(p4)}),dg=function(t,r,o,c){var v=function(p){return wn(p)==="button"&&Da(p,"disabled")==="disabled"},m=function(p,C,S){var k=Fl(C,c,0,S.length-1);return k===p?D.none():v(S[k])?m(p,k,S):D.from(S[k])};return sS(t,o,r).bind(function(p){var C=p.index,S=p.candidates;return m(C,C,S)})},y4=[He("selector"),he("getInitial",D.none),he("execute",Pv),oa("onEscape"),he("executeOnMove",!1),he("allowVertical",!0)],Rh=function(t,r){return r.focusManager.get(t).bind(function(o){return du(o,r.selector)})},_h=function(t,r,o){return Rh(t,o).bind(function(c){return o.execute(t,r,c)})},gS=function(t,r,o){r.getInitial(t).orThunk(function(){return _o(t.element,r.selector)}).each(function(c){r.focusManager.set(t,c)})},lc=function(t,r,o){return dg(t,o.selector,r,-1)},qy=function(t,r,o){return dg(t,o.selector,r,1)},J1=function(t){return function(r,o,c,v){return t(r,o,c,v).bind(function(){return c.executeOnMove?_h(r,o,c):D.some(!0)})}},w4=function(t,r,o){return o.onEscape(t,r)},Ky=function(t,r,o,c){var v=V1.concat(o.allowVertical?xh:[]),m=cg.concat(o.allowVertical?Mv:[]);return[vr(ur(v),J1(G1(lc,qy))),vr(ur(m),J1(q1(lc,qy))),vr(ur(ql),_h),vr(ur(gu),_h),vr(ur(Bv),w4)]},hS=ye([vr(ur(gu),Wd)]),Z1=Nf(y4,gs.init,Ky,hS,function(){return D.some(gS)}),Bh=function(t,r,o){return D.from(t[r]).bind(function(c){return D.from(c[o]).map(function(v){return{rowIndex:r,columnIndex:o,cell:v}})})},Xy=function(t,r,o,c){var v=t[r],m=v.length,p=Fl(o,c,0,m-1);return Bh(t,r,p)},pS=function(t,r,o,c){var v=Fl(o,c,0,t.length-1),m=t[v].length,p=Yu(r,0,m-1);return Bh(t,v,p)},bS=function(t,r,o,c){var v=t[r],m=v.length,p=Yu(o+c,0,m-1);return Bh(t,r,p)},$f=function(t,r,o,c){var v=Yu(o+c,0,t.length-1),m=t[v].length,p=Yu(r,0,m-1);return Bh(t,v,p)},Q1=function(t,r,o){return Xy(t,r,o,1)},C4=function(t,r,o){return Xy(t,r,o,-1)},Yy=function(t,r,o){return pS(t,o,r,-1)},S4=function(t,r,o){return pS(t,o,r,1)},Jy=function(t,r,o){return bS(t,r,o,-1)},mg=function(t,r,o){return bS(t,r,o,1)},eb=function(t,r,o){return $f(t,o,r,-1)},x4=function(t,r,o){return $f(t,o,r,1)},yS=[_l("selectors",[He("row"),He("cell")]),he("cycles",!0),he("previousSelector",D.none),he("execute",Pv)],Zy=function(t,r,o){var c=r.previousSelector(t).orThunk(function(){var v=r.selectors;return _o(t.element,v.cell)});c.each(function(v){r.focusManager.set(t,v)})},Qy=function(t,r,o){return Mc(t.element).bind(function(c){return o.execute(t,r,c)})},T4=function(t,r){return nt(t,function(o){return Yo(o,r.selectors.cell)})},tb=function(t,r){return function(o,c,v){var m=v.cycles?t:r;return du(c,v.selectors.row).bind(function(p){var C=Yo(p,v.selectors.cell);return cS(C,c).bind(function(S){var k=Yo(o,v.selectors.row);return cS(k,p).bind(function(R){var B=T4(k,v);return m(B,R,S).map(function(L){return L.cell})})})})}},wS=tb(C4,Jy),CS=tb(Q1,mg),SS=tb(Yy,eb),Mh=tb(S4,x4),Ph=ye([vr(ur(V1),G1(wS,CS)),vr(ur(cg),q1(wS,CS)),vr(ur(xh),K1(SS)),vr(ur(Mv),Hy(Mh)),vr(ur(gu.concat(ql)),Qy)]),Kd=ye([vr(ur(gu),Wd)]),xS=Nf(yS,gs.init,Ph,Kd,function(){return D.some(Zy)}),TS=[He("selector"),he("execute",Pv),he("moveOnTab",!1)],nb=function(t,r,o){return o.focusManager.get(t).bind(function(c){return o.execute(t,r,c)})},rb=function(t,r,o){_o(t.element,r.selector).each(function(c){r.focusManager.set(t,c)})},e2=function(t,r,o){return dg(t,o.selector,r,-1)},t2=function(t,r,o){return dg(t,o.selector,r,1)},kS=function(t,r,o,c){return o.moveOnTab?X1(e2)(t,r,o,c):D.none()},Kl=function(t,r,o,c){return o.moveOnTab?X1(t2)(t,r,o,c):D.none()},n2=ye([vr(ur(xh),X1(e2)),vr(ur(Mv),X1(t2)),vr(Ic([lg,ur(_v)]),kS),vr(Ic([Th,ur(_v)]),Kl),vr(ur(ql),nb),vr(ur(gu),nb)]),Fc=ye([vr(ur(gu),Wd)]),k4=Nf(TS,gs.init,n2,Fc,function(){return D.some(rb)}),zf=[oa("onSpace"),oa("onEnter"),oa("onShiftEnter"),oa("onLeft"),oa("onRight"),oa("onTab"),oa("onShiftTab"),oa("onUp"),oa("onDown"),oa("onEscape"),he("stopSpaceKeyup",!1),Br("focusIn")],ES=function(t,r,o){return[vr(ur(gu),o.onSpace),vr(Ic([Th,ur(ql)]),o.onEnter),vr(Ic([lg,ur(ql)]),o.onShiftEnter),vr(Ic([lg,ur(_v)]),o.onShiftTab),vr(Ic([Th,ur(_v)]),o.onTab),vr(ur(xh),o.onUp),vr(ur(Mv),o.onDown),vr(ur(V1),o.onLeft),vr(ur(cg),o.onRight),vr(ur(gu),o.onSpace),vr(ur(Bv),o.onEscape)]},OS=function(t,r,o){return o.stopSpaceKeyup?[vr(ur(gu),Wd)]:[]},E4=Nf(zf,gs.init,ES,OS,function(t){return t.focusIn}),O4=oS.schema(),gg=l4.schema(),hg=Z1.schema(),ab=mS.schema(),AS=xS.schema(),$v=W1.schema(),zv=k4.schema(),DS=E4.schema(),Nh=Object.freeze({__proto__:null,acyclic:O4,cyclic:gg,flow:hg,flatgrid:ab,matrix:AS,execution:$v,menu:zv,special:DS}),Xd=function(t){return ha(t,"setGridSize")},sn=xd({branchKey:"mode",branches:Nh,name:"keying",active:{events:function(t,r){var o=t.handler;return o.toEvents(t,r)}},apis:{focusIn:function(t,r,o){r.sendFocusIn(r).fold(function(){t.getSystem().triggerFocus(t.element,t.element)},function(c){c(t,r,o)})},setGridSize:function(t,r,o,c,v){Xd(o)?o.setGridSize(c,v):console.error("Layout does not support setGridSize")}},state:d4}),r2=function(t,r,o,c){Df(function(){var v=nt(c,t.getSystem().build);bC(t,v)},t.element)},ob=function(t,r,o,c){var v=t.getSystem().build(c);Pd(t,v,o)},a2=function(t,r,o,c){ob(t,r,Gi,c)},If=function(t,r,o,c){ob(t,r,vf,c)},ib=function(t,r,o,c){var v=$h(t),m=lr(v,function(p){return Lr(c.element,p.element)});m.each(ac)},$h=function(t,r){return t.components()},ub=function(t,r,o,c,v){var m=$h(t);return D.from(m[c]).map(function(p){return ib(t,r,o,p),v.each(function(C){ob(t,r,function(S,k){el(S,k,c)},C)}),p})},o2=function(t,r,o,c,v){var m=$h(t);return Va(m,c).bind(function(p){return ub(t,r,o,p,v)})},i2=Object.freeze({__proto__:null,append:a2,prepend:If,remove:ib,replaceAt:ub,replaceBy:o2,set:r2,contents:$h}),On=so({fields:[],name:"replacing",apis:i2}),RS=function(t,r){var o=ga(r);return so({fields:[He("enabled")],name:t,active:{events:ye(o)}})},Fn=function(t,r){var o=RS(t,r);return{key:t,value:{config:{},me:o,configAsRaw:ye({}),initialConfig:{},state:gs}}},_S=function(t,r){r.ignore||(Ll(t.element),r.onFocus(t))},zh=function(t,r){r.ignore||eh(t.element)},sb=function(t){return n1(t.element)},Iv=Object.freeze({__proto__:null,focus:_S,blur:zh,isFocused:sb}),u2=function(t,r){var o=r.ignore?{}:{attributes:{tabindex:"-1"}};return _c(o)},cb=function(t){return ga([We(rv(),function(r,o){_S(r,t),o.stop()})].concat(t.stopMousedown?[We(Oc(),function(r,o){o.event.prevent()})]:[]))},Ih=Object.freeze({__proto__:null,exhibit:u2,events:cb}),BS=[Yn("onFocus"),he("stopMousedown",!1),he("ignore",!1)],bn=so({fields:BS,name:"focusing",active:Ih,apis:Iv}),MS=function(t){var r=function(){var o=nn(t),c=function(){return o.get()},v=function(C){return o.set(C)},m=function(){return o.set(t)},p=function(){return o.get()};return{get:c,set:v,clear:m,readState:p}};return{init:r}},PS=function(t,r,o){var c=r.aria;c.update(t,c,o.get())},pg=function(t,r,o){r.toggleClass.each(function(c){o.get()?vi(t.element,c):Ro(t.element,c)})},Yd=function(t,r,o){s2(t,r,o,!o.get())},NS=function(t,r,o){o.set(!0),pg(t,r,o),PS(t,r,o)},$S=function(t,r,o){o.set(!1),pg(t,r,o),PS(t,r,o)},s2=function(t,r,o,c){var v=c?NS:$S;v(t,r,o)},lb=function(t,r,o){return o.get()},zS=function(t,r,o){s2(t,r,o,r.selected)},fb=Object.freeze({__proto__:null,onLoad:zS,toggle:Yd,isOn:lb,on:NS,off:$S,set:s2}),IS=function(){return _c({})},FS=function(t,r){var o=Qp(t,r,Yd),c=Vo(t,r,zS);return ga(jt([t.toggleOnExecute?[o]:[],[c]]))},A4=Object.freeze({__proto__:null,exhibit:IS,events:FS}),D4=function(t,r,o){Mn(t.element,"aria-pressed",o),r.syncWithExpanded&&LS(t,r,o)},R4=function(t,r,o){Mn(t.element,"aria-selected",o)},_4=function(t,r,o){Mn(t.element,"aria-checked",o)},LS=function(t,r,o){Mn(t.element,"aria-expanded",o)},c2=[he("selected",!1),Br("toggleClass"),he("toggleOnExecute",!0),ku("aria",{mode:"none"},Zs("mode",{pressed:[he("syncWithExpanded",!1),Zr("update",D4)],checked:[Zr("update",_4)],expanded:[Zr("update",LS)],selected:[Zr("update",R4)],none:[Zr("update",at)]}))],dr=so({fields:c2,name:"toggling",active:A4,apis:fb,state:MS(!1)}),HS=function(){var t=function(r,o){o.stop(),xf(r)};return[We(Em(),t),We(av(),t),uo(Pl()),uo(Oc())]},Fh=function(t){var r=function(o){return Rc(function(c,v){o(c),v.stop()})};return ga(jt([t.map(r).toArray(),HS()]))},Lh="alloy.item-hover",vb="alloy.item-focus",db=function(t){(Mc(t.element).isNone()||bn.isFocused(t))&&(bn.isFocused(t)||bn.focus(t),un(t,Lh,{item:t}))},VS=function(t){un(t,vb,{item:t})},US=ye(Lh),u=ye(vb),l=function(t){return{dom:t.dom,domModification:ue(ue({},t.domModification),{attributes:ue(ue(ue({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:sc.augment(t.itemBehaviours,[t.toggling.fold(dr.revoke,function(r){return dr.config(ue({aria:{mode:"checked"}},r))}),bn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(r){VS(r)}}),sn.config({mode:"execution"}),yt.config({store:{mode:"memory",initialValue:t.data}}),Fn("item-type-events",gt(gt([],HS(),!0),[We(Cf(),db),We(id(),bn.focus)],!1))]),components:t.components,eventOrder:t.eventOrder}},d=[He("data"),He("components"),He("dom"),he("hasSubmenu",!1),Br("toggling"),sc.field("itemBehaviours",[dr,bn,sn,yt]),he("ignoreFocus",!1),he("domModification",{}),Zr("builder",l),he("eventOrder",{})],h=function(t){return{dom:t.dom,components:t.components,events:ga([ka(id())])}},y=[He("dom"),He("components"),Zr("builder",h)],x=ye("item-widget"),A=ye([pi({name:"widget",overrides:function(t){return{behaviours:vt([yt.config({store:{mode:"manual",getValue:function(r){return t.data},setValue:at}})])}}})]),P=function(t){var r=xy(x(),t,A()),o=Ty(x(),t,r.internals()),c=function(m){return Qr(m,t,"widget").map(function(p){return sn.focusIn(p),p})},v=function(m,p){return Rv(p.event.target)?D.none():function(){return t.autofocus&&p.setSource(m.element),D.none()}()};return{dom:t.dom,components:o,domModification:t.domModification,events:ga([Rc(function(m,p){c(m).each(function(C){p.stop()})}),We(Cf(),db),We(id(),function(m,p){t.autofocus?c(m):bn.focus(m)})]),behaviours:sc.augment(t.widgetBehaviours,[yt.config({store:{mode:"memory",initialValue:t.data}}),bn.config({ignore:t.ignoreFocus,onFocus:function(m){VS(m)}}),sn.config({mode:"special",focusIn:t.autofocus?function(m){c(m)}:e1(),onLeft:v,onRight:v,onEscape:function(m,p){return!bn.isFocused(m)&&!t.autofocus?(bn.focus(m),D.some(!0)):(t.autofocus&&p.setSource(m.element),D.none())}})])}},j=[He("uid"),He("data"),He("components"),He("dom"),he("autofocus",!1),he("ignoreFocus",!1),sc.field("widgetBehaviours",[yt,bn,sn]),he("domModification",{}),Oy(A()),Zr("builder",P)],Y=Zs("type",{widget:j,item:d,separator:y}),le=function(t,r){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}},Me=function(t,r){return{mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}},Qe=function(t,r){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}},Ve=ye([gl({factory:{sketch:function(t){var r=zr("menu.spec item",Y,t);return r.builder(r)}},name:"items",unit:"item",defaults:function(t,r){return hr(r,"uid")?r:ue(ue({},r),{uid:ld("item")})},overrides:function(t,r){return{type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Pe=ye([He("value"),He("items"),He("dom"),He("components"),he("eventOrder",{}),Jo("menuBehaviours",[Mr,yt,Jn,sn]),ku("movement",{mode:"menu",moveOnTab:!0},Zs("mode",{grid:[Wp(),Zr("config",le)],matrix:[Zr("config",Me),He("rowSelector")],menu:[he("moveOnTab",!0),Zr("config",Qe)]})),JT(),he("fakeFocus",!1),he("focusManager",kh()),Yn("onHighlight")]),lt=ye("alloy.menu-focus"),ct=function(t,r,o,c){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Zo(t.menuBehaviours,[Mr.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),yt.config({store:{mode:"memory",initialValue:t.value}}),Jn.config({find:D.some}),sn.config(t.movement.config(t,t.movement))]),events:ga([We(u(),function(v,m){var p=m.event;v.getSystem().getByDom(p.target).each(function(C){Mr.highlight(v,C),m.stop(),un(v,lt(),{menu:v,item:C})})}),We(US(),function(v,m){var p=m.event.item;Mr.highlight(v,p)})]),components:r,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}},qt=Bu({name:"Menu",configFields:Pe(),partFields:Ve(),factory:ct}),xr=function(t){return Po(t,function(r,o){return{k:r,v:o}})},en=function(t,r,o,c){return Gt(o,c).bind(function(v){return Gt(t,v).bind(function(m){var p=en(t,r,o,m);return D.some([m].concat(p))})}).getOr([])},yn=function(t,r){var o={};Gr(t,function(p,C){kt(p,function(S){o[S]=C})});var c=r,v=xr(r),m=kr(v,function(p,C){return[C].concat(en(o,c,v,C))});return kr(o,function(p){return Gt(m,p).getOr([p])})},sr=function(){var t=nn({}),r=nn({}),o=nn({}),c=Qa(),v=nn({}),m=function(){t.set({}),r.set({}),o.set({}),c.clear()},p=function(){return c.get().isNone()},C=function(ge,ke){var Le;r.set(ue(ue({},r.get()),(Le={},Le[ge]={type:"prepared",menu:ke},Le)))},S=function(ge,ke,Le,wt){c.set(ge),t.set(Le),r.set(ke),v.set(wt);var Ue=yn(wt,Le);o.set(Ue)},k=function(ge){return No(t.get(),function(ke,Le){return ke===ge})},R=function(ge,ke,Le){return ne(ge).bind(function(wt){return k(ge).bind(function(Ue){return ke(Ue).map(function(St){return{triggeredMenu:wt,triggeringItem:St,triggeringPath:Le}})})})},B=function(ge,ke){var Le=tn(Z(ge).toArray(),function(wt){return ne(wt).isSome()});return Gt(o.get(),ge).bind(function(wt){var Ue=an(Le.concat(wt)),St=Jr(Ue,function(Ge,Ie){return R(Ge,ke,Ue.slice(0,Ie+1)).fold(function(){return Ti(c.get(),Ge)?[]:[D.none()]},function(bt){return[D.some(bt)]})});return $n(St)})},L=function(ge){return Gt(t.get(),ge).map(function(ke){var Le=Gt(o.get(),ge).getOr([]);return[ke].concat(Le)})},U=function(ge){return Gt(o.get(),ge).bind(function(ke){return ke.length>1?D.some(ke.slice(1)):D.none()})},K=function(ge){return Gt(o.get(),ge)},ne=function(ge){return me(ge).bind(Gn)},me=function(ge){return Gt(r.get(),ge)},Z=function(ge){return Gt(t.get(),ge)},pe=function(ge){var ke=v.get();return ua(ta(ke),ge)},_e=function(){return c.get().bind(ne)},ze=function(){return r.get()};return{setMenuBuilt:C,setContents:S,expand:L,refresh:K,collapse:U,lookupMenu:me,lookupItem:Z,otherMenus:pe,getPrimary:_e,getMenus:ze,clear:m,isClear:p,getTriggeringPath:B}},Gn=function(t){return t.type==="prepared"?D.some(t.menu):D.none()},eo={init:sr,extractPreparedMenu:Gn},Qo=function(t,r){var o=Qa(),c=function(je,It,Kt){return kr(Kt,function(gr,Yr){var Xa=function(){return qt.sketch(ue(ue({},gr),{value:Yr,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?aS():kh()}))};return Yr===It?{type:"prepared",menu:je.getSystem().build(Xa())}:{type:"notbuilt",nbMenu:Xa}})},v=eo.init(),m=function(je){var It=c(je,t.data.primary,t.data.menus),Kt=S();return v.setContents(t.data.primary,It,t.data.expansions,Kt),v.getPrimary()},p=function(je){return yt.getValue(je).value},C=function(je,It,Kt){return sa(It,function(gr){if(!gr.getSystem().isConnected())return D.none();var Yr=Mr.getCandidates(gr);return lr(Yr,function(Xa){return p(Xa)===Kt})})},S=function(je){return kr(t.data.menus,function(It,Kt){return Jr(It.items,function(gr){return gr.type==="separator"?[]:[gr.data.value]})})},k=function(je,It){Mr.highlight(je,It),Mr.getHighlighted(It).orThunk(function(){return Mr.getFirst(It)}).each(function(Kt){s0(je,Kt.element,id())})},R=function(je,It){return pr(nt(It,function(Kt){return je.lookupMenu(Kt).bind(function(gr){return gr.type==="prepared"?D.some(gr.menu):D.none()})}))},B=function(je,It,Kt){var gr=R(It,It.otherMenus(Kt));kt(gr,function(Yr){zl(Yr.element,[t.markers.backgroundMenu]),t.stayInDom||On.remove(je,Yr)})},L=function(je){return o.get().getOrThunk(function(){var It={},Kt=Yo(je.element,"."+t.markers.item),gr=tn(Kt,function(Yr){return Da(Yr,"aria-haspopup")==="true"});return kt(gr,function(Yr){je.getSystem().getByDom(Yr).each(function(Xa){var Kf=p(Xa);It[Kf]=Xa})}),o.set(It),It})},U=function(je,It){var Kt=L(je);Gr(Kt,function(gr,Yr){var Xa=Un(It,Yr);Mn(gr.element,"aria-expanded",Xa)})},K=function(je,It,Kt){return D.from(Kt[0]).bind(function(gr){return It.lookupMenu(gr).bind(function(Yr){if(Yr.type==="notbuilt")return D.none();var Xa=Yr.menu,Kf=R(It,Kt.slice(1));return kt(Kf,function(rf){vi(rf.element,t.markers.backgroundMenu)}),fn(Xa.element)||On.append(je,Fs(Xa)),zl(Xa.element,[t.markers.backgroundMenu]),k(je,Xa),B(je,It,Kt),D.some(Xa)})})},ne;(function(je){je[je.HighlightSubmenu=0]="HighlightSubmenu",je[je.HighlightParent=1]="HighlightParent"})(ne||(ne={}));var me=function(je,It,Kt){if(Kt.type==="notbuilt"){var gr=je.getSystem().build(Kt.nbMenu());return v.setMenuBuilt(It,gr),gr}else return Kt.menu},Z=function(je,It,Kt){if(Kt===void 0&&(Kt=ne.HighlightSubmenu),It.hasConfigured(Zt)&&Zt.isDisabled(It))return D.some(It);var gr=p(It);return v.expand(gr).bind(function(Yr){return U(je,Yr),D.from(Yr[0]).bind(function(Xa){return v.lookupMenu(Xa).bind(function(Kf){var rf=me(je,Xa,Kf);return fn(rf.element)||On.append(je,Fs(rf)),t.onOpenSubmenu(je,It,rf,an(Yr)),Kt===ne.HighlightSubmenu?(Mr.highlightFirst(rf),K(je,v,Yr)):(Mr.dehighlightAll(rf),D.some(It))})})})},pe=function(je,It){var Kt=p(It);return v.collapse(Kt).bind(function(gr){return U(je,gr),K(je,v,gr).map(function(Yr){return t.onCollapseMenu(je,It,Yr),Yr})})},_e=function(je,It){var Kt=p(It);return v.refresh(Kt).bind(function(gr){return U(je,gr),K(je,v,gr)})},ze=function(je,It){return Rv(It.element)?D.none():Z(je,It,ne.HighlightSubmenu)},ge=function(je,It){return Rv(It.element)?D.none():pe(je,It)},ke=function(je,It){return pe(je,It).orThunk(function(){return t.onEscape(je,It).map(function(){return je})})},Le=function(je){return function(It,Kt){return du(Kt.getSource(),"."+t.markers.item).bind(function(gr){return It.getSystem().getByDom(gr).toOptional().bind(function(Yr){return je(It,Yr).map(Tt)})})}},wt=ga([We(lt(),function(je,It){var Kt=It.event.item;v.lookupItem(p(Kt)).each(function(){var gr=It.event.menu;Mr.highlight(je,gr);var Yr=p(It.event.item);v.refresh(Yr).each(function(Xa){return B(je,v,Xa)})})}),Rc(function(je,It){var Kt=It.event.target;je.getSystem().getByDom(Kt).each(function(gr){var Yr=p(gr);Yr.indexOf("collapse-item")===0&&pe(je,gr),Z(je,gr,ne.HighlightSubmenu).fold(function(){t.onExecute(je,gr)},at)})}),Ma(function(je,It){m(je).each(function(Kt){On.append(je,Fs(Kt)),t.onOpenMenu(je,Kt),t.highlightImmediately&&k(je,Kt)})})].concat(t.navigateOnHover?[We(US(),function(je,It){var Kt=It.event.item;_e(je,Kt),Z(je,Kt,ne.HighlightParent),t.onHover(je,Kt)})]:[])),Ue=function(je){return Mr.getHighlighted(je).bind(Mr.getHighlighted)},St=function(je){Ue(je).each(function(It){pe(je,It)})},Ge=function(je){v.getPrimary().each(function(It){k(je,It)})},Ie=function(je){return D.from(je.components()[0]).filter(function(It){return Da(It.element,"role")==="menu"})},bt=function(je){var It=v.getPrimary().bind(function(Kt){return Ue(je).bind(function(gr){var Yr=p(gr),Xa=$o(v.getMenus()),Kf=pr(nt(Xa,eo.extractPreparedMenu));return v.getTriggeringPath(Yr,function(rf){return C(je,Kf,rf)})}).map(function(gr){return{primary:Kt,triggeringPath:gr}})});It.fold(function(){Ie(je).each(function(Kt){t.onRepositionMenu(je,Kt,[])})},function(Kt){var gr=Kt.primary,Yr=Kt.triggeringPath;t.onRepositionMenu(je,gr,Yr)})},Vt={collapseMenu:St,highlightPrimary:Ge,repositionMenus:bt};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Zo(t.tmenuBehaviours,[sn.config({mode:"special",onRight:Le(ze),onLeft:Le(ge),onEscape:Le(ke),focusIn:function(je,It){v.getPrimary().each(function(Kt){s0(je,Kt.element,id())})}}),Mr.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Jn.config({find:function(je){return Mr.getHighlighted(je)}}),On.config({})]),eventOrder:t.eventOrder,apis:Vt,events:wt}},hu=ye("collapse-item"),Dr=function(t,r,o){return{primary:t,menus:r,expansions:o}},Dn=function(t,r){return{primary:t,menus:Bl(t,r),expansions:{}}},mr=function(t){return{value:Nt(hu()),meta:{text:t}}},Kr=Cs({name:"TieredMenu",configFields:[mv("onExecute"),mv("onEscape"),Cd("onOpenMenu"),Cd("onOpenSubmenu"),Yn("onRepositionMenu"),Yn("onCollapseMenu"),he("highlightImmediately",!0),_l("data",[He("primary"),He("menus"),He("expansions")]),he("fakeFocus",!1),Yn("onHighlight"),Yn("onHover"),yd(),He("dom"),he("navigateOnHover",!0),he("stayInDom",!1),Jo("tmenuBehaviours",[sn,Mr,Jn,On]),he("eventOrder",{})],apis:{collapseMenu:function(t,r){t.collapseMenu(r)},highlightPrimary:function(t,r){t.highlightPrimary(r)},repositionMenus:function(t,r){t.repositionMenus(r)}},factory:Qo,extraApis:{tieredData:Dr,singleData:Dn,collapseItem:mr}}),Pa=function(t,r,o,c,v){var m=function(){return t.lazySink(r)},p=c.type==="horizontal"?{layouts:{onLtr:function(){return Af()},onRtl:function(){return bv()}}}:{},C=function(k){return k.length===2},S=function(k){return C(k)?p:{}};return Kr.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightImmediately:c.menu.highlightImmediately,onEscape:function(){return fr.close(r),t.onEscape.map(function(k){return k(r)}),D.some(!0)},onExecute:function(){return D.some(!0)},onOpenMenu:function(k,R){Ru.positionWithinBounds(m().getOrDie(),R,o,v())},onOpenSubmenu:function(k,R,B,L){var U=m().getOrDie();Ru.position(U,B,{anchor:ue({type:"submenu",item:R},S(L))})},onRepositionMenu:function(k,R,B){var L=m().getOrDie();Ru.positionWithinBounds(L,R,o,v()),kt(B,function(U){var K=S(U.triggeringPath);Ru.position(L,U.triggeredMenu,{anchor:ue({type:"submenu",item:U.triggeringItem},K)})})}})},Xl=function(t,r){var o=function(U,K){var ne=t.getRelated(U);return ne.exists(function(me){return gd(me,K)})},c=function(U,K){fr.setContent(U,K)},v=function(U,K,ne){m(U,K,ne,D.none())},m=function(U,K,ne,me){p(U,K,ne,function(){return me.map(function(Z){return ho(Z)})})},p=function(U,K,ne,me){var Z=t.lazySink(U).getOrDie();fr.openWhileCloaked(U,K,function(){return Ru.positionWithinBounds(Z,U,ne,me())}),yt.setValue(U,D.some({mode:"position",config:ne,getBounds:me}))},C=function(U,K,ne){S(U,K,ne,D.none)},S=function(U,K,ne,me){var Z=Pa(t,U,K,ne,me);fr.open(U,Z),yt.setValue(U,D.some({mode:"menu",menu:Z}))},k=function(U){fr.isOpen(U)&&(yt.setValue(U,D.none()),fr.close(U))},R=function(U){return fr.getState(U)},B=function(U){fr.isOpen(U)&&yt.getValue(U).each(function(K){switch(K.mode){case"menu":fr.getState(U).each(Kr.repositionMenus);break;case"position":var ne=t.lazySink(U).getOrDie();Ru.positionWithinBounds(ne,U,K.config,K.getBounds());break}})},L={setContent:c,showAt:v,showWithin:m,showWithinBounds:p,showMenuAt:C,showMenuWithinBounds:S,hide:k,getContent:R,reposition:B,isOpen:fr.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Zo(t.inlineBehaviours,[fr.config({isPartOf:function(U,K,ne){return gd(K,ne)||o(U,ne)},getAttachPoint:function(U){return t.lazySink(U).getOrDie()},onOpen:function(U){t.onShow(U)},onClose:function(U){t.onHide(U)}}),yt.config({store:{mode:"memory",initialValue:D.none()}}),ps.config({channels:ue(ue({},Ov(ue({isExtraPart:r.isExtraPart},t.fireDismissalEventInstead.map(function(U){return{fireEventInstead:{event:U.event}}}).getOr({})))),fh(ue(ue({},t.fireRepositionEventInstead.map(function(U){return{fireEventInstead:{event:U.event}}}).getOr({})),{doReposition:B})))})]),eventOrder:t.eventOrder,apis:L}},Ir=Cs({name:"InlineView",configFields:[He("lazySink"),Yn("onShow"),Yn("onHide"),tv("onEscape"),Jo("inlineBehaviours",[fr,yt,ps]),vs("fireDismissalEventInstead",[he("event",Ac())]),vs("fireRepositionEventInstead",[he("event",vu())]),he("getRelated",D.none),he("isExtraPart",kn),he("eventOrder",D.none)],factory:Xl,apis:{showAt:function(t,r,o,c){t.showAt(r,o,c)},showWithin:function(t,r,o,c,v){t.showWithin(r,o,c,v)},showWithinBounds:function(t,r,o,c,v){t.showWithinBounds(r,o,c,v)},showMenuAt:function(t,r,o,c){t.showMenuAt(r,o,c)},showMenuWithinBounds:function(t,r,o,c,v){t.showMenuWithinBounds(r,o,c,v)},hide:function(t,r){t.hide(r)},isOpen:function(t,r){return t.isOpen(r)},getContent:function(t,r){return t.getContent(r)},setContent:function(t,r,o){t.setContent(r,o)},reposition:function(t,r){t.reposition(r)}}}),Ss="layout-inset",zi=function(t){return t.x},Hh=function(t,r){return t.x+t.width/2-r.width/2},Jd=function(t,r){return t.x+t.width-r.width},hl=function(t){return t.y},fc=function(t,r){return t.y+t.height-r.height},pl=function(t,r){return t.y+t.height/2-r.height/2},Vh=function(t,r,o){return di(Jd(t,r),fc(t,r),o.insetSouthwest(),qp(),"southwest",Bi(t,{right:0,bottom:3}),Ss)},bg=function(t,r,o){return di(zi(t),fc(t,r),o.insetSoutheast(),O0(),"southeast",Bi(t,{left:1,bottom:3}),Ss)},Uh=function(t,r,o){return di(Jd(t,r),hl(t),o.insetNorthwest(),zm(),"northwest",Bi(t,{right:0,top:2}),Ss)},Zd=function(t,r,o){return di(zi(t),hl(t),o.insetNortheast(),Gp(),"northeast",Bi(t,{left:1,top:2}),Ss)},Lc=function(t,r,o){return di(Hh(t,r),hl(t),o.insetNorth(),Im(),"north",Bi(t,{top:2}),Ss)},Qd=function(t,r,o){return di(Hh(t,r),fc(t,r),o.insetSouth(),Kp(),"south",Bi(t,{bottom:3}),Ss)},mb=function(t,r,o){return di(Jd(t,r),pl(t,r),o.insetEast(),Sd(),"east",Bi(t,{right:0}),Ss)},gb=function(t,r,o){return di(zi(t),pl(t,r),o.insetWest(),Xu(),"west",Bi(t,{left:1}),Ss)},Wh=function(t){switch(t){case"north":return Lc;case"northeast":return Zd;case"northwest":return Uh;case"south":return Qd;case"southeast":return bg;case"southwest":return Vh;case"east":return mb;case"west":return gb}},TO=function(t,r,o,c,v){var m=H0(c).map(Wh).getOr(Lc);return m(t,r,o,c,v)},TB=function(t){switch(t){case"north":return Qd;case"northeast":return bg;case"northwest":return Vh;case"south":return Lc;case"southeast":return Zd;case"southwest":return Uh;case"east":return gb;case"west":return mb}},kB=function(t,r,o,c,v){var m=H0(c).map(TB).getOr(Lc);return m(t,r,o,c,v)},em=tinymce.util.Tools.resolve("tinymce.util.Delay"),kO=function(t){var r=Fh(t.action),o=t.dom.tag,c=function(m){return Gt(t.dom,"attributes").bind(function(p){return Gt(p,m)})},v=function(){if(o==="button"){var m=c("type").getOr("button"),p=c("role").map(function(S){return{role:S}}).getOr({});return ue({type:m},p)}else{var C=c("role").getOr("button");return{role:C}}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:sc.augment(t.buttonBehaviours,[bn.config({}),sn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:v()},eventOrder:t.eventOrder}},Pu=Cs({name:"Button",factory:kO,configFields:[he("uid",void 0),He("dom"),he("components",[]),sc.field("buttonBehaviours",[bn,sn]),Br("action"),Br("role"),he("eventOrder",{})]}),$r=function(t){var r=Xk(t)&&ha(t,"uid")?t.uid:ld("memento"),o=function(m){return m.getSystem().getByUid(r).getOrDie()},c=function(m){return m.getSystem().getByUid(r).toOptional()},v=function(){return ue(ue({},t),{uid:r})};return{get:o,getOpt:c,asSpec:v}},Hc=tinymce.util.Tools.resolve("tinymce.util.I18n"),EB={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},EO="temporary-placeholder",B4=function(t){return function(){return Gt(t,EO).getOr("!not found!")}},M4=function(t,r){var o=t.toLowerCase();if(Hc.isRtl()){var c=zu(o,"-rtl");return hr(r,c)?c:o}else return o},OO=function(t,r){return Gt(r,M4(t,r))},AO=function(t,r){var o=r();return OO(t,o).getOrThunk(B4(o))},DO=function(t,r,o){var c=r();return OO(t,c).or(o).getOrThunk(B4(c))},OB=function(t){return Hc.isRtl()?hr(EB,t):!1},P4=function(){return Fn("add-focusable",[Ma(function(t){qT(t.element,"svg").each(function(r){return Mn(r,"focusable","false")})})])},l2=function(t,r,o,c){var v,m,p=OB(r)?["tox-icon--flip"]:[],C=Gt(o,M4(r,o)).or(c).getOrThunk(B4(o));return{dom:{tag:t.tag,attributes:(v=t.attributes)!==null&&v!==void 0?v:{},classes:t.classes.concat(p),innerHtml:C},behaviours:vt(gt(gt([],(m=t.behaviours)!==null&&m!==void 0?m:[],!0),[P4()],!1))}},Ff=function(t,r,o,c){return c===void 0&&(c=D.none()),l2(r,t,o(),c)},AB=function(t,r,o){var c=o(),v=lr(t,function(m){return hr(c,M4(m,c))});return l2(r,v.getOr(EO),c,D.none())},N4={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},DB=function(t){var r=$r({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:vt([On.config({})])}),o=function(U){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+U+"%"}}}},c=function(U){return{dom:{tag:"div",classes:["tox-text"],innerHtml:U+"%"}}},v=$r({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(0)]},c(0)],behaviours:vt([On.config({})])}),m=function(U,K){U.getSystem().isConnected()&&v.getOpt(U).each(function(ne){On.set(ne,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(K)]},c(K)])})},p=function(U,K){if(U.getSystem().isConnected()){var ne=r.get(U);On.set(ne,[fv(K)])}},C={updateProgress:m,updateText:p},S=jt([t.icon.toArray(),t.level.toArray(),t.level.bind(function(U){return D.from(N4[U])}).toArray()]),k=$r(Pu.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Ff("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(U){t.onAction(U)}})),R=AB(S,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),B={dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:vt([On.config({})])},L=[R,B];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(function(U){return["tox-notification","tox-notification--in","tox-notification--"+U]}).getOr(["tox-notification","tox-notification--in"])},behaviours:vt([bn.config({}),Fn("notification-events",[We(Qs(),function(U){k.getOpt(U).each(bn.focus)})])]),components:L.concat(t.progress?[v.asSpec()]:[]).concat(t.closeButton?[k.asSpec()]:[]),apis:C}},$4=Cs({name:"Notification",factory:DB,configFields:[Br("level"),He("progress"),He("icon"),He("onAction"),He("text"),He("iconProvider"),He("translationProvider"),aa("closeButton",!0)],apis:{updateProgress:function(t,r,o){t.updateProgress(r,o)},updateText:function(t,r,o){t.updateText(r,o)}}});function RB(t,r,o){var c=r.backstage.shared,v=function(k){switch(k){case"bc-bc":return Qd;case"tc-tc":return Lc;case"tc-bc":return Ju;case"bc-tc":default:return Mi}},m=function(k){k.length>0&&kt(k,function(R,B){B===0?R.moveRel(null,"banner"):R.moveRel(k[B-1].getEl(),"bc-tc")})},p=function(k,R){var B=!k.closeButton&&k.timeout&&(k.timeout>0||k.timeout<0),L=function(){R(),Ir.hide(K)},U=bo($4.sketch({text:k.text,level:Un(["success","error","warning","warn","info"],k.type)?k.type:void 0,progress:k.progressBar===!0,icon:D.from(k.icon),closeButton:!B,onAction:L,iconProvider:c.providers.icons,translationProvider:c.providers.translate})),K=bo(Ir.sketch(ue({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:c.getSink,fireDismissalEventInstead:{}},c.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));o.add(K),k.timeout>0&&em.setTimeout(function(){L()},k.timeout);var ne=function(){var me=ho(re.fromDom(t.getContentAreaContainer())),Z=Ai(),pe=Yu(Z.x,me.x,me.right),_e=Yu(Z.y,me.y,me.bottom),ze=Math.max(me.right,Z.right),ge=Math.max(me.bottom,Z.bottom);return D.some(Fo(pe,_e,ze-pe,ge-_e))};return{close:L,moveTo:function(me,Z){Ir.showAt(K,Fs(U),{anchor:{type:"makeshift",x:me,y:Z}})},moveRel:function(me,Z){var pe=Fs(U),_e={maxHeightFunction:Wm()};if(Z!=="banner"&&Tn(me)){var ze=v(Z),ge={type:"node",root:Hr(),node:D.some(re.fromDom(me)),overrides:_e,layouts:{onRtl:function(){return[ze]},onLtr:function(){return[ze]}}};Ir.showWithinBounds(K,pe,{anchor:ge},ne)}else{var ke=ue(ue({},c.anchors.banner()),{overrides:_e});Ir.showWithinBounds(K,pe,{anchor:ke},ne)}},text:function(me){$4.updateText(U,me)},settings:k,getEl:function(){return U.element.dom},progressBar:{value:function(me){$4.updateProgress(U,me)}}}},C=function(k){k.close()},S=function(k){return k.settings};return{open:p,close:C,reposition:m,getArgs:S}}var _B=function(t,r){var o=null,c=function(){Ar(o)||(clearTimeout(o),o=null)},v=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];Ar(o)&&(o=setTimeout(function(){o=null,t.apply(null,m)},r))};return{cancel:c,throttle:v}},z4=function(t,r){var o=null,c=function(){Ar(o)||(clearTimeout(o),o=null)},v=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];c(),o=setTimeout(function(){o=null,t.apply(null,m)},r)};return{cancel:c,throttle:v}},BB=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),MB=function(t,r){return t.isBlock(r)||Un(["BR","IMG","HR","INPUT"],r.nodeName)||t.getContentEditable(r)==="false"},RO=function(t,r,o,c,v){var m=BB(t,function(p){return MB(t,p)});return D.from(m.backwards(r,o,c,v))},PB="[data-mce-autocompleter]",NB=function(t,r){return WS(re.fromDom(t.selection.getNode())).getOrThunk(function(){var o=re.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Gi(o,re.fromDom(r.extractContents())),r.insertNode(o.dom),Fa(o).each(function(c){return c.dom.normalize()}),cC(o).map(function(c){t.selection.setCursorLocation(c.dom,sC(c))}),o})},WS=function(t){return du(t,PB)},$B=function(t){return t.collapsed&&t.startContainer.nodeType===3},jS=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},_O=function(t){return t!==""&&`  \f
\r	\v`.indexOf(t)!==-1},I4=function(t,r){return t.substring(r.length)},zB=function(t,r,o){var c;for(c=r-1;c>=0;c--){var v=t.charAt(c);if(_O(v))return D.none();if(v===o)break}return D.some(c)},BO=function(t,r,o,c){if(c===void 0&&(c=0),!$B(r))return D.none();var v=function(p,C,S){return zB(S,C,o).getOr(C)},m=t.getParent(r.startContainer,t.isBlock)||t.getRoot();return RO(t,r.startContainer,r.startOffset,v,m).bind(function(p){var C=r.cloneRange();if(C.setStart(p.container,p.offset),C.setEnd(r.endContainer,r.endOffset),C.collapsed)return D.none();var S=jS(C),k=S.lastIndexOf(o);return k!==0||I4(S,o).length<c?D.none():D.some({text:I4(S,o),range:C,triggerChar:o})})},F4=function(t,r,o,c){return c===void 0&&(c=0),WS(re.fromDom(r.startContainer)).fold(function(){return BO(t,r,o,c)},function(v){var m=t.createRng();m.selectNode(v.dom);var p=jS(m);return D.some({range:m,text:I4(p,o),triggerChar:o})})},IB=function(t,r){r.on("keypress compositionend",t.onKeypress.throttle),r.on("remove",t.onKeypress.cancel);var o=function(c,v){un(c,Ap(),{raw:v})};r.on("keydown",function(c){var v=function(){return t.getView().bind(Mr.getHighlighted)};c.which===8&&t.onKeypress.throttle(c),t.isActive()&&(c.which===27&&t.cancelIfNecessary(),t.isMenuOpen()?c.which===13?(v().each(xf),c.preventDefault()):c.which===40?(v().fold(function(){t.getView().each(Mr.highlightFirst)},function(m){o(m,c)}),c.preventDefault(),c.stopImmediatePropagation()):(c.which===37||c.which===38||c.which===39)&&v().each(function(m){o(m,c),c.preventDefault(),c.stopImmediatePropagation()}):(c.which===13||c.which===38||c.which===40)&&t.cancelIfNecessary())}),r.on("NodeChange",function(c){t.isActive()&&!t.isProcessingAction()&&WS(re.fromDom(c.element)).isNone()&&t.cancelIfNecessary()})},FB={setup:IB},f2=tinymce.util.Tools.resolve("tinymce.util.Promise"),L4=function(t,r){return{container:t,offset:r}},H4=function(t){return t.nodeType===mn},LB=function(t){return t.nodeType===zt},MO=function(t){if(H4(t))return L4(t,t.data.length);var r=t.childNodes;return r.length>0?MO(r[r.length-1]):L4(t,r.length)},PO=function(t,r){var o=t.childNodes;return o.length>0&&r<o.length?PO(o[r],0):o.length>0&&LB(t)&&o.length===r?MO(o[o.length-1]):L4(t,r)},HB=function(t,r){return RO(t,r.container,r.offset,function(o,c){return c===0?-1:c},t.getRoot()).filter(function(o){var c=o.container.data.charAt(o.offset-1);return!_O(c)}).isSome()},VB=function(t){return function(r){var o=PO(r.startContainer,r.startOffset);return!HB(t,o)}},UB=function(t,r,o){return sa(o.triggerChars,function(c){return F4(t,r,c)})},WB=function(t,r){var o=r(),c=t.selection.getRng();return UB(t.dom,c,o).bind(function(v){return NO(t,r,v)})},NO=function(t,r,o,c){c===void 0&&(c={});var v=r(),m=t.selection.getRng(),p=m.startContainer.nodeValue,C=tn(v.lookupByChar(o.triggerChar),function(k){return o.text.length>=k.minChars&&k.matches.getOrThunk(function(){return VB(t.dom)})(o.range,p,o.text)});if(C.length===0)return D.none();var S=f2.all(nt(C,function(k){var R=k.fetch(o.text,k.maxResults,c);return R.then(function(B){return{matchText:o.text,items:B,columns:k.columns,onAction:k.onAction,highlightOn:k.highlightOn}})}));return D.some({lookupData:S,context:o})},$O=Yt([xn("type"),da("text")]),jB=function(t){return Ha("separatormenuitem",$O,t)},GB=Yt([he("type","autocompleteitem"),he("active",!1),he("disabled",!1),he("meta",{}),xn("value"),da("text"),da("icon")]),V4=Yt([xn("type"),xn("ch"),ol("minChars",1),he("columns",1),ol("maxResults",10),tv("matches"),fu("fetch"),fu("onAction"),yf("highlightOn",[],io)]),qB=function(t){return Ha("Autocompleter.Separator",$O,t)},KB=function(t){return Ha("Autocompleter.Item",GB,t)},XB=function(t){return Ha("Autocompleter",V4,t)},jh=[aa("disabled",!1),da("tooltip"),da("icon"),da("text"),ma("onSetup",function(){return at})],YB=Yt([xn("type"),fu("onAction")].concat(jh)),GS=function(t){return Ha("toolbarbutton",YB,t)},U4=[aa("active",!1)].concat(jh),JB=Yt(U4.concat([xn("type"),fu("onAction")])),zO=function(t){return Ha("ToggleButton",JB,t)},IO=[ma("predicate",kn),Ps("scope","node",["node","editor"]),Ps("position","selection",["node","selection","line"])],ZB=jh.concat([he("type","contextformbutton"),he("primary",!1),fu("onAction"),Tu("original",Lt)]),FO=U4.concat([he("type","contextformbutton"),he("primary",!1),fu("onAction"),Tu("original",Lt)]),QB=jh.concat([he("type","contextformbutton")]),W4=U4.concat([he("type","contextformtogglebutton")]),j4=Zs("type",{contextformbutton:ZB,contextformtogglebutton:FO}),LO=Yt([he("type","contextform"),ma("initValue",ye("")),da("label"),Xi("commands",j4),al("launch",Zs("type",{contextformbutton:QB,contextformtogglebutton:W4}))].concat(IO)),G4=function(t){return Ha("ContextForm",LO,t)},HO=Yt([he("type","contexttoolbar"),xn("items")].concat(IO)),VO=function(t){return Ha("ContextToolbar",HO,t)},Fv=function(t){var r={};return kt(t,function(o){r[o]={}}),ta(r)},q4=function(t){var r=t.ui.registry.getAll().popups,o=kr(r,function(p){return XB(p).fold(function(C){throw new Error(ev(C))},Lt)}),c=Fv(mo(o,function(p){return p.ch})),v=$o(o),m=function(p){return tn(v,function(C){return C.ch===p})};return{dataset:o,triggerChars:c,lookupByChar:m}},K4;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(K4||(K4={}));var Lf=K4,X4="tox-menu-nav__js",Y4="tox-collection__item",yg="tox-swatch",UO={normal:X4,color:yg},WO="tox-collection__item--enabled",e5="tox-collection__group-heading",J4="tox-collection__item-icon",qS="tox-collection__item-label",Z4="tox-collection__item-accessory",jO="tox-collection__item-caret",Q4="tox-collection__item-checkmark",Gh="tox-collection__item--active",GO="tox-collection__item-container",qO="tox-collection__item-container--column",e3="tox-collection__item-container--row",t5="tox-collection__item-container--align-right",n5="tox-collection__item-container--align-left",r5="tox-collection__item-container--valign-top",a5="tox-collection__item-container--valign-middle",o5="tox-collection__item-container--valign-bottom",KO=function(t){return Gt(UO,t).getOr(X4)},i5=function(t){return t==="color"?"tox-swatches":"tox-menu"},t3=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:i5(t),tieredMenu:"tox-tiered-menu"}},tm=function(t){var r=t3(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:KO(t)}},XO=function(t,r,o){var c=t3(o);return{tag:"div",classes:jt([[c.menu,"tox-menu-"+r+"-column"],t?[c.hasIcons]:[]])}},YO=[qt.parts.items({})],KS=function(t,r,o){var c=t3(o),v={tag:"div",classes:jt([[c.tieredMenu]])};return{dom:v,markers:tm(o)}},n3=function(t,r){return function(o){var c=ni(o,r);return nt(c,function(v){return{dom:t,components:v}})}},r3=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[qt.parts.items({preprocess:t!=="auto"?n3({tag:"div",classes:["tox-swatches__row"]},t):Lt})]}]}},a3=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[qt.parts.items({preprocess:n3({tag:"div",classes:["tox-collection__group"]},t)})]}},o3=function(t,r){var o=[],c=[];return kt(t,function(v,m){r(v,m)?(c.length>0&&o.push(c),c=[],hr(v.dom,"innerHtml")&&c.push(v)):c.push(v)}),c.length>0&&o.push(c),nt(o,function(v){return{dom:{tag:"div",classes:["tox-collection__group"]},components:v}})},XS=function(t,r,o){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[qt.parts.items({preprocess:function(c){return t!=="auto"&&t>1?n3({tag:"div",classes:["tox-collection__group"]},t)(c):o3(c,function(v,m){return r[m].type==="separator"})}})]}},JO=function(t,r){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[qt.parts.items({preprocess:function(o){return o3(o,function(c,v){return t[v].type==="separator"})}})]}},YS=function(t){return Ca(t,function(r){return"icon"in r&&r.icon!==void 0})},Hf=function(t){return console.error(ev(t)),console.log(t),D.none()},u5=function(t,r,o,c,v){var m=JO(o);return{value:t,dom:m.dom,components:m.components,items:o}},JS=function(t,r,o,c,v){if(v==="color"){var m=r3(c);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"&&c==="auto"){var m=XS(c,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"&&c===1){var m=XS(1,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="normal"){var m=XS(c,o);return{value:t,dom:m.dom,components:m.components,items:o}}if(v==="listpreview"&&c!=="auto"){var m=a3(c);return{value:t,dom:m.dom,components:m.components,items:o}}return{value:t,dom:XO(r,c,v),components:YO,items:o}},ZO=[xn("type"),xn("src"),da("alt"),yf("classes",[],io)],v2=Yt(ZO),s5=[xn("type"),xn("text"),da("name"),yf("classes",["tox-collection__item-label"],io)],i3=Yt(s5),qh=sw(function(){return Ep("type",{cardimage:v2,cardtext:i3,cardcontainer:c5})}),c5=Yt([xn("type"),Sm("direction","horizontal"),Sm("align","left"),Sm("valign","middle"),Xi("items",qh)]),Kh=[aa("disabled",!1),da("text"),da("shortcut"),Lo("value","value",ir(function(){return Nt("menuitem-value")}),xc()),he("meta",{})],QO=Yt([xn("type"),da("label"),Xi("items",qh),ma("onSetup",function(){return at}),ma("onAction",at)].concat(Kh)),eA=function(t){return Ha("cardmenuitem",QO,t)},u3=Yt([xn("type"),aa("active",!1),da("icon")].concat(Kh)),tA=function(t){return Ha("choicemenuitem",u3,t)},nA=[xn("type"),xn("fancytype"),ma("onAction",at)],l5=[he("initData",{})].concat(nA),ZS=[Xb("initData",{},[aa("allowCustomColors",!0),fs("colors",xc())])].concat(nA),f5=Zs("fancytype",{inserttable:l5,colorswatch:ZS}),rA=function(t){return Ha("fancymenuitem",f5,t)},hb=Yt([xn("type"),ma("onSetup",function(){return at}),ma("onAction",at),da("icon")].concat(Kh)),v5=function(t){return Ha("menuitem",hb,t)},d5=Yt([xn("type"),fu("getSubmenuItems"),ma("onSetup",function(){return at}),da("icon")].concat(Kh)),m5=function(t){return Ha("nestedmenuitem",d5,t)},aA=Yt([xn("type"),da("icon"),aa("active",!1),ma("onSetup",function(){return at}),fu("onAction")].concat(Kh)),oA=function(t){return Ha("togglemenuitem",aA,t)},s3=function(t,r,o){var c=Yo(t.element,"."+o);if(c.length>0){var v=Va(c,function(m){var p=m.dom.getBoundingClientRect().top,C=c[0].dom.getBoundingClientRect().top;return Math.abs(p-C)>r}).getOr(c.length);return D.some({numColumns:v,numRows:Math.ceil(c.length/v)})}else return D.none()},iA=function(t,r){return vt([Fn(t,r)])},g5=function(t){return iA(Nt("unnamed-events"),t)},QS={namedEvents:iA,unnamedEvents:g5},uA=Nt("tooltip.exclusive"),wg=Nt("tooltip.show"),d2=Nt("tooltip.hide"),sA=function(t,r,o){t.getSystem().broadcastOn([uA],{})},c3=function(t,r,o,c){o.getTooltip().each(function(v){v.getSystem().isConnected()&&On.set(v,c)})},cA=Object.freeze({__proto__:null,hideAllExclusive:sA,setComponents:c3}),h5=function(t,r){var o=function(v){r.getTooltip().each(function(m){ac(m),t.onHide(v,m),r.clearTooltip()}),r.clearTimer()},c=function(v){if(!r.isShowing()){sA(v);var m=t.lazySink(v).getOrDie(),p=v.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ga(t.mode==="normal"?[We(Cf(),function(C){er(v,wg)}),We(e0(),function(C){er(v,d2)})]:[]),behaviours:vt([On.config({})])});r.setTooltip(p),Zi(m,p),t.onShow(v,p),Ru.position(m,p,{anchor:t.anchor(v)})}};return ga(jt([[We(wg,function(v){r.resetTimer(function(){c(v)},t.delay)}),We(d2,function(v){r.resetTimer(function(){o(v)},t.delay)}),We(ec(),function(v,m){var p=m;p.universal||Un(p.channels,uA)&&o(v)}),ms(function(v){o(v)})],t.mode==="normal"?[We(Qs(),function(v){er(v,wg)}),We(a0(),function(v){er(v,d2)}),We(Cf(),function(v){er(v,wg)}),We(e0(),function(v){er(v,d2)})]:[We(bw(),function(v,m){er(v,wg)}),We(jg(),function(v){er(v,d2)})]]))},lA=Object.freeze({__proto__:null,events:h5}),fA=[He("lazySink"),He("tooltipDom"),he("exclusive",!0),he("tooltipComponents",[]),he("delay",300),Ps("mode","normal",["normal","follow-highlight"]),he("anchor",function(t){return{type:"hotspot",hotspot:t,layouts:{onLtr:ye([Mi,Ju,Ji,mu,Ho,mi]),onRtl:ye([Mi,Ju,Ji,mu,Ho,mi])}}}),Yn("onHide"),Yn("onShow")],vA=function(){var t=Qa(),r=Qa(),o=function(){t.on(clearTimeout)},c=function(m,p){o(),t.set(setTimeout(m,p))},v=ye("not-implemented");return fi({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:o,resetTimer:c,readState:v})},dA=Object.freeze({__proto__:null,init:vA}),mA=so({fields:fA,name:"tooltipping",active:lA,state:dA,apis:cA}),p5=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},m2=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),b5=tinymce.util.Tools.resolve("tinymce.EditorManager"),l3=function(t){var r=t.getParam("skin"),o=t.getParam("skin_url");if(r!==!1){var c=r||"oxide";o?o=t.documentBaseURI.toAbsolute(o):o=b5.baseURL+"/skins/ui/"+c}return o},f3=function(t){return t.getParam("readonly",!1,"boolean")},gA=function(t){return t.getParam("skin")===!1},hA=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},v3=function(t){return t.getParam("width",m2.DOM.getStyle(t.getElement(),"width"))},pA=function(t){return D.from(t.getParam("min_width")).filter(za)},bA=function(t){return D.from(t.getParam("min_height")).filter(za)},d3=function(t){return D.from(t.getParam("max_width")).filter(za)},m3=function(t){return D.from(t.getParam("max_height")).filter(za)},yA=function(t){return D.from(t.getParam("style_formats")).filter(ar)},wA=function(t){return t.getParam("style_formats_merge",!1,"boolean")},y5=function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},w5=function(t){return t.getParam("content_langs",void 0,"array")},C5=function(t){return t.getParam("removed_menuitems","")},g3=function(t){return t.getParam("menubar",!0,"boolean")!==!1},h3=function(t){var r=t.getParam("toolbar",!0),o=r===!0,c=Xt(r),v=ar(r)&&r.length>0;return!ex(t)&&(v||c||o)},CA=function(t){var r=ee(9,function(c){return t.getParam("toolbar"+(c+1),!1,"string")}),o=tn(r,function(c){return typeof c=="string"});return o.length>0?D.some(o):D.none()},ex=function(t){return CA(t).fold(function(){var r=t.getParam("toolbar",[],"string[]");return r.length>0},Tt)},Vc;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Vc||(Vc={}));var g2=function(t){return t.getParam("toolbar_mode","","string")},Xh;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Xh||(Xh={}));var S5=function(t){return t.getParam("toolbar_groups",{},"object")},p3=function(t){return t.getParam("toolbar_location",Xh.auto,"string")},SA=function(t){return p3(t)===Xh.bottom},x5=function(t){return t.getParam("fixed_toolbar_container","","string")},T5=function(t){return t.getParam("fixed_toolbar_container_target")},k5=function(t){return t.getParam("toolbar_persist",!1,"boolean")},xA=function(t){if(!t.inline)return D.none();var r=x5(t);if(r.length>0)return _o(Hr(),r);var o=T5(t);return Tn(o)?D.some(re.fromDom(o)):D.none()},tx=function(t){return t.inline&&xA(t).isSome()},h2=function(t){var r=xA(t);return r.getOrThunk(function(){return xt(Cn(re.fromDom(t.getElement())))})},b3=function(t){return t.inline&&!g3(t)&&!h3(t)&&!ex(t)},nx=function(t){var r=t.getParam("toolbar_sticky",!1,"boolean");return(r||t.inline)&&!tx(t)&&!b3(t)},E5=function(t){return t.getParam("toolbar_sticky_offset",0,"number")},O5=function(t){return t.getParam("draggable_modal",!1,"boolean")},A5=function(t){var r=t.getParam("menu");return r?kr(r,function(o){return ue(ue({},o),{items:o.items})}):{}},D5=function(t){return t.getParam("menubar")},y3=function(t){return t.getParam("toolbar",!0)},TA=function(t){return t.getParam("file_picker_callback")},kA=function(t){return t.getParam("file_picker_types")},R5=function(t){return t.getParam("file_browser_callback_types")},EA=function(t){return t.getParam("typeahead_urls")===!1},_5=function(t){return t.getParam("anchor_top","#top")},B5=function(t){return t.getParam("anchor_bottom","#bottom")},M5=function(t){var r=t.getParam("file_picker_validator_handler",void 0,"function");return r===void 0?t.getParam("filepicker_validator_handler",void 0,"function"):r},w3="silver.readonly",P5=Yt([TT("readonly")]),pb=function(t,r){var o=t.outerContainer,c=o.element;r&&(t.mothership.broadcastOn([Nd()],{target:c}),t.uiMothership.broadcastOn([Nd()],{target:c})),t.mothership.broadcastOn([w3],{readonly:r}),t.uiMothership.broadcastOn([w3],{readonly:r})},OA=function(t,r){t.on("init",function(){t.mode.isReadOnly()&&pb(r,!0)}),t.on("SwitchMode",function(){return pb(r,t.mode.isReadOnly())}),f3(t)&&t.setMode("readonly")},ei=function(){var t;return ps.config({channels:(t={},t[w3]={schema:P5,onReceive:function(r,o){Zt.set(r,o.readonly)}},t)})},N5=function(t){return Zt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},$5=function(t){return Zt.config({disabled:t})},C3=function(t){return Zt.config({disabled:t,disableClass:"tox-tbtn--disabled"})},S3=function(t){return Zt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Uc={item:N5,button:$5,splitButton:C3,toolbarButton:S3},p2=function(t,r){var o=t.getApi(r);return function(c){c(o)}},b2=function(t,r){return Ma(function(o){var c=p2(t,o);c(function(v){var m=t.onSetup(v);or(m)&&r.set(m)})})},y2=function(t,r){return ms(function(o){return p2(t,o)(r.get())})},bb,x3=function(t,r){return Rc(function(o,c){p2(t,o)(t.onAction),!t.triggersSubmenu&&r===Lf.CLOSE_ON_EXECUTE&&(er(o,Wg()),c.stop())})},rx=(bb={},bb[$s()]=["disabling","alloy.base.behaviour","toggling","item-events"],bb),Yh=pr,yb=function(t,r,o,c){var v=nn(at);return{type:"item",dom:r.dom,components:Yh(r.optComponents),data:t.data,eventOrder:rx,hasSubmenu:t.triggersSubmenu,itemBehaviours:vt([Fn("item-events",[x3(t,o),b2(t,v),y2(t,v)]),Uc.item(function(){return t.disabled||c.isDisabled()}),ei(),On.config({})].concat(t.itemBehaviours))}},wb=function(t){return{value:t.value,meta:ue({text:t.text.getOr("")},t.meta)}},T3=tinymce.util.Tools.resolve("tinymce.Env"),z5=function(t){var r={alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"},o={meta:"Ctrl",access:"Shift+Alt"},c=T3.mac?r:o,v=t.split("+"),m=nt(v,function(p){var C=p.toLowerCase().trim();return hr(c,C)?c[C]:p});return T3.mac?m.join(""):m.join("+")},k3=function(t,r,o){return o===void 0&&(o=[J4]),Ff(t,{tag:"div",classes:o},r)},AA=function(t){return{dom:{tag:"div",classes:[qS]},components:[fv(Hc.translate(t))]}},DA=function(t,r){return{dom:{tag:"div",classes:r,innerHtml:t}}},I5=function(t,r){return{dom:{tag:"div",classes:[qS]},components:[{dom:{tag:t.tag,styles:t.styles},components:[fv(Hc.translate(r))]}]}},F5=function(t){return{dom:{tag:"div",classes:[Z4],innerHtml:z5(t)}}},RA=function(t){return k3("checkmark",t,[Q4])},L5=function(t){return k3("chevron-right",t,[jO])},H5=function(t){return k3("chevron-down",t,[jO])},V5=function(t,r){var o=t.direction==="vertical"?qO:e3,c=t.align==="left"?n5:t5,v=function(){switch(t.valign){case"top":return r5;case"middle":return a5;case"bottom":return o5}};return{dom:{tag:"div",classes:[GO,o,c,v()]},components:r}},_A=function(t,r,o){return{dom:{tag:"img",classes:r,attributes:{src:t,alt:o.getOr("")}}}},U5=function(t,r,o){var c="custom",v="remove",m=t.ariaLabel,p=t.value,C=t.iconContent.map(function(k){return DO(k,r.icons,o)}),S=function(){var k=yg,R=C.getOr(""),B=m.map(function(U){return{title:r.translate(U)}}).getOr({}),L={tag:"div",attributes:B,classes:[k]};return p===c?ue(ue({},L),{tag:"button",classes:gt(gt([],L.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:R}):p===v?ue(ue({},L),{classes:gt(gt([],L.classes,!0),["tox-swatch--remove"],!1),innerHtml:R}):ue(ue({},L),{attributes:ue(ue({},L.attributes),{"data-mce-color":p}),styles:{"background-color":p}})};return{dom:S(),optComponents:[]}},BA=function(t){var r=t.map(function(o){return{attributes:{title:Hc.translate(o)}}}).getOr({});return ue({tag:"div",classes:[X4,Y4]},r)},nm=function(t,r,o,c){var v={tag:"div",classes:[J4]},m=function(L){return Ff(L,v,r.icons,c)},p=function(){return D.some({dom:v})},C=o?t.iconContent.map(m).orThunk(p):D.none(),S=t.checkMark,k=D.from(t.meta).fold(function(){return AA},function(L){return hr(L,"style")?Vr(I5,L.style):AA}),R=t.htmlContent.fold(function(){return t.textContent.map(k)},function(L){return D.some(DA(L,[qS]))}),B={dom:BA(t.ariaLabel),optComponents:[C,R,t.shortcutContent.map(F5),S,t.caret]};return B},w2=function(t,r,o,c){return c===void 0&&(c=D.none()),t.presets==="color"?U5(t,r,c):nm(t,r,o,c)},MA=function(t,r){return Gt(t,"tooltipWorker").map(function(o){return[mA.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(c){return{type:"submenu",item:c,overrides:{maxHeightFunction:Wm}}},mode:"follow-highlight",onShow:function(c,v){o(function(m){mA.setComponents(c,[Jg({element:re.fromDom(m)})])})}})]}).getOr([])},E3=function(t){return m2.DOM.encode(t)},bi=function(t,r){var o=Hc.translate(t),c=E3(o);if(r.length>0){var v=new RegExp(p5(r),"gi");return c.replace(v,function(m){return'<span class="tox-autocompleter-highlight">'+m+"</span>"})}else return c},W5=function(t,r,o,c,v,m,p,C){C===void 0&&(C=!0);var S=w2({presets:c,textContent:D.none(),htmlContent:o?t.text.map(function(k){return bi(k,r)}):D.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:D.none(),checkMark:D.none(),caret:D.none(),value:t.value},p.providers,C,t.icon);return yb({data:wb(t),disabled:t.disabled,getApi:ye({}),onAction:function(k){return v(t.value,t.meta)},onSetup:ye(at),triggersSubmenu:!1,itemBehaviours:MA(t.meta,p)},S,m,p.providers)},PA=function(t,r){return nt(t,function(o){switch(o.type){case"cardcontainer":return V5(o,PA(o.items,r));case"cardimage":return _A(o.src,o.classes,o.alt);case"cardtext":var c=o.name.exists(function(m){return Un(r.cardText.highlightOn,m)}),v=c?D.from(r.cardText.matchText).getOr(""):"";return DA(bi(o.text,v),o.classes)}})},j5=function(t,r,o,c){var v=function(p){return{isDisabled:function(){return Zt.isDisabled(p)},setDisabled:function(C){Zt.set(p,C),kt(Yo(p.element,"*"),function(S){p.getSystem().getByDom(S).each(function(k){k.hasConfigured(Zt)&&Zt.set(k,C)})})}}},m={dom:BA(t.label),optComponents:[D.some({dom:{tag:"div",classes:[GO,e3]},components:PA(t.items,c)})]};return yb({data:wb(ue({text:D.none()},t)),disabled:t.disabled,getApi:v,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:D.from(c.itemBehaviours).getOr([])},m,r,o.providers)},G5=function(t,r,o,c,v,m,p,C){C===void 0&&(C=!0);var S=function(R){return{setActive:function(B){dr.set(R,B)},isActive:function(){return dr.isOn(R)},isDisabled:function(){return Zt.isDisabled(R)},setDisabled:function(B){return Zt.set(R,B)}}},k=w2({presets:o,textContent:r?t.text:D.none(),htmlContent:D.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:D.none(),checkMark:r?D.some(RA(p.icons)):D.none(),caret:D.none(),value:t.value},p,C);return $e(yb({data:wb(t),disabled:t.disabled,getApi:S,onAction:function(R){return c(t.value)},onSetup:function(R){return R.setActive(v),at},triggersSubmenu:!1,itemBehaviours:[]},k,m,p),{toggling:{toggleClass:WO,toggleOnExecute:!1,selected:t.active}})},NA=bh(x(),A()),$A=function(t){return{value:t}},zA=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,IA=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,FA=function(t){return zA.test(t)||IA.test(t)},q5=function(t){return oi(t,"#").toUpperCase()},K5=function(t){return FA(t)?D.some({value:q5(t)}):D.none()},X5=function(t){var r=t.value.replace(zA,function(o,c,v,m){return c+c+v+v+m+m});return{value:r}},Y5=function(t){var r=X5(t),o=IA.exec(r.value);return o===null?["FFFFFF","FF","FF","FF"]:o},O3=function(t){var r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},C2=function(t){var r=O3(t.red)+O3(t.green)+O3(t.blue);return $A(r)},LA=Math.min,HA=Math.max,ax=Math.round,J5=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Z5=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Cg=function(t,r,o,c){return{red:t,green:r,blue:o,alpha:c}},A3=function(t){var r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},VA=function(t){var r,o,c,v=(t.hue||0)%360,m=t.saturation/100,p=t.value/100;if(m=HA(0,LA(m,1)),p=HA(0,LA(p,1)),m===0)return r=o=c=ax(255*p),Cg(r,o,c,1);var C=v/60,S=p*m,k=S*(1-Math.abs(C%2-1)),R=p-S;switch(Math.floor(C)){case 0:r=S,o=k,c=0;break;case 1:r=k,o=S,c=0;break;case 2:r=0,o=S,c=k;break;case 3:r=0,o=k,c=S;break;case 4:r=k,o=0,c=S;break;case 5:r=S,o=0,c=k;break;default:r=o=c=0}return r=ax(255*(r+R)),o=ax(255*(o+R)),c=ax(255*(c+R)),Cg(r,o,c,1)},S2=function(t){var r=Y5(t),o=parseInt(r[1],16),c=parseInt(r[2],16),v=parseInt(r[3],16);return Cg(o,c,v,1)},UA=function(t,r,o,c){var v=parseInt(t,10),m=parseInt(r,10),p=parseInt(o,10),C=parseFloat(c);return Cg(v,m,p,C)},WA=function(t){if(t==="transparent")return D.some(Cg(0,0,0,0));var r=J5.exec(t);if(r!==null)return D.some(UA(r[1],r[2],r[3],"1"));var o=Z5.exec(t);return o!==null?D.some(UA(o[1],o[2],o[3],o[4])):D.none()},D3=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},jA=Cg(255,0,0,1),Q5=function(t){return t.fire("SkinLoaded")},eM=function(t,r){return t.fire("SkinLoadError",r)},GA=function(t){return t.fire("ResizeEditor")},R3=function(t,r){return t.fire("ResizeContent",r)},tM=function(t,r){return t.fire("ScrollContent",r)},nM=function(t,r){return t.fire("TextColorChange",r)},x2=function(t,r,o){return{hue:t,saturation:r,value:o}},ox=function(t){var r=0,o=0,c=0,v=t.red/255,m=t.green/255,p=t.blue/255,C=Math.min(v,Math.min(m,p)),S=Math.max(v,Math.max(m,p));if(C===S)return c=C,x2(0,0,c*100);var k=v===C?m-p:p===C?v-m:p-v;return r=v===C?3:p===C?1:5,r=60*(r-k/(S-C)),o=(S-C)/S,c=S,x2(Math.round(r),Math.round(o*100),Math.round(c*100))},rM=function(t){return ox(S2(t))},_3=function(t){return C2(VA(t))},qA=function(t){return K5(t).orThunk(function(){return WA(t).map(C2)}).getOrThunk(function(){var r=document.createElement("canvas");r.height=1,r.width=1;var o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);var c=o.getImageData(0,0,1,1).data,v=c[0],m=c[1],p=c[2],C=c[3];return C2(Cg(v,m,p,C))})},ix=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),B3="tinymce-custom-colors";function aM(t){t===void 0&&(t=10);var r=ix.getItem(B3),o=Xt(r)?JSON.parse(r):[],c=function(S){var k=t-S.length;return k<0?S.slice(0,t):S},v=c(o),m=function(S){wi(v,S).each(p),v.unshift(S),v.length>t&&v.pop(),ix.setItem(B3,JSON.stringify(v))},p=function(S){v.splice(S,1)},C=function(){return v.slice(0)};return{add:m,state:C}}var yi="choiceitem",oM=[{type:yi,text:"Light Green",value:"#BFEDD2"},{type:yi,text:"Light Yellow",value:"#FBEEB8"},{type:yi,text:"Light Red",value:"#F8CAC6"},{type:yi,text:"Light Purple",value:"#ECCAFA"},{type:yi,text:"Light Blue",value:"#C2E0F4"},{type:yi,text:"Green",value:"#2DC26B"},{type:yi,text:"Yellow",value:"#F1C40F"},{type:yi,text:"Red",value:"#E03E2D"},{type:yi,text:"Purple",value:"#B96AD9"},{type:yi,text:"Blue",value:"#3598DB"},{type:yi,text:"Dark Turquoise",value:"#169179"},{type:yi,text:"Orange",value:"#E67E23"},{type:yi,text:"Dark Red",value:"#BA372A"},{type:yi,text:"Dark Purple",value:"#843FA1"},{type:yi,text:"Dark Blue",value:"#236FA1"},{type:yi,text:"Light Gray",value:"#ECF0F1"},{type:yi,text:"Medium Gray",value:"#CED4D9"},{type:yi,text:"Gray",value:"#95A5A6"},{type:yi,text:"Dark Gray",value:"#7E8C8D"},{type:yi,text:"Navy Blue",value:"#34495E"},{type:yi,text:"Black",value:"#000000"},{type:yi,text:"White",value:"#ffffff"}],KA=aM(10),iM=function(t){for(var r=[],o=0;o<t.length;o+=2)r.push({text:t[o+1],value:"#"+qA(t[o]).value,type:"choiceitem"});return r},uM=function(t,r){return t.getParam("color_cols",r,"number")},ux=function(t){return t.getParam("custom_colors")!==!1},XA=function(t){return t.getParam("color_map")},M3=function(t){var r=XA(t);return r!==void 0?iM(r):oM},YA=function(){return nt(KA.state(),function(t){return{type:yi,text:t,value:t}})},JA=function(t){KA.add(t)},P3="#000000",N3=function(t,r){var o;return t.dom.getParents(t.selection.getStart(),function(c){var v;(v=c.style[r==="forecolor"?"color":"background-color"])&&(o=o||v)}),D.from(o)},sM=function(t,r,o){t.undoManager.transact(function(){t.focus(),t.formatter.apply(r,{value:o}),t.nodeChanged()})},cM=function(t,r){t.undoManager.transact(function(){t.focus(),t.formatter.remove(r,{value:null},null,!0),t.nodeChanged()})},lM=function(t){t.addCommand("mceApplyTextcolor",function(r,o){sM(t,r,o)}),t.addCommand("mceRemoveTextcolor",function(r){cM(t,r)})},ZA=function(t){return Math.max(5,Math.ceil(Math.sqrt(t)))},QA=function(t){var r=M3(t),o=ZA(r.length);return uM(t,o)},$3=function(t){var r="choiceitem",o={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},c={type:r,text:"Custom color",icon:"color-picker",value:"custom"};return t?[o,c]:[o]},z3=function(t,r,o,c){if(o==="custom"){var v=aD(t);v(function(m){m.each(function(p){JA(p),t.execCommand("mceApplyTextcolor",r,p),c(p)})},P3)}else o==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",r)):(c(o),t.execCommand("mceApplyTextcolor",r,o))},Cb=function(t,r){return t.concat(YA().concat($3(r)))},eD=function(t,r){return function(o){o(Cb(t,r))}},tD=function(t,r,o){var c=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,o)},nD=function(t,r,o,c,v){t.ui.registry.addSplitButton(r,{tooltip:c,presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:function(m){var p=N3(t,o);return p.bind(function(C){return WA(C).map(function(S){var k=C2(S).value;return Er(m.toLowerCase(),k)})}).getOr(!1)},columns:QA(t),fetch:eD(M3(t),ux(t)),onAction:function(m){z3(t,o,v.get(),at)},onItemAction:function(m,p){z3(t,o,p,function(C){v.set(C),nM(t,{name:r,color:C})})},onSetup:function(m){tD(m,r,v.get());var p=function(C){C.name===r&&tD(m,C.name,C.color)};return t.on("TextColorChange",p),function(){t.off("TextColorChange",p)}}})},rD=function(t,r,o,c){t.ui.registry.addNestedMenuItem(r,{text:c,icon:r==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(v){z3(t,o,v.value,at)}}]}})},aD=function(t){return function(r,o){var c=!1,v=function(C){var S=C.getData(),k=S.colorpicker;c?(r(D.from(k)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",k]))},m=function(C,S){S.name==="hex-valid"&&(c=S.value)},p={colorpicker:o};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:m,onSubmit:v,onClose:at,onCancel:function(){r(D.none())}})}},fM=function(t){lM(t);var r=nn(P3),o=nn(P3);nD(t,"forecolor","forecolor","Text color",r),nD(t,"backcolor","hilitecolor","Background color",o),rD(t,"forecolor","forecolor","Text color"),rD(t,"backcolor","hilitecolor","Background color")},sx=function(t,r,o,c,v,m,p,C){var S=YS(r),k=v!=="color"?"normal":"color",R=oD(r,o,c,k,m,p,C);return JS(t,S,R,c,v)},oD=function(t,r,o,c,v,m,p){return pr(nt(t,function(C){return C.type==="choiceitem"?tA(C).fold(Hf,function(S){return D.some(G5(S,o===1,c,r,m(C.value),v,p,YS(t)))}):D.none()}))},T2=function(t,r){var o=tm(r);if(t===1)return{mode:"menu",moveOnTab:!0};if(t==="auto")return{mode:"grid",selector:"."+o.item,initSize:{numColumns:1,numRows:1}};var c=r==="color"?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+c}},vM=function(t,r){return t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?"."+yg:"."+Y4}}},I3=function(t,r){var o=dM(t,r),c=r.colorinput.getColorCols(),v="color",m=sx(Nt("menu-value"),o,function(C){t.onAction({value:C})},c,v,Lf.CLOSE_ON_EXECUTE,kn,r.shared.providers),p=ue(ue({},m),{markers:tm(v),movement:T2(c,v)});return{type:"widget",data:{value:Nt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[NA.widget(qt.sketch(p))]}},dM=function(t,r){var o=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(function(){return Cb(r.colorinput.getColors(),o)},function(c){return c.concat($3(o))})},iD=Nt("cell-over"),uD=Nt("cell-execute"),mM=function(t,r,o){var c,v=function(C){return un(C,iD,{row:t,col:r})},m=function(C){return un(C,uD,{row:t,col:r})},p=function(C,S){S.stop(),m(C)};return bo({dom:{tag:"div",attributes:(c={role:"button"},c["aria-labelledby"]=o,c)},behaviours:vt([Fn("insert-table-picker-cell",[We(Cf(),bn.focus),We($s(),m),We(Em(),p),We(av(),p)]),dr.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),bn.config({onFocus:v})])})},gM=function(t,r,o){for(var c=[],v=0;v<r;v++){for(var m=[],p=0;p<o;p++)m.push(mM(v,p,t));c.push(m)}return c},hM=function(t,r,o,c,v){for(var m=0;m<c;m++)for(var p=0;p<v;p++)dr.set(t[m][p],m<=r&&p<=o)},pM=function(t){return Jr(t,function(r){return nt(r,Fs)})},sD=function(t,r){return fv(r+"x"+t)},bM=function(t){var r=10,o=10,c=Nt("size-label"),v=gM(c,r,o),m=sD(0,0),p=$r({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:c}},components:[m],behaviours:vt([On.config({})])});return{type:"widget",data:{value:Nt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[NA.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:pM(v).concat(p.asSpec()),behaviours:vt([Fn("insert-table-picker",[Ma(function(C){On.set(p.get(C),[m])}),ov(iD,function(C,S,k){var R=k.event,B=R.row,L=R.col;hM(v,B,L,r,o),On.set(p.get(C),[sD(B+1,L+1)])}),ov(uD,function(C,S,k){var R=k.event,B=R.row,L=R.col;t.onAction({numRows:B+1,numColumns:L+1}),er(C,Wg())})]),sn.config({initSize:{numRows:r,numColumns:o},mode:"flatgrid",selector:'[role="button"]'})])})]}},yM={inserttable:bM,colorswatch:I3},wM=function(t,r){return Gt(yM,t.fancytype).map(function(o){return o(t,r)})},CM=function(t,r,o,c,v){c===void 0&&(c=!0),v===void 0&&(v=!1);var m=v?H5(o.icons):L5(o.icons),p=function(S){return{isDisabled:function(){return Zt.isDisabled(S)},setDisabled:function(k){return Zt.set(S,k)}}},C=w2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,caret:D.some(m),checkMark:D.none(),shortcutContent:t.shortcut},o,c);return yb({data:wb(t),getApi:p,disabled:t.disabled,onAction:at,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,r,o)},cD=function(t,r,o,c){c===void 0&&(c=!0);var v=function(p){return{isDisabled:function(){return Zt.isDisabled(p)},setDisabled:function(C){return Zt.set(p,C)}}},m=w2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,caret:D.none(),checkMark:D.none(),shortcutContent:t.shortcut},o,c);return yb({data:wb(t),getApi:v,disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,r,o)},SM=function(t){var r=t.text.fold(function(){return{}},function(o){return{innerHtml:o}});return{type:"separator",dom:ue({tag:"div",classes:[Y4,e5]},r),components:[]}},xM=function(t,r,o,c){c===void 0&&(c=!0);var v=function(p){return{setActive:function(C){dr.set(p,C)},isActive:function(){return dr.isOn(p)},isDisabled:function(){return Zt.isDisabled(p)},setDisabled:function(C){return Zt.set(p,C)}}},m=w2({iconContent:t.icon,textContent:t.text,htmlContent:D.none(),ariaLabel:t.text,checkMark:D.some(RA(o.icons)),caret:D.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},o,c);return $e(yb({data:wb(t),disabled:t.disabled,getApi:v,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},m,r,o),{toggling:{toggleClass:WO,toggleOnExecute:!1,selected:t.active}})},F3=W5,k2=SM,TM=cD,cx=CM,kM=xM,EM=wM,OM=j5,E2;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(E2||(E2={}));var AM=function(t,r,o,c,v){var m=o.shared.providers,p=function(C){return v?ue(ue({},C),{shortcut:D.none(),icon:C.text.isSome()?D.none():C.icon}):C};switch(t.type){case"menuitem":return v5(t).fold(Hf,function(C){return D.some(TM(p(C),r,m,c))});case"nestedmenuitem":return m5(t).fold(Hf,function(C){return D.some(cx(p(C),r,m,c,v))});case"togglemenuitem":return oA(t).fold(Hf,function(C){return D.some(kM(p(C),r,m,c))});case"separator":return jB(t).fold(Hf,function(C){return D.some(k2(C))});case"fancymenuitem":return rA(t).fold(Hf,function(C){return EM(p(C),o)});default:return console.error("Unknown item in general menu",t),D.none()}},DM=function(t,r,o,c,v,m,p){var C=c===1,S=!C||YS(t);return pr(nt(t,function(k){switch(k.type){case"separator":return qB(k).fold(Hf,function(R){return D.some(k2(R))});case"cardmenuitem":return eA(k).fold(Hf,function(R){return D.some(OM(ue(ue({},R),{onAction:function(B){R.onAction(B),o(R.value,R.meta)}}),v,m,{itemBehaviours:MA(R.meta,m),cardText:{matchText:r,highlightOn:p}}))});case"autocompleteitem":default:return KB(k).fold(Hf,function(R){return D.some(F3(R,r,C,"normal",o,v,m,S))})}}))},L3=function(t,r,o,c,v){var m=YS(r),p=pr(nt(r,function(S){var k=function(B){return v?!hr(B,"text"):m},R=function(B){return AM(B,o,c,k(B),v)};return S.type==="nestedmenuitem"&&S.getSubmenuItems().length<=0?R(ue(ue({},S),{disabled:!0})):R(S)})),C=v?u5:JS;return C(t,m,p,1,"normal")},lD=function(t){return Kr.singleData(t.value,t)},RM=function(t,r,o,c){var v=o===E2.ContentFocus?aS():kh(),m=T2(r,c),p=tm(c);return{dom:t.dom,components:t.components,items:t.items,value:t.value,markers:{selectedItem:p.selectedItem,item:p.item},movement:m,fakeFocus:o===E2.ContentFocus,focusManager:v,menuBehaviours:QS.unnamedEvents(r!=="auto"?[]:[Ma(function(C,S){s3(C,4,p.item).each(function(k){var R=k.numColumns,B=k.numRows;sn.setGridSize(C,B,R)})})])}},_M=function(t,r){var o=Qa(),c=nn(!1),v=bo(Ir.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:vt([Fn("dismissAutocompleter",[We(Ac(),function(){return S()})])]),lazySink:r.getSink})),m=function(){return Ir.isOpen(v)},p=function(){return o.get().isSome()},C=function(){p()&&Ir.hide(v)},S=function(){if(p()){var Z=o.get().map(function(pe){return pe.element});WS(Z.getOr(re.fromDom(t.selection.getNode()))).each(fm),C(),o.clear(),c.set(!1)}},k=ao(function(){return q4(t)}),R=function(Z,pe){var _e=sa(pe,function(ze){return D.from(ze.columns)}).getOr(1);return Jr(pe,function(ze){var ge=ze.items;return DM(ge,ze.matchText,function(ke,Le){var wt=t.selection.getRng();F4(t.dom,wt,Z).fold(function(){return console.error("Lost context. Cursor probably moved")},function(Ue){var St=Ue.range,Ge={hide:function(){S()},reload:function(Ie){C(),K(Ie)}};c.set(!0),ze.onAction(Ge,St,ke,Le),c.set(!1)})},_e,Lf.BUBBLE_TO_SANDBOX,r,ze.highlightOn)})},B=function(Z){if(!p()){var pe=NB(t,Z.range);o.set({triggerChar:Z.triggerChar,element:pe,matchLength:Z.text.length}),c.set(!1)}},L=function(Z,pe,_e,ze){Z.matchLength=pe.text.length;var ge=sa(_e,function(ke){return D.from(ke.columns)}).getOr(1);Ir.showAt(v,qt.sketch(RM(JS("autocompleter-value",!0,ze,ge,"normal"),ge,E2.ContentFocus,"normal")),{anchor:{type:"node",root:re.fromDom(t.getBody()),node:D.from(Z.element)}}),Ir.getContent(v).each(Mr.highlightFirst)},U=function(Z){return o.get().map(function(pe){return F4(t.dom,t.selection.getRng(),pe.triggerChar).bind(function(_e){return NO(t,k,_e,Z)})}).getOrThunk(function(){return WB(t,k)})},K=function(Z){U(Z).fold(S,function(pe){B(pe.context),pe.lookupData.then(function(_e){o.get().map(function(ze){var ge=pe.context;if(ze.triggerChar===ge.triggerChar){var ke=R(ge.triggerChar,_e);ke.length>0?L(ze,ge,_e,ke):ge.text.length-ze.matchLength>=10?S():C()}})})})},ne=z4(function(Z){Z.which!==27&&K()},50),me={onKeypress:ne,cancelIfNecessary:S,isMenuOpen:m,isActive:p,isProcessingAction:c.get,getView:function(){return Ir.getContent(v)}};t.hasPlugin("rtc")===!1&&FB.setup(me,t)},BM={register:_M},O2=function(t,r,o){return du(t,r,o).isSome()},fD=function(t,r){var o=null,c=function(){for(var m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];o=setTimeout(function(){t.apply(null,m),o=null},r)},v=function(){o!==null&&(clearTimeout(o),o=null)};return{cancel:v,schedule:c}},vD=5,H3=400,dD=function(t){var r=t.raw;return r.touches===void 0||r.touches.length!==1?D.none():D.some(r.touches[0])},mD=function(t,r){var o=Math.abs(t.clientX-r.x),c=Math.abs(t.clientY-r.y);return o>vD||c>vD},MM=function(t){var r=Qa(),o=nn(!1),c=fD(function(k){t.triggerEvent(Rp(),k),o.set(!0)},H3),v=function(k){return dD(k).each(function(R){c.cancel();var B={x:R.clientX,y:R.clientY,target:k.target};c.schedule(k),o.set(!1),r.set(B)}),D.none()},m=function(k){return c.cancel(),dD(k).each(function(R){r.on(function(B){mD(R,B)&&r.clear()})}),D.none()},p=function(k){c.cancel();var R=function(B){return Lr(B.target,k.target)};return r.get().filter(R).map(function(B){return o.get()?(k.prevent(),!1):t.triggerEvent(av(),k)})},C=wf([{key:Pl(),value:v},{key:Ec(),value:m},{key:nv(),value:p}]),S=function(k,R){return Gt(C,R).bind(function(B){return B(k)})};return{fireIfReady:S}},PM=function(t){var r=t.raw;return r.which===sg[0]&&!Un(["input","textarea"],wn(t.target))&&!O2(t.target,'[contenteditable="true"]')},V3=function(){return Qt().browser.isFirefox()},A2=function(t,r){return V3()?l1(t,"focus",r):co(t,"focusin",r)},NM=function(t,r){return V3()?l1(t,"blur",r):co(t,"focusout",r)},$M=function(t,r){var o=ue({stopBackspace:!0},r),c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],v=MM(o),m=nt(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(U){return co(t,U,function(K){v.fireIfReady(K,U).each(function(me){me&&K.kill()});var ne=o.triggerEvent(U,K);ne&&K.kill()})}),p=Qa(),C=co(t,"paste",function(U){v.fireIfReady(U,"paste").each(function(ne){ne&&U.kill()});var K=o.triggerEvent("paste",U);K&&U.kill(),p.set(setTimeout(function(){o.triggerEvent(o0(),U)},0))}),S=co(t,"keydown",function(U){var K=o.triggerEvent("keydown",U);K?U.kill():o.stopBackspace&&PM(U)&&U.prevent()}),k=A2(t,function(U){var K=o.triggerEvent("focusin",U);K&&U.kill()}),R=Qa(),B=NM(t,function(U){var K=o.triggerEvent("focusout",U);K&&U.kill(),R.set(setTimeout(function(){o.triggerEvent(a0(),U)},0))}),L=function(){kt(m,function(U){U.unbind()}),S.unbind(),k.unbind(),B.unbind(),C.unbind(),p.on(clearTimeout),R.on(clearTimeout)};return{unbind:L}},gD=function(t,r){var o=Gt(t,"target").getOr(r);return nn(o)},lx=function(t,r){var o=nn(!1),c=nn(!1),v=function(){o.set(!0)},m=function(){c.set(!0)};return{stop:v,cut:m,isStopped:o.get,isCut:c.get,event:t,setSource:r.set,getSource:r.get}},zM=function(t){var r=nn(!1),o=function(){r.set(!0)};return{stop:o,cut:at,isStopped:r.get,isCut:kn,event:t,setSource:Mt("Cannot set source of a broadcasted event"),getSource:Mt("Cannot get source of a broadcasted event")}},D2=Ns.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),U3=function(t,r,o,c,v,m){var p=t(r,c),C=lx(o,v);return p.fold(function(){return m.logEventNoHandlers(r,c),D2.complete()},function(S){var k=S.descHandler,R=m0(k);return R(C),C.isStopped()?(m.logEventStopped(r,S.element,k.purpose),D2.stopped()):C.isCut()?(m.logEventCut(r,S.element,k.purpose),D2.complete()):Fa(S.element).fold(function(){return m.logNoParent(r,S.element,k.purpose),D2.complete()},function(B){return m.logEventResponse(r,S.element,k.purpose),D2.resume(B)})})},hD=function(t,r,o,c,v,m){return U3(t,r,o,c,v,m).fold(Tt,function(p){return hD(t,r,o,p,v,m)},kn)},IM=function(t,r,o,c,v){var m=gD(o,c);return U3(t,r,o,c,m,v)},FM=function(t,r,o){var c=zM(r);return kt(t,function(v){var m=v.descHandler,p=m0(m);p(c)}),c.isStopped()},LM=function(t,r,o,c){return pD(t,r,o,o.target,c)},pD=function(t,r,o,c,v){var m=gD(o,c);return hD(t,r,o,c,m,v)},HM=function(t,r){return{element:t,descHandler:r}},VM=function(t,r){return{id:t,descHandler:r}},UM=function(){var t={},r=function(p,C,S){Gr(S,function(k,R){var B=t[R]!==void 0?t[R]:{};B[C]=d0(k,p),t[R]=B})},o=function(p,C){return Nl(C).bind(function(S){return Gt(p,S)}).map(function(S){return HM(C,S)})},c=function(p){return Gt(t,p).map(function(C){return mo(C,function(S,k){return VM(k,S)})}).getOr([])},v=function(p,C,S){return Gt(t,C).bind(function(k){return xm(S,function(R){return o(k,R)},p)})},m=function(p){Gr(t,function(C,S){hr(C,p)&&delete C[p]})};return{registerId:r,unregisterId:m,filterByType:c,find:v}},WM=function(){var t=UM(),r={},o=function(k){var R=k.element;return Nl(R).getOrThunk(function(){return Cw("uid-",k.element)})},c=function(k,R){var B=r[R];if(B===k)m(k);else throw new Error('The tagId "'+R+'" is already used by: '+li(B.element)+`
Cannot use it for: `+li(k.element)+`
The conflicting element is`+(fn(B.element)?" ":" not ")+"already in the DOM")},v=function(k){var R=o(k);ha(r,R)&&c(k,R);var B=[k];t.registerId(B,R,k.events),r[R]=k},m=function(k){Nl(k.element).each(function(R){delete r[R],t.unregisterId(R)})},p=function(k){return t.filterByType(k)},C=function(k,R,B){return t.find(k,R,B)},S=function(k){return Gt(r,k)};return{find:C,filter:p,register:v,unregister:m,getById:S}},Jh=function(t){var r=t.dom,o=r.attributes,c=W(r,["attributes"]);return{uid:t.uid,dom:ue({tag:"div",attributes:ue({role:"presentation"},o)},c),components:t.components,behaviours:zd(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},Nu=Cs({name:"Container",factory:Jh,configFields:[he("components",[]),Jo("containerBehaviours",[]),he("events",{}),he("domModification",{}),he("eventOrder",{})]}),bD=function(t){var r=function(Z){return Fa(t.element).fold(Tt,function(pe){return Lr(Z,pe)})},o=WM(),c=function(Z,pe){return o.find(r,Z,pe)},v=$M(t.element,{triggerEvent:function(Z,pe){return pd(Z,pe.target,function(_e){return LM(c,Z,pe,_e)})}}),m={debugInfo:ye("real"),triggerEvent:function(Z,pe,_e){pd(Z,pe,function(ze){return pD(c,Z,_e,pe,ze)})},triggerFocus:function(Z,pe){Nl(Z).fold(function(){Ll(Z)},function(_e){pd(rv(),Z,function(ze){return IM(c,rv(),{originator:pe,kill:at,prevent:at,target:Z},Z,ze),!1})})},triggerEscape:function(Z,pe){m.triggerEvent("keydown",Z.element,pe.event)},getByUid:function(Z){return ne(Z)},getByDom:function(Z){return me(Z)},build:bo,addToGui:function(Z){S(Z)},removeFromGui:function(Z){k(Z)},addToWorld:function(Z){p(Z)},removeFromWorld:function(Z){C(Z)},broadcast:function(Z){L(Z)},broadcastOn:function(Z,pe){U(Z,pe)},broadcastEvent:function(Z,pe){K(Z,pe)},isConnected:Tt},p=function(Z){Z.connect(m),Oa(Z.element)||(o.register(Z),kt(Z.components(),p),m.triggerEvent(ud(),Z.element,{target:Z.element}))},C=function(Z){Oa(Z.element)||(kt(Z.components(),C),o.unregister(Z)),Z.disconnect()},S=function(Z){Zi(t,Z)},k=function(Z){ac(Z)},R=function(){v.unbind(),Uu(t.element)},B=function(Z){var pe=o.filter(ec());kt(pe,function(_e){var ze=_e.descHandler,ge=m0(ze);ge(Z)})},L=function(Z){B({universal:!0,data:Z})},U=function(Z,pe){B({universal:!1,channels:Z,data:pe})},K=function(Z,pe){var _e=o.filter(Z);return FM(_e,pe)},ne=function(Z){return o.getById(Z).fold(function(){return In.error(new Error('Could not find component with uid: "'+Z+'" in system.'))},In.value)},me=function(Z){var pe=Nl(Z).getOr("not found");return ne(pe)};return p(t),{root:t,element:t.element,destroy:R,add:S,remove:k,getByUid:ne,getByDom:me,addToWorld:p,removeFromWorld:C,broadcast:L,broadcastOn:U,broadcastEvent:K}},jM=function(t,r){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:nt(t.items,r.interpreter)}},GM=ye([he("prefix","form-field"),Jo("fieldBehaviours",[Jn,yt])]),fx=ye([zc({schema:[He("dom")],name:"label"}),zc({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[He("text")],name:"aria-descriptor"}),pi({factory:{sketch:function(t){var r=Jb(t,["factory"]);return t.factory.sketch(r)}},schema:[He("factory")],name:"field"})]),yD=function(t,r,o,c){var v=Zo(t.fieldBehaviours,[Jn.config({find:function(C){return Qr(C,t,"field")}}),yt.config({store:{mode:"manual",getValue:function(C){return Jn.getCurrent(C).bind(yt.getValue)},setValue:function(C,S){Jn.getCurrent(C).each(function(k){yt.setValue(k,S)})}}})]),m=ga([Ma(function(C,S){var k=LC(C,t,["label","field","aria-descriptor"]);k.field().each(function(R){var B=Nt(t.prefix);k.label().each(function(L){Mn(L.element,"for",B),Mn(R.element,"id",B)}),k["aria-descriptor"]().each(function(L){var U=Nt(t.prefix);Mn(L.element,"id",U),Mn(R.element,"aria-describedby",U)})})})]),p={getField:function(C){return Qr(C,t,"field")},getLabel:function(C){return Qr(C,t,"label")}};return{uid:t.uid,dom:t.dom,components:r,behaviours:v,events:m,apis:p}},Rr=Bu({name:"FormField",configFields:GM(),partFields:fx(),factory:yD,apis:{getField:function(t,r){return t.getField(r)},getLabel:function(t,r){return t.getLabel(r)}}}),qM=function(t,r){return _c({attributes:wf([{key:r.tabAttr,value:"true"}])})},KM=Object.freeze({__proto__:null,exhibit:qM}),XM=[he("tabAttr","data-alloy-tabstop")],yo=so({fields:XM,name:"tabstopping",active:KM}),YM=tinymce.util.Tools.resolve("tinymce.html.Entities"),R2=function(t,r,o,c){var v=wD(t,r,o,c);return Rr.sketch(v)},JM=function(t,r){return R2(t,r,[],[])},wD=function(t,r,o,c){return{dom:CD(o),components:t.toArray().concat([r]),fieldBehaviours:vt(c)}},ZM=function(){return CD([])},CD=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},Sg=function(t,r){return Rr.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(t)}})},vc=Nt("form-component-change"),dc=Nt("form-close"),Wc=Nt("form-cancel"),Lv=Nt("form-action"),Sb=Nt("form-submit"),vx=Nt("form-block"),xb=Nt("form-unblock"),SD=Nt("form-tabchange"),dx=Nt("form-resize"),W3=function(t,r){var o,c=t.label.map(function(B){return Sg(B,r)}),v=function(B){return function(L,U){du(U.event.target,"[data-collection-item-value]").each(function(K){B(L,U,K,Da(K,"data-collection-item-value"))})}},m=function(B,L){var U=nt(L,function(me){var Z=Hc.translate(me.text),pe=t.columns===1?'<div class="tox-collection__item-label">'+Z+"</div>":"",_e='<div class="tox-collection__item-icon">'+me.icon+"</div>",ze={_:" "," - ":" ","-":" "},ge=Z.replace(/\_| \- |\-/g,function(Le){return ze[Le]}),ke=r.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'+ke+'" tabindex="-1" data-collection-item-value="'+YM.encodeAllRaw(me.value)+'" title="'+ge+'" aria-label="'+ge+'">'+_e+pe+"</div>"}),K=t.columns!=="auto"&&t.columns>1?ni(U,t.columns):[U],ne=nt(K,function(me){return'<div class="tox-collection__group">'+me.join("")+"</div>"});il(B.element,ne.join(""))},p=v(function(B,L,U,K){L.stop(),r.isDisabled()||un(B,Lv,{name:t.name,value:K})}),C=[We(Cf(),v(function(B,L,U){Ll(U)})),We(Em(),p),We(av(),p),We(Qs(),v(function(B,L,U){_o(B.element,"."+Gh).each(function(K){Ro(K,Gh)}),vi(U,Gh)})),We(Ri(),v(function(B){_o(B.element,"."+Gh).each(function(L){Ro(L,Gh)})})),Rc(v(function(B,L,U,K){un(B,Lv,{name:t.name,value:K})}))],S=function(B,L){return nt(Yo(B.element,".tox-collection__item"),L)},k=Rr.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Lt},behaviours:vt([Zt.config({disabled:r.isDisabled,onDisabled:function(B){S(B,function(L){vi(L,"tox-collection__item--state-disabled"),Mn(L,"aria-disabled",!0)})},onEnabled:function(B){S(B,function(L){Ro(L,"tox-collection__item--state-disabled"),ui(L,"aria-disabled")})}}),ei(),On.config({}),yt.config({store:{mode:"memory",initialValue:[]},onSetValue:function(B,L){m(B,L),t.columns==="auto"&&s3(B,5,"tox-collection__item").each(function(U){var K=U.numRows,ne=U.numColumns;sn.setGridSize(B,K,ne)}),er(B,dx)}}),yo.config({}),sn.config(vM(t.columns,"normal")),Fn("collection-events",C)]),eventOrder:(o={},o[$s()]=["disabling","alloy.base.behaviour","collection-events"],o)}),R=["tox-form__group--collection"];return R2(c,k,R,[])},mx=ye([Br("data"),he("inputAttributes",{}),he("inputStyles",{}),he("tag","input"),he("inputClasses",[]),Yn("onSetValue"),he("styles",{}),he("eventOrder",{}),Jo("inputBehaviours",[yt,bn]),he("selectOnFocus",!0)]),xD=function(t){return vt([bn.config({onFocus:t.selectOnFocus?function(r){var o=r.element,c=hs(o);o.dom.setSelectionRange(0,c.length)}:at})])},QM=function(t){return ue(ue({},xD(t)),Zo(t.inputBehaviours,[yt.config({store:ue(ue({mode:"manual"},t.data.map(function(r){return{initialValue:r}}).getOr({})),{getValue:function(r){return hs(r.element)},setValue:function(r,o){var c=hs(r.element);c!==o&&Nm(r.element,o)}}),onSetValue:t.onSetValue})]))},TD=function(t){return{tag:t.tag,attributes:ue({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},gx=function(t,r){return{uid:t.uid,dom:TD(t),components:[],behaviours:QM(t),eventOrder:t.eventOrder}},_2=Cs({name:"Input",configFields:mx(),factory:gx}),kD={},ED={exports:kD};(function(t,r,o,c){(function(v,m){typeof r=="object"&&typeof o<"u"?o.exports=m():typeof t=="function"&&t.amd?t(m):(v=typeof globalThis<"u"?globalThis:v||self,v.EphoxContactWrapper=m())})(this,function(){var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof SB<"u"?SB:typeof self<"u"?self:{},m={exports:{}};(function(k){(function(R){var B=setTimeout;function L(){}function U(ge,ke){return function(){ge.apply(ke,arguments)}}function K(ge){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof ge!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ze(ge,this)}function ne(ge,ke){for(;ge._state===3;)ge=ge._value;if(ge._state===0){ge._deferreds.push(ke);return}ge._handled=!0,K._immediateFn(function(){var Le=ge._state===1?ke.onFulfilled:ke.onRejected;if(Le===null){(ge._state===1?me:Z)(ke.promise,ge._value);return}var wt;try{wt=Le(ge._value)}catch(Ue){Z(ke.promise,Ue);return}me(ke.promise,wt)})}function me(ge,ke){try{if(ke===ge)throw new TypeError("A promise cannot be resolved with itself.");if(ke&&(typeof ke=="object"||typeof ke=="function")){var Le=ke.then;if(ke instanceof K){ge._state=3,ge._value=ke,pe(ge);return}else if(typeof Le=="function"){ze(U(Le,ke),ge);return}}ge._state=1,ge._value=ke,pe(ge)}catch(wt){Z(ge,wt)}}function Z(ge,ke){ge._state=2,ge._value=ke,pe(ge)}function pe(ge){ge._state===2&&ge._deferreds.length===0&&K._immediateFn(function(){ge._handled||K._unhandledRejectionFn(ge._value)});for(var ke=0,Le=ge._deferreds.length;ke<Le;ke++)ne(ge,ge._deferreds[ke]);ge._deferreds=null}function _e(ge,ke,Le){this.onFulfilled=typeof ge=="function"?ge:null,this.onRejected=typeof ke=="function"?ke:null,this.promise=Le}function ze(ge,ke){var Le=!1;try{ge(function(wt){Le||(Le=!0,me(ke,wt))},function(wt){Le||(Le=!0,Z(ke,wt))})}catch(wt){if(Le)return;Le=!0,Z(ke,wt)}}K.prototype.catch=function(ge){return this.then(null,ge)},K.prototype.then=function(ge,ke){var Le=new this.constructor(L);return ne(this,new _e(ge,ke,Le)),Le},K.all=function(ge){var ke=Array.prototype.slice.call(ge);return new K(function(Le,wt){if(ke.length===0)return Le([]);var Ue=ke.length;function St(Ie,bt){try{if(bt&&(typeof bt=="object"||typeof bt=="function")){var Vt=bt.then;if(typeof Vt=="function"){Vt.call(bt,function(je){St(Ie,je)},wt);return}}ke[Ie]=bt,--Ue===0&&Le(ke)}catch(je){wt(je)}}for(var Ge=0;Ge<ke.length;Ge++)St(Ge,ke[Ge])})},K.resolve=function(ge){return ge&&typeof ge=="object"&&ge.constructor===K?ge:new K(function(ke){ke(ge)})},K.reject=function(ge){return new K(function(ke,Le){Le(ge)})},K.race=function(ge){return new K(function(ke,Le){for(var wt=0,Ue=ge.length;wt<Ue;wt++)ge[wt].then(ke,Le)})},K._immediateFn=typeof setImmediate=="function"?function(ge){setImmediate(ge)}:function(ge){B(ge,0)},K._unhandledRejectionFn=function(ke){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",ke)},K._setImmediateFn=function(ke){K._immediateFn=ke},K._setUnhandledRejectionFn=function(ke){K._unhandledRejectionFn=ke},k.exports?k.exports=K:R.Promise||(R.Promise=K)})(v)})(m);var p=m.exports,C=function(){return typeof window<"u"?window:Function("return this;")()}(),S={boltExport:C.Promise||p};return S})})(void 0,kD,ED);var Hv=ED.exports.boltExport,j3=function(t){var r=D.none(),o=[],c=function(k){return j3(function(R){v(function(B){R(k(B))})})},v=function(k){p()?S(k):o.push(k)},m=function(k){p()||(r=D.some(k),C(o),o=[])},p=function(){return r.isSome()},C=function(k){kt(k,S)},S=function(k){r.each(function(R){setTimeout(function(){k(R)},0)})};return t(m),{get:v,map:c,isReady:p}},OD=function(t){return j3(function(r){r(t)})},eP={nu:j3,pure:OD},tP=function(t){setTimeout(function(){throw t},0)},Zh=function(t){var r=function(S){t().then(S,tP)},o=function(S){return Zh(function(){return t().then(S)})},c=function(S){return Zh(function(){return t().then(function(k){return S(k).toPromise()})})},v=function(S){return Zh(function(){return t().then(function(){return S.toPromise()})})},m=function(){return eP.nu(r)},p=function(){var S=null;return Zh(function(){return S===null&&(S=t()),S})},C=t;return{map:o,bind:c,anonBind:v,toLazy:m,toCached:p,toPromise:C,get:r}},nP=function(t){return Zh(function(){return new Hv(t)})},rP=function(t){return Zh(function(){return Hv.resolve(t)})},Qi={nu:nP,pure:rP},AD=["input","textarea"],DD=function(t){var r=wn(t);return Un(AD,r)},RD=function(t,r){var o=r.getRoot(t).getOr(t.element);Ro(o,r.invalidClass),r.notify.each(function(c){DD(t.element)&&Mn(t.element,"aria-invalid",!1),c.getContainer(t).each(function(v){il(v,c.validHtml)}),c.onValid(t)})},_D=function(t,r,o,c){var v=r.getRoot(t).getOr(t.element);vi(v,r.invalidClass),r.notify.each(function(m){DD(t.element)&&Mn(t.element,"aria-invalid",!0),m.getContainer(t).each(function(p){il(p,c)}),m.onInvalid(t,c)})},BD=function(t,r,o){return r.validator.fold(function(){return Qi.pure(In.value(!0))},function(c){return c.validate(t)})},G3=function(t,r,o){return r.notify.each(function(c){c.onValidate(t)}),BD(t,r).map(function(c){return t.getSystem().isConnected()?c.fold(function(v){return _D(t,r,o,v),In.error(v)},function(v){return RD(t,r),In.value(v)}):In.error("No longer in system")})},hx=function(t,r){var o=r.getRoot(t).getOr(t.element);return Ou(o,r.invalidClass)},xs=Object.freeze({__proto__:null,markValid:RD,markInvalid:_D,query:BD,run:G3,isInvalid:hx}),MD=function(t,r){return t.validator.map(function(o){return ga([We(o.onEvent,function(c){G3(c,t,r).get(Lt)})].concat(o.validateOnLoad?[Ma(function(c){G3(c,t,r).get(at)})]:[]))}).getOr({})},aP=Object.freeze({__proto__:null,events:MD}),oP=[He("invalidClass"),he("getRoot",D.none),vs("notify",[he("aria","alert"),he("getContainer",D.none),he("validHtml",""),Yn("onValid"),Yn("onInvalid"),Yn("onValidate")]),vs("validator",[He("validate"),he("onEvent","input"),he("validateOnLoad",!0)])],Vv=so({fields:oP,name:"invalidating",active:aP,apis:xs,extra:{validation:function(t){return function(r){var o=yt.getValue(r);return Qi.pure(t(o))}}}}),iP=function(t,r,o,c){return o.getOrCreate(t,r,c)},PD=Object.freeze({__proto__:null,getCoupled:iP}),ND=[Gu("others",Ki(In.value,xc()))],uP=function(){var t={},r=function(c,v,m){var p=ta(v.others);if(p)return Gt(t,m).getOrThunk(function(){var C=Gt(v.others,m).getOrDie("No information found for coupled component: "+m),S=C(c),k=c.getSystem().build(S);return t[m]=k,k});throw new Error("Cannot find coupled component: "+m+". Known coupled components: "+JSON.stringify(p,null,2))},o=ye({});return fi({readState:o,getOrCreate:r})},sP=Object.freeze({__proto__:null,init:uP}),wo=so({fields:ND,name:"coupling",apis:PD,state:sP}),$D=ye("sink"),q3=ye(zc({name:$D(),overrides:ye({dom:{tag:"div"},behaviours:vt([Ru.config({useFixed:Tt})]),events:ga([uo(Ap()),uo(Oc()),uo(Em())])})})),Yl;(function(t){t[t.HighlightFirst=0]="HighlightFirst",t[t.HighlightNone=1]="HighlightNone"})(Yl||(Yl={}));var K3=function(t,r){var o=t.getHotspot(r).getOr(r),c="hotspot",v=t.getAnchorOverrides();return t.layouts.fold(function(){return{type:c,hotspot:o,overrides:v}},function(m){return{type:c,hotspot:o,overrides:v,layouts:m}})},cP=function(t,r,o){var c=t.fetch;return c(o).map(r)},lP=function(t,r,o,c,v,m,p){var C=cP(t,r,c),S=xg(c,t);return C.map(function(k){return k.bind(function(R){return D.from(Kr.sketch(ue(ue({},m.menu()),{uid:ld(""),data:R,highlightImmediately:p===Yl.HighlightFirst,onOpenMenu:function(B,L){var U=S().getOrDie();Ru.position(U,L,{anchor:o}),fr.decloak(v)},onOpenSubmenu:function(B,L,U){var K=S().getOrDie();Ru.position(K,U,{anchor:{type:"submenu",item:L}}),fr.decloak(v)},onRepositionMenu:function(B,L,U){var K=S().getOrDie();Ru.position(K,L,{anchor:o}),kt(U,function(ne){Ru.position(K,ne.triggeredMenu,{anchor:{type:"submenu",item:ne.triggeringItem}})})},onEscape:function(){return bn.focus(c),fr.close(v),D.some(!0)}})))})})},X3=function(t,r,o,c,v,m,p){var C=K3(t,o),S=lP(t,r,C,o,c,v,p);return S.map(function(k){return k.fold(function(){fr.isOpen(c)&&fr.close(c)},function(R){fr.cloak(c),fr.open(c,R),m(c)}),c})},fP=function(t,r,o,c,v,m,p){return fr.close(c),Qi.pure(c)},Tb=function(t,r,o,c,v,m){var p=wo.getCoupled(o,"sandbox"),C=fr.isOpen(p),S=C?fP:X3;return S(t,r,o,p,c,v,m)},vP=function(t,r,o){var c=Jn.getCurrent(r).getOr(r),v=ji(t.element);o?pn(c.element,"min-width",v+"px"):Qc(c.element,v)},xg=function(t,r){return t.getSystem().getByUid(r.uid+"-"+$D()).map(function(o){return function(){return In.value(o)}}).getOrThunk(function(){return r.lazySink.fold(function(){return function(){return In.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(o){return function(){return o(t)}})})},zD=function(t){fr.getState(t).each(function(r){Kr.repositionMenus(r)})},Y3=function(t,r,o){var c=Dw(),v=function(C,S){var k=K3(t,r);c.link(r.element),t.matchWidth&&vP(k.hotspot,S,t.useMinWidth),t.onOpen(k,C,S),o!==void 0&&o.onOpen!==void 0&&o.onOpen(C,S)},m=function(C,S){c.unlink(r.element),o!==void 0&&o.onClose!==void 0&&o.onClose(C,S)},p=xg(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id,role:"listbox"}},behaviours:sc.augment(t.sandboxBehaviours,[yt.config({store:{mode:"memory",initialValue:r}}),fr.config({onOpen:v,onClose:m,isPartOf:function(C,S,k){return gd(S,k)||gd(r,k)},getAttachPoint:function(){return p().getOrDie()}}),Jn.config({find:function(C){return fr.getState(C).bind(function(S){return Jn.getCurrent(S)})}}),ps.config({channels:ue(ue({},Ov({isExtraPart:kn})),fh({doReposition:zD}))})])}},rm=function(t){var r=wo.getCoupled(t,"sandbox");zD(r)},J3=function(){return[he("sandboxClasses",[]),sc.field("sandboxBehaviours",[Jn,ps,fr,yt])]},dP=ye([He("dom"),He("fetch"),Yn("onOpen"),oa("onExecute"),he("getHotspot",D.some),he("getAnchorOverrides",ye({})),Sv(),Jo("dropdownBehaviours",[dr,wo,sn,bn]),He("toggleClass"),he("eventOrder",{}),Br("lazySink"),he("matchWidth",!1),he("useMinWidth",!1),Br("role")].concat(J3())),bl=ye([Hs({schema:[yd()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),q3()]),ID=function(t,r,o,c){var v,m=function(R){return Gt(t.dom,"attributes").bind(function(B){return Gt(B,R)})},p=function(R){fr.getState(R).each(function(B){Kr.highlightPrimary(B)})},C=function(R){var B=p;Tb(t,Lt,R,c,B,Yl.HighlightFirst).get(at)},S={expand:function(R){dr.isOn(R)||Tb(t,Lt,R,c,at,Yl.HighlightNone).get(at)},open:function(R){dr.isOn(R)||Tb(t,Lt,R,c,at,Yl.HighlightFirst).get(at)},isOpen:dr.isOn,close:function(R){dr.isOn(R)&&Tb(t,Lt,R,c,at,Yl.HighlightFirst).get(at)},repositionMenus:function(R){dr.isOn(R)&&rm(R)}},k=function(R,B){return xf(R),D.some(!0)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Zo(t.dropdownBehaviours,[dr.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),wo.config({others:{sandbox:function(R){return Y3(t,R,{onOpen:function(){return dr.on(R)},onClose:function(){return dr.off(R)}})}}}),sn.config({mode:"special",onSpace:k,onEnter:k,onDown:function(R,B){if(yl.isOpen(R)){var L=wo.getCoupled(R,"sandbox");p(L)}else yl.open(R);return D.some(!0)},onEscape:function(R,B){return yl.isOpen(R)?(yl.close(R),D.some(!0)):D.none()}}),bn.config({})]),events:Fh(D.some(C)),eventOrder:ue(ue({},t.eventOrder),(v={},v[$s()]=["disabling","toggling","alloy.base.behaviour"],v)),apis:S,domModification:{attributes:ue(ue({"aria-haspopup":"true"},t.role.fold(function(){return{}},function(R){return{role:R}})),t.dom.tag==="button"?{type:m("type").getOr("button")}:{})}}},yl=Bu({name:"Dropdown",configFields:dP(),partFields:bl(),factory:ID,apis:{open:function(t,r){return t.open(r)},expand:function(t,r){return t.expand(r)},close:function(t,r){return t.close(r)},isOpen:function(t,r){return t.isOpen(r)},repositionMenus:function(t,r){return t.repositionMenus(r)}}}),mP=function(){return _c({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})},gP=function(){return ga([c0(_T(),Tt)])},px=Object.freeze({__proto__:null,events:gP,exhibit:mP}),B2=so({fields:[],name:"unselecting",active:px}),FD=function(t,r){return yl.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:vt([Uc.button(r.providers.isDisabled),ei(),B2.config({}),yo.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:function(o){return Qi.nu(function(c){return t.fetch(c)}).map(function(c){return D.from(lD($e(sx(Nt("menu-value"),c,function(v){t.onItemAction(o,v)},t.columns,t.presets,Lf.CLOSE_ON_EXECUTE,kn,r.providers),{movement:T2(t.columns,t.presets)})))})},parts:{menu:KS(!1,1,t.presets)}})},LD=Nt("color-input-change"),HD=Nt("color-swatch-change"),VD=Nt("color-picker-cancel"),Z3=function(t,r,o){var c=Rr.parts.field({factory:_2,inputClasses:["tox-textfield"],onSetValue:function(S){return Vv.run(S).get(at)},inputBehaviours:vt([Zt.config({disabled:r.providers.isDisabled}),ei(),yo.config({}),Vv.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(S){return Fa(S.element)},notify:{onValid:function(S){var k=yt.getValue(S);un(S,LD,{color:k})}},validator:{validateOnLoad:!1,validate:function(S){var k=yt.getValue(S);if(k.length===0)return Qi.pure(In.value(!0));var R=re.fromTag("span");pn(R,"background-color",k);var B=go(R,"background-color").fold(function(){return In.error("blah")},function(L){return In.value(k)});return Qi.pure(B)}}})]),selectOnFocus:!1}),v=t.label.map(function(S){return Sg(S,r.providers)}),m=function(S,k){un(S,HD,{value:k})},p=function(S,k){C.getOpt(S).each(function(R){k==="custom"?o.colorPicker(function(B){B.fold(function(){return er(R,VD)},function(L){m(R,L),JA(L)})},"#ffffff"):k==="remove"?m(R,""):m(R,k)})},C=$r(FD({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Ho,Ji,Mi]},onLtr:function(){return[Ji,Ho,Mi]}},components:[],fetch:eD(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:p},r));return Rr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:v.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[c,C.asSpec()]}]),fieldBehaviours:vt([Fn("form-field-events",[We(LD,function(S,k){C.getOpt(S).each(function(R){pn(R.element,"background-color",k.event.color)}),un(S,vc,{name:t.name})}),We(HD,function(S,k){Rr.getField(S).each(function(R){yt.setValue(R,k.event.value),Jn.getCurrent(S).each(bn.focus)})}),We(VD,function(S,k){Rr.getField(S).each(function(R){Jn.getCurrent(S).each(bn.focus)})})])])})},hP=zc({schema:[He("dom")],name:"label"}),Tg=function(t){return zc({name:""+t+"-edge",overrides:function(r){var o=r.model.manager.edgeActions[t];return o.fold(function(){return{}},function(c){return{events:ga([qg(Pl(),function(v,m,p){return c(v,p)},[r]),qg(Oc(),function(v,m,p){return c(v,p)},[r]),qg(ad(),function(v,m,p){p.mouseIsDown.get()&&c(v,p)},[r])])}})}})},pP=Tg("top-left"),bP=Tg("top"),yP=Tg("top-right"),wP=Tg("right"),CP=Tg("bottom-right"),UD=Tg("bottom"),WD=Tg("bottom-left"),SP=Tg("left"),xP=pi({name:"thumb",defaults:ye({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:ga([cd(Pl(),t,"spectrum"),cd(Ec(),t,"spectrum"),cd(nv(),t,"spectrum"),cd(Oc(),t,"spectrum"),cd(ad(),t,"spectrum"),cd(t0(),t,"spectrum")])}}}),TP=pi({schema:[Tu("mouseIsDown",function(){return nn(!1)})],name:"spectrum",overrides:function(t){var r=t.model,o=r.manager,c=function(v,m){return o.getValueFromEvent(m).map(function(p){return o.setValueFrom(v,t,p)})};return{behaviours:vt([sn.config({mode:"special",onLeft:function(v){return o.onLeft(v,t)},onRight:function(v){return o.onRight(v,t)},onUp:function(v){return o.onUp(v,t)},onDown:function(v){return o.onDown(v,t)}}),bn.config({})]),events:ga([We(Pl(),c),We(Ec(),c),We(Oc(),c),We(ad(),function(v,m){t.mouseIsDown.get()&&c(v,m)})])}}}),kP=[hP,SP,wP,bP,UD,pP,yP,WD,CP,xP,TP],EP="slider.change.value",kb=ye(EP),jD=function(t){return t.type.indexOf("touch")!==-1},bx=function(t){var r=t.event.raw;if(jD(r)){var o=r;return o.touches!==void 0&&o.touches.length===1?D.some(o.touches[0]).map(function(v){return na(v.clientX,v.clientY)}):D.none()}else{var c=r;return c.clientX!==void 0?D.some(c).map(function(v){return na(v.clientX,v.clientY)}):D.none()}},yx="top",OP="right",GD="bottom",AP="left",Qh=function(t){return t.model.minX},ep=function(t){return t.model.minY},wx=function(t){return t.model.minX-1},tp=function(t){return t.model.minY-1},np=function(t){return t.model.maxX},rp=function(t){return t.model.maxY},Jl=function(t){return t.model.maxX+1},Cx=function(t){return t.model.maxY+1},ap=function(t,r,o){return r(t)-o(t)},Sx=function(t){return ap(t,np,Qh)},M2=function(t){return ap(t,rp,ep)},qD=function(t){return Sx(t)/2},KD=function(t){return M2(t)/2},Eb=function(t){return t.stepSize},Q3=function(t){return t.snapToGrid},XD=function(t){return t.snapStart},P2=function(t){return t.rounded},xx=function(t,r){return t[r+"-edge"]!==void 0},mc=function(t){return xx(t,AP)},YD=function(t){return xx(t,OP)},JD=function(t){return xx(t,yx)},eE=function(t){return xx(t,GD)},Uv=function(t){return t.model.value.get()},ZD=function(t){return{x:t}},QD=function(t){return{y:t}},kg=function(t,r){return{x:t,y:r}},Zl=function(t,r){un(t,kb(),{value:r})},DP=function(t,r){Zl(t,kg(wx(r),tp(r)))},RP=function(t,r){Zl(t,QD(tp(r)))},_P=function(t,r){Zl(t,kg(qD(r),tp(r)))},eR=function(t,r){Zl(t,kg(Jl(r),tp(r)))},BP=function(t,r){Zl(t,ZD(Jl(r)))},MP=function(t,r){Zl(t,kg(Jl(r),KD(r)))},PP=function(t,r){Zl(t,kg(Jl(r),Cx(r)))},tR=function(t,r){Zl(t,QD(Cx(r)))},Tx=function(t,r){Zl(t,kg(qD(r),Cx(r)))},NP=function(t,r){Zl(t,kg(wx(r),Cx(r)))},kx=function(t,r){Zl(t,ZD(wx(r)))},Ob=function(t,r){Zl(t,kg(wx(r),KD(r)))},Ex=function(t,r,o,c){return t<r?t:t>o?o:t===r?r-1:Math.max(r,t-c)},Ox=function(t,r,o,c){return t>o?t:t<r?r:t===o?o+1:Math.min(o,t+c)},tE=function(t,r,o){return Math.max(r,Math.min(o,t))},$P=function(t,r,o,c,v){return v.fold(function(){var m=t-r,p=Math.round(m/c)*c;return tE(r+p,r-1,o+1)},function(m){var p=(t-m)%c,C=Math.round(p/c),S=Math.floor((t-m)/c),k=Math.floor((o-m)/c),R=Math.min(k,S+C),B=m+R*c;return Math.max(m,B)})},zP=function(t,r,o){return Math.min(o,Math.max(t,r))-r},N2=function(t){var r=t.min,o=t.max,c=t.range,v=t.value,m=t.step,p=t.snap,C=t.snapStart,S=t.rounded,k=t.hasMinEdge,R=t.hasMaxEdge,B=t.minBound,L=t.maxBound,U=t.screenRange,K=k?r-1:r,ne=R?o+1:o;if(v<B)return K;if(v>L)return ne;var me=zP(v,B,L),Z=tE(me/U*c+r,K,ne);return p&&Z>=r&&Z<=o?$P(Z,r,o,m,C):S?Math.round(Z):Z},nR=function(t){var r=t.min,o=t.max,c=t.range,v=t.value,m=t.hasMinEdge,p=t.hasMaxEdge,C=t.maxBound,S=t.maxOffset,k=t.centerMinEdge,R=t.centerMaxEdge;return v<r?m?0:k:v>o?p?C:R:(v-r)/c*S},nE="top",rE="right",aE="bottom",$2="left",rR="width",Ts="height",Vf=function(t){return t.element.dom.getBoundingClientRect()},Ql=function(t,r){return t[r]},Ax=function(t){var r=Vf(t);return Ql(r,$2)},oE=function(t){var r=Vf(t);return Ql(r,rE)},Dx=function(t){var r=Vf(t);return Ql(r,nE)},aR=function(t){var r=Vf(t);return Ql(r,aE)},oR=function(t){var r=Vf(t);return Ql(r,rR)},iE=function(t){var r=Vf(t);return Ql(r,Ts)},Uf=function(t,r,o){return(t+r)/2-o},Rx=function(t,r){var o=Vf(t),c=Vf(r),v=Ql(o,$2),m=Ql(o,rE),p=Ql(c,$2);return Uf(v,m,p)},uE=function(t,r){var o=Vf(t),c=Vf(r),v=Ql(o,nE),m=Ql(o,aE),p=Ql(c,nE);return Uf(v,m,p)},op=function(t,r){un(t,kb(),{value:r})},Ab=function(t){return{x:t}},sE=function(t,r,o){var c={min:Qh(r),max:np(r),range:Sx(r),value:o,step:Eb(r),snap:Q3(r),snapStart:XD(r),rounded:P2(r),hasMinEdge:mc(r),hasMaxEdge:YD(r),minBound:Ax(t),maxBound:oE(t),screenRange:oR(t)};return N2(c)},IP=function(t,r,o){var c=sE(t,r,o),v=Ab(c);return op(t,v),c},FP=function(t,r){var o=Qh(r);op(t,Ab(o))},LP=function(t,r){var o=np(r);op(t,Ab(o))},HP=function(t,r,o){var c=t>0?Ox:Ex,v=c(Uv(o).x,Qh(o),np(o),Eb(o));return op(r,Ab(v)),D.some(v)},_x=function(t){return function(r,o){return HP(t,r,o).map(Tt)}},VP=function(t){var r=bx(t);return r.map(function(o){return o.left})},iR=function(t,r,o,c,v){var m=0,p=oR(t),C=c.bind(function(R){return D.some(Rx(R,t))}).getOr(m),S=v.bind(function(R){return D.some(Rx(R,t))}).getOr(p),k={min:Qh(r),max:np(r),range:Sx(r),value:o,hasMinEdge:mc(r),hasMaxEdge:YD(r),minBound:Ax(t),minOffset:m,maxBound:oE(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:S};return nR(k)},cE=function(t,r,o,c,v,m){var p=iR(r,m,o,c,v);return Ax(r)-Ax(t)+p},Wv=function(t,r,o,c){var v=Uv(o),m=cE(t,c.getSpectrum(t),v.x,c.getLeftEdge(t),c.getRightEdge(t),o),p=ji(r.element)/2;pn(r.element,"left",m-p+"px")},Bx=_x(-1),UP=_x(1),WP=D.none,uR=D.none,sR={"top-left":D.none(),top:D.none(),"top-right":D.none(),right:D.some(BP),"bottom-right":D.none(),bottom:D.none(),"bottom-left":D.none(),left:D.some(kx)},lE=Object.freeze({__proto__:null,setValueFrom:IP,setToMin:FP,setToMax:LP,findValueOfOffset:sE,getValueFromEvent:VP,findPositionOfValue:cE,setPositionFromValue:Wv,onLeft:Bx,onRight:UP,onUp:WP,onDown:uR,edgeActions:sR}),z2=function(t,r){un(t,kb(),{value:r})},Eg=function(t){return{y:t}},ip=function(t,r,o){var c={min:ep(r),max:rp(r),range:M2(r),value:o,step:Eb(r),snap:Q3(r),snapStart:XD(r),rounded:P2(r),hasMinEdge:JD(r),hasMaxEdge:eE(r),minBound:Dx(t),maxBound:aR(t),screenRange:iE(t)};return N2(c)},jP=function(t,r,o){var c=ip(t,r,o),v=Eg(c);return z2(t,v),c},GP=function(t,r){var o=ep(r);z2(t,Eg(o))},qP=function(t,r){var o=rp(r);z2(t,Eg(o))},KP=function(t,r,o){var c=t>0?Ox:Ex,v=c(Uv(o).y,ep(o),rp(o),Eb(o));return z2(r,Eg(v)),D.some(v)},cR=function(t){return function(r,o){return KP(t,r,o).map(Tt)}},XP=function(t){var r=bx(t);return r.map(function(o){return o.top})},YP=function(t,r,o,c,v){var m=0,p=iE(t),C=c.bind(function(R){return D.some(uE(R,t))}).getOr(m),S=v.bind(function(R){return D.some(uE(R,t))}).getOr(p),k={min:ep(r),max:rp(r),range:M2(r),value:o,hasMinEdge:JD(r),hasMaxEdge:eE(r),minBound:Dx(t),minOffset:m,maxBound:aR(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:S};return nR(k)},I2=function(t,r,o,c,v,m){var p=YP(r,m,o,c,v);return Dx(r)-Dx(t)+p},up=function(t,r,o,c){var v=Uv(o),m=I2(t,c.getSpectrum(t),v.y,c.getTopEdge(t),c.getBottomEdge(t),o),p=Oo(r.element)/2;pn(r.element,"top",m-p+"px")},JP=D.none,lR=D.none,ZP=cR(-1),QP=cR(1),eN={"top-left":D.none(),top:D.some(RP),"top-right":D.none(),right:D.none(),"bottom-right":D.none(),bottom:D.some(tR),"bottom-left":D.none(),left:D.none()},tN=Object.freeze({__proto__:null,setValueFrom:jP,setToMin:GP,setToMax:qP,findValueOfOffset:ip,getValueFromEvent:XP,findPositionOfValue:I2,setPositionFromValue:up,onLeft:JP,onRight:lR,onUp:ZP,onDown:QP,edgeActions:eN}),Mx=function(t,r){un(t,kb(),{value:r})},F2=function(t,r){return{x:t,y:r}},fE=function(t,r,o){var c=sE(t,r,o.left),v=ip(t,r,o.top),m=F2(c,v);return Mx(t,m),m},nN=function(t,r,o,c){var v=t>0?Ox:Ex,m=r?Uv(c).x:v(Uv(c).x,Qh(c),np(c),Eb(c)),p=r?v(Uv(c).y,ep(c),rp(c),Eb(c)):Uv(c).y;return Mx(o,F2(m,p)),D.some(m)},L2=function(t,r){return function(o,c){return nN(t,r,o,c).map(Tt)}},vE=function(t,r){var o=Qh(r),c=ep(r);Mx(t,F2(o,c))},dE=function(t,r){var o=np(r),c=rp(r);Mx(t,F2(o,c))},fR=function(t){return bx(t)},rN=function(t,r,o,c){var v=Uv(o),m=cE(t,c.getSpectrum(t),v.x,c.getLeftEdge(t),c.getRightEdge(t),o),p=I2(t,c.getSpectrum(t),v.y,c.getTopEdge(t),c.getBottomEdge(t),o),C=ji(r.element)/2,S=Oo(r.element)/2;pn(r.element,"left",m-C+"px"),pn(r.element,"top",p-S+"px")},aN=L2(-1,!1),Px=L2(1,!1),vR=L2(-1,!0),oN=L2(1,!0),iN={"top-left":D.some(DP),top:D.some(_P),"top-right":D.some(eR),right:D.some(MP),"bottom-right":D.some(PP),bottom:D.some(Tx),"bottom-left":D.some(NP),left:D.some(Ob)},uN=Object.freeze({__proto__:null,setValueFrom:fE,setToMin:vE,setToMax:dE,getValueFromEvent:fR,setPositionFromValue:rN,onLeft:aN,onRight:Px,onUp:vR,onDown:oN,edgeActions:iN}),sN=[he("stepSize",1),he("onChange",at),he("onChoose",at),he("onInit",at),he("onDragStart",at),he("onDragEnd",at),he("snapToGrid",!1),he("rounded",!0),Br("snapStart"),Gu("model",Zs("mode",{x:[he("minX",0),he("maxX",100),Tu("value",function(t){return nn(t.mode.minX)}),He("getInitialValue"),Zr("manager",lE)],y:[he("minY",0),he("maxY",100),Tu("value",function(t){return nn(t.mode.minY)}),He("getInitialValue"),Zr("manager",tN)],xy:[he("minX",0),he("maxX",100),he("minY",0),he("maxY",100),Tu("value",function(t){return nn({x:t.mode.minX,y:t.mode.minY})}),He("getInitialValue"),Zr("manager",uN)]})),Jo("sliderBehaviours",[sn,yt]),Tu("mouseIsDown",function(){return nn(!1)})],am=function(t,r,o,c){var v,m=function(ge){return Gl(ge,t,"thumb")},p=function(ge){return Gl(ge,t,"spectrum")},C=function(ge){return Qr(ge,t,"left-edge")},S=function(ge){return Qr(ge,t,"right-edge")},k=function(ge){return Qr(ge,t,"top-edge")},R=function(ge){return Qr(ge,t,"bottom-edge")},B=t.model,L=B.manager,U=function(ge,ke){L.setPositionFromValue(ge,ke,t,{getLeftEdge:C,getRightEdge:S,getTopEdge:k,getBottomEdge:R,getSpectrum:p})},K=function(ge,ke){B.value.set(ke);var Le=m(ge);U(ge,Le)},ne=function(ge,ke){K(ge,ke);var Le=m(ge);return t.onChange(ge,Le,ke),D.some(!0)},me=function(ge){L.setToMin(ge,t)},Z=function(ge){L.setToMax(ge,t)},pe=function(ge){var ke=function(){Qr(ge,t,"thumb").each(function(wt){var Ue=B.value.get();t.onChoose(ge,wt,Ue)})},Le=t.mouseIsDown.get();t.mouseIsDown.set(!1),Le&&ke()},_e=function(ge,ke){ke.stop(),t.mouseIsDown.set(!0),t.onDragStart(ge,m(ge))},ze=function(ge,ke){ke.stop(),t.onDragEnd(ge,m(ge)),pe(ge)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Zo(t.sliderBehaviours,[sn.config({mode:"special",focusIn:function(ge){return Qr(ge,t,"spectrum").map(sn.focusIn).map(Tt)}}),yt.config({store:{mode:"manual",getValue:function(ge){return B.value.get()}}}),ps.config({channels:(v={},v[ws()]={onReceive:pe},v)})]),events:ga([We(kb(),function(ge,ke){ne(ge,ke.event.value)}),Ma(function(ge,ke){var Le=B.getInitialValue();B.value.set(Le);var wt=m(ge);U(ge,wt);var Ue=p(ge);t.onInit(ge,wt,Ue,B.value.get())}),We(Pl(),_e),We(nv(),ze),We(Oc(),_e),We(t0(),ze)]),apis:{resetToMin:me,resetToMax:Z,setValue:K,refresh:U},domModification:{styles:{position:"relative"}}}},jc=Bu({name:"Slider",configFields:sN,partFields:kP,factory:am,apis:{setValue:function(t,r,o){t.setValue(r,o)},resetToMin:function(t,r){t.resetToMin(r)},resetToMax:function(t,r){t.resetToMax(r)},refresh:function(t,r){t.refresh(r)}}}),Nx=Nt("rgb-hex-update"),mE=Nt("slider-update"),$x=Nt("palette-update"),dR=function(t,r){var o=jc.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=jc.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return jc.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:ye({y:0})},components:[o,c],sliderBehaviours:vt([bn.config({})]),onChange:function(v,m,p){un(v,mE,{value:p})}})},H2="form",mR=[Jo("formBehaviours",[yt])],gE=function(t){return"<alloy.field."+t+">"},cN=function(t){var r=function(){var m=[],p=function(C,S){return m.push(C),Sy(H2,gE(C),S)};return{field:p,record:ye(m)}}(),o=t(r),c=r.record(),v=nt(c,function(m){return pi({name:m,pname:gE(m)})});return Ay(H2,mR,v,fN,o)},lN=function(t,r){return t.fold(function(){return In.error(r)},In.value)},fN=function(t,r){return{uid:t.uid,dom:t.dom,components:r,behaviours:Zo(t.formBehaviours,[yt.config({store:{mode:"manual",getValue:function(o){var c=ky(o,t);return kr(c,function(v,m){return v().bind(function(p){var C=Jn.getCurrent(p);return lN(C,new Error("Cannot find a current component to extract the value from for form part '"+m+"': "+li(p.element)))}).map(yt.getValue)})},setValue:function(o,c){Gr(c,function(v,m){Qr(o,t,m).each(function(p){Jn.getCurrent(p).each(function(C){yt.setValue(C,v)})})})}}})]),apis:{getField:function(o,c){return Qr(o,t,c).bind(Jn.getCurrent)}}}},Db={getField:dd(function(t,r,o){return t.getField(r,o)}),sketch:cN},hE=Nt("valid-input"),pE=Nt("invalid-input"),gR=Nt("validating-input"),bE="colorcustom.rgb.",vN=function(t,r,o,c){var v=function(L,U){return Vv.config({invalidClass:r("invalid"),notify:{onValidate:function(K){un(K,gR,{type:L})},onValid:function(K){un(K,hE,{type:L,value:yt.getValue(K)})},onInvalid:function(K){un(K,pE,{type:L,value:yt.getValue(K)})}},validator:{validate:function(K){var ne=yt.getValue(K),me=U(ne)?In.value(!0):In.error(t("aria.input.invalid"));return Qi.pure(me)},validateOnLoad:!1}})},m=function(L,U,K,ne,me){var Z=t(bE+"range"),pe=Rr.parts.label({dom:{tag:"label",innerHtml:K,attributes:{"aria-label":ne}}}),_e=Rr.parts.field({data:me,factory:_2,inputAttributes:ue({type:"text"},U==="hex"?{"aria-live":"polite"}:{}),inputClasses:[r("textfield")],inputBehaviours:vt([v(U,L),yo.config({})]),onSetValue:function(Le){if(Vv.isInvalid(Le)){var wt=Vv.run(Le);wt.get(at)}}}),ze=[pe,_e],ge=U!=="hex"?[Rr.parts["aria-descriptor"]({text:Z})]:[],ke=ze.concat(ge);return{dom:{tag:"div",attributes:{role:"presentation"}},components:ke}},p=function(L,U){var K=C2(U);return Db.getField(L,"hex").each(function(ne){bn.isFocused(ne)||yt.setValue(L,{hex:K.value})}),K},C=function(L,U){var K=U.red,ne=U.green,me=U.blue;yt.setValue(L,{red:K,green:ne,blue:me})},S=$r({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),k=function(L,U){S.getOpt(L).each(function(K){pn(K.element,"background-color","#"+U.value)})},R=function(){var L={red:nn(D.some(255)),green:nn(D.some(255)),blue:nn(D.some(255)),hex:nn(D.some("ffffff"))},U=function(Ie,bt){var Vt=S2(bt);C(Ie,Vt),Z(Vt)},K=function(Ie){return L[Ie].get()},ne=function(Ie,bt){L[Ie].set(bt)},me=function(){return K("red").bind(function(Ie){return K("green").bind(function(bt){return K("blue").map(function(Vt){return Cg(Ie,bt,Vt,1)})})})},Z=function(Ie){var bt=Ie.red,Vt=Ie.green,je=Ie.blue;ne("red",D.some(bt)),ne("green",D.some(Vt)),ne("blue",D.some(je))},pe=function(Ie,bt){var Vt=bt.event;Vt.type!=="hex"?ne(Vt.type,D.none()):c(Ie)},_e=function(Ie,bt){o(Ie);var Vt=$A(bt);ne("hex",D.some(bt));var je=S2(Vt);C(Ie,je),Z(je),un(Ie,Nx,{hex:Vt}),k(Ie,Vt)},ze=function(Ie,bt,Vt){var je=parseInt(Vt,10);ne(bt,D.some(je)),me().each(function(It){var Kt=p(Ie,It);un(Ie,Nx,{hex:Kt}),k(Ie,Kt)})},ge=function(Ie){return Ie.type==="hex"},ke=function(Ie,bt){var Vt=bt.event;ge(Vt)?_e(Ie,Vt.value):ze(Ie,Vt.type,Vt.value)},Le=function(Ie){return{label:t(bE+Ie+".label"),description:t(bE+Ie+".description")}},wt=Le("red"),Ue=Le("green"),St=Le("blue"),Ge=Le("hex");return $e(Db.sketch(function(Ie){return{dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Ie.field("red",Rr.sketch(m(A3,"red",wt.label,wt.description,255))),Ie.field("green",Rr.sketch(m(A3,"green",Ue.label,Ue.description,255))),Ie.field("blue",Rr.sketch(m(A3,"blue",St.label,St.description,255))),Ie.field("hex",Rr.sketch(m(FA,"hex",Ge.label,Ge.description,"ffffff"))),S.asSpec()],formBehaviours:vt([Vv.config({invalidClass:r("form-invalid")}),Fn("rgb-form-events",[We(hE,ke),We(pE,pe),We(gR,pe)])])}}),{apis:{updateHex:function(Ie,bt){yt.setValue(Ie,{hex:bt.value}),U(Ie,bt),k(Ie,bt)}}})},B=Cs({factory:R,name:"RgbForm",configFields:[],apis:{updateHex:function(L,U,K){L.updateHex(U,K)}},extraApis:{}});return B},zx=function(t,r){var o=jc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),c=jc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:"<div class="+r("sv-palette-inner-thumb")+' role="presentation"></div>'}}),v=function(k,R){var B=k.width,L=k.height,U=k.getContext("2d");if(U!==null){U.fillStyle=R,U.fillRect(0,0,B,L);var K=U.createLinearGradient(0,0,B,0);K.addColorStop(0,"rgba(255,255,255,1)"),K.addColorStop(1,"rgba(255,255,255,0)"),U.fillStyle=K,U.fillRect(0,0,B,L);var ne=U.createLinearGradient(0,0,0,L);ne.addColorStop(0,"rgba(0,0,0,0)"),ne.addColorStop(1,"rgba(0,0,0,1)"),U.fillStyle=ne,U.fillRect(0,0,B,L)}},m=function(k,R){var B=k.components()[0].element.dom,L=x2(R,100,100),U=VA(L);v(B,D3(U))},p=function(k,R){var B=ox(S2(R));jc.setValue(k,{x:B.saturation,y:100-B.value})},C=function(k){var R=ye({x:0,y:0}),B=function(K,ne,me){un(K,$x,{value:me})},L=function(K,ne,me,Z){v(me.element.dom,D3(jA))},U=vt([Jn.config({find:D.some}),bn.config({})]);return jc.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:R},rounded:!1,components:[o,c],onChange:B,onInit:L,sliderBehaviours:U})},S=Cs({factory:C,name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(k,R,B){m(R,B)},setThumb:function(k,R,B){p(R,B)}},extraApis:{}});return S},dN=function(t,r){var o=function(v){var m=vN(t,r,v.onValidHex,v.onInvalidHex),p=zx(t,r),C=function(ke){return(100-ke)/100*360},S=function(ke){return 100-ke/360*100},k={paletteRgba:nn(jA),paletteHue:nn(0)},R=$r(dR(t,r)),B=$r(p.sketch({})),L=$r(m.sketch({})),U=function(ke,Le,wt){B.getOpt(ke).each(function(Ue){p.setHue(Ue,wt)})},K=function(ke,Le){L.getOpt(ke).each(function(wt){m.updateHex(wt,Le)})},ne=function(ke,Le,wt){R.getOpt(ke).each(function(Ue){jc.setValue(Ue,{y:S(wt)})})},me=function(ke,Le){B.getOpt(ke).each(function(wt){p.setThumb(wt,Le)})},Z=function(ke,Le){var wt=S2(ke);k.paletteRgba.set(wt),k.paletteHue.set(Le)},pe=function(ke,Le,wt,Ue){Z(Le,wt),kt(Ue,function(St){St(ke,Le,wt)})},_e=function(){var ke=[K];return function(Le,wt){var Ue=wt.event.value,St=k.paletteHue.get(),Ge=x2(St,Ue.x,100-Ue.y),Ie=_3(Ge);pe(Le,Ie,St,ke)}},ze=function(){var ke=[U,K];return function(Le,wt){var Ue=C(wt.event.value.y),St=k.paletteRgba.get(),Ge=ox(St),Ie=x2(Ue,Ge.saturation,Ge.value),bt=_3(Ie);pe(Le,bt,Ue,ke)}},ge=function(){var ke=[U,ne,me];return function(Le,wt){var Ue=wt.event.hex,St=rM(Ue);pe(Le,Ue,St.hue,ke)}};return{uid:v.uid,dom:v.dom,components:[B.asSpec(),R.asSpec(),L.asSpec()],behaviours:vt([Fn("colour-picker-events",[We(Nx,ge()),We($x,_e()),We(mE,ze())]),Jn.config({find:function(ke){return L.getOpt(ke)}}),sn.config({mode:"acyclic"})])}},c=Cs({name:"ColourPicker",configFields:[He("dom"),he("onValidHex",at),he("onInvalidHex",at)],factory:o});return c},mN=function(){return Jn.config({find:D.some})},hR=function(t){return Jn.config({find:t.getOpt})},pR=function(t){return Jn.config({find:function(r){return T(r.element,t).bind(function(o){return r.getSystem().getByDom(o).toOptional()})}})},Wf={self:mN,memento:hR,childAt:pR},gN={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},Ix=function(t){return gN[t]},hN=function(t){return Ix(t)},pN=function(t){var r=function(p){return"tox-"+p},o=dN(hN,r),c=function(p){un(p,Lv,{name:"hex-valid",value:!0})},v=function(p){un(p,Lv,{name:"hex-valid",value:!1})},m=$r(o.sketch({dom:{tag:"div",classes:[r("color-picker-container")],attributes:{role:"presentation"}},onValidHex:c,onInvalidHex:v}));return{dom:{tag:"div"},components:[m.asSpec()],behaviours:vt([yt.config({store:{mode:"manual",getValue:function(p){var C=m.get(p),S=Jn.getCurrent(C),k=S.bind(function(R){var B=yt.getValue(R);return B.hex});return k.map(function(R){return"#"+R}).getOr("")},setValue:function(p,C){var S=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,k=S.exec(C),R=m.get(p),B=Jn.getCurrent(R);B.fold(function(){console.log("Can not find form")},function(L){yt.setValue(L,{hex:D.from(k[1]).getOr("")}),Db.getField(L,"hex").each(function(U){er(U,od())})})}}}),Wf.self()])}},bN=tinymce.util.Tools.resolve("tinymce.Resource"),yN=function(t){return hr(t,"init")},Fx=function(t){var r=Qa(),o=$r({dom:{tag:t.tag}}),c=Qa();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:vt([Fn("custom-editor-events",[Ma(function(v){o.getOpt(v).each(function(m){(yN(t)?t.init(m.element.dom):bN.load(t.scriptId,t.scriptUrl).then(function(p){return p(m.element.dom,t.settings)})).then(function(p){c.on(function(C){p.setValue(C)}),c.clear(),r.set(p)})})})]),yt.config({store:{mode:"manual",getValue:function(){return r.get().fold(function(){return c.get().getOr("")},function(v){return v.getValue()})},setValue:function(v,m){r.get().fold(function(){c.set(m)},function(p){return p.setValue(m)})}}}),Wf.self()]),components:[o.asSpec()]}},jv=tinymce.util.Tools.resolve("tinymce.util.Tools"),wN=Yt([he("preprocess",Lt),he("postprocess",Lt)]),CN=function(t,r){var o=zr("RepresentingConfigs.memento processors",wN,r);return yt.config({store:{mode:"manual",getValue:function(c){var v=t.get(c),m=yt.getValue(v);return o.postprocess(m)},setValue:function(c,v){var m=o.preprocess(v),p=t.get(c);yt.setValue(p,m)}}})},V2=function(t,r,o){return yt.config($e({store:{mode:"manual",getValue:r,setValue:o}},t.map(function(c){return{store:{initialValue:c}}}).getOr({})))},yE=function(t,r,o){return V2(t,function(c){return r(c.element)},function(c,v){return o(c.element,v)})},wE=function(t){return yE(t,hs,Nm)},bR=function(t){return yE(t,Ku,il)},SN=function(t){return yt.config({store:{mode:"memory",initialValue:t}})},sp={memento:CN,withElement:yE,withComp:V2,domValue:wE,domHtml:bR,memory:SN},yR="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",wR=function(t,r){var o=jv.explode(r.getSetting("images_file_types",yR,"string")),c=function(v){return Ca(o,function(m){return Jt(v.name.toLowerCase(),"."+m.toLowerCase())})};return tn(Go(t),c)},xN=function(t,r){var o=function(B,L){L.stop()},c=function(B){return function(L,U){kt(B,function(K){K(L,U)})}},v=function(B,L){if(!Zt.isDisabled(B)){var U=L.event.raw;p(B,U.dataTransfer.files)}},m=function(B,L){var U=L.event.raw.target;p(B,U.files)},p=function(B,L){yt.setValue(B,wR(L,r)),un(B,vc,{name:t.name})},C=$r({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:vt([Fn("input-file-events",[uo(Em()),uo(av())])])}),S=function(B){return{uid:B.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:vt([sp.memory([]),Wf.self(),Zt.config({}),dr.config({toggleClass:"dragenter",toggleOnExecute:!1}),Fn("dropzone-events",[We("dragenter",c([o,dr.toggle])),We("dragleave",c([o,dr.toggle])),We("dragover",o),We("drop",c([o,v])),We(km(),m)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:r.translate("Drop an image here")}},Pu.sketch({dom:{tag:"button",innerHtml:r.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[C.asSpec()],action:function(L){var U=C.get(L);U.element.dom.click()},buttonBehaviours:vt([yo.config({}),Uc.button(r.isDisabled),ei()])})]}]}},k=t.label.map(function(B){return Sg(B,r)}),R=Rr.parts.field({factory:{sketch:S}});return R2(k,R,["tox-form__group--stretched"],[])},CR=function(t,r){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:nt(t.items,r.interpreter)}},Lx=Nt("alloy-fake-before-tabstop"),Hx=Nt("alloy-fake-after-tabstop"),CE=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:vt([bn.config({ignore:!0}),yo.config({})])}},SR=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[CE([Lx]),t,CE([Hx])],behaviours:vt([Wf.childAt(1)])}},xR=function(t,r){un(t,Ap(),{raw:{which:9,shiftKey:r}})},TN=function(t,r){var o=r.element;Ou(o,Lx)?xR(t,!0):Ou(o,Hx)&&xR(t,!1)},Rb=function(t){return O2(t,["."+Lx,"."+Hx].join(","),kn)},kN=!(Qt().browser.isIE()||Qt().browser.isEdge()),TR=function(t){var r=nn("");return{getValue:function(o){return r.get()},setValue:function(o,c){if(t)Mn(o.element,"srcdoc",c);else{Mn(o.element,"src","javascript:''");var v=o.element.dom.contentWindow.document;v.open(),v.write(c),v.close()}r.set(c)}}},EN=function(t,r){var o=kN&&t.sandboxed,c=ue(ue({},t.label.map(function(S){return{title:S}}).getOr({})),o?{sandbox:"allow-scripts allow-same-origin"}:{}),v=TR(o),m=t.label.map(function(S){return Sg(S,r)}),p=function(S){return SR({uid:S.uid,dom:{tag:"iframe",attributes:c},behaviours:vt([yo.config({}),bn.config({}),sp.withComp(D.none(),v.getValue,v.setValue)])})},C=Rr.parts.field({factory:{sketch:p}});return R2(m,C,["tox-form__group--stretched"],[])},_b=function(t,r){return ON(document.createElement("canvas"),t,r)},SE=function(t){var r=_b(t.width,t.height),o=om(r);return o.drawImage(t,0,0),r},om=function(t){return t.getContext("2d")},ON=function(t,r,o){return t.width=r,t.height=o,t},xE=function(t){return t.naturalWidth||t.width},TE=function(t){return t.naturalHeight||t.height},AN=function(t){return new Hv(function(r,o){var c=URL.createObjectURL(t),v=new Image,m=function(){v.removeEventListener("load",p),v.removeEventListener("error",C)},p=function(){m(),r(v)},C=function(){m(),o("Unable to load data of type "+t.type+": "+c)};v.addEventListener("load",p),v.addEventListener("error",C),v.src=c,v.complete&&setTimeout(p,0)})},DN=function(t){var r=t.split(","),o=/data:([^;]+)/.exec(r[0]);if(!o)return D.none();for(var c=o[1],v=r[1],m=1024,p=atob(v),C=p.length,S=Math.ceil(C/m),k=new Array(S),R=0;R<S;++R){for(var B=R*m,L=Math.min(B+m,C),U=new Array(L-B),K=B,ne=0;K<L;++ne,++K)U[ne]=p[K].charCodeAt(0);k[R]=new Uint8Array(U)}return D.some(new Blob(k,{type:c}))},RN=function(t){return new Hv(function(r,o){DN(t).fold(function(){o("uri is not base64: "+t)},r)})},kE=function(t,r,o){return r=r||"image/png",or(HTMLCanvasElement.prototype.toBlob)?new Hv(function(c,v){t.toBlob(function(m){m?c(m):v()},r,o)}):RN(t.toDataURL(r,o))},_N=function(t,r,o){return r=r||"image/png",t.toDataURL(r,o)},BN=function(t){return AN(t).then(function(r){MN(r);var o=_b(xE(r),TE(r)),c=om(o);return c.drawImage(r,0,0),o})},kR=function(t){return new Hv(function(r){var o=new FileReader;o.onloadend=function(){r(o.result)},o.readAsDataURL(t)})},MN=function(t){URL.revokeObjectURL(t.src)},ER=function(t,r,o){var c=r.type,v=ye(c),m=function(){return Hv.resolve(r)},p=ye(o),C=function(){return o.split(",")[1]},S=function(L,U){return t.then(function(K){return kE(K,L,U)})},k=function(L,U){return t.then(function(K){return _N(K,L,U)})},R=function(L,U){return k(L,U).then(function(K){return K.split(",")[1]})},B=function(){return t.then(SE)};return{getType:v,toBlob:m,toDataURL:p,toBase64:C,toAdjustedBlob:S,toAdjustedDataURL:k,toAdjustedBase64:R,toCanvas:B}},PN=function(t){return kR(t).then(function(r){return ER(BN(t),t,r)})},Og=function(t,r){return kE(t,r).then(function(o){return ER(Hv.resolve(t),o,t.toDataURL())})},NN=function(t){return PN(t)},U2=function(t,r,o){var c=typeof t=="string"?parseFloat(t):t;return c>o?c=o:c<r&&(c=r),c},EE=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},Vx=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],Ux=function(t,r){for(var o=[],c=new Array(25),v,m=0;m<5;m++){for(var p=0;p<5;p++)o[p]=r[p+m*5];for(var p=0;p<5;p++){v=0;for(var C=0;C<5;C++)v+=t[p+C*5]*o[C];c[p+m*5]=v}}return c},$N=function(t,r){var o;return r=U2(r,-1,1),r*=100,r<0?o=127+r/100*127:(o=r%1,o===0?o=Vx[r]:o=Vx[Math.floor(r)]*(1-o)+Vx[Math.floor(r)+1]*o,o=o*127+127),Ux(t,[o/127,0,0,0,.5*(127-o),0,o/127,0,0,.5*(127-o),0,0,o/127,0,.5*(127-o),0,0,0,1,0,0,0,0,0,1])},OR=function(t,r){return r=U2(255*r,-255,255),Ux(t,[1,0,0,0,r,0,1,0,0,r,0,0,1,0,r,0,0,0,1,0,0,0,0,0,1])},AR=function(t,r,o,c){return r=U2(r,0,2),o=U2(o,0,2),c=U2(c,0,2),Ux(t,[r,0,0,0,0,0,o,0,0,0,0,0,c,0,0,0,0,0,1,0,0,0,0,0,1])},OE=function(t,r){return t.toCanvas().then(function(o){return zN(o,t.getType(),r)})},zN=function(t,r,o){var c=om(t),v=function(p,C){for(var S,k,R,B,L=p.data,U=C[0],K=C[1],ne=C[2],me=C[3],Z=C[4],pe=C[5],_e=C[6],ze=C[7],ge=C[8],ke=C[9],Le=C[10],wt=C[11],Ue=C[12],St=C[13],Ge=C[14],Ie=C[15],bt=C[16],Vt=C[17],je=C[18],It=C[19],Kt=0;Kt<L.length;Kt+=4)S=L[Kt],k=L[Kt+1],R=L[Kt+2],B=L[Kt+3],L[Kt]=S*U+k*K+R*ne+B*me+Z,L[Kt+1]=S*pe+k*_e+R*ze+B*ge+ke,L[Kt+2]=S*Le+k*wt+R*Ue+B*St+Ge,L[Kt+3]=S*Ie+k*bt+R*Vt+B*je+It;return p},m=v(c.getImageData(0,0,t.width,t.height),o);return c.putImageData(m,0,0),Og(t,r)},IN=function(t,r){return t.toCanvas().then(function(o){return FN(o,t.getType(),r)})},FN=function(t,r,o){var c=om(t),v=function(C,S,k){for(var R=function(bt,Vt,je){return bt>je?bt=je:bt<Vt&&(bt=Vt),bt},B=Math.round(Math.sqrt(k.length)),L=Math.floor(B/2),U=C.data,K=S.data,ne=C.width,me=C.height,Z=0;Z<me;Z++)for(var pe=0;pe<ne;pe++){for(var _e=0,ze=0,ge=0,ke=0;ke<B;ke++)for(var Le=0;Le<B;Le++){var wt=R(pe+Le-L,0,ne-1),Ue=R(Z+ke-L,0,me-1),St=(Ue*ne+wt)*4,Ge=k[ke*B+Le];_e+=U[St]*Ge,ze+=U[St+1]*Ge,ge+=U[St+2]*Ge}var Ie=(Z*ne+pe)*4;K[Ie]=R(_e,0,255),K[Ie+1]=R(ze,0,255),K[Ie+2]=R(ge,0,255)}return S},m=c.getImageData(0,0,t.width,t.height),p=c.getImageData(0,0,t.width,t.height);return p=v(m,p,o),c.putImageData(p,0,0),Og(t,r)},LN=function(t){var r=function(o,c,v){for(var m=om(o),p=new Array(256),C=function(R,B){for(var L=R.data,U=0;U<L.length;U+=4)L[U]=B[L[U]],L[U+1]=B[L[U+1]],L[U+2]=B[L[U+2]];return R},S=0;S<p.length;S++)p[S]=t(S,v);var k=C(m.getImageData(0,0,o.width,o.height),p);return m.putImageData(k,0,0),Og(o,c)};return function(o,c){return o.toCanvas().then(function(v){return r(v,o.getType(),c)})}},DR=function(t){return function(r,o){return OE(r,t(EE(),o))}},RR=function(t){return function(r){return OE(r,t)}},HN=function(t){return function(r){return IN(r,t)}},VN=RR([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),UN=DR(OR),Tr=DR($N),Bb=function(t,r,o,c){return OE(t,AR(EE(),r,o,c))},_R=HN([0,-1,0,-1,5,-1,0,-1,0]),BR=LN(function(t,r){return Math.pow(t/255,1-r)*255}),AE=function(t,r,o){var c=xE(t),v=TE(t),m=r/c,p=o/v,C=!1;(m<.5||m>2)&&(m=m<.5?.5:2,C=!0),(p<.5||p>2)&&(p=p<.5?.5:2,C=!0);var S=WN(t,m,p);return C?S.then(function(k){return AE(k,r,o)}):S},WN=function(t,r,o){return new Hv(function(c){var v=xE(t),m=TE(t),p=Math.floor(v*r),C=Math.floor(m*o),S=_b(p,C),k=om(S);k.drawImage(t,0,0,v,m,0,0,p,C),c(S)})},MR=function(t,r){r===void 0&&(r=2);var o=Math.pow(10,r),c=Math.round(t*o);return Math.ceil(c/o)},jN=function(t,r){return t.toCanvas().then(function(o){return PR(o,t.getType(),r)})},PR=function(t,r,o){var c=o<0?360+o:o,v=c*Math.PI/180,m=t.width,p=t.height,C=Math.sin(v),S=Math.cos(v),k=MR(Math.abs(m*S)+Math.abs(p*C)),R=MR(Math.abs(m*C)+Math.abs(p*S)),B=_b(k,R),L=om(B);return L.translate(k/2,R/2),L.rotate(v),L.drawImage(t,-m/2,-p/2),Og(B,r)},GN=function(t,r){return t.toCanvas().then(function(o){return qN(o,t.getType(),r)})},qN=function(t,r,o){var c=_b(t.width,t.height),v=om(c);return o==="v"?(v.scale(1,-1),v.drawImage(t,0,-c.height)):(v.scale(-1,1),v.drawImage(t,-c.width,0)),Og(c,r)},KN=function(t,r,o,c,v){return t.toCanvas().then(function(m){return XN(m,t.getType(),r,o,c,v)})},XN=function(t,r,o,c,v,m){var p=_b(v,m),C=om(p);return C.drawImage(t,-o,-c),Og(p,r)},YN=function(t,r,o){return t.toCanvas().then(function(c){return AE(c,r,o).then(function(v){return Og(v,t.getType())})})},JN=function(t){return VN(t)},ZN=function(t){return _R(t)},QN=function(t,r){return BR(t,r)},e$=function(t,r,o,c){return Bb(t,r,o,c)},t$=function(t,r){return UN(t,r)},n$=function(t,r){return Tr(t,r)},DE=function(t,r){return GN(t,r)},r$=function(t,r,o,c,v){return KN(t,r,o,c,v)},a$=function(t,r,o){return YN(t,r,o)},NR=function(t,r){return jN(t,r)},$R=function(t,r,o){return Ff(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:o},r)},Wx=function(t,r){return $R(t,r,[])},zR=function(t,r){return $R(t,r,[On.config({})])},jx=function(t,r,o){return{dom:{tag:"span",innerHtml:o.translate(t),classes:[r+"__select-label"]},behaviours:vt([On.config({})])}},RE,_E=Nt("toolbar.button.execute"),o$=function(t){return Rc(function(r,o){p2(t,r)(function(c){un(r,_E,{buttonApi:c}),t.onAction(c)})})},BE=(RE={},RE[$s()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],RE),cp=Nt("update-menu-text"),ME=Nt("update-menu-icon"),PE=function(t,r,o){var c=nn(at),v=t.text.map(function(B){return $r(jx(B,r,o.providers))}),m=t.icon.map(function(B){return $r(zR(B,o.providers.icons))}),p=function(B,L){var U=yt.getValue(B);return bn.focus(U),un(U,"keydown",{raw:L.event.raw}),yl.close(U),D.some(!0)},C=t.role.fold(function(){return{}},function(B){return{role:B}}),S=t.tooltip.fold(function(){return{}},function(B){var L=o.providers.translate(B);return{title:L,"aria-label":L}}),k=Ff("chevron-down",{tag:"div",classes:[r+"__select-chevron"]},o.providers.icons),R=$r(yl.sketch(ue(ue(ue({},t.uid?{uid:t.uid}:{}),C),{dom:{tag:"button",classes:[r,r+"--select"].concat(nt(t.classes,function(B){return r+"--"+B})),attributes:ue({},S)},components:Yh([m.map(function(B){return B.asSpec()}),v.map(function(B){return B.asSpec()}),D.some(k)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:vt(gt(gt([],t.dropdownBehaviours,!0),[Uc.button(function(){return t.disabled||o.providers.isDisabled()}),ei(),B2.config({}),On.config({}),Fn("dropdown-events",[b2(t,c),y2(t,c)]),Fn("menubutton-update-display-text",[We(cp,function(B,L){v.bind(function(U){return U.getOpt(B)}).each(function(U){On.set(U,[fv(o.providers.translate(L.event.text))])})}),We(ME,function(B,L){m.bind(function(U){return U.getOpt(B)}).each(function(U){On.set(U,[zR(L.event.icon,o.providers.icons)])})})])],!1)),eventOrder:$e(BE,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:vt([sn.config({mode:"special",onLeft:p,onRight:p})]),lazySink:o.getSink,toggleClass:r+"--active",parts:{menu:KS(!1,t.columns,t.presets)},fetch:function(B){return Qi.nu(Vr(t.fetch,B))}})));return R.asSpec()},i$=function(t){return Xt(t)},NE=function(t){return t.type==="separator"},u$=function(t){return hr(t,"getSubmenuItems")},s$={type:"separator"},c$=function(t,r){var o=Hn(t,function(c,v){return i$(v)?v===""?c:v==="|"?c.length>0&&!NE(c[c.length-1])?c.concat([s$]):c:hr(r,v.toLowerCase())?c.concat([r[v.toLowerCase()]]):c:c.concat([v])},[]);return o.length>0&&NE(o[o.length-1])&&o.pop(),o},W2=function(t,r){var o=t.getSubmenuItems(),c=IR(o,r),v=$e(c.menus,Bl(t.value,c.items)),m=$e(c.expansions,Bl(t.value,t.value));return{item:t,menus:v,expansions:m}},l$=function(t,r){return u$(t)?W2(t,r):{item:t,menus:{},expansions:{}}},$E=function(t){if(NE(t))return t;var r=Gt(t,"value").getOrThunk(function(){return Nt("generated-menu-item")});return $e({value:r},t)},IR=function(t,r){var o=c$(Xt(t)?t.split(" "):t,r);return Wr(o,function(c,v){var m=$E(v),p=l$(m,r);return{menus:$e(c.menus,p.menus),items:[p.item].concat(c.items),expansions:$e(c.expansions,p.expansions)}},{menus:{},expansions:{},items:[]})},Mb=function(t,r,o,c){var v=Nt("primary-menu"),m=IR(t,o.shared.providers.menuItems());if(m.items.length===0)return D.none();var p=L3(v,m.items,r,o,c),C=kr(m.menus,function(k,R){return L3(R,k,r,o,!1)}),S=$e(C,Bl(v,p));return D.from(Kr.tieredData(v,S,m.expansions))},f$=function(t){return{isDisabled:function(){return Zt.isDisabled(t)},setDisabled:function(r){return Zt.set(t,r)},setActive:function(r){var o=t.element;r?(vi(o,"tox-tbtn--enabled"),Mn(o,"aria-pressed",!0)):(Ro(o,"tox-tbtn--enabled"),ui(o,"aria-pressed"))},isActive:function(){return Ou(t.element,"tox-tbtn--enabled")}}},zE=function(t,r,o,c){return PE({text:t.text,icon:t.icon,tooltip:t.tooltip,role:c,fetch:function(v,m){t.fetch(function(p){m(Mb(p,Lf.CLOSE_ON_EXECUTE,o,!1))})},onSetup:t.onSetup,getApi:f$,columns:1,presets:"normal",classes:[],dropdownBehaviours:[yo.config({})]},r,o.shared)},FR=function(t,r,o){var c=function(m){return function(p){var C=!p.isActive();p.setActive(C),m.storage.set(C),o.shared.getSink().each(function(S){r().getOpt(S).each(function(k){Ll(k.element),un(k,Lv,{name:m.name,value:m.storage.get()})})})}},v=function(m){return function(p){p.setActive(m.storage.get())}};return function(m){m(nt(t,function(p){var C=p.text.fold(function(){return{}},function(S){return{text:S}});return ue(ue({type:p.type,active:!1},C),{onAction:c(p),onSetup:v(p)})}))}},IE=function(t,r,o,c,v,m){o===void 0&&(o=[]);var p=r.fold(function(){return{}},function(k){return{action:k}}),C=ue({buttonBehaviours:vt([Uc.button(function(){return t.disabled||m.isDisabled()}),ei(),yo.config({}),Fn("button press",[Mp("click"),Mp("mousedown")])].concat(o)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},p),S=$e(C,{dom:c});return $e(S,{components:v})},LR=function(t,r,o,c){c===void 0&&(c=[]);var v=t.tooltip.map(function(S){return{"aria-label":o.translate(S),title:o.translate(S)}}).getOr({}),m={tag:"button",classes:["tox-tbtn"],attributes:v},p=t.icon.map(function(S){return Wx(S,o.icons)}),C=Yh([p]);return IE(t,r,c,m,C,o)},j2=function(t,r,o,c){c===void 0&&(c=[]);var v=LR(t,D.some(r),o,c);return Pu.sketch(v)},G2=function(t,r,o,c,v){c===void 0&&(c=[]),v===void 0&&(v=[]);var m=o.translate(t.text),p=t.icon?t.icon.map(function(B){return Wx(B,o.icons)}):D.none(),C=p.isSome()?Yh([p]):[],S=p.isSome()?{}:{innerHtml:m},k=gt(gt(gt(gt([],!t.primary&&!t.borderless?["tox-button","tox-button--secondary"]:["tox-button"],!0),p.isSome()?["tox-button--icon"]:[],!0),t.borderless?["tox-button--naked"]:[],!0),v,!0),R=ue(ue({tag:"button",classes:k},S),{attributes:{title:m}});return IE(t,r,c,R,C,o)},FE=function(t,r,o,c,v){c===void 0&&(c=[]),v===void 0&&(v=[]);var m=G2(t,D.some(r),o,c,v);return Pu.sketch(m)},HR=function(t,r){return function(o){r==="custom"?un(o,Lv,{name:t,value:{}}):r==="submit"?er(o,Sb):r==="cancel"?er(o,Wc):console.error("Unknown button type: ",r)}},v$=function(t,r){return r==="menu"},d$=function(t,r){return r==="custom"||r==="cancel"||r==="submit"},Pb=function(t,r,o){if(v$(t,r)){var c=function(){return p},v=t,m=ue(ue({},t),{onSetup:function(k){return k.setDisabled(t.disabled),at},fetch:FR(v.items,c,o)}),p=$r(zE(m,"tox-tbtn",o,D.none()));return p.asSpec()}else if(d$(t,r)){var C=HR(t.name,r),S=ue(ue({},t),{borderless:!1});return FE(S,C,o.shared.providers,[])}else console.error("Unknown footer button type: ",r)},LE=function(t,r){var o=HR(t.name,"custom");return JM(D.none(),Rr.parts.field(ue({factory:Pu},G2(t,D.some(o),r,[sp.memory(""),Wf.self()]))))},VR=ye([he("field1Name","field1"),he("field2Name","field2"),Cd("onLockedChange"),wd(["lockClass"]),he("locked",!1),sc.field("coupledFieldBehaviours",[Jn,yt])]),m$=function(t,r,o){return Qr(t,r,o).bind(Jn.getCurrent)},Gx=function(t,r){return pi({factory:Rr,name:t,overrides:function(o){return{fieldBehaviours:vt([Fn("coupled-input-behaviour",[We(od(),function(c){m$(c,o,r).each(function(v){Qr(c,o,"lock").each(function(m){dr.isOn(m)&&o.onLockedChange(c,v,m)})})})])])}}})},g$=ye([Gx("field1","field2"),Gx("field2","field1"),pi({factory:Pu,schema:[He("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:vt([dr.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),h$=function(t,r,o,c){return{uid:t.uid,dom:t.dom,components:r,behaviours:sc.augment(t.coupledFieldBehaviours,[Jn.config({find:D.some}),yt.config({store:{mode:"manual",getValue:function(v){var m,p=yh(v,t,["field1","field2"]);return m={},m[t.field1Name]=yt.getValue(p.field1()),m[t.field2Name]=yt.getValue(p.field2()),m},setValue:function(v,m){var p=yh(v,t,["field1","field2"]);ha(m,t.field1Name)&&yt.setValue(p.field1(),m[t.field1Name]),ha(m,t.field2Name)&&yt.setValue(p.field2(),m[t.field2Name])}}})]),apis:{getField1:function(v){return Qr(v,t,"field1")},getField2:function(v){return Qr(v,t,"field2")},getLock:function(v){return Qr(v,t,"lock")}}}},gc=Bu({name:"FormCoupledInputs",configFields:VR(),partFields:g$(),factory:h$,apis:{getField1:function(t,r){return t.getField1(r)},getField2:function(t,r){return t.getField2(r)},getLock:function(t,r){return t.getLock(r)}}}),p$=function(t){var r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},o=function(v){return v in r?r[v]:1},c=t.value.toFixed(o(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},lp=function(t){var r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/,o=r.exec(t);if(o!==null){var c=parseFloat(o[1]),v=o[2];return In.value({value:c,unit:v})}else return In.error(t)},UR=function(t,r){var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=function(v){return hr(o,v)};return t.unit===r?D.some(t.value):c(t.unit)&&c(r)?o[t.unit]===o[r]?D.some(t.value):D.some(t.value/o[t.unit]*o[r]):D.none()},HE=function(t){return D.none()},b$=function(t,r){return function(o){return UR(o,r).map(function(c){return{value:c*t,unit:r}})}},y$=function(t,r){var o=lp(t).toOptional(),c=lp(r).toOptional();return ko(o,c,function(v,m){return UR(v,m.unit).map(function(p){return m.value/p}).map(function(p){return b$(p,m.unit)}).getOr(HE)}).getOr(HE)},VE=function(t,r){var o=HE,c=Nt("ratio-event"),v=function(B){return Ff(B,{tag:"span",classes:["tox-icon","tox-lock-icon__"+B]},r.icons)},m=gc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:r.translate(t.label.getOr("Constrain proportions"))}},components:[v("lock"),v("unlock")],buttonBehaviours:vt([Zt.config({disabled:function(){return t.disabled||r.isDisabled()}}),ei(),yo.config({})])}),p=function(B){return{dom:{tag:"div",classes:["tox-form__group"]},components:B}},C=function(B){return Rr.parts.field({factory:_2,inputClasses:["tox-textfield"],inputBehaviours:vt([Zt.config({disabled:function(){return t.disabled||r.isDisabled()}}),ei(),yo.config({}),Fn("size-input-events",[We(Qs(),function(L,U){un(L,c,{isField1:B})}),We(km(),function(L,U){un(L,vc,{name:t.name})})])]),selectOnFocus:!1})},S=function(B){return{dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(B)}}},k=gc.parts.field1(p([Rr.parts.label(S("Width")),C(!0)])),R=gc.parts.field2(p([Rr.parts.label(S("Height")),C(!1)]));return gc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[k,R,p([S("&nbsp;"),m])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(B,L,U){lp(yt.getValue(B)).each(function(K){o(K).each(function(ne){yt.setValue(L,p$(ne))})})},coupledFieldBehaviours:vt([Zt.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(B){gc.getField1(B).bind(Rr.getField).each(Zt.disable),gc.getField2(B).bind(Rr.getField).each(Zt.disable),gc.getLock(B).each(Zt.disable)},onEnabled:function(B){gc.getField1(B).bind(Rr.getField).each(Zt.enable),gc.getField2(B).bind(Rr.getField).each(Zt.enable),gc.getLock(B).each(Zt.enable)}}),ei(),Fn("size-input-events2",[We(c,function(B,L){var U=L.event.isField1,K=U?gc.getField1(B):gc.getField2(B),ne=U?gc.getField2(B):gc.getField1(B),me=K.map(yt.getValue).getOr(""),Z=ne.map(yt.getValue).getOr("");o=y$(me,Z)})])])})},w$=ye(Nt("undo")),C$=ye(Nt("redo")),S$=ye(Nt("zoom")),x$=ye(Nt("back")),T$=ye(Nt("apply")),WR=ye(Nt("swap")),k$=ye(Nt("transform")),E$=ye(Nt("temp-transform")),O$=ye(Nt("transform-apply")),pu={undo:w$,redo:C$,zoom:S$,back:x$,apply:T$,swap:WR,transform:k$,tempTransform:E$,transformApply:O$},jR=ye("save-state"),A$=ye("disable"),D$=ye("enable"),to={formActionEvent:Lv,saveState:jR,disable:A$,enable:D$},R$=function(t,r){var o=function(Rt,Xn,ea,Co){return $r(FE({name:Rt,text:Rt,disabled:ea,primary:Co,icon:D.none(),borderless:!1},Xn,r))},c=function(Rt,Xn,ea,Co){return $r(j2({name:Rt,icon:D.some(Rt),tooltip:D.some(Xn),disabled:Co,primary:!1,borderless:!1},ea,r))},v=function(Rt,Xn){Rt.map(function(ea){var Co=ea.get(Xn);Co.hasConfigured(Zt)&&Zt.disable(Co)})},m=function(Rt,Xn){Rt.map(function(ea){var Co=ea.get(Xn);Co.hasConfigured(Zt)&&Zt.enable(Co)})},p={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},C=at,S=function(Rt,Xn,ea){un(Rt,Xn,ea)},k=function(Rt){return er(Rt,to.disable())},R=function(Rt){return er(Rt,to.enable())},B=function(Rt,Xn){k(Rt),S(Rt,pu.transform(),{transform:Xn}),R(Rt)},L=function(Rt,Xn){k(Rt),S(Rt,pu.tempTransform(),{transform:Xn}),R(Rt)},U=function(Rt){return function(){mT.getOpt(Rt).each(function(Xn){On.set(Xn,[dT])})}},K=function(Rt,Xn){k(Rt),S(Rt,pu.transformApply(),{transform:Xn,swap:U(Rt)}),R(Rt)},ne=function(){return o("Back",function(Rt){return S(Rt,pu.back(),{swap:U(Rt)})},!1,!1)},me=function(){return $r({dom:{tag:"div",classes:["tox-spacer"]},behaviours:vt([Zt.config({})])})},Z=function(){return o("Apply",function(Rt){return S(Rt,pu.apply(),{swap:U(Rt)})},!0,!0)},pe=function(){return function(Rt){var Xn=t.getRect();return r$(Rt,Xn.x,Xn.y,Xn.w,Xn.h)}},_e=[ne(),me(),o("Apply",function(Rt){var Xn=pe();K(Rt,Xn),t.hideCrop()},!1,!0)],ze=Nu.sketch({dom:p,components:_e.map(function(Rt){return Rt.asSpec()}),containerBehaviours:vt([Fn("image-tools-crop-buttons-events",[We(to.disable(),function(Rt,Xn){v(_e,Rt)}),We(to.enable(),function(Rt,Xn){m(_e,Rt)})])])}),ge=$r(VE({name:"size",label:D.none(),constrain:!0,disabled:!1},r)),ke=function(Rt,Xn){return function(ea){return a$(ea,Rt,Xn)}},Le=[ne(),me(),ge,me(),o("Apply",function(Rt){ge.getOpt(Rt).each(function(Xn){var ea=yt.getValue(Xn),Co=parseInt(ea.width,10),qc=parseInt(ea.height,10),Kc=ke(Co,qc);K(Rt,Kc)})},!1,!0)],wt=Nu.sketch({dom:p,components:Le.map(function(Rt){return Rt.asSpec()}),containerBehaviours:vt([Fn("image-tools-resize-buttons-events",[We(to.disable(),function(Rt,Xn){v(Le,Rt)}),We(to.enable(),function(Rt,Xn){m(Le,Rt)})])])}),Ue=function(Rt,Xn){return function(ea){return Rt(ea,Xn)}},St=Ue(DE,"h"),Ge=Ue(DE,"v"),Ie=Ue(NR,-90),bt=Ue(NR,90),Vt=function(Rt,Xn){L(Rt,Xn)},je=[ne(),me(),c("flip-horizontally","Flip horizontally",function(Rt){Vt(Rt,St)},!1),c("flip-vertically","Flip vertically",function(Rt){Vt(Rt,Ge)},!1),c("rotate-left","Rotate counterclockwise",function(Rt){Vt(Rt,Ie)},!1),c("rotate-right","Rotate clockwise",function(Rt){Vt(Rt,bt)},!1),me(),Z()],It=Nu.sketch({dom:p,components:je.map(function(Rt){return Rt.asSpec()}),containerBehaviours:vt([Fn("image-tools-fliprotate-buttons-events",[We(to.disable(),function(Rt,Xn){v(je,Rt)}),We(to.enable(),function(Rt,Xn){m(je,Rt)})])])}),Kt=function(Rt,Xn,ea,Co,qc){var Kc=jc.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:r.translate(Rt)}}),Xf=jc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),gT=jc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return $r(jc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:ea,maxX:qc,getInitialValue:ye({x:Co})},components:[Kc,Xf,gT],sliderBehaviours:vt([bn.config({})]),onChoose:Xn}))},gr=function(Rt,Xn,ea,Co,qc){var Kc=function(Xf,gT,TI){var kI=Ue(Xn,TI.x/100);B(Xf,kI)};return Kt(Rt,Kc,ea,Co,qc)},Yr=function(Rt,Xn,ea,Co,qc){return[ne(),gr(Rt,Xn,ea,Co,qc),Z()]},Xa=function(Rt,Xn,ea,Co,qc){var Kc=Yr(Rt,Xn,ea,Co,qc);return Nu.sketch({dom:p,components:Kc.map(function(Xf){return Xf.asSpec()}),containerBehaviours:vt([Fn("image-tools-filter-panel-buttons-events",[We(to.disable(),function(Xf,gT){v(Kc,Xf)}),We(to.enable(),function(Xf,gT){m(Kc,Xf)})])])})},Kf=[ne(),me(),Z()],rf=Nu.sketch({dom:p,components:Kf.map(function(Rt){return Rt.asSpec()})}),hI=Xa("Brightness",t$,-100,0,100),pI=Xa("Contrast",n$,-100,0,100),yB=Xa("Gamma",QN,-100,0,100),bI=function(Rt,Xn,ea){return function(Co){return e$(Co,Rt,Xn,ea)}},wO=function(Rt){var Xn=function(ea,Co,qc){var Kc=wB.getOpt(ea),Xf=CB.getOpt(ea),gT=CO.getOpt(ea);Kc.each(function(TI){Xf.each(function(kI){gT.each(function(kU){var EU=yt.getValue(TI).x/100,OU=yt.getValue(kU).x/100,AU=yt.getValue(kI).x/100,DU=bI(EU,OU,AU);B(ea,DU)})})})};return Kt(Rt,Xn,0,100,200)},wB=wO("R"),CO=wO("G"),CB=wO("B"),Zv=[ne(),wB,CO,CB,Z()],SO=Nu.sketch({dom:p,components:Zv.map(function(Rt){return Rt.asSpec()})}),Gc=function(Rt,Xn,ea){return function(Co){var qc=function(){mT.getOpt(Co).each(function(Kc){On.set(Kc,[Rt]),ea(Kc)})};S(Co,pu.swap(),{transform:Xn,swap:qc})}},yI=function(Rt){t.showCrop()},wI=function(Rt){ge.getOpt(Rt).each(function(Xn){var ea=t.getMeasurements(),Co=ea.width,qc=ea.height;yt.setValue(Xn,{width:Co,height:qc})})},CI=D.some(ZN),ns=D.some(JN),Ub=[c("crop","Crop",Gc(ze,D.none(),yI),!1),c("resize","Resize",Gc(wt,D.none(),wI),!1),c("orientation","Orientation",Gc(It,D.none(),C),!1),c("brightness","Brightness",Gc(hI,D.none(),C),!1),c("sharpen","Sharpen",Gc(rf,CI,C),!1),c("contrast","Contrast",Gc(pI,D.none(),C),!1),c("color-levels","Color levels",Gc(SO,D.none(),C),!1),c("gamma","Gamma",Gc(yB,D.none(),C),!1),c("invert","Invert",Gc(rf,ns,C),!1)],dT=Nu.sketch({dom:p,components:Ub.map(function(Rt){return Rt.asSpec()})}),SI=Nu.sketch({dom:{tag:"div"},components:[dT],containerBehaviours:vt([On.config({})])}),mT=$r(SI),xI=function(Rt){return mT.getOpt(Rt).map(function(Xn){var ea=Xn.components()[0];return ea.components()[ea.components().length-1]})};return{memContainer:mT,getApplyButton:xI}},qx=tinymce.util.Tools.resolve("tinymce.geom.Rect"),GR=tinymce.util.Tools.resolve("tinymce.util.Observable"),fp=tinymce.util.Tools.resolve("tinymce.util.VK"),Kx=function(t){var r=Math.max,o=t.documentElement,c=t.body,v=r(o.scrollWidth,c.scrollWidth),m=r(o.clientWidth,c.clientWidth),p=r(o.offsetWidth,c.offsetWidth),C=r(o.scrollHeight,c.scrollHeight),S=r(o.clientHeight,c.clientHeight),k=r(o.offsetHeight,c.offsetHeight);return{width:v<p?m:v,height:C<k?S:C}},_$=function(t){return Tn(t.changedTouches)},Nb=function(t){if(_$(t))for(var r="screenX screenY pageX pageY clientX clientY".split(" "),o=0;o<r.length;o++)t[r[o]]=t.changedTouches[0][r[o]]};function B$(t,r){var o,c,v,m,p=[],C=[],S=(o=r.document)!==null&&o!==void 0?o:document,k=(c=r.root)!==null&&c!==void 0?c:S,R=re.fromDom(S),B,L,U,K=re.fromDom(k.getElementById((v=r.handle)!==null&&v!==void 0?v:t)),ne=function(_e){var ze=_e.raw,ge=Kx(S);Nb(ze),_e.prevent(),B=ze.button,L=ze.screenX,U=ze.screenY;var ke=ja(K,"cursor");m=re.fromTag("div",S),us(m,{position:"absolute",top:"0",left:"0",width:ge.width+"px",height:ge.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:ke}),Gi(va(R),m),C.push(co(R,"mousemove",me),co(R,"touchmove",me),co(R,"mouseup",Z),co(R,"touchend",Z)),r.start(ze)},me=function(_e){var ze=_e.raw;if(Nb(ze),ze.button!==B)return Z(_e);ze.deltaX=ze.screenX-L,ze.deltaY=ze.screenY-U,_e.prevent(),r.drag(ze)},Z=function(_e){Nb(_e.raw),kt(C,function(ze){return ze.unbind()}),C=[],Uu(m),r.stop&&r.stop(_e.raw)},pe=function(){kt(C.concat(p),function(_e){return _e.unbind()}),C=[],p=[],Tn(m)&&Uu(m)};return p.push(co(K,"mousedown",ne),co(K,"touchstart",ne)),{destroy:pe}}var q2=0,qR=function(t,r,o,c,v){var m,p=[],C="tox-",S=C+"crid-"+q2++,k=re.fromDom(c),R=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],B=["top","right","bottom","left"],L=function(Ue,St){return{x:St.x+Ue.x,y:St.y+Ue.y,w:St.w,h:St.h}},U=function(Ue,St){return{x:St.x-Ue.x,y:St.y-Ue.y,w:St.w,h:St.h}},K=function(){return U(o,t)},ne=function(Ue,St,Ge,Ie){var bt=St.x+Ge*Ue.deltaX,Vt=St.y+Ie*Ue.deltaY,je=Math.max(20,St.w+Ge*Ue.deltaW),It=Math.max(20,St.h+Ie*Ue.deltaH),Kt=t=qx.clamp({x:bt,y:Vt,w:je,h:It},o,Ue.name==="move");Kt=U(o,Kt),wt.fire("updateRect",{rect:Kt}),ge(Kt)},me=function(){var Ue=function(bt){var Vt;return B$(S,{document:c.ownerDocument,root:Cn(k).dom,handle:S+"-"+bt.name,start:function(){Vt=t},drag:function(je){ne(bt,Vt,je.deltaX,je.deltaY)}})},St=re.fromTag("div");is(St,{id:S,class:C+"croprect-container",role:"grid","aria-dropeffect":"execute"}),Gi(k,St),kt(B,function(bt){_o(k,"#"+S).each(function(Vt){var je=re.fromTag("div");is(je,{id:S+"-"+bt,class:C+"croprect-block","data-mce-bogus":"all"}),pn(je,"display","none"),Gi(Vt,je)})}),kt(R,function(bt){_o(k,"#"+S).each(function(Vt){var je=re.fromTag("div");is(je,{id:S+"-"+bt.name,"aria-label":bt.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:bt.label}),Ef(je,[C+"croprect-handle",C+"croprect-handle-"+bt.name]),pn(je,"display","none"),Gi(Vt,je)})}),m=nt(R,Ue),pe(t);var Ge=function(bt){Mn(bt.target,"aria-grabbed",bt.raw.type==="focus"?"true":"false")},Ie=function(bt){var Vt;kt(R,function(It){if(Da(bt.target,"id")===S+"-"+It.name)return Vt=It,!1});var je=function(It,Kt,gr,Yr,Xa){It.stopPropagation(),It.preventDefault(),ne(Vt,gr,Yr,Xa)};switch(bt.raw.keyCode){case fp.LEFT:je(bt,Vt,t,-10,0);break;case fp.RIGHT:je(bt,Vt,t,10,0);break;case fp.UP:je(bt,Vt,t,0,-10);break;case fp.DOWN:je(bt,Vt,t,0,10);break;case fp.ENTER:case fp.SPACEBAR:bt.prevent(),v();break}};p.push(co(k,"focusin",Ge),co(k,"focusout",Ge),co(k,"keydown",Ie))},Z=function(Ue){var St=gt(gt([],nt(R,function(Ie){return"#"+S+"-"+Ie.name}),!0),nt(B,function(Ie){return"#"+S+"-"+Ie}),!0).join(","),Ge=Yo(k,St);Ue?kt(Ge,function(Ie){return _r(Ie,"display")}):kt(Ge,function(Ie){return pn(Ie,"display","none")})},pe=function(Ue){var St=function(Ge,Ie){_o(k,"#"+S+"-"+Ge).each(function(bt){us(bt,{left:Ie.x+"px",top:Ie.y+"px",width:Math.max(0,Ie.w)+"px",height:Math.max(0,Ie.h)+"px"})})};kt(R,function(Ge){_o(k,"#"+S+"-"+Ge.name).each(function(Ie){us(Ie,{left:Ue.w*Ge.xMul+Ue.x+"px",top:Ue.h*Ge.yMul+Ue.y+"px"})})}),St("top",{x:r.x,y:r.y,w:r.w,h:Ue.y-r.y}),St("right",{x:Ue.x+Ue.w,y:Ue.y,w:r.w-Ue.x-Ue.w+r.x,h:Ue.h}),St("bottom",{x:r.x,y:Ue.y+Ue.h,w:r.w,h:r.h-Ue.y-Ue.h+r.y}),St("left",{x:r.x,y:Ue.y,w:Ue.x-r.x,h:Ue.h}),St("move",Ue)},_e=function(Ue){t=Ue,pe(t)},ze=function(Ue){r=Ue,pe(t)},ge=function(Ue){_e(L(o,Ue))},ke=function(Ue){o=Ue,pe(t)},Le=function(){kt(m,function(Ue){return Ue.destroy()}),m=[],kt(p,function(Ue){return Ue.unbind()}),p=[]};me();var wt=ue(ue({},GR),{toggleVisibility:Z,setClampRect:ke,setRect:_e,getInnerRect:K,setInnerRect:ge,setViewPortRect:ze,destroy:Le});return wt},wl={create:qR},M$=function(t){return new f2(function(r){var o=function(){t.removeEventListener("load",o),r(t)};t.complete?r(t):t.addEventListener("load",o)})},KR=function(t){var r=$r({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),o=nn(1),c=Hw(),v=nn({x:0,y:0,w:1,h:1}),m=nn({x:0,y:0,w:1,h:1}),p=function(me,Z){K.getOpt(me).each(function(pe){var _e=o.get(),ze=ji(pe.element),ge=Oo(pe.element),ke=Z.dom.naturalWidth*_e,Le=Z.dom.naturalHeight*_e,wt=Math.max(0,ze/2-ke/2),Ue=Math.max(0,ge/2-Le/2),St={left:wt.toString()+"px",top:Ue.toString()+"px",width:ke.toString()+"px",height:Le.toString()+"px",position:"absolute"};us(Z,St),r.getOpt(pe).each(function(Ge){us(Ge.element,St)}),c.run(function(Ge){var Ie=v.get();Ge.setRect({x:Ie.x*_e+wt,y:Ie.y*_e+Ue,w:Ie.w*_e,h:Ie.h*_e}),Ge.setClampRect({x:wt,y:Ue,w:ke,h:Le}),Ge.setViewPortRect({x:0,y:0,w:ze,h:ge})})})},C=function(me,Z){K.getOpt(me).each(function(pe){var _e=ji(pe.element),ze=Oo(pe.element),ge=Z.dom.naturalWidth,ke=Z.dom.naturalHeight,Le=Math.min(_e/ge,ze/ke);Le>=1?o.set(1):o.set(Le)})},S=function(me,Z){var pe=re.fromTag("img");return Mn(pe,"src",Z),M$(pe.dom).then(function(){me.getSystem().isConnected()&&K.getOpt(me).map(function(_e){var ze=Jg({element:pe});On.replaceAt(_e,1,D.some(ze));var ge=m.get(),ke={x:0,y:0,w:pe.dom.naturalWidth,h:pe.dom.naturalHeight};m.set(ke);var Le=qx.inflate(ke,-20,-20);v.set(Le),(ge.w!==ke.w||ge.h!==ke.h)&&C(_e,pe),p(_e,pe)})})},k=function(me,Z){var pe=o.get(),_e=Z>0?Math.min(2,pe+.1):Math.max(.1,pe-.1);o.set(_e),K.getOpt(me).each(function(ze){var ge=ze.components()[1].element;p(ze,ge)})},R=function(){c.run(function(me){me.toggleVisibility(!0)})},B=function(){c.run(function(me){me.toggleVisibility(!1)})},L=function(){return v.get()},U=Nu.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[r.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:vt([Fn("image-panel-crop-events",[Ma(function(me){K.getOpt(me).each(function(Z){var pe=Z.element.dom,_e=wl.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},pe,at);_e.toggleVisibility(!1),_e.on("updateRect",function(ze){var ge=ze.rect,ke=o.get(),Le={x:Math.round(ge.x/ke),y:Math.round(ge.y/ke),w:Math.round(ge.w/ke),h:Math.round(ge.h/ke)};v.set(Le)}),c.set(_e)})}),ms(function(){c.clear()})])])}],containerBehaviours:vt([On.config({}),Fn("image-panel-events",[Ma(function(me){S(me,t)})])])}),K=$r(U),ne=function(){var me=m.get();return{width:me.w,height:me.h}};return{memContainer:K,updateSrc:S,zoom:k,showCrop:R,hideCrop:B,getRect:L,getMeasurements:ne}},Xx=function(t,r,o,c,v){return j2({name:t,icon:D.some(r),disabled:o,tooltip:D.some(t),primary:!1,borderless:!1},c,v)},XR=function(t,r){r?Zt.enable(t):Zt.disable(t)},P$=function(t){var r=function(m,p,C){o.getOpt(m).each(function(S){XR(S,p)}),c.getOpt(m).each(function(S){XR(S,C)})},o=$r(Xx("Undo","undo",!0,function(m){un(m,pu.undo(),{direction:1})},t)),c=$r(Xx("Redo","redo",!0,function(m){un(m,pu.redo(),{direction:1})},t)),v=Nu.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),c.asSpec(),Xx("Zoom in","zoom-in",!1,function(m){un(m,pu.zoom(),{direction:1})},t),Xx("Zoom out","zoom-out",!1,function(m){un(m,pu.zoom(),{direction:-1})},t)]});return{container:v,updateButtonUndoStates:r}};function N$(){var t=[],r=-1,o=function(C){var S=t.splice(++r);return t.push(C),{state:C,removed:S}},c=function(){if(m())return t[--r]},v=function(){if(p())return t[++r]},m=function(){return r>0},p=function(){return r!==-1&&r<t.length-1};return{data:t,add:o,undo:c,redo:v,canUndo:m,canRedo:p}}var $$=function(t){var r=nn(t),o=Qa(),c=N$();c.add(t);var v=function(){return r.get()},m=function(pe){r.set(pe)},p=function(){return o.get().getOrThunk(r.get)},C=function(pe){var _e=S(pe);return B(),o.set(_e),_e.url},S=function(pe){return{blob:pe,url:URL.createObjectURL(pe)}},k=function(pe){URL.revokeObjectURL(pe.url)},R=function(pe){jv.each(pe,k)},B=function(){o.on(k),o.clear()},L=function(pe){var _e=S(pe);m(_e);var ze=c.add(_e).removed;return R(ze),_e.url},U=function(pe){var _e=S(pe);return o.set(_e),_e.url},K=function(pe){return o.get().fold(at,function(_e){L(_e.blob),pe()})},ne=function(){var pe=c.undo();return m(pe),pe.url},me=function(){var pe=c.redo();return m(pe),pe.url},Z=function(){var pe=c.canUndo(),_e=c.canRedo();return{undoEnabled:pe,redoEnabled:_e}};return{getBlobState:v,setBlobState:m,addBlobState:L,getTempState:p,updateTempState:C,addTempState:U,applyTempState:K,destroyTempState:B,undo:ne,redo:me,getHistoryStates:Z}},z$=function(t,r){var o=$$(t.currentState),c=function(Ge,Ie){var bt=Ie.event.direction;Le.zoom(Ge,bt)},v=function(Ge){var Ie=o.getHistoryStates();wt.updateButtonUndoStates(Ge,Ie.undoEnabled,Ie.redoEnabled),un(Ge,to.formActionEvent,{name:to.saveState(),value:Ie.undoEnabled})},m=function(Ge){wt.updateButtonUndoStates(Ge,!1,!1)},p=function(Ge,Ie){var bt=o.undo();B(Ge,bt).then(function(Vt){R(Ge),v(Ge)})},C=function(Ge,Ie){var bt=o.redo();B(Ge,bt).then(function(Vt){R(Ge),v(Ge)})},S=function(Ge){return Ge.toBlob()},k=function(Ge){un(Ge,to.formActionEvent,{name:to.disable(),value:{}})},R=function(Ge){Ue.getApplyButton(Ge).each(function(Ie){Zt.enable(Ie)}),un(Ge,to.formActionEvent,{name:to.enable(),value:{}})},B=function(Ge,Ie){return k(Ge),Le.updateSrc(Ge,Ie)},L=function(Ge,Ie,bt,Vt,je){k(Ge),NN(Ie).then(bt).then(S).then(Vt).then(function(It){return B(Ge,It)}).then(function(){v(Ge),je(),R(Ge)}).catch(function(It){console.log(It),Ge.getSystem().isConnected()&&R(Ge)})},U=function(Ge,Ie,bt){var Vt=o.getBlobState().blob,je=function(It){return o.updateTempState(It)};L(Ge,Vt,Ie,je,bt)},K=function(Ge,Ie){var bt=o.getTempState().blob,Vt=function(je){return o.addTempState(je)};L(Ge,bt,Ie,Vt,at)},ne=function(Ge,Ie,bt){var Vt=o.getBlobState().blob,je=function(It){var Kt=o.addBlobState(It);return Z(Ge),Kt};L(Ge,Vt,Ie,je,bt)},me=function(Ge,Ie){var bt=function(){Z(Ge);var Vt=Ie.event.swap;Vt()};o.applyTempState(bt)},Z=function(Ge){var Ie=o.getBlobState().url;return o.destroyTempState(),v(Ge),Ie},pe=function(Ge){var Ie=Z(Ge);B(Ge,Ie).then(function(bt){R(Ge)})},_e=function(Ge,Ie){pe(Ge);var bt=Ie.event.swap;bt(),Le.hideCrop()},ze=function(Ge,Ie){return U(Ge,Ie.event.transform,at)},ge=function(Ge,Ie){return K(Ge,Ie.event.transform)},ke=function(Ge,Ie){return ne(Ge,Ie.event.transform,Ie.event.swap)},Le=KR(t.currentState.url),wt=P$(r),Ue=R$(Le,r),St=function(Ge,Ie){m(Ge);var bt=Ie.event.transform,Vt=Ie.event.swap;bt.fold(function(){Vt()},function(je){U(Ge,je,Vt)})};return{dom:{tag:"div",attributes:{role:"presentation"}},components:[Ue.memContainer.asSpec(),Le.memContainer.asSpec(),wt.container],behaviours:vt([yt.config({store:{mode:"manual",getValue:function(){return o.getBlobState()}}}),Fn("image-tools-events",[We(pu.undo(),p),We(pu.redo(),C),We(pu.zoom(),c),We(pu.back(),_e),We(pu.apply(),me),We(pu.transform(),ze),We(pu.tempTransform(),ge),We(pu.transformApply(),ke),We(pu.swap(),St)]),Wf.self()])}},I$=function(t,r){var o={dom:{tag:"label",innerHtml:r.providers.translate(t.label),classes:["tox-label"]}},c=nt(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[o].concat(c),behaviours:vt([Wf.self(),On.config({}),sp.domHtml(D.none()),sn.config({mode:"acyclic"})])}},UE=function(t){return!hr(t,"items")},YR="data-value",WE=function(t,r,o,c){return nt(o,function(v){return UE(v)?{type:"togglemenuitem",text:v.text,value:v.value,active:v.value===c,onAction:function(){yt.setValue(t,v.value),un(t,vc,{name:r}),bn.focus(t)}}:{type:"nestedmenuitem",text:v.text,getSubmenuItems:function(){return WE(t,r,v.items,c)}}})},jE=function(t,r){return sa(t,function(o){return UE(o)?ri(o.value===r,o):jE(o.items,r)})},JR=function(t,r){var o=r.shared.providers,c=To(t.items).filter(UE),v=t.label.map(function(C){return Sg(C,o)}),m=Rr.parts.field({dom:{},factory:{sketch:function(C){return PE({uid:C.uid,text:c.map(function(S){return S.text}),icon:D.none(),tooltip:t.label,role:D.none(),fetch:function(S,k){var R=WE(S,t.name,t.items,yt.getValue(S));k(Mb(R,Lf.CLOSE_ON_EXECUTE,r,!1))},onSetup:ye(at),getApi:ye({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[yo.config({}),yt.config({store:{mode:"manual",initialValue:c.map(function(S){return S.value}).getOr(""),getValue:function(S){return Da(S.element,YR)},setValue:function(S,k){jE(t.items,k).each(function(R){Mn(S.element,YR,R.value),un(S,cp,{text:R.text})})}}})]},"tox-listbox",r.shared)}}}),p={dom:{tag:"div",classes:["tox-listboxfield"]},components:[m]};return Rr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:jt([v.toArray(),[p]]),fieldBehaviours:vt([Zt.config({disabled:ye(t.disabled),onDisabled:function(C){Rr.getField(C).each(Zt.disable)},onEnabled:function(C){Rr.getField(C).each(Zt.enable)}})])})},F$=function(t,r){return{dom:{tag:"div",classes:t.classes},components:nt(t.items,r.shared.interpreter)}},ZR=function(t,r){var o=nt(t.options,function(v){return{dom:{tag:"option",value:v.value,innerHtml:v.text}}}),c=t.data.map(function(v){return Bl("initialValue",v)}).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:o,behaviours:Zo(t.selectBehaviours,[bn.config({}),yt.config({store:ue({mode:"manual",getValue:function(v){return hs(v.element)},setValue:function(v,m){var p=lr(t.options,function(C){return C.value===m});p.isSome()&&Nm(v.element,m)}},c)})])}},L$=Cs({name:"HtmlSelect",configFields:[He("options"),Jo("selectBehaviours",[bn,yt]),he("selectClasses",[]),he("selectAttributes",{}),Br("data")],factory:ZR}),H$=function(t,r){var o=nt(t.items,function(C){return{text:r.translate(C.text),value:C.value}}),c=t.label.map(function(C){return Sg(C,r)}),v=Rr.parts.field({dom:{},selectAttributes:{size:t.size},options:o,factory:L$,selectBehaviours:vt([Zt.config({disabled:function(){return t.disabled||r.isDisabled()}}),yo.config({}),Fn("selectbox-change",[We(km(),function(C,S){un(C,vc,{name:t.name})})])])}),m=t.size>1?D.none():D.some(Ff("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),p={dom:{tag:"div",classes:["tox-selectfield"]},components:jt([[v],m.toArray()])};return Rr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:jt([c.toArray(),[p]]),fieldBehaviours:vt([Zt.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(C){Rr.getField(C).each(Zt.disable)},onEnabled:function(C){Rr.getField(C).each(Zt.enable)}}),ei()])})},V$=function(t,r){var o=function(C){return{dom:{tag:"th",innerHtml:r.translate(C)}}},c=function(C){return{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:nt(C,o)}]}},v=function(C){return{dom:{tag:"td",innerHtml:r.translate(C)}}},m=function(C){return{dom:{tag:"tr"},components:nt(C,v)}},p=function(C){return{dom:{tag:"tbody"},components:nt(C,m)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),p(t.cells)],behaviours:vt([yo.config({}),bn.config({})])}},QR=function(t,r){var o=t.label.map(function(L){return Sg(L,r)}),c=[Zt.config({disabled:function(){return t.disabled||r.isDisabled()}}),ei(),sn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:function(L){return er(L,Sb),D.some(!0)}}),Fn("textfield-change",[We(od(),function(L,U){un(L,vc,{name:t.name})}),We(o0(),function(L,U){un(L,vc,{name:t.name})})]),yo.config({})],v=t.validation.map(function(L){return Vv.config({getRoot:function(U){return Fa(U.element)},invalidClass:"tox-invalid",validator:{validate:function(U){var K=yt.getValue(U),ne=L.validator(K);return Qi.pure(ne===!0?In.value(K):In.error(ne))},validateOnLoad:L.validateOnLoad}})}).toArray(),m=t.placeholder.fold(ye({}),function(L){return{placeholder:r.translate(L)}}),p=t.inputMode.fold(ye({}),function(L){return{inputmode:L}}),C=ue(ue({},m),p),S=Rr.parts.field({tag:t.multiline===!0?"textarea":"input",inputAttributes:C,inputClasses:[t.classname],inputBehaviours:vt(jt([c,v])),selectOnFocus:!1,factory:_2}),k=t.flex?["tox-form__group--stretched"]:[],R=k.concat(t.maximized?["tox-form-group--maximize"]:[]),B=[Zt.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(L){Rr.getField(L).each(Zt.disable)},onEnabled:function(L){Rr.getField(L).each(Zt.enable)}}),ei()];return R2(o,S,R,B)},U$=function(t,r){return QR({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:D.none(),maximized:t.maximized},r)},W$=function(t,r){return QR({name:t.name,multiline:!0,label:t.label,inputMode:D.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:D.none(),maximized:t.maximized},r)},j$=function(t,r){var o=t.stream.streams,c=o.setup(t,r);return ga([We(t.event,c),ms(function(){return r.cancel()})].concat(t.cancelEvent.map(function(v){return[We(v,function(){return r.cancel()})]}).getOr([])))},G$=Object.freeze({__proto__:null,events:j$}),e_=function(t){var r=nn(null),o=function(){return{timer:r.get()!==null?"set":"unset"}},c=function(m){r.set(m)},v=function(){var m=r.get();m!==null&&m.cancel()};return fi({readState:o,setTimer:c,cancel:v})},q$=function(t){return t.stream.streams.state(t)},K$=Object.freeze({__proto__:null,throttle:e_,init:q$}),X$=function(t,r){var o=t.stream,c=z4(t.onStream,o.delay);return r.setTimer(c),function(v,m){c.throttle(v,m),o.stopEvent&&m.stop()}},Y$=[Gu("stream",Zs("mode",{throttle:[He("delay"),he("stopEvent",!0),Zr("streams",{setup:X$,state:e_})]})),he("event","input"),Br("cancelEvent"),Cd("onStream")],t_=so({fields:Y$,name:"streaming",active:G$,state:K$}),K2=function(t,r,o){var c=yt.getValue(o);yt.setValue(r,c),r_(r)},n_=function(t,r){var o=t.element,c=hs(o),v=o.dom;Da(o,"type")!=="number"&&r(v,c)},r_=function(t){n_(t,function(r,o){return r.setSelectionRange(o.length,o.length)})},a_=function(t,r){n_(t,function(o,c){return o.setSelectionRange(r,c.length)})},J$=function(t,r,o){if(t.selectsOver){var c=yt.getValue(r),v=t.getDisplayText(c),m=yt.getValue(o),p=t.getDisplayText(m);return p.indexOf(v)===0?D.some(function(){K2(t,r,o),a_(r,v.length)}):D.none()}else return D.none()},GE=ye("alloy.typeahead.itemexecute"),Z$=function(t,r,o,c){var v=function(S,k,R){t.previewing.set(!1);var B=wo.getCoupled(S,"sandbox");if(fr.isOpen(B))Jn.getCurrent(B).each(function(U){Mr.getHighlighted(U).fold(function(){R(U)},function(){yw(B,U.element,"keydown",k)})});else{var L=function(U){Jn.getCurrent(U).each(R)};X3(t,p(S),S,B,c,L,Yl.HighlightFirst).get(at)}},m=xD(t),p=function(S){return function(k){return k.map(function(R){var B=$o(R.menus),L=Jr(B,function(K){return tn(K.items,function(ne){return ne.type==="item"})}),U=yt.getState(S);return U.update(nt(L,function(K){return K.data})),R})}},C=[bn.config({}),yt.config({onSetValue:t.onSetValue,store:ue({mode:"dataset",getDataKey:function(S){return hs(S.element)},getFallbackEntry:function(S){return{value:S,meta:{}}},setValue:function(S,k){Nm(S.element,t.model.getDisplayText(k))}},t.initialData.map(function(S){return Bl("initialValue",S)}).getOr({}))}),t_.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(S,k){var R=wo.getCoupled(S,"sandbox"),B=bn.isFocused(S);if(B&&hs(S.element).length>=t.minChars){var L=Jn.getCurrent(R).bind(function(K){return Mr.getHighlighted(K).map(yt.getValue)});t.previewing.set(!0);var U=function(K){Jn.getCurrent(R).each(function(ne){L.fold(function(){t.model.selectsOver&&Mr.highlightFirst(ne)},function(me){Mr.highlightBy(ne,function(Z){var pe=yt.getValue(Z);return pe.value===me.value}),Mr.getHighlighted(ne).orThunk(function(){return Mr.highlightFirst(ne),D.none()})})})};X3(t,p(S),S,R,c,U,Yl.HighlightFirst).get(at)}},cancelEvent:i0()}),sn.config({mode:"special",onDown:function(S,k){return v(S,k,Mr.highlightFirst),D.some(!0)},onEscape:function(S){var k=wo.getCoupled(S,"sandbox");return fr.isOpen(k)?(fr.close(k),D.some(!0)):D.none()},onUp:function(S,k){return v(S,k,Mr.highlightLast),D.some(!0)},onEnter:function(S){var k=wo.getCoupled(S,"sandbox"),R=fr.isOpen(k);if(R&&!t.previewing.get())return Jn.getCurrent(k).bind(function(L){return Mr.getHighlighted(L)}).map(function(L){return un(S,GE(),{item:L}),!0});var B=yt.getValue(S);return er(S,i0()),t.onExecute(k,S,B),R&&fr.close(k),D.some(!0)}}),dr.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),wo.config({others:{sandbox:function(S){return Y3(t,S,{onOpen:function(){return dr.on(S)},onClose:function(){return dr.off(S)}})}}}),Fn("typeaheadevents",[Rc(function(S){var k=at;Tb(t,p(S),S,c,k,Yl.HighlightFirst).get(at)}),We(GE(),function(S,k){var R=wo.getCoupled(S,"sandbox");K2(t.model,S,k.event.item),er(S,i0()),t.onItemExecute(S,R,k.event.item,yt.getValue(S)),fr.close(R),r_(S)})].concat(t.dismissOnBlur?[We(a0(),function(S){var k=wo.getCoupled(S,"sandbox");Mc(k.element).isNone()&&fr.close(k)})]:[]))];return{uid:t.uid,dom:TD($e(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:ue(ue({},m),Zo(t.typeaheadBehaviours,C)),eventOrder:t.eventOrder}},Q$=ye([Br("lazySink"),He("fetch"),he("minChars",5),he("responseTime",1e3),Yn("onOpen"),he("getHotspot",D.some),he("getAnchorOverrides",ye({})),he("layouts",D.none()),he("eventOrder",{}),Xb("model",{},[he("getDisplayText",function(t){return t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value}),he("selectsOver",!0),he("populateFromBrowse",!0)]),Yn("onSetValue"),oa("onExecute"),Yn("onItemExecute"),he("inputClasses",[]),he("inputAttributes",{}),he("inputStyles",{}),he("matchWidth",!0),he("useMinWidth",!1),he("dismissOnBlur",!0),wd(["openClass"]),Br("initialData"),Jo("typeaheadBehaviours",[bn,yt,t_,sn,dr,wo]),Tu("previewing",function(){return nn(!0)})].concat(mx()).concat(J3())),ez=ye([Hs({schema:[yd()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(r,o){t.previewing.get()?r.getSystem().getByUid(t.uid).each(function(c){J$(t.model,c,o).fold(function(){return Mr.dehighlight(r,o)},function(v){return v()})}):r.getSystem().getByUid(t.uid).each(function(c){t.model.populateFromBrowse&&K2(t.model,c,o)}),t.previewing.set(!1)},onExecute:function(r,o){return r.getSystem().getByUid(t.uid).toOptional().map(function(c){return un(c,GE(),{item:o}),!0})},onHover:function(r,o){t.previewing.set(!1),r.getSystem().getByUid(t.uid).each(function(c){t.model.populateFromBrowse&&K2(t.model,c,o)})}}}})]),tz=Bu({name:"Typeahead",configFields:Q$(),partFields:ez(),factory:Z$}),hc=function(t){var r=function(){return hc(t.toCached())},o=function(S){return hc(t.bind(function(k){return k.fold(function(R){return Qi.pure(In.error(R))},function(R){return S(R)})}))},c=function(S){return hc(t.map(function(k){return k.bind(S)}))},v=function(S){return hc(t.map(function(k){return k.map(S)}))},m=function(S){return hc(t.map(function(k){return k.mapError(S)}))},p=function(S,k){return t.map(function(R){return R.fold(S,k)})},C=function(S,k){return hc(Qi.nu(function(R){var B=!1,L=setTimeout(function(){B=!0,R(In.error(k()))},S);t.get(function(U){B||(clearTimeout(L),R(U))})}))};return ue(ue({},t),{toCached:r,bindFuture:o,bindResult:c,mapResult:v,mapError:m,foldResult:p,withTimeout:C})},o_=function(t){return hc(Qi.nu(t))},i_=function(t){return hc(Qi.pure(In.value(t)))},nz=function(t){return hc(Qi.pure(In.error(t)))},rz=function(t){return hc(Qi.pure(t))},az=function(t){return hc(t.map(In.value))},oz=function(t){return o_(function(r){t.then(function(o){r(In.value(o))},function(o){r(In.error(o))})})},iz={nu:o_,wrap:hc,pure:i_,value:i_,error:nz,fromResult:rz,fromFuture:az,fromPromise:oz},u_={type:"separator"},uz=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:at}},qE=function(t,r){return{type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:at}},sz=function(t){return nt(t,uz)},cz=function(t,r){return tn(r,function(o){return o.type===t})},s_=function(t,r){return sz(cz(t,r))},lz=function(t){return s_("header",t.targets)},fz=function(t){return s_("anchor",t.targets)},c_=function(t){return D.from(t.anchorTop).map(function(r){return qE("<top>",r)}).toArray()},vz=function(t){return D.from(t.anchorBottom).map(function(r){return qE("<bottom>",r)}).toArray()},dz=function(t){return nt(t,function(r){return qE(r,r)})},mz=function(t){return Hn(t,function(r,o){var c=r.length===0||o.length===0;return c?r.concat(o):r.concat(u_,o)},[])},KE=function(t,r){var o=t.toLowerCase();return tn(r,function(c){var v=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text;return Er(v.toLowerCase(),o)||Er(c.value.toLowerCase(),o)})},gz=function(t,r,o){var c=yt.getValue(r),v=c.meta.text!==void 0?c.meta.text:c.value,m=o.getLinkInformation();return m.fold(function(){return[]},function(p){var C=KE(v,dz(o.getHistory(t)));return t==="file"?mz([C,KE(v,lz(p)),KE(v,jt([c_(p),fz(p),vz(p)]))]):C})},l_=Nt("aria-invalid"),f_=function(t,r,o){var c,v=r.shared.providers,m=function(Z){var pe=yt.getValue(Z);o.addToHistory(pe.value,t.filetype)},p=Rr.parts.field({factory:tz,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":l_,type:"url"},minChars:0,responseTime:0,fetch:function(Z){var pe=gz(t.filetype,Z,o),_e=Mb(pe,Lf.BUBBLE_TO_SANDBOX,r,!1);return Qi.pure(_e)},getHotspot:function(Z){return U.getOpt(Z)},onSetValue:function(Z,pe){Z.hasConfigured(Vv)&&Vv.run(Z).get(at)},typeaheadBehaviours:vt(jt([o.getValidationHandler().map(function(Z){return Vv.config({getRoot:function(pe){return Fa(pe.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(pe,_e){k.getOpt(pe).each(function(ze){Mn(ze.element,"title",v.translate(_e))})}},validator:{validate:function(pe){var _e=yt.getValue(pe);return iz.nu(function(ze){Z({type:t.filetype,url:_e.value},function(ge){if(ge.status==="invalid"){var ke=In.error(ge.message);ze(ke)}else{var Le=In.value(ge.message);ze(Le)}})})},validateOnLoad:!1}})}).toArray(),[Zt.config({disabled:function(){return t.disabled||v.isDisabled()}}),yo.config({}),Fn("urlinput-events",jt([t.filetype==="file"?[We(od(),function(Z){un(Z,vc,{name:t.name})})]:[],[We(km(),function(Z){un(Z,vc,{name:t.name}),m(Z)}),We(o0(),function(Z){un(Z,vc,{name:t.name}),m(Z)})]]))]])),eventOrder:(c={},c[od()]=["streaming","urlinput-events","invalidating"],c),model:{getDisplayText:function(Z){return Z.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:KS(!1,1,"normal")},onExecute:function(Z,pe,_e){un(pe,Sb,{})},onItemExecute:function(Z,pe,_e,ze){m(Z),un(Z,vc,{name:t.name})}}),C=t.label.map(function(Z){return Sg(Z,v)}),S=function(Z,pe,_e,ze){return _e===void 0&&(_e=Z),ze===void 0&&(ze=Z),Ff(_e,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Z],attributes:ue({title:v.translate(ze),"aria-live":"polite"},pe.fold(function(){return{}},function(ge){return{id:ge}}))},v.icons)},k=$r(S("invalid",D.some(l_),"warning")),R=$r({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[k.asSpec()]}),B=o.getUrlPicker(t.filetype),L=Nt("browser.url.event"),U=$r({dom:{tag:"div",classes:["tox-control-wrap"]},components:[p,R.asSpec()],behaviours:vt([Zt.config({disabled:function(){return t.disabled||v.isDisabled()}})])}),K=$r(FE({name:t.name,icon:D.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},function(Z){return er(Z,L)},v,[],["tox-browse-url"])),ne=function(){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:jt([[U.asSpec()],B.map(function(){return K.asSpec()}).toArray()])}},me=function(Z){Jn.getCurrent(Z).each(function(pe){var _e=yt.getValue(pe),ze=ue({fieldname:t.name},_e);B.each(function(ge){ge(ze).get(function(ke){yt.setValue(pe,ke),un(Z,vc,{name:t.name})})})})};return Rr.sketch({dom:ZM(),components:C.toArray().concat([ne()]),fieldBehaviours:vt([Zt.config({disabled:function(){return t.disabled||v.isDisabled()},onDisabled:function(Z){Rr.getField(Z).each(Zt.disable),K.getOpt(Z).each(Zt.disable)},onEnabled:function(Z){Rr.getField(Z).each(Zt.enable),K.getOpt(Z).each(Zt.enable)}}),ei(),Fn("url-input-events",[We(L,me)])])})},vp=function(t,r){return Nu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+t.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Pu.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:AO(t.icon,r.icons),attributes:{title:r.translate(t.iconTooltip)}},action:function(o){un(o,Lv,{name:"alert-banner",value:t.url})},buttonBehaviours:vt([P4()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},Yx=function(t,r){var o=yt.config({store:{mode:"manual",getValue:function(S){var k=S.element.dom;return k.checked},setValue:function(S,k){var R=S.element.dom;R.checked=k}}}),c=function(S){return S.element.dom.click(),D.some(!0)},v=Rr.parts.field({factory:{sketch:Lt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:vt([Wf.self(),Zt.config({disabled:function(){return t.disabled||r.isDisabled()}}),yo.config({}),bn.config({}),o,sn.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),Fn("checkbox-events",[We(km(),function(S,k){un(S,vc,{name:t.name})})])])}),m=Rr.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:r.translate(t.label)},behaviours:vt([B2.config({})])}),p=function(S){var k=S==="checked"?"selected":"unselected";return Ff(k,{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},r.icons)},C=$r({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Rr.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[v,C.asSpec(),m],fieldBehaviours:vt([Zt.config({disabled:function(){return t.disabled||r.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(S){Rr.getField(S).each(Zt.disable)},onEnabled:function(S){Rr.getField(S).each(Zt.enable)}}),ei()])})},hz=function(t){return t.presets==="presentation"?Nu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Nu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:vt([yo.config({}),bn.config({})])})},Ii=function(t){return function(r,o,c){return Gt(o,"name").fold(function(){return t(o,c)},function(v){return r.field(v,t(o,c))})}},XE=function(t){return function(r,o,c){var v=$e(o,{source:"dynamic"});return Ii(t)(r,v,c)}},pz={bar:Ii(function(t,r){return jM(t,r.shared)}),collection:Ii(function(t,r){return W3(t,r.shared.providers)}),alertbanner:Ii(function(t,r){return vp(t,r.shared.providers)}),input:Ii(function(t,r){return U$(t,r.shared.providers)}),textarea:Ii(function(t,r){return W$(t,r.shared.providers)}),label:Ii(function(t,r){return I$(t,r.shared)}),iframe:XE(function(t,r){return EN(t,r.shared.providers)}),button:Ii(function(t,r){return LE(t,r.shared.providers)}),checkbox:Ii(function(t,r){return Yx(t,r.shared.providers)}),colorinput:Ii(function(t,r){return Z3(t,r.shared,r.colorinput)}),colorpicker:Ii(pN),dropzone:Ii(function(t,r){return xN(t,r.shared.providers)}),grid:Ii(function(t,r){return CR(t,r.shared)}),listbox:Ii(function(t,r){return JR(t,r)}),selectbox:Ii(function(t,r){return H$(t,r.shared.providers)}),sizeinput:Ii(function(t,r){return VE(t,r.shared.providers)}),urlinput:Ii(function(t,r){return f_(t,r,r.urlinput)}),customeditor:Ii(Fx),htmlpanel:Ii(hz),imagetools:Ii(function(t,r){return z$(t,r.shared.providers)}),table:Ii(function(t,r){return V$(t,r.shared.providers)}),panel:Ii(function(t,r){return F$(t,r)})},bz={field:function(t,r){return r}},YE=function(t,r,o){var c=$e(o,{shared:{interpreter:function(v){return Jx(t,v,c)}}});return Jx(t,r,c)},Jx=function(t,r,o){return Gt(pz,r.type).fold(function(){return console.error('Unknown factory type "'+r.type+'", defaulting to container: ',r),r},function(c){return c(t,r,o)})},yz=function(t,r){var o=bz;return Jx(o,t,r)},v_={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},wz=function(t,r,o){var c=12,v={maxHeightFunction:Wm()},m=function(){return{type:"node",root:xt(t()),node:D.from(t()),bubble:Cv(c,c,v_),layouts:{onRtl:function(){return[Zd]},onLtr:function(){return[Uh]}},overrides:v}},p=function(){return{type:"hotspot",hotspot:r(),bubble:Cv(-c,c,v_),layouts:{onRtl:function(){return[Ji]},onLtr:function(){return[Ho]}},overrides:v}};return function(){return o()?m():p()}},Cz=function(t,r,o){var c=function(){return{type:"node",root:xt(t()),node:D.from(t()),layouts:{onRtl:function(){return[Lc]},onLtr:function(){return[Lc]}}}},v=function(){return{type:"hotspot",hotspot:r(),layouts:{onRtl:function(){return[Mi]},onLtr:function(){return[Mi]}}}};return function(){return o()?c():v()}},Sz=function(t,r){return function(){return{type:"selection",root:r(),getSelection:function(){var o=t.selection.getRng();return D.some(qm.range(re.fromDom(o.startContainer),o.startOffset,re.fromDom(o.endContainer),o.endOffset))}}}},d_=function(t){return function(r){return{type:"node",root:t(),node:r}}},xz=function(t,r,o){var c=tx(t),v=function(){return re.fromDom(t.getBody())},m=function(){return re.fromDom(t.getContentAreaContainer())},p=function(){return c||!o()};return{inlineDialog:wz(m,r,p),banner:Cz(m,r,p),cursor:Sz(t,v),node:d_(v)}},m_=function(t){return function(r,o){var c=aD(t);c(r,o)}},Tz=function(t){return function(){return ux(t)}},kz=function(t){return function(){return M3(t)}},JE=function(t){return function(){return QA(t)}},ZE=function(t){return{colorPicker:m_(t),hasCustomColors:Tz(t),getColors:kz(t),getColorCols:JE(t)}},X2=function(t){return function(){return O5(t)}},Ez=function(t){return{isDraggableModal:X2(t)}},Oz=function(t){var r=nn(SA(t)?"bottom":"top");return{isPositionedAtTop:function(){return r.get()==="top"},getDockingMode:r.get,setDockingMode:r.set}},g_=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],Az=function(t){return hr(t,"items")},Dz=function(t){return hr(t,"block")},h_=function(t){return hr(t,"inline")},p_=function(t){return hr(t,"selector")},QE=function(t){return Hn(t,function(r,o){if(Az(o)){var c=QE(o.items);return{customFormats:r.customFormats.concat(c.customFormats),formats:r.formats.concat([{title:o.title,items:c.formats}])}}else if(h_(o)||Dz(o)||p_(o)){var v=Xt(o.name)?o.name:o.title.toLowerCase(),m="custom-"+v;return{customFormats:r.customFormats.concat([{name:m,format:o}]),formats:r.formats.concat([{title:o.title,format:m,icon:o.icon}])}}else return ue(ue({},r),{formats:r.formats.concat(o)})},{customFormats:[],formats:[]})},Rz=function(t,r){var o=QE(r),c=function(v){kt(v,function(m){t.formatter.has(m.name)||t.formatter.register(m.name,m.format)})};return t.formatter?c(o.customFormats):t.on("init",function(){c(o.customFormats)}),o.formats},b_=function(t){return yA(t).map(function(r){var o=Rz(t,r);return wA(t)?g_.concat(o):o}).getOr(g_)},y_=function(t,r,o){var c={type:"formatter",isSelected:r(t.format),getStylePreview:o(t.format)};return $e(t,c)},w_=function(t,r,o,c){var v=function(S){return y_(S,o,c)},m=function(S){var k={type:"submenu"};return $e(S,k)},p=function(S){var k=Xt(S.name)?S.name:Nt(S.title),R="custom-"+k,B={type:"formatter",format:R,isSelected:o(R),getStylePreview:c(R)},L=$e(S,B);return t.formatter.register(k,L),L},C=function(S){return nt(S,function(k){var R=ta(k);if(ha(k,"items")){var B=C(k.items);return $e(m(k),{getStyleItems:ye(B)})}else return ha(k,"format")?v(k):R.length===1&&Un(R,"title")?$e(k,{type:"separator"}):p(k)})};return C(r)},_z=function(t){var r=function(B){return function(){return t.formatter.match(B)}},o=function(B){return function(){var L=t.formatter.get(B);return L!==void 0?D.some({tag:L.length>0&&(L[0].inline||L[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(B))}):D.none()}},c=function(B){var L=B.items;return L!==void 0&&L.length>0?Jr(L,c):[B.format]},v=nn([]),m=nn([]),p=nn([]),C=nn([]),S=nn(!1);t.on("PreInit",function(B){var L=b_(t),U=w_(t,L,r,o);v.set(U),m.set(Jr(U,c))}),t.on("addStyleModifications",function(B){var L=w_(t,B.items,r,o);p.set(L),S.set(B.replace),C.set(Jr(L,c))});var k=function(){var B=S.get()?[]:v.get(),L=p.get();return B.concat(L)},R=function(){var B=S.get()?[]:m.get(),L=C.get();return B.concat(L)};return{getData:k,getFlattenedKeys:R}},C_=function(t){return Tn(t)&&t.nodeType===1},Bz=jv.trim,S_=function(t){return function(r){return!!(C_(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t))}},Mz=S_("true"),Pz=S_("false"),eO=function(t,r,o,c,v){return{type:t,title:r,url:o,level:c,attach:v}},dp=function(t){for(;t=t.parentNode;){var r=t.contentEditable;if(r&&r!=="inherit")return Mz(t)}return!1},x_=function(t,r){return nt(Yo(re.fromDom(r),t),function(o){return o.dom})},T_=function(t){return t.innerText||t.textContent},Nz=function(t){return t.id?t.id:Nt("h")},$z=function(t){return t&&t.nodeName==="A"&&(t.id||t.name)!==void 0},k_=function(t){return $z(t)&&O_(t)},E_=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},O_=function(t){return dp(t)&&!Pz(t)},zz=function(t){return E_(t)&&O_(t)},Iz=function(t){return E_(t)?parseInt(t.nodeName.substr(1),10):0},Fz=function(t){var r=Nz(t),o=function(){t.id=r};return eO("header",T_(t),"#"+r,Iz(t),o)},Lz=function(t){var r=t.id||t.name,o=T_(t);return eO("anchor",o||"#"+r,"#"+r,0,at)},Hz=function(t){return nt(tn(t,zz),Fz)},Vz=function(t){return nt(tn(t,k_),Lz)},Uz=function(t){var r=x_("h1,h2,h3,h4,h5,h6,a:not([href])",t);return r},Wz=function(t){return Bz(t.title).length>0},A_=function(t){var r=Uz(t);return tn(Hz(r).concat(Vz(r)),Wz)},jz={find:A_},Zx="tinymce-url-history",D_=5,R_=function(t){return Xt(t)&&/^https?/.test(t)},Gz=function(t){return ar(t)&&t.length<=D_&&jr(t,R_)},Qx=function(t){return yr(t)&&No(t,function(r){return!Gz(r)}).isNone()},tO=function(){var t=ix.getItem(Zx);if(t===null)return{};var r;try{r=JSON.parse(t)}catch(o){if(o instanceof SyntaxError)return console.log("Local storage "+Zx+" was not valid JSON",o),{};throw o}return Qx(r)?r:(console.log("Local storage "+Zx+" was not valid format",r),{})},qz=function(t){if(!Qx(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));ix.setItem(Zx,JSON.stringify(t))},Kz=function(t){var r=tO();return Gt(r,t).getOr([])},Xz=function(t,r){if(R_(t)){var o=tO(),c=Gt(o,r).getOr([]),v=tn(c,function(m){return m!==t});o[r]=[t].concat(v).slice(0,D_),qz(o)}},nO=function(t){return!!t},Yz=function(t){return kr(jv.makeMap(t,/[, ]/),nO)},rO=function(t){return D.from(TA(t)).filter(or)},Jz=function(t){var r=D.some(kA(t)).filter(nO),o=D.some(R5(t)).filter(nO),c=r.or(o).map(Yz);return rO(t).fold(kn,function(v){return c.fold(Tt,function(m){return ta(m).length>0?m:!1})})},Zz=function(t,r){var o=Jz(t);return no(o)?o?rO(t):D.none():o[r]?rO(t):D.none()},Qz=function(t,r){return Zz(t,r).map(function(o){return function(c){return Qi.nu(function(v){var m=function(C,S){if(!Xt(C))throw new Error("Expected value to be string");if(S!==void 0&&!yr(S))throw new Error("Expected meta to be a object");var k={value:C,meta:S};v(k)},p=ue({filetype:r,fieldname:c.fieldname},D.from(c.meta).getOr({}));o.call(t,m,c.value,p)})}})},Y2=function(t){return D.from(t).filter(Xt).getOrUndefined()},e6=function(t){return EA(t)?D.none():D.some({targets:jz.find(t.getBody()),anchorTop:Y2(_5(t)),anchorBottom:Y2(B5(t))})},t6=function(t){return D.from(M5(t))},__=function(t){return{getHistory:Kz,addToHistory:Xz,getLinkInformation:function(){return e6(t)},getValidationHandler:function(){return t6(t)},getUrlPicker:function(r){return Qz(t,r)}}},mp=function(t,r,o){var c=nn(!1),v=Oz(r),m={shared:{providers:{icons:function(){return r.ui.registry.getAll().icons},menuItems:function(){return r.ui.registry.getAll().menuItems},translate:Hc.translate,isDisabled:function(){return r.mode.isReadOnly()||r.ui.isDisabled()},getSetting:r.getParam.bind(r)},interpreter:function(p){return yz(p,m)},anchors:xz(r,o,v.isPositionedAtTop),header:v,getSink:function(){return In.value(t)}},urlinput:__(r),styleselect:_z(r),colorinput:ZE(r),dialog:Ez(r),isContextMenuOpen:function(){return c.get()},setContextMenuState:function(p){return c.set(p)}};return m},n6=function(t,r,o){var c=function(ze,ge){kt([r,o],function(ke){ke.broadcastEvent(ze,ge)})},v=function(ze,ge){kt([r,o],function(ke){ke.broadcastOn([ze],ge)})},m=function(ze){return v(Nd(),{target:ze.target})},p=t1(),C=co(p,"touchstart",m),S=co(p,"touchmove",function(ze){return c(_p(),ze)}),k=co(p,"touchend",function(ze){return c(BT(),ze)}),R=co(p,"mousedown",m),B=co(p,"mouseup",function(ze){ze.raw.button===0&&v(ws(),{target:ze.target})}),L=function(ze){return v(Nd(),{target:re.fromDom(ze.target)})},U=function(ze){ze.button===0&&v(ws(),{target:re.fromDom(ze.target)})},K=function(){kt(t.editorManager.get(),function(ze){t!==ze&&ze.fire("DismissPopups",{relatedTarget:t})})},ne=function(ze){return c(u0(),Vm(ze))},me=function(ze){v(Ym(),{}),c(zs(),Vm(ze))},Z=function(){return v(Ym(),{})},pe=function(ze){ze.state&&v(Nd(),{target:re.fromDom(t.getContainer())})},_e=function(ze){v(Nd(),{target:re.fromDom(ze.relatedTarget.getContainer())})};t.on("PostRender",function(){t.on("click",L),t.on("tap",L),t.on("mouseup",U),t.on("mousedown",K),t.on("ScrollWindow",ne),t.on("ResizeWindow",me),t.on("ResizeEditor",Z),t.on("AfterProgressState",pe),t.on("DismissPopups",_e)}),t.on("remove",function(){t.off("click",L),t.off("tap",L),t.off("mouseup",U),t.off("mousedown",K),t.off("ScrollWindow",ne),t.off("ResizeWindow",me),t.off("ResizeEditor",Z),t.off("AfterProgressState",pe),t.off("DismissPopups",_e),R.unbind(),C.unbind(),S.unbind(),k.unbind(),B.unbind()}),t.on("detach",function(){R1(r),R1(o),r.destroy(),o.destroy()})},Zu=HC,Gv=Dv,r6=ye([he("shell",!1),He("makeItem"),he("setupItem",at),sc.field("listBehaviours",[On])]),a6=function(){return{behaviours:vt([On.config({})])}},o6=zc({name:"items",overrides:a6}),i6=ye([o6]),u6=ye("CustomList"),gp=function(t,r,o,c){var v=function(C,S){p(C).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(k){var R=On.contents(k),B=S.length,L=B-R.length,U=L>0?ee(L,function(){return t.makeItem()}):[],K=R.slice(B);kt(K,function(me){return On.remove(k,me)}),kt(U,function(me){return On.append(k,me)});var ne=On.contents(k);kt(ne,function(me,Z){t.setupItem(C,me,S[Z],Z)})})},m=t.shell?{behaviours:[On.config({})],components:[]}:{behaviours:[],components:r},p=function(C){return t.shell?D.some(C):Qr(C,t,"items")};return{uid:t.uid,dom:t.dom,components:m.components,behaviours:Zo(t.listBehaviours,m.behaviours),apis:{setItems:v}}},aO=Bu({name:u6(),configFields:r6(),partFields:i6(),factory:gp,apis:{setItems:function(t,r,o){t.setItems(r,o)}}}),$b=ye([He("dom"),he("shell",!0),Jo("toolbarBehaviours",[On])]),s6=function(){return{behaviours:vt([On.config({})])}},c6=ye([zc({name:"groups",overrides:s6})]),l6=function(t,r,o,c){var v=function(C,S){m(C).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(k){On.set(k,S)})},m=function(C){return t.shell?D.some(C):Qr(C,t,"groups")},p=t.shell?{behaviours:[On.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:Zo(t.toolbarBehaviours,p.behaviours),apis:{setGroups:v},domModification:{attributes:{role:"group"}}}},jf=Bu({name:"Toolbar",configFields:$b(),partFields:c6(),factory:l6,apis:{setGroups:function(t,r,o){t.setGroups(r,o)}}}),f6=at,oO=kn,zb=ye([]),eT=Object.freeze({__proto__:null,setup:f6,isDocked:oO,getBehaviours:zb}),J2=function(t){var r=Ti(go(t,"position"),"fixed"),o=r?D.none():Ds(t);return o.orThunk(function(){var c=re.fromTag("span");return Fa(t).bind(function(v){Gi(v,c);var m=Ds(c);return Uu(c),m})})},Ag=function(t){return J2(t).map(Cu).getOrThunk(function(){return na(0,0)})},Ib=Ns.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),v6=function(t,r){var o=t.element;vi(o,r.transitionClass),Ro(o,r.fadeOutClass),vi(o,r.fadeInClass),r.onShow(t)},B_=function(t,r){var o=t.element;vi(o,r.transitionClass),Ro(o,r.fadeInClass),vi(o,r.fadeOutClass),r.onHide(t)},M_=function(t,r){return t.y<r.bottom&&t.bottom>r.y},P_=function(t,r){return t.y>=r.y},d6=function(t,r){return t.bottom<=r.bottom},iO=function(t,r,o){return jr(t,function(c){switch(c){case"bottom":return d6(r,o);case"top":return P_(r,o)}})},N_=function(t,r){return r.getInitialPos().map(function(o){return Fo(o.bounds.x,o.bounds.y,ji(t),Oo(t))})},m6=function(t,r,o){o.setInitialPos({style:uf(t),position:ja(t,"position")||"static",bounds:r})},$_=function(t,r,o){return o.getInitialPos().bind(function(c){switch(o.clearInitialPos(),c.position){case"static":return D.some(Ib.static());case"absolute":var v=J2(t).map(ho).getOrThunk(function(){return ho(Hr())});return D.some(Ib.absolute(Uo("absolute",Gt(c.style,"left").map(function(m){return r.x-v.x}),Gt(c.style,"top").map(function(m){return r.y-v.y}),Gt(c.style,"right").map(function(m){return v.right-r.right}),Gt(c.style,"bottom").map(function(m){return v.bottom-r.bottom}))));default:return D.none()}})},uO=function(t,r,o){return N_(t,o).filter(function(c){return iO(o.getModes(),c,r)}).bind(function(c){return $_(t,c,o)})},sO=function(t,r,o){var c=ho(t);if(iO(o.getModes(),c,r))return D.none();m6(t,c,o);var v=Ai(),m=c.x-v.x,p=r.y-v.y,C=v.bottom-r.bottom,S=c.y<=r.y;return D.some(Ib.fixed(Uo("fixed",D.some(m),S?D.some(p):D.none(),D.none(),S?D.none():D.some(C))))},g6=function(t,r,o){var c=t.element,v=Ti(go(c,"position"),"fixed");return v?uO(c,r,o):sO(c,r,o)},z_=function(t,r){var o=t.element;return N_(o,r).bind(function(c){return $_(o,c,r)})},I_=function(t,r,o){o.setDocked(!1),kt(["left","right","top","bottom","position"],function(c){return _r(t.element,c)}),r.onUndocked(t)},tT=function(t,r,o,c){var v=c.position==="fixed";o.setDocked(v),Re(t.element,c);var m=v?r.onDocked:r.onUndocked;m(t)},F_=function(t,r,o,c,v){v===void 0&&(v=!1),r.contextual.each(function(m){m.lazyContext(t).each(function(p){var C=M_(p,c);if(C!==o.isVisible())if(o.setVisible(C),v&&!C)Ef(t.element,[m.fadeOutClass]),m.onHide(t);else{var S=C?v6:B_;S(t,m)}})})},h6=function(t,r,o){var c=r.lazyViewport(t),v=o.isDocked();v&&F_(t,r,o,c),g6(t,c,o).each(function(m){m.fold(function(){return I_(t,r,o)},function(p){return tT(t,r,o,p)},function(p){F_(t,r,o,c,!0),tT(t,r,o,p)})})},hp=function(t,r,o){var c=t.element;o.setDocked(!1),z_(t,o).each(function(v){v.fold(function(){return I_(t,r,o)},function(m){return tT(t,r,o,m)},at)}),o.setVisible(!0),r.contextual.each(function(v){zl(c,[v.fadeInClass,v.fadeOutClass,v.transitionClass]),v.onShow(t)}),nT(t,r,o)},nT=function(t,r,o){t.getSystem().isConnected()&&h6(t,r,o)},L_=function(t,r,o){o.isDocked()&&hp(t,r,o)},H_=function(t,r,o){return o.isDocked()},p6=function(t,r,o,c){return o.setModes(c)},rT=function(t,r,o){return o.getModes()},ef=Object.freeze({__proto__:null,refresh:nT,reset:L_,isDocked:H_,getModes:rT,setModes:p6}),b6=function(t,r){return ga([Tf(Om(),function(o,c){t.contextual.each(function(v){if(Ou(o.element,v.transitionClass)){zl(o.element,[v.transitionClass,v.fadeInClass]);var m=r.isVisible()?v.onShown:v.onHidden;m(o)}c.stop()})}),We(u0(),function(o,c){nT(o,t,r)}),We(zs(),function(o,c){L_(o,t,r)})])},qv=Object.freeze({__proto__:null,events:b6}),y6=[vs("contextual",[xn("fadeInClass"),xn("fadeOutClass"),xn("transitionClass"),fu("lazyContext"),Yn("onShow"),Yn("onShown"),Yn("onHide"),Yn("onHidden")]),ma("lazyViewport",Ai),yf("modes",["top","bottom"],io),Yn("onDocked"),Yn("onUndocked")],w6=function(t){var r=nn(!1),o=nn(!0),c=Qa(),v=nn(t.modes),m=function(){return"docked:  "+r.get()+", visible: "+o.get()+", modes: "+v.get().join(",")};return fi({isDocked:r.get,setDocked:r.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:o.get,setVisible:o.set,getModes:v.get,setModes:v.set,readState:m})},V_=Object.freeze({__proto__:null,init:w6}),eu=so({fields:y6,name:"docking",active:qv,apis:ef,state:V_}),Kv=ye(Nt("toolbar-height-change")),Wo={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},U_="tox-tinymce--toolbar-sticky-on",cO="tox-tinymce--toolbar-sticky-off",W_=function(t,r){var o=Ia(r),c=o.dom.defaultView.innerHeight,v=cs(o),m=re.fromDom(t.elm),p=Dl(m),C=Oo(m),S=p.y,k=S+C,R=Cu(r),B=Oo(r),L=R.top,U=L+B,K=Math.abs(L-v.top)<2,ne=Math.abs(U-(v.top+c))<2;if(K&&S<U)vm(v.left,S-B,o);else if(ne&&k>L){var me=S-c+C+B;vm(v.left,me,o)}},aT=function(t,r){return Un(eu.getModes(t),r)},lO=function(t){var r=function(c){return ss(c)+(parseInt(ja(c,"margin-top"),10)||0)+(parseInt(ja(c,"margin-bottom"),10)||0)},o=t.element;Fa(o).each(function(c){var v="padding-"+eu.getModes(t)[0];if(eu.isDocked(t)){var m=ji(c);pn(o,"width",m+"px"),pn(c,v,r(o)+"px")}else _r(o,"width"),_r(c,v)})},j_=function(t,r){r?(Ro(t,Wo.fadeOutClass),Ef(t,[Wo.transitionClass,Wo.fadeInClass])):(Ro(t,Wo.fadeInClass),Ef(t,[Wo.fadeOutClass,Wo.transitionClass]))},im=function(t,r){var o=re.fromDom(t.getContainer());r?(vi(o,U_),Ro(o,cO)):(vi(o,cO),Ro(o,U_))},G_=function(t,r){var o=Ia(r);bs(o).filter(function(c){return!Lr(r,c)}).filter(function(c){return Lr(c,re.fromDom(o.dom.body))||Vu(t,c)}).each(function(){return Ll(r)})},Fb=function(t,r){return Mc(t).orThunk(function(){return r().toOptional().bind(function(o){return Mc(o.element)})})},oT=function(t,r,o){t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",function(){o().each(eu.reset)}),t.on("ResizeWindow ResizeEditor",function(){o().each(lO)}),t.on("SkinLoaded",function(){o().each(function(c){eu.isDocked(c)?eu.reset(c):eu.refresh(c)})}),t.on("FullscreenStateChanged",function(){o().each(eu.reset)})),t.on("AfterScrollIntoView",function(c){o().each(function(v){eu.refresh(v);var m=v.element;uS(m)&&W_(c,m)})}),t.on("PostRender",function(){im(t,!1)})},q_=function(t){return t().map(eu.isDocked).getOr(!1)},C6=function(){var t;return[ps.config({channels:(t={},t[Kv()]={onReceive:lO},t)})]},K_=function(t,r){var o=Qa(),c=r.getSink,v=function(C){c().each(function(S){return C(S.element)})},m=function(C){t.inline||lO(C),im(t,eu.isDocked(C)),C.getSystem().broadcastOn([Ym()],{}),c().each(function(S){return S.getSystem().broadcastOn([Ym()],{})})},p=t.inline?[]:C6();return gt([bn.config({}),eu.config({contextual:ue({lazyContext:function(C){var S=ss(C.element),k=t.inline?t.getContentAreaContainer():t.getContainer(),R=ho(re.fromDom(k)),B=R.height-S,L=R.y+(aT(C,"top")?0:S);return D.some(Fo(R.x,L,R.width,B))},onShow:function(){v(function(C){return j_(C,!0)})},onShown:function(C){v(function(S){return zl(S,[Wo.transitionClass,Wo.fadeInClass])}),o.get().each(function(S){G_(C.element,S),o.clear()})},onHide:function(C){Fb(C.element,c).fold(o.clear,o.set),v(function(S){return j_(S,!1)})},onHidden:function(){v(function(C){return zl(C,[Wo.transitionClass])})}},Wo),lazyViewport:function(C){var S=Ai(),k=E5(t),R=S.y+(aT(C,"top")?k:0),B=S.height-(aT(C,"bottom")?k:0);return Fo(S.x,R,S.width,B)},modes:[r.header.getDockingMode()],onDocked:m,onUndocked:m})],p,!0)},S6=Object.freeze({__proto__:null,setup:oT,isDocked:q_,getBehaviours:K_}),x6=function(t){var r=t.editor,o=t.sticky?K_:zb;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:vt(o(r,t.sharedBackstage))}},Lb=Yt([xn("type"),Gu("items",Ig([Kb([xn("name"),Xi("items",io)]),io]))].concat(jh)),T6=function(t){return Ha("GroupToolbarButton",Lb,t)},k6=[da("text"),da("tooltip"),da("icon"),fu("fetch"),ma("onSetup",function(){return at})],E6=Yt(gt([xn("type")],k6,!0)),X_=function(t){return Ha("menubutton",E6,t)},O6=Yt([xn("type"),da("tooltip"),da("icon"),da("text"),tv("select"),fu("fetch"),ma("onSetup",function(){return at}),Ps("presets","normal",["normal","color","listpreview"]),he("columns",1),fu("onAction"),fu("onItemAction")]),iT=function(t){return Ha("SplitButton",O6,t)},A6=function(t,r){var o=function(v,m){var p=nt(m,function(C){var S={type:"menubutton",text:C.text,fetch:function(R){R(C.getItems())}},k=X_(S).mapError(function(R){return ev(R)}).getOrDie();return zE(k,"tox-mbtn",r.backstage,D.some("menuitem"))});On.set(v,p)},c={focus:sn.focusIn,setMenus:o};return{uid:t.uid,dom:t.dom,components:[],behaviours:vt([On.config({}),Fn("menubar-events",[Ma(function(v){t.onSetup(v)}),We(Cf(),function(v,m){_o(v.element,".tox-mbtn--active").each(function(p){du(m.event.target,".tox-mbtn").each(function(C){Lr(p,C)||v.getSystem().getByDom(p).each(function(S){v.getSystem().getByDom(C).each(function(k){yl.expand(k),yl.close(S),bn.focus(k)})})})})}),We(Bp(),function(v,m){m.event.prevFocus.bind(function(p){return v.getSystem().getByDom(p).toOptional()}).each(function(p){m.event.newFocus.bind(function(C){return v.getSystem().getByDom(C).toOptional()}).each(function(C){yl.isOpen(p)&&(yl.expand(C),yl.close(p))})})})]),sn.config({mode:"flow",selector:".tox-mbtn",onEscape:function(v){return t.onEscape(v),D.some(!0)}}),yo.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},uT=Cs({factory:A6,name:"silver.Menubar",configFields:[He("dom"),He("uid"),He("onEscape"),He("backstage"),he("onSetup",at)],apis:{focus:function(t,r){t.focus(r)},setMenus:function(t,r,o){t.setMenus(r,o)}}}),pp=function(t,r){return r.getAnimationRoot.fold(function(){return t.element},function(o){return o(t)})},um=function(t){return t.dimension.property},sm=function(t,r){return t.dimension.getDimension(r)},Hb=function(t,r){var o=pp(t,r);zl(o,[r.shrinkingClass,r.growingClass])},cm=function(t,r){Ro(t.element,r.openClass),vi(t.element,r.closedClass),pn(t.element,um(r),"0px"),ya(t.element)},Y_=function(t,r){Ro(t.element,r.closedClass),vi(t.element,r.openClass),_r(t.element,um(r))},J_=function(t,r,o,c){o.setCollapsed(),pn(t.element,um(r),sm(r,t.element)),ya(t.element),Hb(t,r),cm(t,r),r.onStartShrink(t),r.onShrunk(t)},fO=function(t,r,o,c){var v=c.getOrThunk(function(){return sm(r,t.element)});o.setCollapsed(),pn(t.element,um(r),v),ya(t.element);var m=pp(t,r);Ro(m,r.growingClass),vi(m,r.shrinkingClass),cm(t,r),r.onStartShrink(t)},Z_=function(t,r,o){var c=sm(r,t.element),v=c==="0px"?J_:fO;v(t,r,o,D.some(c))},Z2=function(t,r,o){var c=pp(t,r),v=Ou(c,r.shrinkingClass),m=sm(r,t.element);Y_(t,r);var p=sm(r,t.element),C=function(){pn(t.element,um(r),m),ya(t.element)},S=function(){cm(t,r)},k=v?C:S;k(),Ro(c,r.shrinkingClass),vi(c,r.growingClass),Y_(t,r),pn(t.element,um(r),p),o.setExpanded(),r.onStartGrow(t)},Q_=function(t,r,o){if(o.isExpanded()){_r(t.element,um(r));var c=sm(r,t.element);pn(t.element,um(r),c)}},D6=function(t,r,o){o.isExpanded()||Z2(t,r,o)},R6=function(t,r,o){o.isExpanded()&&Z_(t,r,o)},Q2=function(t,r,o){o.isExpanded()&&J_(t,r,o)},vO=function(t,r,o){return o.isExpanded()},_6=function(t,r,o){return o.isCollapsed()},eB=function(t,r,o){var c=pp(t,r);return Ou(c,r.growingClass)===!0},dO=function(t,r,o){var c=pp(t,r);return Ou(c,r.shrinkingClass)===!0},B6=function(t,r,o){return eB(t,r)||dO(t,r)},M6=function(t,r,o){var c=o.isExpanded()?Z_:Z2;c(t,r,o)},e=Object.freeze({__proto__:null,refresh:Q_,grow:D6,shrink:R6,immediateShrink:Q2,hasGrown:vO,hasShrunk:_6,isGrowing:eB,isShrinking:dO,isTransitioning:B6,toggleGrow:M6,disableTransitions:Hb}),n=function(t,r,o){var c=r.expanded;return _c(c?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:Bl(r.dimension.property,"0px")})},a=function(t,r){return ga([Tf(Om(),function(o,c){var v=c.event.raw;if(v.propertyName===t.dimension.property){Hb(o,t),r.isExpanded()&&_r(o.element,t.dimension.property);var m=r.isExpanded()?t.onGrown:t.onShrunk;m(o)}})])},i=Object.freeze({__proto__:null,exhibit:n,events:a}),s=[He("closedClass"),He("openClass"),He("shrinkingClass"),He("growingClass"),Br("getAnimationRoot"),Yn("onShrunk"),Yn("onStartShrink"),Yn("onGrown"),Yn("onStartGrow"),he("expanded",!1),Gu("dimension",Zs("property",{width:[Zr("property","width"),Zr("getDimension",function(t){return ji(t)+"px"})],height:[Zr("property","height"),Zr("getDimension",function(t){return Oo(t)+"px"})]}))],f=function(t){var r=nn(t.expanded),o=function(){return"expanded: "+r.get()};return fi({isExpanded:function(){return r.get()===!0},isCollapsed:function(){return r.get()===!1},setCollapsed:Vr(r.set,!1),setExpanded:Vr(r.set,!0),readState:o})},g=Object.freeze({__proto__:null,init:f}),b=so({fields:s,name:"sliding",active:i,apis:e,state:g}),w="container",O=[Jo("slotBehaviours",[])],N=function(t){return"<alloy.field."+t+">"},z=function(t){var r=function(){var m=[],p=function(C,S){return m.push(C),Sy(w,N(C),S)};return{slot:p,record:ye(m)}}(),o=t(r),c=r.record(),v=nt(c,function(m){return pi({name:m,pname:N(m)})});return Ay(w,O,v,F,o)},F=function(t,r){var o=function(ne){return Ey(t)},c=function(ne,me){return Qr(ne,t,me)},v=function(ne,me){return function(Z,pe){return Qr(Z,t,pe).map(function(_e){return ne(_e,pe)}).getOr(me)}},m=function(ne){return function(me,Z){kt(Z,function(pe){return ne(me,pe)})}},p=function(ne,me){return Da(ne.element,"aria-hidden")!=="true"},C=function(ne,me){if(!p(ne)){var Z=ne.element;_r(Z,"display"),ui(Z,"aria-hidden"),un(ne,Sf(),{name:me,visible:!0})}},S=function(ne,me){if(p(ne)){var Z=ne.element;pn(Z,"display","none"),Mn(Z,"aria-hidden","true"),un(ne,Sf(),{name:me,visible:!1})}},k=v(p,!1),R=v(S),B=m(R),L=function(ne){return B(ne,o())},U=v(C),K={getSlotNames:o,getSlot:c,isShowing:k,hideSlot:R,hideAllSlots:L,showSlot:U};return{uid:t.uid,dom:t.dom,components:r,behaviours:zd(t.slotBehaviours),apis:K}},q=kr({getSlotNames:function(t,r){return t.getSlotNames(r)},getSlot:function(t,r,o){return t.getSlot(r,o)},isShowing:function(t,r,o){return t.isShowing(r,o)},hideSlot:function(t,r,o){return t.hideSlot(r,o)},hideAllSlots:function(t,r){return t.hideAllSlots(r)},showSlot:function(t,r,o){return t.showSlot(r,o)}},function(t){return dd(t)}),G=ue(ue({},q),{sketch:z}),X=Yt([da("icon"),da("tooltip"),ma("onShow",at),ma("onHide",at),ma("onSetup",function(){return at})]),J=function(t){return Ha("sidebar",X,t)},ie=function(t){var r=t.ui.registry.getAll().sidebars;kt(ta(r),function(o){var c=r[o],v=function(){return Ti(D.from(t.queryCommandValue("ToggleSidebar")),o)};t.ui.registry.addToggleButton(o,{icon:c.icon,tooltip:c.tooltip,onAction:function(m){t.execCommand("ToggleSidebar",!1,o),m.setActive(v())},onSetup:function(m){var p=function(){return m.setActive(v())};return t.on("ToggleSidebar",p),function(){t.off("ToggleSidebar",p)}}})})},oe=function(t){return{element:function(){return t.element.dom}}},ve=function(t,r){var o=nt(ta(r),function(c){var v=r[c],m=Tc(J(v));return{name:c,getApi:oe,onSetup:m.onSetup,onShow:m.onShow,onHide:m.onHide}});return nt(o,function(c){var v=nn(at);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:QS.unnamedEvents([b2(c,v),y2(c,v),We(Sf(),function(m,p){var C=p.event,S=lr(o,function(k){return k.name===C.name});S.each(function(k){var R=C.visible?k.onShow:k.onHide;R(k.getApi(m))})})])})})},Ce=function(t){return G.sketch(function(r){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:ve(r,t),slotBehaviours:QS.unnamedEvents([Ma(function(o){return G.hideAllSlots(o)})])}})},se=function(t,r){var o=Jn.getCurrent(t);o.each(function(c){return On.set(c,[Ce(r)])})},xe=function(t,r){var o=Jn.getCurrent(t);o.each(function(c){var v=Jn.getCurrent(c);v.each(function(m){b.hasGrown(c)?G.isShowing(m,r)?b.shrink(c):(G.hideAllSlots(m),G.showSlot(m,r)):(G.hideAllSlots(m),G.showSlot(m,r),b.grow(c))})})},Be=function(t){var r=Jn.getCurrent(t);return r.bind(function(o){var c=b.isGrowing(o)||b.hasGrown(o);if(c){var v=Jn.getCurrent(o);return v.bind(function(m){return lr(G.getSlotNames(m),function(p){return G.isShowing(m,p)})})}else return D.none()})},Je=Nt("FixSizeEvent"),rn=Nt("AutoSizeEvent"),At=function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:vt([yo.config({}),bn.config({}),b.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(r){var o=Jn.getCurrent(r);o.each(G.hideAllSlots),er(r,rn)},onGrown:function(r){er(r,rn)},onStartGrow:function(r){un(r,Je,{width:go(r.element,"width").getOr("")})},onStartShrink:function(r){un(r,Je,{width:ji(r.element)+"px"})}}),On.config({}),Jn.config({find:function(r){var o=On.contents(r);return To(o)}})])}],behaviours:vt([Wf.childAt(0),Fn("sidebar-sliding-events",[We(Je,function(r,o){pn(r.element,"width",o.event.width)}),We(rn,function(r,o){_r(r.element,"width")})])])}},Ye=function(t,r,o,c){Mn(t.element,"aria-busy",!0);var v=r.getRoot(t).getOr(t),m=vt([sn.config({mode:"special",onTab:function(){return D.some(!0)},onShiftTab:function(){return D.some(!0)}}),bn.config({})]),p=c(v,m),C=v.getSystem().build(p);On.append(v,Fs(C)),C.hasConfigured(sn)&&r.focus&&sn.focusIn(C),o.isBlocked()||r.onBlock(t),o.blockWith(function(){return On.remove(v,C)})},hn=function(t,r,o){ui(t.element,"aria-busy"),o.isBlocked()&&r.onUnblock(t),o.clear()},rt=Object.freeze({__proto__:null,block:Ye,unblock:hn}),Dt=[ma("getRoot",D.none),aa("focus",!0),Yn("onBlock"),Yn("onUnblock")],tt=function(){var t=s1(),r=function(o){t.set({destroy:o})};return fi({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})},pt=Object.freeze({__proto__:null,init:tt}),_t=so({fields:Dt,name:"blocking",apis:rt,state:pt}),qe=function(t){var r=t.dom.attributes!==void 0?t.dom.attributes:[];return Hn(r,function(o,c){var v;return c.name==="class"?o:ue(ue({},o),(v={},v[c.name]=c.value,v))},{})},$t=function(t){return Array.prototype.slice.call(t.dom.classList,0)},Bn=function(t){var r=re.fromHtml(t),o=M(r),c=qe(r),v=$t(r),m=o.length===0?{}:{innerHtml:Ku(r)};return ue({tag:wn(r),classes:v,attributes:c},m)},Xr=function(t){return function(r,o){return{dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Bn('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}},br=function(t){return Jn.getCurrent(t).each(function(r){return Ll(r.element)})},Bo=function(t,r){var o="tabindex",c="data-mce-"+o;D.from(t.iframeElement).map(re.fromDom).each(function(v){r?(La(v,o).each(function(m){return Mn(v,c,m)}),Mn(v,o,-1)):(ui(v,o),La(v,c).each(function(m){Mn(v,o,m),ui(v,c)}))})},lo=function(t,r,o,c){var v=r.element;if(Bo(t,o),o)_t.block(r,Xr(c)),_r(v,"display"),ui(v,"aria-hidden"),t.hasFocus()&&br(r);else{var m=Jn.getCurrent(r).exists(function(p){return n1(p.element)});_t.unblock(r),pn(v,"display","none"),Mn(v,"aria-hidden","true"),m&&t.focus()}},Vs=function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:vt([On.config({}),_t.config({focus:!1}),Jn.config({find:function(r){return To(r.components())}})]),components:[]}},pc=function(t){return t.type==="focusin"},Ke=function(t){if(pc(t)){var r=t.composed?To(t.composedPath()):D.from(t.target);return r.map(re.fromDom).filter(rr).exists(function(o){return Ou(o,"mce-pastebin")})}else return!1},Ee=function(t,r,o){var c=nn(!1),v=Qa(),m=function(C){c.get()&&!Ke(C)&&(C.preventDefault(),br(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",function(){t.dom.bind(t.getWin(),"focusin",m),t.on("BeforeExecCommand",function(C){C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&m(C)})});var p=function(C){C!==c.get()&&(c.set(C),lo(t,r(),C,o.providers),t.fire("AfterProgressState",{state:C}))};t.on("ProgressState",function(C){if(v.on(em.clearTimeout),za(C.time)){var S=em.setEditorTimeout(t,function(){return p(C.state)},C.time);v.set(S)}else p(C.state),v.clear()})},Ze=function(t,r){var o={len:0,list:[]},c=Hn(t,function(v,m){var p=r(m,v.len);return p.fold(ye(v),function(C){return{len:C.finish,list:v.list.concat([C])}})},o);return c.list},Oe=function(t,r,o){return{within:t,extra:r,withinWidth:o}},Ft=function(t,r,o){var c=Ze(t,function(C,S){var k=o(C);return D.some({element:C,start:S,finish:S+k,width:k})}),v=tn(c,function(C){return C.finish<=r}),m=Wr(v,function(C,S){return C+S.width},0),p=c.slice(v.length);return{within:v,extra:p,withinWidth:m}},mt=function(t){return nt(t,function(r){return r.element})},vn=function(t,r,o){var c=mt(t.concat(r));return Oe(c,[],o)},tr=function(t,r,o,c){var v=mt(t).concat([o]);return Oe(v,mt(r),c)},Na=function(t,r,o){return Oe(mt(t),[],o)},Qu=function(t,r,o){var c=Ft(r,t,o);return c.extra.length===0?D.some(c):D.none()},ks=function(t,r,o,c){var v=Qu(t,r,o).getOrThunk(function(){return Ft(r,t-o(c),o)}),m=v.within,p=v.extra,C=v.withinWidth;return p.length===1&&p[0].width<=o(c)?vn(m,p,C):p.length>=1?tr(m,p,c,C):Na(m,p,C)},Cl=function(t,r){var o=nt(r,function(c){return Fs(c)});jf.setGroups(t,o)},es=function(t){return sa(t,function(r){return Mc(r.element).bind(function(o){return r.getSystem().getByDom(o).toOptional()})})},ts=function(t,r,o){var c=r.builtGroups.get();if(c.length!==0){var v=Gl(t,r,"primary"),m=wo.getCoupled(t,"overflowGroup");pn(v.element,"visibility","hidden");var p=c.concat([m]),C=es(p);o([]),Cl(v,p);var S=ji(v.element),k=ks(S,r.builtGroups.get(),function(R){return ji(R.element)},m);k.extra.length===0?(On.remove(v,m),o([])):(Cl(v,k.within),o(k.extra)),_r(v.element,"visibility"),ya(v.element),C.each(bn.focus)}},ti=ye([Jo("splitToolbarBehaviours",[wo]),Tu("builtGroups",function(){return nn([])})]),lm=ye([wd(["overflowToggledClass"]),tv("getOverflowBounds"),He("lazySink"),Tu("overflowGroups",function(){return nn([])})].concat(ti())),tu=ye([pi({factory:jf,schema:$b(),name:"primary"}),Hs({schema:$b(),name:"overflow"}),Hs({name:"overflow-button"}),Hs({name:"overflow-group"})]),Sl=ye(function(t,r){Oi(t,Math.floor(r))}),Xv=ye([wd(["toggledClass"]),He("lazySink"),fu("fetch"),tv("getBounds"),vs("fireDismissalEventInstead",[he("event",Ac())]),Sv()]),Ka=ye([Hs({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:vt([dr.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),Hs({factory:jf,schema:$b(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:vt([sn.config({mode:"cyclic",onEscape:function(r){return Qr(r,t,"button").each(bn.focus),D.none()}})])}}})]),wa=function(t,r){var o=wo.getCoupled(t,"toolbarSandbox");fr.isOpen(o)?fr.close(o):fr.open(o,r.toolbar())},jo=function(t,r,o,c){var v=o.getBounds.map(function(p){return p()}),m=o.lazySink(t).getOrDie();Ru.positionWithinBounds(m,r,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:Sl()}}},v)},tf=function(t,r,o,c,v){jf.setGroups(r,v),jo(t,r,o,c),dr.on(t)},Yv=function(t,r,o){var c=Dw(),v=function(p,C){o.fetch().get(function(S){tf(t,C,o,r.layouts,S),c.link(t.element),sn.focusIn(C)})},m=function(){dr.off(t),bn.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:vt([sn.config({mode:"special",onEscape:function(p){return fr.close(p),D.some(!0)}}),fr.config({onOpen:v,onClose:m,isPartOf:function(p,C,S){return gd(C,S)||gd(t,S)},getAttachPoint:function(){return o.lazySink(t).getOrDie()}}),ps.config({channels:ue(ue({},Ov(ue({isExtraPart:kn},o.fireDismissalEventInstead.map(function(p){return{fireEventInstead:{event:p.event}}}).getOr({})))),fh({doReposition:function(){fr.getState(wo.getCoupled(t,"toolbarSandbox")).each(function(p){jo(t,p,o,r.layouts)})}}))})])}},nf=function(t,r,o,c){return ue(ue({},Pu.sketch(ue(ue({},c.button()),{action:function(v){wa(v,c)},buttonBehaviours:sc.augment({dump:c.button().buttonBehaviours},[wo.config({others:{toolbarSandbox:function(v){return Yv(v,o,t)}}})])}))),{apis:{setGroups:function(v,m){fr.getState(wo.getCoupled(v,"toolbarSandbox")).each(function(p){tf(v,p,t,o.layouts,m)})},reposition:function(v){fr.getState(wo.getCoupled(v,"toolbarSandbox")).each(function(m){jo(v,m,t,o.layouts)})},toggle:function(v){wa(v,c)},getToolbar:function(v){return fr.getState(wo.getCoupled(v,"toolbarSandbox"))},isOpen:function(v){return fr.isOpen(wo.getCoupled(v,"toolbarSandbox"))}}})},Gf=Bu({name:"FloatingToolbarButton",factory:nf,configFields:Xv(),partFields:Ka(),apis:{setGroups:function(t,r,o){t.setGroups(r,o)},reposition:function(t,r){t.reposition(r)},toggle:function(t,r){t.toggle(r)},getToolbar:function(t,r){return t.getToolbar(r)},isOpen:function(t,r){return t.isOpen(r)}}}),ew=ye([He("items"),wd(["itemSelector"]),Jo("tgroupBehaviours",[sn])]),P6=ye([gl({name:"items",unit:"item"})]),tB=function(t,r,o,c){return{uid:t.uid,dom:t.dom,components:r,behaviours:Zo(t.tgroupBehaviours,[sn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}},tw=Bu({name:"ToolbarGroup",configFields:ew(),partFields:P6(),factory:tB}),nB=function(t){return nt(t,function(r){return Fs(r)})},mO=function(t,r,o){ts(t,o,function(c){o.overflowGroups.set(c),r.getOpt(t).each(function(v){Gf.setGroups(v,nB(c))})})},N6=function(t,r,o,c){var v=$r(Gf.sketch({fetch:function(){return Qi.nu(function(m){m(nB(t.overflowGroups.get()))})},layouts:{onLtr:function(){return[Ho,Ji]},onRtl:function(){return[Ji,Ho]},onBottomLtr:function(){return[mi,mu]},onBottomRtl:function(){return[mu,mi]}},getBounds:o.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()}}));return{uid:t.uid,dom:t.dom,components:r,behaviours:Zo(t.splitToolbarBehaviours,[wo.config({others:{overflowGroup:function(){return tw.sketch(ue(ue({},c["overflow-group"]()),{items:[v.asSpec()]}))}}})]),apis:{setGroups:function(m,p){t.builtGroups.set(nt(p,m.getSystem().build)),mO(m,v,t)},refresh:function(m){return mO(m,v,t)},toggle:function(m){v.getOpt(m).each(function(p){Gf.toggle(p)})},isOpen:function(m){return v.getOpt(m).map(Gf.isOpen).getOr(!1)},reposition:function(m){v.getOpt(m).each(function(p){Gf.reposition(p)})},getOverflow:function(m){return v.getOpt(m).bind(Gf.getToolbar)}},domModification:{attributes:{role:"group"}}}},rB=Bu({name:"SplitFloatingToolbar",configFields:lm(),partFields:tu(),factory:N6,apis:{setGroups:function(t,r,o){t.setGroups(r,o)},refresh:function(t,r){t.refresh(r)},reposition:function(t,r){t.reposition(r)},toggle:function(t,r){t.toggle(r)},isOpen:function(t,r){return t.isOpen(r)},getOverflow:function(t,r){return t.getOverflow(r)}}}),$6=ye([wd(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Yn("onOpened"),Yn("onClosed")].concat(ti())),z6=ye([pi({factory:jf,schema:$b(),name:"primary"}),pi({factory:jf,schema:$b(),name:"overflow",overrides:function(t){return{toolbarBehaviours:vt([b.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(r){Qr(r,t,"overflow-button").each(function(o){dr.off(o),bn.focus(o)}),t.onClosed(r)},onGrown:function(r){sn.focusIn(r),t.onOpened(r)},onStartGrow:function(r){Qr(r,t,"overflow-button").each(dr.on)}}),sn.config({mode:"acyclic",onEscape:function(r){return Qr(r,t,"overflow-button").each(bn.focus),D.some(!0)}})])}}}),Hs({name:"overflow-button",overrides:function(t){return{buttonBehaviours:vt([dr.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),Hs({name:"overflow-group"})]),bp=function(t,r){return Qr(t,r,"overflow").map(b.hasGrown).getOr(!1)},gO=function(t,r){Qr(t,r,"overflow-button").bind(function(){return Qr(t,r,"overflow")}).each(function(o){de(t,r),b.toggleGrow(o)})},de=function(t,r){Qr(t,r,"overflow").each(function(o){ts(t,r,function(c){var v=nt(c,function(m){return Fs(m)});jf.setGroups(o,v)}),Qr(t,r,"overflow-button").each(function(c){b.hasGrown(o)&&dr.on(c)}),b.refresh(o)})},Ae=function(t,r,o,c){var v="alloy.toolbar.toggle",m=function(p,C){var S=nt(C,p.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:r,behaviours:Zo(t.splitToolbarBehaviours,[wo.config({others:{overflowGroup:function(p){return tw.sketch(ue(ue({},c["overflow-group"]()),{items:[Pu.sketch(ue(ue({},c["overflow-button"]()),{action:function(C){er(p,v)}}))]}))}}}),Fn("toolbar-toggle-events",[We(v,function(p){gO(p,t)})])]),apis:{setGroups:function(p,C){m(p,C),de(p,t)},refresh:function(p){return de(p,t)},toggle:function(p){return gO(p,t)},isOpen:function(p){return bp(p,t)}},domModification:{attributes:{role:"group"}}}},it=Bu({name:"SplitSlidingToolbar",configFields:$6(),partFields:z6(),factory:Ae,apis:{setGroups:function(t,r,o){t.setGroups(r,o)},refresh:function(t,r){t.refresh(r)},toggle:function(t,r){t.toggle(r)},isOpen:function(t,r){return t.isOpen(r)}}}),ht=function(t){var r=t.title.fold(function(){return{}},function(o){return{attributes:{title:o}}});return{dom:ue({tag:"div",classes:["tox-toolbar__group"]},r),components:[tw.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:vt([yo.config({}),bn.config({})])}},Nn=function(t){return tw.sketch(ht(t))},Pr=function(t,r){var o=Ma(function(c){var v=nt(t.initGroups,Nn);jf.setGroups(c,v)});return vt([Uc.toolbarButton(t.providers.isDisabled),ei(),sn.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Fn("toolbar-events",[o])])},$a=function(t){var r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":ht({title:D.none(),items:[]}),"overflow-button":LR({name:"more",icon:D.some("more-drawer"),disabled:!1,tooltip:D.some("More..."),primary:!1,borderless:!1},D.none(),t.providers)},splitToolbarBehaviours:Pr(t,r)}},Dg=function(t){var r=$a(t),o=4,c=rB.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return rB.sketch(ue(ue({},r),{lazySink:t.getSink,getOverflowBounds:function(){var v=t.moreDrawerData.lazyHeader().element,m=Dl(v),p=Ne(v),C=Dl(p),S=Math.max(p.dom.scrollHeight,C.height);return Fo(m.x+o,C.y,m.width-o*2,S)},parts:ue(ue({},r.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},w8=function(t){var r=it.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),o=it.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=$a(t);return it.sketch(ue(ue({},c),{components:[r,o],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(v){v.getSystem().broadcastOn([Kv()],{type:"opened"})},onClosed:function(v){v.getSystem().broadcastOn([Kv()],{type:"closed"})}}))},aB=function(t){var r=t.cyclicKeying?"cyclic":"acyclic";return jf.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Vc.scrolling?["tox-toolbar--scrolling"]:[])},components:[jf.parts.groups({})],toolbarBehaviours:Pr(t,r)})},C8=function(t,r,o){var c={getSocket:function(v){return Zu.getPart(v,t,"socket")},setSidebar:function(v,m){Zu.getPart(v,t,"sidebar").each(function(p){return se(p,m)})},toggleSidebar:function(v,m){Zu.getPart(v,t,"sidebar").each(function(p){return xe(p,m)})},whichSidebar:function(v){return Zu.getPart(v,t,"sidebar").bind(Be).getOrNull()},getHeader:function(v){return Zu.getPart(v,t,"header")},getToolbar:function(v){return Zu.getPart(v,t,"toolbar")},setToolbar:function(v,m){Zu.getPart(v,t,"toolbar").each(function(p){p.getApis().setGroups(p,m)})},setToolbars:function(v,m){Zu.getPart(v,t,"multiple-toolbar").each(function(p){aO.setItems(p,m)})},refreshToolbar:function(v){var m=Zu.getPart(v,t,"toolbar");m.each(function(p){return p.getApis().refresh(p)})},toggleToolbarDrawer:function(v){Zu.getPart(v,t,"toolbar").each(function(m){qo(m.getApis().toggle,function(p){return p(m)})})},isToolbarDrawerToggled:function(v){return Zu.getPart(v,t,"toolbar").bind(function(m){return D.from(m.getApis().isOpen).map(function(p){return p(m)})}).getOr(!1)},getThrobber:function(v){return Zu.getPart(v,t,"throbber")},focusToolbar:function(v){var m=Zu.getPart(v,t,"toolbar").orThunk(function(){return Zu.getPart(v,t,"multiple-toolbar")});m.each(function(p){sn.focusIn(p)})},setMenubar:function(v,m){Zu.getPart(v,t,"menubar").each(function(p){uT.setMenus(p,m)})},focusMenubar:function(v){Zu.getPart(v,t,"menubar").each(function(m){uT.focus(m)})}};return{uid:t.uid,dom:t.dom,components:r,apis:c,behaviours:t.behaviours}},S8=Gv.optional({factory:uT,name:"menubar",schema:[He("backstage")]}),x8=function(t){return t.type===Vc.sliding?w8:t.type===Vc.floating?Dg:aB},T8=Gv.optional({factory:{sketch:function(t){return aO.sketch({uid:t.uid,dom:t.dom,listBehaviours:vt([sn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return aB({type:t.type,uid:Nt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),D.some(!0)}})},setupItem:function(r,o,c,v){jf.setGroups(o,c)},shell:!0})}},name:"multiple-toolbar",schema:[He("dom"),He("onEscape")]}),k8=Gv.optional({factory:{sketch:function(t){var r=x8(t),o={type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),D.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(o)}},name:"toolbar",schema:[He("dom"),He("onEscape"),He("getSink")]}),E8=Gv.optional({factory:{sketch:x6},name:"header",schema:[He("dom")]}),O8=Gv.optional({name:"socket",schema:[He("dom")]}),A8=Gv.optional({factory:{sketch:At},name:"sidebar",schema:[He("dom")]}),D8=Gv.optional({factory:{sketch:Vs},name:"throbber",schema:[He("dom")]}),Mo=Bu({name:"OuterContainer",factory:C8,configFields:[He("dom"),He("behaviours")],partFields:[E8,S8,k8,T8,O8,A8,D8],apis:{getSocket:function(t,r){return t.getSocket(r)},setSidebar:function(t,r,o){t.setSidebar(r,o)},toggleSidebar:function(t,r,o){t.toggleSidebar(r,o)},whichSidebar:function(t,r){return t.whichSidebar(r)},getHeader:function(t,r){return t.getHeader(r)},getToolbar:function(t,r){return t.getToolbar(r)},setToolbar:function(t,r,o){var c=nt(o,function(v){return Nn(v)});t.setToolbar(r,c)},setToolbars:function(t,r,o){var c=nt(o,function(v){return nt(v,Nn)});t.setToolbars(r,c)},refreshToolbar:function(t,r){return t.refreshToolbar(r)},toggleToolbarDrawer:function(t,r){t.toggleToolbarDrawer(r)},isToolbarDrawerToggled:function(t,r){return t.isToolbarDrawerToggled(r)},getThrobber:function(t,r){return t.getThrobber(r)},setMenubar:function(t,r,o){t.setMenubar(r,o)},focusMenubar:function(t,r){t.focusMenubar(r)},focusToolbar:function(t,r){t.focusToolbar(r)}}}),R8="file edit view insert format tools table help",OI={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},_8=function(t,r,o){var c=C5(o).split(/[ ,]/);return{text:t.title,getItems:function(){return Jr(t.items,function(v){var m=v.toLowerCase();return m.trim().length===0?[]:Ca(c,function(p){return p===m})?[]:m==="separator"||m==="|"?[{type:"separator"}]:r.menuItems[m]?[r.menuItems[m]]:[]})}}},I6=function(t){return typeof t=="string"?t.split(" "):t},AI=function(t,r){var o=ue(ue({},OI),r.menus),c=ta(r.menus).length>0,v=r.menubar===void 0||r.menubar===!0?I6(R8):I6(r.menubar===!1?"":r.menubar),m=tn(v,function(C){var S=hr(OI,C);return c?S||Gt(r.menus,C).exists(function(k){return hr(k,"items")}):S}),p=nt(m,function(C){var S=o[C];return _8({title:S.title,items:I6(S.items)},r,t)});return tn(p,function(C){var S=function(k){return k.type!=="separator"};return C.getItems().length>0&&Ca(C.getItems(),S)})},DI=function(t){var r=function(){t._skinLoaded=!0,Q5(t)};return function(){t.initialized?r():t.on("init",r)}},B8=function(t,r){return function(){return eM(t,{message:r})}},RI=function(t,r,o){return new f2(function(c,v){o.load(r,c,v),t.on("remove",function(){return o.unload(r)})})},M8=function(t,r){var o=r+"/skin.min.css";return RI(t,o,t.ui.styleSheetLoader)},P8=function(t,r){var o=on(re.fromDom(t.getElement()));if(o){var c=r+"/skin.shadowdom.min.css";return RI(t,c,m2.DOM.styleSheetLoader)}else return f2.resolve()},_I=function(t,r){var o=l3(r);o&&r.contentCSS.push(o+(t?"/content.inline":"/content")+".min.css"),gA(r)===!1&&Xt(o)?f2.all([M8(r,o),P8(r,o)]).then(DI(r),B8(r,"Skin could not be loaded")):DI(r)()},N8=Vr(_I,!1),$8=Vr(_I,!0),oB=function(t,r){return function(o){var c=kd(),v=function(){o.setActive(t.formatter.match(r));var m=t.formatter.formatChanged(r,o.setActive);c.set(m)};return t.initialized?v():t.once("init",v),function(){t.off("init",v),c.clear()}}},iB=function(t,r,o){return function(c){var v=function(){return o(c)},m=function(){o(c),t.on(r,v)};return t.initialized?m():t.once("init",m),function(){t.off("init",m),t.off(r,v)}}},BI=function(t){return function(r){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})}}},qf=function(t,r){return function(){return t.execCommand(r)}},z8=function(t,r,o){var c=function(C,S,k,R){var B=r.shared.providers.translate(C.title);if(C.type==="separator")return D.some({type:"separator",text:B});if(C.type==="submenu"){var L=Jr(C.getStyleItems(),function(U){return v(U,S,R)});return S===0&&L.length<=0?D.none():D.some({type:"nestedmenuitem",text:B,disabled:L.length<=0,getSubmenuItems:function(){return Jr(C.getStyleItems(),function(U){return v(U,S,R)})}})}else return D.some(ue({type:"togglemenuitem",text:B,icon:C.icon,active:C.isSelected(R),disabled:k,onAction:o.onAction(C)},C.getStylePreview().fold(function(){return{}},function(U){return{meta:{style:U}}})))},v=function(C,S,k){var R=C.type==="formatter"&&o.isInvalid(C);return S===0?R?[]:c(C,S,!1,k).toArray():c(C,S,R,k).toArray()},m=function(C){var S=o.getCurrentValue(),k=o.shouldHide?0:1;return Jr(C,function(R){return v(R,k,S)})},p=function(C,S){return function(k,R){var B=S(),L=m(B),U=Mb(L,Lf.CLOSE_ON_EXECUTE,C,!1);R(U)}};return{validateItems:m,getFetch:p}},sT=function(t,r,o){var c=o.dataset,v=c.type==="basic"?function(){return nt(c.data,function(m){return y_(m,o.isSelectedFor,o.getPreviewFor)})}:c.getData;return{items:z8(t,r,o),getStyleItems:v}},hO=function(t,r,o){var c=sT(t,r,o),v=c.items,m=c.getStyleItems,p=function(S){return{getComponent:ye(S)}},C=iB(t,"NodeChange",function(S){var k=S.getComponent();o.updateText(k)});return PE({text:o.icon.isSome()?D.none():o.text,icon:o.icon,tooltip:D.from(o.tooltip),role:D.none(),fetch:v.getFetch(r,m),onSetup:C,getApi:p,columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)},I8=function(t){return nt(t,function(r){var o=r,c=r,v=r.split("=");return v.length>1&&(o=v[0],c=v[1]),{title:o,format:c}})},F8=function(t){return{type:"basic",data:t}},cT;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(cT||(cT={}));var L8=function(t,r){return r===cT.SemiColon?t.replace(/;$/,"").split(";"):t.split(" ")},F6=function(t,r,o,c){var v=t.getParam(r,o,"string"),m=I8(L8(v,c));return{type:"basic",data:m}},L6=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],MI=function(t){var r=function(){return lr(L6,function(C){return t.formatter.match(C.format)})},o=function(C){return function(){return t.formatter.match(C)}},c=function(C){return D.none},v=function(C){var S=r(),k=S.fold(ye("left"),function(R){return R.title.toLowerCase()});un(C,ME,{icon:"align-"+k})},m=F8(L6),p=function(C){return function(){return lr(L6,function(S){return S.format===C.format}).each(function(S){return t.execCommand(S.command)})}};return{tooltip:"Align",text:D.none(),icon:D.some("align-left"),isSelectedFor:o,getCurrentValue:D.none,getPreviewFor:c,onAction:p,updateText:v,dataset:m,shouldHide:!1,isInvalid:function(C){return!t.formatter.canApply(C.format)}}},H8=function(t,r){return hO(t,r,MI(t))},V8=function(t,r){var o=sT(t,r,MI(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate("Align"),getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},U8="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",W8=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],PI=function(t){var r=t.split(/\s*,\s*/);return nt(r,function(o){return o.replace(/^['"]+|['"]+$/g,"")})},j8=function(t){var r=function(){var o=PI(t.toLowerCase());return jr(W8,function(c){return o.indexOf(c.toLowerCase())>-1})};return t.indexOf("-apple-system")===0&&r()},NI=function(t){var r="System Font",o=function(){var k=function(K){return K?PI(K)[0]:""},R=t.queryCommandValue("FontName"),B=S.data,L=R?R.toLowerCase():"",U=lr(B,function(K){var ne=K.format;return ne.toLowerCase()===L||k(ne).toLowerCase()===k(L).toLowerCase()}).orThunk(function(){return ri(j8(L),{title:r,format:L})});return{matchOpt:U,font:R}},c=function(k){return function(R){return R.exists(function(B){return B.format===k})}},v=function(){var k=o().matchOpt;return k},m=function(k){return function(){return D.some({tag:"div",styles:k.indexOf("dings")===-1?{"font-family":k}:{}})}},p=function(k){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontName",!1,k.format)})}},C=function(k){var R=o(),B=R.matchOpt,L=R.font,U=B.fold(ye(L),function(K){return K.title});un(k,cp,{text:U})},S=F6(t,"font_formats",U8,cT.SemiColon);return{tooltip:"Fonts",text:D.some(r),icon:D.none(),isSelectedFor:c,getCurrentValue:v,getPreviewFor:m,onAction:p,updateText:C,dataset:S,shouldHide:!1,isInvalid:kn}},G8=function(t,r){return hO(t,r,NI(t))},q8=function(t,r){var o=sT(t,r,NI(t));t.ui.registry.addNestedMenuItem("fontformats",{text:r.shared.providers.translate("Fonts"),getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},K8="8pt 10pt 12pt 14pt 18pt 24pt 36pt",X8={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},Y8={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},J8=function(t,r){var o=Math.pow(10,r);return Math.round(t*o)/o},Z8=function(t,r){return/[0-9.]+px$/.test(t)?J8(parseInt(t,10)*72/96,r||0)+"pt":Gt(Y8,t).getOr(t)},Q8=function(t){return Gt(X8,t).getOr("")},$I=function(t){var r=function(){var S=D.none(),k=C.data,R=t.queryCommandValue("FontSize");if(R)for(var B=function(U){var K=Z8(R,U),ne=Q8(K);S=lr(k,function(me){return me.format===R||me.format===K||me.format===ne})},L=3;S.isNone()&&L>=0;L--)B(L);return{matchOpt:S,size:R}},o=function(S){return function(k){return k.exists(function(R){return R.format===S})}},c=function(){var S=r().matchOpt;return S},v=ye(D.none),m=function(S){return function(){t.undoManager.transact(function(){t.focus(),t.execCommand("FontSize",!1,S.format)})}},p=function(S){var k=r(),R=k.matchOpt,B=k.size,L=R.fold(ye(B),function(U){return U.title});un(S,cp,{text:L})},C=F6(t,"fontsize_formats",K8,cT.Space);return{tooltip:"Font sizes",text:D.some("12pt"),icon:D.none(),isSelectedFor:o,getPreviewFor:v,getCurrentValue:c,onAction:m,updateText:p,dataset:C,shouldHide:!1,isInvalid:kn}},eL=function(t,r){return hO(t,r,$I(t))},tL=function(t,r){var o=sT(t,r,$I(t));t.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},zI=function(t,r){var o=r(),c=nt(o,function(v){return v.format});return D.from(t.formatter.closest(c)).bind(function(v){return lr(o,function(m){return m.format===v})}).orThunk(function(){return ri(t.formatter.match("p"),{title:"Paragraph",format:"p"})})},nL="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",II=function(t){var r="Paragraph",o=function(p){return function(){return t.formatter.match(p)}},c=function(p){return function(){var C=t.formatter.get(p);return D.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))})}},v=function(p){var C=zI(t,function(){return m.data}),S=C.fold(ye(r),function(k){return k.title});un(p,cp,{text:S})},m=F6(t,"block_formats",nL,cT.SemiColon);return{tooltip:"Blocks",text:D.some(r),icon:D.none(),isSelectedFor:o,getCurrentValue:D.none,getPreviewFor:c,onAction:BI(t),updateText:v,dataset:m,shouldHide:!1,isInvalid:function(p){return!t.formatter.canApply(p.format)}}},rL=function(t,r){return hO(t,r,II(t))},aL=function(t,r){var o=sT(t,r,II(t));t.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})},FI=function(t,r){var o="Paragraph",c=function(p){return function(){return t.formatter.match(p)}},v=function(p){return function(){var C=t.formatter.get(p);return C!==void 0?D.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):D.none()}},m=function(p){var C=function(B){var L=B.items;return L!==void 0&&L.length>0?Jr(L,C):[{title:B.title,format:B.format}]},S=Jr(b_(t),C),k=zI(t,ye(S)),R=k.fold(ye(o),function(B){return B.title});un(p,cp,{text:R})};return{tooltip:"Formats",text:D.some(o),icon:D.none(),isSelectedFor:c,getCurrentValue:D.none,getPreviewFor:v,onAction:BI(t),updateText:m,shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(p){return!t.formatter.canApply(p.format)},dataset:r}},oL=function(t,r){var o=ue({type:"advanced"},r.styleselect);return hO(t,r,FI(t,o))},iL=function(t,r){var o=ue({type:"advanced"},r.styleselect),c=sT(t,r,FI(t,o));t.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return c.items.validateItems(c.getStyleItems())}})},uL=function(t,r){var o=function(c,v){t.updateState.each(function(m){var p=m(c,v);r.set(p)}),t.renderComponents.each(function(m){var p=m(v,r.get()),C=nt(p,c.getSystem().build);bC(c,C)})};return ga([We(ec(),function(c,v){var m=v;if(!m.universal){var p=t.channel;Un(m.channels,p)&&o(c,m.data)}}),Ma(function(c,v){t.initialData.each(function(m){o(c,m)})})])},sL=Object.freeze({__proto__:null,events:uL}),cL=function(t,r,o){return o},lL=Object.freeze({__proto__:null,getState:cL}),fL=[He("channel"),Br("renderComponents"),Br("updateState"),Br("initialData")],vL=function(){var t=nn(D.none()),r=function(){return t.set(D.none())},o=function(){return t.get().getOr("none")};return{readState:o,get:t.get,set:t.set,clear:r}},dL=Object.freeze({__proto__:null,init:vL}),xl=so({fields:fL,name:"reflecting",active:sL,apis:lL,state:dL}),mL=ye([He("toggleClass"),He("fetch"),Cd("onExecute"),he("getHotspot",D.some),he("getAnchorOverrides",ye({})),Sv(),Cd("onItemExecute"),Br("lazySink"),He("dom"),Yn("onOpen"),Jo("splitDropdownBehaviours",[wo,sn,bn]),he("matchWidth",!1),he("useMinWidth",!1),he("eventOrder",{}),Br("role")].concat(J3())),gL=pi({factory:Pu,schema:[He("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:vt([bn.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(r){r.getSystem().getByUid(t.uid).each(xf)},buttonBehaviours:vt([dr.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),hL=pi({factory:Pu,schema:[He("dom")],name:"button",defaults:function(){return{buttonBehaviours:vt([bn.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(r){r.getSystem().getByUid(t.uid).each(function(o){t.onExecute(o,r)})}}}}),pL=ye([gL,hL,zc({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[He("text")],name:"aria-descriptor"}),Hs({schema:[yd()],name:"menu",defaults:function(t){return{onExecute:function(r,o){r.getSystem().getByUid(t.uid).each(function(c){t.onItemExecute(c,r,o)})}}}}),q3()]),bL=function(t,r,o,c){var v,m=function(B){Jn.getCurrent(B).each(function(L){Mr.highlightFirst(L),sn.focusIn(L)})},p=function(B){var L=m;Tb(t,Lt,B,c,L,Yl.HighlightFirst).get(at)},C=function(B){return p(B),D.some(!0)},S=function(B){var L=Gl(B,t,"button");return xf(L),D.some(!0)},k=ue(ue({},ga([Ma(function(B,L){var U=Qr(B,t,"aria-descriptor");U.each(function(K){var ne=Nt("aria");Mn(K.element,"id",ne),Mn(B.element,"aria-describedby",ne)})})])),Fh(D.some(p))),R={repositionMenus:function(B){dr.isOn(B)&&rm(B)}};return{uid:t.uid,dom:t.dom,components:r,apis:R,eventOrder:ue(ue({},t.eventOrder),(v={},v[$s()]=["disabling","toggling","alloy.base.behaviour"],v)),events:k,behaviours:Zo(t.splitDropdownBehaviours,[wo.config({others:{sandbox:function(B){var L=Gl(B,t,"arrow"),U={onOpen:function(){dr.on(L),dr.on(B)},onClose:function(){dr.off(L),dr.off(B)}};return Y3(t,B,U)}}}),sn.config({mode:"special",onSpace:S,onEnter:S,onDown:C}),bn.config({}),dr.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},uB=Bu({name:"SplitDropdown",configFields:mL(),partFields:pL(),factory:bL,apis:{repositionMenus:function(t,r){return t.repositionMenus(r)}}}),yL=function(t){return{isDisabled:function(){return Zt.isDisabled(t)},setDisabled:function(r){return Zt.set(t,r)}}},wL=function(t){return{setActive:function(r){dr.set(t,r)},isActive:function(){return dr.isOn(t)},isDisabled:function(){return Zt.isDisabled(t)},setDisabled:function(r){return Zt.set(t,r)}}},LI=function(t,r){return t.map(function(o){return{"aria-label":r.translate(o),title:r.translate(o)}}).getOr({})},HI=Nt("focus-button"),H6=function(t,r,o,c,v,m){var p;return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:LI(o,m)},components:Yh([t.map(function(C){return Wx(C,m.icons)}),r.map(function(C){return jx(C,"tox-tbtn",m)})]),eventOrder:(p={},p[Oc()]=["focusing","alloy.base.behaviour","common-button-display-events"],p),buttonBehaviours:vt([Uc.toolbarButton(m.isDisabled),ei(),Fn("common-button-display-events",[We(Oc(),function(C,S){S.event.prevent(),er(C,HI)})])].concat(c.map(function(C){return xl.config({channel:C,initialData:{icon:t,text:r},renderComponents:function(S,k){return Yh([S.icon.map(function(R){return Wx(R,m.icons)}),S.text.map(function(R){return jx(R,"tox-tbtn",m)})])}})}).toArray()).concat(v.getOr([])))}},CL=function(t,r,o,c){var v=r.shared;return Gf.sketch({lazySink:v.getSink,fetch:function(){return Qi.nu(function(m){m(nt(o(t.items),Nn))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:H6(t.icon,t.text,t.tooltip,D.none(),D.none(),v.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},VI=function(t,r,o){var c=nn(at),v=H6(t.icon,t.text,t.tooltip,D.none(),D.none(),o);return Pu.sketch({dom:v.dom,components:v.components,eventOrder:BE,buttonBehaviours:vt([Fn("toolbar-button-events",[o$({onAction:t.onAction,getApi:r.getApi}),b2(r,c),y2(r,c)]),Uc.toolbarButton(function(){return t.disabled||o.isDisabled()}),ei()].concat(r.toolbarButtonBehaviours))})},SL=function(t,r){return UI(t,r,[])},UI=function(t,r,o){return VI(t,{toolbarButtonBehaviours:[].concat(o.length>0?[Fn("toolbarButtonWith",o)]:[]),getApi:yL,onSetup:t.onSetup},r)},xL=function(t,r){return WI(t,r,[])},WI=function(t,r,o){return $e(VI(t,{toolbarButtonBehaviours:[On.config({}),dr.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(o.length>0?[Fn("toolbarToggleButtonWith",o)]:[]),getApi:wL,onSetup:t.onSetup},r))},TL=function(t,r,o){return function(c){return Qi.nu(function(v){return r.fetch(v)}).map(function(v){return D.from(lD($e(sx(Nt("menu-value"),v,function(m){r.onItemAction(t(c),m)},r.columns,r.presets,Lf.CLOSE_ON_EXECUTE,r.select.getOr(kn),o),{movement:T2(r.columns,r.presets),menuBehaviours:QS.unnamedEvents(r.columns!=="auto"?[]:[Ma(function(m,p){s3(m,4,KO(r.presets)).each(function(C){var S=C.numRows,k=C.numColumns;sn.setGridSize(m,S,k)})})])})))})}},kL=function(t,r){var o,c=Nt("channel-update-split-dropdown-display"),v=function(C){return{isDisabled:function(){return Zt.isDisabled(C)},setDisabled:function(S){return Zt.set(C,S)},setIconFill:function(S,k){_o(C.element,'svg path[id="'+S+'"], rect[id="'+S+'"]').each(function(R){Mn(R,"fill",k)})},setIconStroke:function(S,k){_o(C.element,'svg path[id="'+S+'"], rect[id="'+S+'"]').each(function(R){Mn(R,"stroke",k)})},setActive:function(S){Mn(C.element,"aria-pressed",S),_o(C.element,"span").each(function(k){C.getSystem().getByDom(k).each(function(R){return dr.set(R,S)})})},isActive:function(){return _o(C.element,"span").exists(function(S){return C.getSystem().getByDom(S).exists(dr.isOn)})}}},m=nn(at),p={getApi:v,onSetup:t.onSetup};return uB.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:ue({"aria-pressed":!1},LI(t.tooltip,r.providers))},onExecute:function(C){t.onAction(v(C))},onItemExecute:function(C,S,k){},splitDropdownBehaviours:vt([Uc.splitButton(r.providers.isDisabled),ei(),Fn("split-dropdown-events",[We(HI,bn.focus),b2(p,m),y2(p,m)]),B2.config({})]),eventOrder:(o={},o[ds()]=["alloy.base.behaviour","split-dropdown-events"],o),toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:TL(v,t,r.providers),parts:{menu:KS(!1,t.columns,t.presets)},components:[uB.parts.button(H6(t.icon,t.text,D.none(),D.some(c),D.some([dr.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),uB.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:AO("chevron-down",r.providers.icons)},buttonBehaviours:vt([Uc.splitButton(r.providers.isDisabled),ei(),P4()])}),uB.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},EL=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],pO=function(t,r){return function(o,c,v){var m=t(o).mapError(function(p){return ev(p)}).getOrDie();return r(m,c,v)}},lT={button:pO(GS,function(t,r){return SL(t,r.backstage.shared.providers)}),togglebutton:pO(zO,function(t,r){return xL(t,r.backstage.shared.providers)}),menubutton:pO(X_,function(t,r){return zE(t,"tox-tbtn",r.backstage,D.none())}),splitbutton:pO(iT,function(t,r){return kL(t,r.backstage.shared)}),grouptoolbarbutton:pO(T6,function(t,r,o){var c,v=o.ui.registry.getAll().buttons,m=function(C){return sB(o,{buttons:v,toolbar:C,allowToolbarGroups:!1},r,D.none())},p=(c={},c[p1]=r.backstage.shared.header.isPositionedAtTop()?Rf.TopToBottom:Rf.BottomToTop,c);switch(g2(o)){case Vc.floating:return CL(t,r.backstage,m,p);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(t,r){return oL(t,r.backstage)},fontsizeSelectButton:function(t,r){return eL(t,r.backstage)},fontSelectButton:function(t,r){return G8(t,r.backstage)},formatButton:function(t,r){return rL(t,r.backstage)},alignMenuButton:function(t,r){return H8(t,r.backstage)}},OL=function(t,r,o){return Gt(lT,t.type).fold(function(){return console.error("skipping button defined by",t),D.none()},function(c){return D.some(c(t,r,o))})},jI={styleselect:lT.styleSelectButton,fontsizeselect:lT.fontsizeSelectButton,fontselect:lT.fontSelectButton,formatselect:lT.formatButton,align:lT.alignMenuButton},AL=function(t){var r=nt(EL,function(o){var c=tn(o.items,function(v){return hr(t,v)||hr(jI,v)});return{name:o.name,items:c}});return tn(r,function(o){return o.items.length>0})},DL=function(t){var r=t.split("|");return nt(r,function(o){return{items:o.trim().split(" ")}})},RL=function(t){return Ht(t,function(r){return hr(r,"name")&&hr(r,"items")})},_L=function(t){var r=t.toolbar,o=t.buttons;return r===!1?[]:r===void 0||r===!0?AL(o):Xt(r)?DL(r):RL(r)?r:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},BL=function(t,r,o,c,v,m){return Gt(r,o.toLowerCase()).orThunk(function(){return m.bind(function(p){return sa(p,function(C){return Gt(r,C+o.toLowerCase())})})}).fold(function(){return Gt(jI,o.toLowerCase()).map(function(p){return p(t,v)}).orThunk(function(){return D.none()})},function(p){return p.type==="grouptoolbarbutton"&&!c?(console.warn("Ignoring the '"+o+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),D.none()):OL(p,v,t)})},sB=function(t,r,o,c){var v=_L(r),m=nt(v,function(p){var C=Jr(p.items,function(S){return S.trim().length===0?[]:BL(t,r.buttons,S,r.allowToolbarGroups,o,c).toArray()});return{title:D.from(t.translate(p.name)),items:C}});return tn(m,function(p){return p.items.length>0})},GI=function(t,r,o,c){var v=r.outerContainer,m=o.toolbar,p=o.buttons;if(Ht(m,Xt)){var C=m.map(function(S){var k={toolbar:S,buttons:p,allowToolbarGroups:o.allowToolbarGroups};return sB(t,k,{backstage:c},D.none())});Mo.setToolbars(v,C)}else Mo.setToolbar(v,sB(t,o,{backstage:c},D.none()))},qI=Qt(),ML=qI.os.isiOS()&&qI.os.version.major<=12,PL=function(t,r){var o=t.dom,c=t.getWin(),v=t.getDoc().documentElement,m=nn(na(c.innerWidth,c.innerHeight)),p=nn(na(v.offsetWidth,v.offsetHeight)),C=function(){var L=m.get();(L.left!==c.innerWidth||L.top!==c.innerHeight)&&(m.set(na(c.innerWidth,c.innerHeight)),R3(t))},S=function(){var L=t.getDoc().documentElement,U=p.get();(U.left!==L.offsetWidth||U.top!==L.offsetHeight)&&(p.set(na(L.offsetWidth,L.offsetHeight)),R3(t))},k=function(L){return tM(t,L)};o.bind(c,"resize",C),o.bind(c,"scroll",k);var R=l1(re.fromDom(t.getBody()),"load",S),B=r.uiMothership.element;t.on("hide",function(){pn(B,"display","none")}),t.on("show",function(){_r(B,"display")}),t.on("NodeChange",S),t.on("remove",function(){R.unbind(),o.unbind(c,"resize",C),o.unbind(c,"scroll",k),c=null})},NL=function(t,r,o,c,v){var m=nn(0),p=r.outerContainer;N8(t);var C=re.fromDom(v.targetNode),S=xt(Cn(C));_u(C,r.mothership),ic(S,r.uiMothership),t.on("PostRender",function(){GI(t,r,o,c),m.set(t.getWin().innerWidth),Mo.setMenubar(p,AI(t,o)),Mo.setSidebar(p,o.sidebar),PL(t,r)});var k=Mo.getSocket(p).getOrDie("Could not find expected socket element");if(ML){us(k.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var R=_B(function(){t.fire("ScrollContent")},20),B=co(k.element,"scroll",R.throttle);t.on("remove",B.unbind)}OA(t,r),t.addCommand("ToggleSidebar",function(ne,me){Mo.toggleSidebar(p,me),t.fire("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",function(){return Mo.whichSidebar(p)});var L=g2(t),U=function(){Mo.refreshToolbar(r.outerContainer)};(L===Vc.sliding||L===Vc.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",function(){var ne=t.getWin().innerWidth;ne!==m.get()&&(U(),m.set(ne))});var K={enable:function(){pb(r,!1)},disable:function(){pb(r,!0)},isDisabled:function(){return Zt.isDisabled(p)}};return{iframeContainer:k.element.dom,editorContainer:p.element.dom,api:K}},$L=Object.freeze({__proto__:null,render:NL}),V6=function(t){var r=/^[0-9\.]+(|px)$/i;return r.test(""+t)?D.some(parseInt(""+t,10)):D.none()},U6=function(t){return za(t)?t+"px":t},cB=function(t,r,o){var c=r.filter(function(m){return t<m}),v=o.filter(function(m){return t>m});return c.or(v).getOr(t)},zL=function(t){var r=hA(t),o=bA(t),c=m3(t);return V6(r).map(function(v){return cB(v,o,c)})},IL=function(t){var r=zL(t);return r.getOr(hA(t))},KI=function(t){var r=v3(t),o=pA(t),c=d3(t);return V6(r).map(function(v){return cB(v,o,c)})},FL=function(t){var r=KI(t);return r.getOr(v3(t))},LL=function(t,r,o,c,v){var m=o.uiMothership,p=o.outerContainer,C=m2.DOM,S=tx(t),k=nx(t),R=d3(t).or(KI(t)),B=c.shared.header,L=B.isPositionedAtTop,U=g2(t),K=U===Vc.sliding||U===Vc.floating,ne=nn(!1),me=function(){return ne.get()&&!t.removed},Z=function(Ge){return K?Ge.fold(ye(0),function(Ie){return Ie.components().length>1?Oo(Ie.components()[1].element):0}):0},pe=function(Ge){switch(p3(t)){case Xh.auto:var Ie=Mo.getToolbar(p),bt=Z(Ie),Vt=Oo(Ge.element)-bt,je=ho(r),It=je.y>Vt;if(It)return"top";var Kt=Ne(r),gr=Math.max(Kt.dom.scrollHeight,Oo(Kt)),Yr=je.bottom<gr-Vt;if(Yr)return"bottom";var Xa=Ai(),Kf=Xa.bottom<je.bottom-Vt;return Kf?"bottom":"top";case Xh.bottom:return"bottom";case Xh.top:default:return"top"}},_e=function(Ge){var Ie=v.get();eu.setModes(Ie,[Ge]),B.setDockingMode(Ge);var bt=L()?Rf.TopToBottom:Rf.BottomToTop;Mn(Ie.element,p1,bt)},ze=function(){var Ge=R.getOrThunk(function(){var Ie=V6(ja(Hr(),"margin-left")).getOr(0);return ji(Hr())-Cu(r).left+Ie});pn(v.get().element,"max-width",Ge+"px")},ge=function(){var Ge=Mo.getToolbar(p),Ie=Z(Ge),bt=ho(r),Vt=L()?Math.max(bt.y-Oo(v.get().element)+Ie,0):bt.bottom;us(p.element,{position:"absolute",top:Math.round(Vt)+"px",left:Math.round(bt.x)+"px"})},ke=function(){m.broadcastOn([Ym()],{})},Le=function(Ge){if(Ge===void 0&&(Ge=!1),!!me()){if(S||ze(),K&&Mo.refreshToolbar(p),S||ge(),k){var Ie=v.get();Ge?eu.reset(Ie):eu.refresh(Ie)}ke()}},wt=function(Ge){if(Ge===void 0&&(Ge=!0),!(S||!k||!me())){var Ie=B.getDockingMode(),bt=pe(v.get());bt!==Ie&&(_e(bt),Ge&&Le(!0))}},Ue=function(){ne.set(!0),pn(p.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),_r(m.element,"display"),wt(!1),Le()},St=function(){ne.set(!1),o.outerContainer&&(pn(p.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus")),pn(m.element,"display","none")};return{isVisible:me,isPositionedAtTop:L,show:Ue,hide:St,update:Le,updateMode:wt,repositionPopups:ke}},XI=function(t,r){var o=ho(t);return{pos:r?o.y:o.bottom,bounds:o}},HL=function(t,r,o,c){var v=nn(XI(r,o.isPositionedAtTop())),m=function(C){var S=XI(r,o.isPositionedAtTop()),k=S.pos,R=S.bounds,B=v.get(),L=B.pos,U=B.bounds,K=R.height!==U.height||R.width!==U.width;v.set({pos:k,bounds:R}),K&&R3(t,C),o.isVisible()&&(L!==k?o.update(!0):K&&(o.updateMode(),o.repositionPopups()))};c||(t.on("activate",o.show),t.on("deactivate",o.hide)),t.on("SkinLoaded ResizeWindow",function(){return o.update(!0)}),t.on("NodeChange keydown",function(C){em.requestAnimationFrame(function(){return m(C)})}),t.on("ScrollWindow",function(){return o.updateMode()});var p=kd();p.set(l1(re.fromDom(t.getBody()),"load",m)),t.on("remove",function(){p.clear()})},VL=function(t,r,o,c,v){var m=r.mothership,p=r.uiMothership,C=r.outerContainer,S=nn(null),k=re.fromDom(v.targetNode),R=LL(t,k,r,c,S),B=k5(t);$8(t);var L=function(){if(S.get()){R.show();return}S.set(Mo.getHeader(C).getOrDie());var ne=h2(t);ic(ne,m),ic(ne,p),GI(t,r,o,c),Mo.setMenubar(C,AI(t,o)),R.show(),HL(t,k,R,B),t.nodeChanged()},U=function(){return em.setEditorTimeout(t,L,0)};t.on("show",L),t.on("hide",R.hide),B||(t.on("focus",U),t.on("blur",R.hide)),t.on("init",function(){(t.hasFocus()||B)&&U()}),OA(t,r);var K={show:function(){R.show()},hide:function(){R.hide()},enable:function(){pb(r,!1)},disable:function(){pb(r,!0)},isDisabled:function(){return Zt.isDisabled(C)}};return{editorContainer:C.element.dom,api:K}},UL=Object.freeze({__proto__:null,render:VL}),WL="contexttoolbar-show",YI="contexttoolbar-hide",jL=function(t){return{hide:function(){return er(t,Wg())},getValue:function(){return yt.getValue(t)}}},JI=function(t,r){return We(_E,function(o,c){var v=t.get(o),m=jL(v);r.onAction(m,c.event.buttonApi)})},GL=function(t,r,o){var c=r.original;c.primary;var v=W(c,["primary"]),m=Tc(GS(ue(ue({},v),{type:"button",onAction:at})));return UI(m,o.backstage.shared.providers,[JI(t,r)])},qL=function(t,r,o){var c=r.original;c.primary;var v=W(c,["primary"]),m=Tc(zO(ue(ue({},v),{type:"togglebutton",onAction:at})));return WI(m,o.backstage.shared.providers,[JI(t,r)])},KL=function(t,r,o){var c={backstage:{shared:{providers:o}}};return r.type==="contextformtogglebutton"?qL(t,r,c):GL(t,r,c)},XL=function(t,r,o){var c=nt(r,function(p){return $r(KL(t,p,o))}),v=function(){return nt(c,function(p){return p.asSpec()})},m=function(p){return sa(r,function(C,S){return C.primary?D.from(c[S]).bind(function(k){return k.getOpt(p)}).filter(Rn(Zt.isDisabled)):D.none()})};return{asSpecs:v,findPrimary:m}},ZI=function(t,r){var o=t.label.fold(function(){return{}},function(m){return{"aria-label":m}}),c=$r(_2.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:o,selectOnFocus:!0,inputBehaviours:vt([sn.config({mode:"special",onEnter:function(m){return v.findPrimary(m).map(function(p){return xf(p),!0})},onLeft:function(m,p){return p.cut(),D.none()},onRight:function(m,p){return p.cut(),D.none()}})])})),v=XL(c,t.commands,r);return[{title:D.none(),items:[c.asSpec()]},{title:D.none(),items:v.asSpecs()}]},YL=function(t,r,o){return aB({type:t,uid:Nt("context-toolbar"),initGroups:ZI(r,o),onEscape:D.none,cyclicKeying:!0,providers:o})},JL={renderContextForm:YL,buildInitGroups:ZI},QI=function(t,r,o){return o===void 0&&(o=.01),r.bottom-t.y>=o&&t.bottom-r.y>=o},ZL=function(t){var r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){var o=fe(re.fromDom(t.startContainer),t.startOffset).element,c=Oa(o)?Fa(o):D.some(o);return c.filter(rr).map(function(v){return v.dom.getBoundingClientRect()}).getOr(r)}else return r},W6=function(t){var r=t.selection.getRng(),o=ZL(r);if(t.inline){var c=cs();return Fo(c.left+o.left,c.top+o.top,o.width,o.height)}else{var v=Dl(re.fromDom(t.getBody()));return Fo(v.x+o.left,v.y+o.top,o.width,o.height)}},QL=function(t,r){return r.filter(fn).map(Dl).getOrThunk(function(){return W6(t)})},e7=function(t,r,o){var c=Math.max(t.x+o,r.x),v=Math.min(t.right-o,r.right);return{x:c,width:v-c}},t7=function(t,r,o,c,v,m){var p=re.fromDom(t.getContainer()),C=_o(p,".tox-editor-header").getOr(p),S=ho(C),k=S.y>=r.bottom,R=c&&!k;if(t.inline&&R)return{y:Math.max(S.bottom+m,o.y),bottom:o.bottom};if(t.inline&&!R)return{y:o.y,bottom:Math.min(S.y-m,o.bottom)};var B=v==="line"?ho(p):r;return R?{y:Math.max(S.bottom+m,o.y),bottom:Math.min(B.bottom-m,o.bottom)}:{y:Math.max(B.y+m,o.y),bottom:Math.min(S.y-m,o.bottom)}},eF=function(t,r,o,c){c===void 0&&(c=0);var v=mf(window),m=ho(re.fromDom(t.getContentAreaContainer())),p=g3(t)||h3(t)||ex(t),C=e7(m,v,c),S=C.x,k=C.width;if(t.inline&&!p)return Fo(S,v.y,k,v.height);var R=r.header.isPositionedAtTop(),B=t7(t,m,v,R,o,c),L=B.y,U=B.bottom;return Fo(S,L,k,U-L)},lB=12,tF={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},nF={maxHeightFunction:Wm(),maxWidthFunction:Sl()},n7=function(t,r){var o=t.selection.getRng(),c=fe(re.fromDom(o.startContainer),o.startOffset);return o.startContainer===o.endContainer&&o.startOffset===o.endOffset-1&&Lr(c.element,r)},r7=function(t,r,o){var c=go(t,"position");pn(t,"position",r);var v=o(t);return c.each(function(m){return pn(t,"position",m)}),v},rF=function(t){return t==="node"},a7=function(t,r,o,c,v){var m=W6(t),p=c.lastElement().exists(function(k){return Lr(o,k)});if(n7(t,o))return p?TO:Lc;if(p)return r7(r,c.getMode(),function(){var k=QI(m,ho(r));return k&&!c.isReposition()?kB:TO});var C=c.getMode()==="fixed"?v.y+cs().top:v.y,S=Oo(r)+lB;return C+S<=m.y?Lc:Qd},o7=function(t,r,o,c){var v=function(S){return function(k,R,B,L,U){var K=a7(t,L,S,o,U),ne=ue(ue({},k),{y:U.y,height:U.height});return ue(ue({},K(ne,R,B,L,U)),{alwaysFit:!0})}},m=function(S){return rF(c)?[v(S)]:[]},p={onLtr:function(S){return[Ju,Mi,mu,Ji,mi,Ho].concat(m(S))},onRtl:function(S){return[Ju,Mi,mi,Ho,mu,Ji].concat(m(S))}},C={onLtr:function(S){return[Mi,Ji,Ho,mu,mi,Ju].concat(m(S))},onRtl:function(S){return[Mi,Ho,Ji,mi,mu,Ju].concat(m(S))}};return r?C:p},i7=function(t,r,o,c){return r==="line"?{bubble:Cv(lB,0,tF),layouts:{onLtr:function(){return[Yp]},onRtl:function(){return[hv]}},overrides:nF}:{bubble:Cv(0,lB,tF,1/lB),layouts:o7(t,o,c,r),overrides:nF}},j6=function(t,r){var o=tn(r,function(p){return p.predicate(t.dom)}),c=Fr(o,function(p){return p.type==="contexttoolbar"}),v=c.pass,m=c.fail;return{contextToolbars:v,contextForms:m}},u7=function(t){if(t.length<=1)return t;var r=function(C){return Ca(t,function(S){return S.position===C})},o=function(C){return tn(t,function(S){return S.position===C})},c=r("selection"),v=r("node");if(c||v)if(v&&c){var m=o("node"),p=nt(o("selection"),function(C){return ue(ue({},C),{position:"node"})});return m.concat(p)}else return o(c?"selection":"node");else return o("line")},s7=function(t){if(t.length<=1)return t;var r=function(c){return lr(t,function(v){return v.position===c})},o=r("selection").orThunk(function(){return r("node")}).orThunk(function(){return r("line")}).map(function(c){return c.position});return o.fold(function(){return[]},function(c){return tn(t,function(v){return v.position===c})})},c7=function(t,r,o){var c=j6(t,r);if(c.contextForms.length>0)return D.some({elem:t,toolbars:[c.contextForms[0]]});var v=j6(t,o);if(v.contextForms.length>0)return D.some({elem:t,toolbars:[v.contextForms[0]]});if(c.contextToolbars.length>0||v.contextToolbars.length>0){var m=u7(c.contextToolbars.concat(v.contextToolbars));return D.some({elem:t,toolbars:m})}else return D.none()},l7=function(t,r,o){return t(r)?D.none():Ug(r,function(c){if(rr(c)){var v=j6(c,o.inNodeScope),m=v.contextToolbars,p=v.contextForms,C=p.length>0?p:s7(m);return C.length>0?D.some({elem:c,toolbars:C}):D.none()}else return D.none()},t)},f7=function(t,r){var o=re.fromDom(r.getBody()),c=function(p){return Lr(p,o)},v=function(p){return!c(p)&&!Vu(o,p)},m=re.fromDom(r.selection.getNode());return v(m)?D.none():c7(m,t.inNodeScope,t.inEditorScope).orThunk(function(){return l7(c,m,t)})},v7=function(t,r){var o={},c=[],v=[],m={},p={},C=function(R,B){var L=Tc(G4(B));o[R]=L,L.launch.map(function(U){m["form:"+R]=ue(ue({},B.launch),{type:U.type==="contextformtogglebutton"?"togglebutton":"button",onAction:function(){r(L)}})}),L.scope==="editor"?v.push(L):c.push(L),p[R]=L},S=function(R,B){VO(B).each(function(L){B.scope==="editor"?v.push(L):c.push(L),p[R]=L})},k=ta(t);return kt(k,function(R){var B=t[R];B.type==="contextform"?C(R,B):B.type==="contexttoolbar"&&S(R,B)}),{forms:o,inNodeScope:c,inEditorScope:v,lookupTable:p,formNavigators:m}},aF=Nt("forward-slide"),oF=Nt("backward-slide"),G6=Nt("change-slide-event"),q6="tox-pop--resizing",d7=function(t){var r=nn([]);return Ir.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(o){r.set([]),Ir.getContent(o).each(function(c){_r(c.element,"visibility")}),Ro(o.element,q6),_r(o.element,"width")},inlineBehaviours:vt([Fn("context-toolbar-events",[Tf(Om(),function(o,c){c.event.raw.propertyName==="width"&&(Ro(o.element,q6),_r(o.element,"width"))}),We(G6,function(o,c){var v=o.element;_r(v,"width");var m=ji(v);Ir.setContent(o,c.event.contents),vi(v,q6);var p=ji(v);pn(v,"width",m+"px"),Ir.getContent(o).each(function(C){c.event.focus.bind(function(S){return Ll(S),Mc(v)}).orThunk(function(){return sn.focusIn(C),bs(Cn(v))})}),em.setTimeout(function(){pn(o.element,"width",p+"px")},0)}),We(aF,function(o,c){Ir.getContent(o).each(function(v){r.set(r.get().concat([{bar:v,focus:bs(Cn(o.element))}]))}),un(o,G6,{contents:c.event.forwardContents,focus:D.none()})}),We(oF,function(o,c){bu(r.get()).each(function(v){r.set(r.get().slice(0,r.get().length-1)),un(o,G6,{contents:Fs(v.bar),focus:v.focus})})})]),sn.config({mode:"special",onEscape:function(o){return bu(r.get()).fold(function(){return t.onEscape()},function(c){return er(o,oF),D.some(!0)})}})]),lazySink:function(){return In.value(t.sink)}})},K6="tox-pop--transition",m7=function(t,r,o,c){var v=c.backstage,m=v.shared,p=Qt().deviceType.isTouch,C=Qa(),S=Qa(),k=Qa(),R=bo(d7({sink:o,onEscape:function(){return t.focus(),D.some(!0)}})),B=function(){var Ue=k.get().getOr("node"),St=rF(Ue)?1:0;return eF(t,m,Ue,St)},L=function(){return!t.removed&&!(p()&&v.isContextMenuOpen())},U=function(Ue){return Ti(ko(Ue,C.get(),Lr),!0)},K=function(){if(L()){var Ue=B(),St=Ti(k.get(),"node")?QL(t,C.get()):W6(t);return Ue.height<=0||!QI(St,Ue)}else return!0},ne=function(){C.clear(),S.clear(),k.clear(),Ir.hide(R)},me=function(){if(Ir.isOpen(R)){var Ue=R.element;_r(Ue,"display"),K()?pn(Ue,"display","none"):(S.set(0),Ir.reposition(R))}},Z=function(Ue){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Ue],behaviours:vt([sn.config({mode:"acyclic"}),Fn("pop-dialog-wrap-events",[Ma(function(St){t.shortcuts.add("ctrl+F9","focus statusbar",function(){return sn.focusIn(St)})}),ms(function(St){t.shortcuts.remove("ctrl+F9")})])])}},pe=ao(function(){return v7(r,function(Ue){var St=ge([Ue]);un(R,aF,{forwardContents:Z(St)})})}),_e=function(Ue,St){return sB(t,{buttons:Ue,toolbar:St.items,allowToolbarGroups:!1},c,D.some(["form:"]))},ze=function(Ue,St){return JL.buildInitGroups(Ue,St)},ge=function(Ue){var St=t.ui.registry.getAll().buttons,Ge=pe(),Ie=ue(ue({},St),Ge.formNavigators),bt=g2(t)===Vc.scrolling?Vc.scrolling:Vc.default,Vt=jt(nt(Ue,function(je){return je.type==="contexttoolbar"?_e(Ie,je):ze(je,m.providers)}));return aB({type:bt,uid:Nt("context-toolbar"),initGroups:Vt,onEscape:D.none,cyclicKeying:!0,providers:m.providers})},ke=function(Ue,St){var Ge=Ue==="node"?m.anchors.node(St):m.anchors.cursor(),Ie=i7(t,Ue,p(),{lastElement:C.get,isReposition:function(){return Ti(S.get(),0)},getMode:function(){return Ru.getMode(o)}});return $e(Ge,Ie)},Le=function(Ue,St){if(wt.cancel(),!!L()){var Ge=ge(Ue),Ie=Ue[0].position,bt=ke(Ie,St);k.set(Ie),S.set(1);var Vt=R.element;_r(Vt,"display"),U(St)||(Ro(Vt,K6),Ru.reset(o,R)),Ir.showWithinBounds(R,Z(Ge),{anchor:bt,transition:{classes:[K6],mode:"placement"}},function(){return D.some(B())}),St.fold(C.clear,C.set),K()&&pn(Vt,"display","none")}},wt=z4(function(){if(!(!t.hasFocus()||t.removed))if(Ou(R.element,K6))wt.throttle();else{var Ue=pe();f7(Ue,t).fold(ne,function(St){Le(St.toolbars,D.some(St.elem))})}},17);t.on("init",function(){t.on("remove",ne),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",me),t.on("click keyup focus SetContent",wt.throttle),t.on(YI,ne),t.on(WL,function(Ue){var St=pe();Gt(St.lookupTable,Ue.toolbarKey).each(function(Ge){Le([Ge],ri(Ue.target!==t,Ue.target)),Ir.getContent(R).each(sn.focusIn)})}),t.on("focusout",function(Ue){em.setEditorTimeout(t,function(){Mc(o.element).isNone()&&Mc(R.element).isNone()&&ne()},0)}),t.on("SwitchMode",function(){t.mode.isReadOnly()&&ne()}),t.on("AfterProgressState",function(Ue){Ue.state?ne():t.hasFocus()&&wt.throttle()}),t.on("NodeChange",function(Ue){Mc(R.element).fold(wt.throttle,at)})})},g7=function(t){var r=[{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}];kt(r,function(o){t.ui.registry.addToggleButton(o.name,{tooltip:o.text,icon:o.icon,onAction:qf(t,o.cmd),onSetup:oB(t,o.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:qf(t,"JustifyNone")})},h7={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},p7=function(){var t="[0-9]+",r="[+-]?"+t,o="[eE]"+r,c="\\.",v=function(C){return"(?:"+C+")?"},m=["Infinity",t+c+v(t)+v(o),c+t+v(o),t+v(o)].join("|"),p="[+-]?(?:"+m+")";return new RegExp("^("+p+")(.*)$")}(),b7=function(t,r){return Ca(r,function(o){return Ca(h7[o],function(c){return t===c})})},y7=function(t,r){var o=D.from(p7.exec(t));return o.bind(function(c){var v=Number(c[1]),m=c[2];return b7(m,r)?D.some({value:v,unit:m}):D.none()})},w7=function(t,r){return y7(t,r).map(function(o){var c=o.value,v=o.unit;return c+v})},iF=function(t,r){var o=function(){var c=r.getOptions(t),v=r.getCurrent(t).map(r.hash),m=Qa();return nt(c,function(p){return{type:"togglemenuitem",text:r.display(p),onSetup:function(C){var S=function(R){R&&(m.on(function(B){return B.setActive(!1)}),m.set(C)),C.setActive(R)};S(Ti(v,r.hash(p)));var k=r.watcher(t,p,S);return function(){m.clear(),k()}},onAction:function(){return r.setCurrent(t,p)}}})};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:function(c){return c(o())},onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:o,onSetup:r.onMenuSetup})},C7={name:"lineheight",text:"Line height",icon:"line-height",getOptions:y5,hash:function(t){return w7(t,["fixed","relative","empty"]).getOr(t)},display:Lt,watcher:function(t,r,o){return t.formatter.formatChanged("lineheight",o,!1,{value:r}).unbind},getCurrent:function(t){return D.from(t.queryCommandValue("LineHeight"))},setCurrent:function(t,r){return t.execCommand("LineHeight",!1,r)}},S7=function(t){var r=D.from(w5(t));return r.map(function(o){return{name:"language",text:"Language",icon:"language",getOptions:ye(o),hash:function(c){return So(c.customCode)?c.code:c.code+"/"+c.customCode},display:function(c){return c.title},watcher:function(c,v,m){return c.formatter.formatChanged("lang",m,!1,{value:v.code,customValue:v.customCode}).unbind},getCurrent:function(c){var v=re.fromDom(c.selection.getNode());return xm(v,function(m){return D.some(m).filter(rr).bind(function(p){var C=La(p,"lang");return C.map(function(S){var k=La(p,"data-mce-lang").getOrUndefined();return{code:S,customCode:k,title:""}})})})},setCurrent:function(c,v){return c.execCommand("Lang",!1,v)},onToolbarSetup:function(c){var v=kd();return c.setActive(t.formatter.match("lang",{},void 0,!0)),v.set(t.formatter.formatChanged("lang",c.setActive,!0)),v.clear}}})},x7=function(t){iF(t,C7),S7(t).each(function(r){return iF(t,r)})},T7=function(t,r){V8(t,r),q8(t,r),iL(t,r),aL(t,r),tL(t,r)},k7=function(t){return iB(t,"NodeChange",function(r){r.setDisabled(!t.queryCommandState("outdent"))})},E7=function(t){t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:k7(t),onAction:qf(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:qf(t,"indent")})},O7=function(t){E7(t)},X6=function(t,r){return function(){t.execCommand("mceToggleFormat",!1,r)}},A7=function(t){jv.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(c,v){t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onSetup:oB(t,c.name),onAction:X6(t,c.name)})});for(var r=1;r<=6;r++){var o="h"+r;t.ui.registry.addToggleButton(o,{text:o.toUpperCase(),tooltip:"Heading "+r,onSetup:oB(t,o),onAction:X6(t,o)})}},D7=function(t){jv.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(r){t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:qf(t,r.action)})})},R7=function(t){jv.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(r){t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:qf(t,r.action),onSetup:oB(t,r.name)})})},_7=function(t){A7(t),D7(t),R7(t)},B7=function(t){jv.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(r){t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:qf(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:X6(t,"code")})},M7=function(t){_7(t),B7(t)},fB=function(t,r){return iB(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(o){o.setDisabled(t.mode.isReadOnly()||!t.undoManager[r]())})},P7=function(t){t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:fB(t,"hasUndo"),onAction:qf(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:fB(t,"hasRedo"),onAction:qf(t,"redo")})},N7=function(t){t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:fB(t,"hasUndo"),onAction:qf(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:fB(t,"hasRedo"),onAction:qf(t,"redo")})},$7=function(t){P7(t),N7(t)},z7=function(t){return iB(t,"VisualAid",function(r){r.setActive(t.hasVisual)})},I7=function(t){t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:z7(t),onAction:qf(t,"mceToggleVisualAid")})},F7=function(t){t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:qf(t,"mceToggleVisualAid")})},L7=function(t){F7(t),I7(t)},H7=function(t,r){g7(t),M7(t),T7(t,r),$7(t),fM(t),L7(t),O7(t),x7(t)},bO=function(t,r){return{type:"makeshift",x:t,y:r}},V7=function(t,r,o){return bO(t.x+r,t.y+o)},uF=function(t){return t.type==="longpress"||t.type.indexOf("touch")===0},U7=function(t){if(uF(t)){var r=t.touches[0];return bO(r.pageX,r.pageY)}else return bO(t.pageX,t.pageY)},W7=function(t){if(uF(t)){var r=t.touches[0];return bO(r.clientX,r.clientY)}else return bO(t.clientX,t.clientY)},j7=function(t,r){var o=m2.DOM.getPos(t);return V7(r,o.x,o.y)},G7=function(t,r){return r.type==="contextmenu"||r.type==="longpress"?t.inline?U7(r):j7(t.getContentAreaContainer(),W7(r)):sF(t)},sF=function(t){return{type:"selection",root:re.fromDom(t.selection.getNode())}},q7=function(t){return{type:"node",node:D.some(re.fromDom(t.selection.getNode())),root:re.fromDom(t.getBody())}},cF=function(t,r,o){switch(o){case"node":return q7(t);case"point":return G7(t,r);case"selection":return sF(t)}},K7=function(t,r,o,c,v,m){var p=o(),C=cF(t,r,m);Mb(p,Lf.CLOSE_ON_EXECUTE,c,!1).map(function(S){r.preventDefault(),Ir.showMenuAt(v,{anchor:C},{menu:{markers:tm("normal")},data:S})})},X7={onLtr:function(){return[Mi,Ji,Ho,mu,mi,Ju,Lc,Qd,Zd,bg,Uh,Vh]},onRtl:function(){return[Mi,Ho,Ji,mi,mu,Ju,Lc,Qd,Uh,Vh,Zd,bg]}},Y7=12,J7={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Z7=function(t,r){var o=t.selection;if(o.isCollapsed()||r.touches.length<1)return!1;var c=r.touches[0],v=o.getRng(),m=ny(t.getWin(),qm.domRange(v));return m.exists(function(p){return p.left<=c.clientX&&p.right>=c.clientX&&p.top<=c.clientY&&p.bottom>=c.clientY})},Q7=function(t){var r=t.selection.getRng(),o=function(){em.setEditorTimeout(t,function(){t.selection.setRng(r)},10),m()};t.once("touchend",o);var c=function(p){p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",c,!0);var v=function(){return m()};t.once("longpresscancel",v);var m=function(){t.off("touchend",o),t.off("longpresscancel",v),t.off("mousedown",c)}},eH=function(t,r,o){var c=cF(t,r,o),v=o==="point"?Y7:0;return ue({bubble:Cv(0,v,J7),layouts:X7,overrides:{maxWidthFunction:Sl(),maxHeightFunction:Wm()}},c)},tH=function(t,r,o,c,v,m,p){var C=eH(t,r,m);Mb(o,Lf.CLOSE_ON_EXECUTE,c,!0).map(function(S){r.preventDefault(),Ir.showMenuWithinBounds(v,{anchor:C},{menu:{markers:tm("normal"),highlightImmediately:p},data:S,type:"horizontal"},function(){return D.some(eF(t,c.shared,m==="node"?"node":"selection"))}),t.fire(YI)})},nH=function(t,r,o,c,v,m){var p=Qt(),C=p.os.isiOS(),S=p.os.isOSX(),k=p.os.isAndroid(),R=p.deviceType.isTouch(),B=function(){return!(k||C||S&&R)},L=function(){var K=o();tH(t,r,K,c,v,m,B())};if((S||C)&&m!=="node"){var U=function(){Q7(t),L()};Z7(t,r)?U():(t.once("selectionchange",U),t.once("touchend",function(){return t.off("selectionchange",U)}))}else L()},lF=function(t){return typeof t=="string"?t.split(/[ ,]/):t},fF=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},rH=function(t,r,o){var c=t.ui.registry.getAll().contextMenus;return D.from(t.getParam(r)).map(lF).getOrThunk(function(){return tn(lF(o),function(v){return hr(c,v)})})},aH=function(t){return t.getParam("contextmenu")===!1},oH=function(t){return rH(t,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},iH=function(t){return t.getParam("contextmenu_avoid_overlap","","string")},vF=function(t){return Xt(t)?t==="|":t.type==="separator"},Y6={type:"separator"},dF=function(t){var r=function(o){return{text:o.text,icon:o.icon,disabled:o.disabled,shortcut:o.shortcut}};if(Xt(t))return t;switch(t.type){case"separator":return Y6;case"submenu":return ue(ue({type:"nestedmenuitem"},r(t)),{getSubmenuItems:function(){var o=t.getSubmenuItems();return Xt(o)?o:nt(o,dF)}});default:return ue(ue({type:"menuitem"},r(t)),{onAction:cr(t.onAction)})}},mF=function(t,r){if(r.length===0)return t;var o=bu(t).filter(function(v){return!vF(v)}),c=o.fold(function(){return[]},function(v){return[Y6]});return t.concat(c).concat(r).concat([Y6])},uH=function(t,r,o){var c=Hn(r,function(v,m){return Gt(t,m.toLowerCase()).map(function(p){var C=p.update(o);if(Xt(C))return mF(v,C.split(" "));if(C.length>0){var S=nt(C,dF);return mF(v,S)}else return v}).getOrThunk(function(){return v.concat([m])})},[]);return c.length>0&&vF(c[c.length-1])&&c.pop(),c},sH=function(t,r){return r.ctrlKey&&!fF(t)},gF=function(t,r){return r.type!=="longpress"&&(r.button!==2||r.target===t.getBody()&&r.pointerType==="")},hF=function(t,r){return gF(t,r)?t.selection.getStart(!0):r.target},cH=function(t,r){var o=iH(t),c=gF(t,r)?"selection":"point";if(ru(o)){var v=hF(t,r),m=O2(re.fromDom(v),o);return m?"node":c}else return c},lH=function(t,r,o){var c=Qt(),v=c.deviceType.isTouch,m=bo(Ir.sketch({dom:{tag:"div"},lazySink:r,onEscape:function(){return t.focus()},onShow:function(){return o.setContextMenuState(!0)},onHide:function(){return o.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:vt([Fn("dismissContextMenu",[We(Ac(),function(S,k){fr.close(S),t.focus()})])])})),p=function(S){return Ir.hide(m)},C=function(S){if(fF(t)&&S.preventDefault(),!(sH(t,S)||aH(t))){var k=cH(t,S),R=function(){var L=hF(t,S),U=t.ui.registry.getAll(),K=oH(t);return uH(U.contextMenus,K,L)},B=v()?nH:K7;B(t,S,R,o,m,k)}};t.on("init",function(){var S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(v()?"":" ResizeWindow");t.on(S,p),t.on("longpress contextmenu",C)})},J6=Ns.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),vB=function(t){return function(r){return r.translate(-t.left,-t.top)}},dB=function(t){return function(r){return r.translate(t.left,t.top)}},yp=function(t){return function(r,o){return Hn(t,function(c,v){return v(c)},na(r,o))}},mB=function(t,r,o){return t.fold(yp([dB(o),vB(r)]),yp([vB(r)]),yp([]))},fT=function(t,r,o){return t.fold(yp([dB(o)]),yp([]),yp([dB(r)]))},pF=function(t,r,o){return t.fold(yp([]),yp([vB(o)]),yp([dB(r),vB(o)]))},fH=function(t,r,o,c,v,m){var p=fT(t,v,m),C=fT(r,v,m);return Math.abs(p.left-C.left)<=o&&Math.abs(p.top-C.top)<=c},vH=function(t,r,o,c,v,m){var p=fT(t,v,m),C=fT(r,v,m),S=Math.abs(p.left-C.left),k=Math.abs(p.top-C.top);return na(S,k)},bF=function(t,r,o){var c=t.fold(function(v,m){return{position:D.some("absolute"),left:D.some(v+"px"),top:D.some(m+"px")}},function(v,m){return{position:D.some("absolute"),left:D.some(v-o.left+"px"),top:D.some(m-o.top+"px")}},function(v,m){return{position:D.some("fixed"),left:D.some(v+"px"),top:D.some(m+"px")}});return ue({right:D.none(),bottom:D.none()},c)},dH=function(t,r,o){return t.fold(function(c,v){return gB(c+r,v+o)},function(c,v){return Vb(c+r,v+o)},function(c,v){return nw(c+r,v+o)})},Z6=function(t,r,o,c){var v=function(m,p){return function(C,S){var k=m(r,o,c);return p(C.getOr(k.left),S.getOr(k.top))}};return t.fold(v(pF,gB),v(fT,Vb),v(mB,nw))},gB=J6.offset,Vb=J6.absolute,nw=J6.fixed,yF=function(t,r){var o=Da(t,r);return So(o)?NaN:parseInt(o,10)},mH=function(t,r){var o=t.element,c=yF(o,r.leftAttr),v=yF(o,r.topAttr);return isNaN(c)||isNaN(v)?D.none():D.some(na(c,v))},gH=function(t,r,o){var c=t.element;Mn(c,r.leftAttr,o.left+"px"),Mn(c,r.topAttr,o.top+"px")},hH=function(t,r){var o=t.element;ui(o,r.leftAttr),ui(o,r.topAttr)},pH=function(t,r,o,c){return mH(t,r).fold(function(){return o},function(v){return nw(v.left+c.left,v.top+c.top)})},bH=function(t,r,o,c,v,m){var p=pH(t,r,o,c),C=r.mustSnap?wH(t,r,p,v,m):CH(t,r,p,v,m),S=mB(p,v,m);return gH(t,r,S),C.fold(function(){return{coord:nw(S.left,S.top),extra:D.none()}},function(k){return{coord:k.output,extra:k.extra}})},yH=function(t,r){hH(t,r)},wF=function(t,r,o,c){return sa(t,function(v){var m=v.sensor,p=fH(r,m,v.range.left,v.range.top,o,c);return p?D.some({output:Z6(v.output,r,o,c),extra:v.extra}):D.none()})},wH=function(t,r,o,c,v){var m=r.getSnapPoints(t),p=wF(m,o,c,v);return p.orThunk(function(){var C=Hn(m,function(S,k){var R=k.sensor,B=vH(o,R,k.range.left,k.range.top,c,v);return S.deltas.fold(function(){return{deltas:D.some(B),snap:D.some(k)}},function(L){var U=(B.left+B.top)/2,K=(L.left+L.top)/2;return U<=K?{deltas:D.some(B),snap:D.some(k)}:S})},{deltas:D.none(),snap:D.none()});return C.snap.map(function(S){return{output:Z6(S.output,o,c,v),extra:S.extra}})})},CH=function(t,r,o,c,v){var m=r.getSnapPoints(t);return wF(m,o,c,v)},SH=function(t,r,o){return{coord:Z6(t.output,t.output,r,o),extra:t.extra}},xH=function(t,r,o,c){var v=r.getTarget(t.element);if(r.repositionTarget){var m=Ia(t.element),p=cs(m),C=Ag(v),S=SH(c,p,C),k=bF(S.coord,p,C);Wa(v,k)}},TH=Object.freeze({__proto__:null,snapTo:xH}),Q6="data-initial-z-index",kH=function(t){Fa(t.element).filter(rr).each(function(r){La(r,Q6).fold(function(){return _r(r,"z-index")},function(o){return pn(r,"z-index",o)}),ui(r,Q6)})},EH=function(t){Fa(t.element).filter(rr).each(function(r){go(r,"z-index").each(function(o){Mn(r,Q6,o)}),pn(r,"z-index",ja(t.element,"z-index"))})},CF=function(t,r){t.getSystem().addToGui(r),EH(r)},OH=function(t){kH(t),t.getSystem().removeFromGui(t)},SF=function(t,r,o){return t.getSystem().build(Nu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:o}))},AH=vs("snaps",[He("getSnapPoints"),Yn("onSensor"),He("leftAttr"),He("topAttr"),he("lazyViewport",Ai),he("mustSnap",!1)]),eI=[he("useFixed",kn),He("blockerClass"),he("getTarget",Lt),he("onDrag",at),he("repositionTarget",!0),he("onDrop",at),ma("getBounds",Ai),AH],DH=function(t){return as(go(t,"left"),go(t,"top"),go(t,"position"),function(r,o,c){var v=c==="fixed"?nw:gB;return v(parseInt(r,10),parseInt(o,10))}).getOrThunk(function(){var r=Cu(t);return Vb(r.left,r.top)})},RH=function(t,r,o,c,v){var m=v.bounds,p=fT(r,o,c),C=Yu(p.left,m.x,m.x+m.width-v.width),S=Yu(p.top,m.y,m.y+m.height-v.height),k=Vb(C,S);return r.fold(function(){var R=pF(k,o,c);return gB(R.left,R.top)},ye(k),function(){var R=mB(k,o,c);return nw(R.left,R.top)})},_H=function(t,r,o,c,v,m,p){var C=r.fold(function(){var S=dH(o,m.left,m.top),k=mB(S,c,v);return nw(k.left,k.top)},function(S){var k=bH(t,S,o,m,c,v);return k.extra.each(function(R){S.onSensor(t,R)}),k.coord});return RH(t,C,c,v,p)},BH=function(t,r,o,c){var v=r.getTarget(t.element);if(r.repositionTarget){var m=Ia(t.element),p=cs(m),C=Ag(v),S=DH(v),k=_H(t,r.snaps,S,p,C,c,o),R=bF(k,p,C);Wa(v,R)}r.onDrag(t,v,c)},xF=function(t,r){return{bounds:t.getBounds(),height:ss(r.element),width:Su(r.element)}},tI=function(t,r,o,c,v){var m=o.update(c,v),p=o.getStartData().getOrThunk(function(){return xF(r,t)});m.each(function(C){BH(t,r,p,C)})},TF=function(t,r,o,c){r.each(OH),o.snaps.each(function(m){yH(t,m)});var v=o.getTarget(t.element);c.reset(),o.onDrop(t,v)},nI=function(t){return function(r,o){var c=function(v){o.setStartData(xF(r,v))};return ga(gt([We(u0(),function(v){o.getStartData().each(function(){return c(v)})})],t(r,o,c),!0))}},MH=function(t){return ga([We(Oc(),t.forceDrop),We(t0(),t.drop),We(ad(),function(r,o){t.move(o.event)}),We(e0(),t.delayDrop)])},PH=function(t){return D.from(na(t.x,t.y))},NH=function(t,r){return na(r.left-t.left,r.top-t.top)},$H=Object.freeze({__proto__:null,getData:PH,getDelta:NH}),kF=function(t,r,o){return[We(Oc(),function(c,v){var m=v.event.raw;if(m.button===0){v.stop();var p=function(){return TF(c,D.some(k),t,r)},C=fD(p,200),S={drop:p,delayDrop:C.schedule,forceDrop:p,move:function(B){C.cancel(),tI(c,t,r,$H,B)}},k=SF(c,t.blockerClass,MH(S)),R=function(){o(c),CF(c,k)};R()}})]},zH=gt(gt([],eI,!0),[Zr("dragger",{handlers:nI(kF)})],!1),IH=function(t){return ga([We(Pl(),t.forceDrop),We(nv(),t.drop),We(hw(),t.drop),We(Ec(),function(r,o){t.move(o.event)})])},FH=function(t){var r=t[0];return D.some(na(r.clientX,r.clientY))},LH=function(t){var r=t.raw,o=r.touches;return o.length===1?FH(o):D.none()},HH=function(t,r){return na(r.left-t.left,r.top-t.top)},EF=Object.freeze({__proto__:null,getData:LH,getDelta:HH}),OF=function(t,r,o){var c=Qa(),v=function(m){TF(m,c.get(),t,r),c.clear()};return[We(Pl(),function(m,p){p.stop();var C=function(){return v(m)},S={drop:C,delayDrop:at,forceDrop:C,move:function(B){tI(m,t,r,EF,B)}},k=SF(m,t.blockerClass,IH(S));c.set(k);var R=function(){o(m),CF(m,k)};R()}),We(Ec(),function(m,p){p.stop(),tI(m,t,r,EF,p.event)}),We(nv(),function(m,p){p.stop(),v(m)}),We(hw(),v)]},VH=gt(gt([],eI,!0),[Zr("dragger",{handlers:nI(OF)})],!1),UH=function(t,r,o){return gt(gt([],kF(t,r,o),!0),OF(t,r,o),!0)},WH=gt(gt([],eI,!0),[Zr("dragger",{handlers:nI(UH)})],!1),jH=zH,GH=VH,qH=WH,KH=Object.freeze({__proto__:null,mouse:jH,touch:GH,mouseOrTouch:qH}),XH=function(){var t=D.none(),r=D.none(),o=function(){t=D.none(),r=D.none()},c=function(S,k){var R=t.map(function(B){return S.getDelta(B,k)});return t=D.some(k),R},v=function(S,k){return S.getData(k).bind(function(R){return c(S,R)})},m=function(S){r=D.some(S)},p=function(){return r},C=ye({});return fi({readState:C,reset:o,update:v,getStartData:p,setStartData:m})},YH=Object.freeze({__proto__:null,init:XH}),rw=xd({branchKey:"mode",branches:KH,name:"dragging",active:{events:function(t,r){var o=t.dragger;return o.handlers(t,r)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:D.from(t.extra)}}},state:YH,apis:TH}),rI=40,hB=rI/2,AF=function(t,r,o,c,v,m){return t.fold(function(){return rw.snap({sensor:Vb(o-hB,c-hB),range:na(v,m),output:Vb(D.some(o),D.some(c)),extra:{td:r}})},function(p){var C=o-hB,S=c-hB,k=rI,R=rI,B=p.element.dom.getBoundingClientRect();return rw.snap({sensor:Vb(C,S),range:na(k,R),output:Vb(D.some(o-B.width/2),D.some(c-B.height/2)),extra:{td:r}})})},DF=function(t,r,o){var c=function(v,m){return v.exists(function(p){return Lr(p,m)})};return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(v,m){var p=m.td;c(r.get(),p)||(r.set(p),o(p))},mustSnap:!0}},RF=function(t){return $r(Pu.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:vt([rw.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),B2.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},JH=function(t,r){var o=nn([]),c=nn([]),v=nn(!1),m=Qa(),p=Qa(),C=function(Le){var wt=Dl(Le);return AF(U.getOpt(r),Le,wt.x,wt.y,wt.width,wt.height)},S=function(){return nt(o.get(),function(Le){return C(Le)})},k=function(Le){var wt=Dl(Le);return AF(K.getOpt(r),Le,wt.right,wt.bottom,wt.width,wt.height)},R=function(){return nt(c.get(),function(Le){return k(Le)})},B=DF(S,m,function(Le){p.get().each(function(wt){t.fire("TableSelectorChange",{start:Le,finish:wt})})}),L=DF(R,p,function(Le){m.get().each(function(wt){t.fire("TableSelectorChange",{start:wt,finish:Le})})}),U=RF(B),K=RF(L),ne=bo(U.asSpec()),me=bo(K.asSpec()),Z=function(Le,wt,Ue,St){var Ge=wt.dom.getBoundingClientRect();_r(Le.element,"display");var Ie=Jc(re.fromDom(t.getBody())).dom.innerHeight,bt=Ue(Ge),Vt=St(Ge,Ie);(bt||Vt)&&pn(Le.element,"display","none")},pe=function(Le,wt,Ue,St){var Ge=Ue(wt);rw.snapTo(Le,Ge);var Ie=function(Vt){return Vt[St]<0},bt=function(Vt,je){return Vt[St]>je};Z(Le,wt,Ie,bt)},_e=function(Le){return pe(ne,Le,C,"top")},ze=function(){return m.get().each(_e)},ge=function(Le){return pe(me,Le,k,"bottom")},ke=function(){return p.get().each(ge)};Qt().deviceType.isTouch()&&(t.on("TableSelectionChange",function(Le){v.get()||(Zi(r,ne),Zi(r,me),v.set(!0)),m.set(Le.start),p.set(Le.finish),Le.otherCells.each(function(wt){o.set(wt.upOrLeftCells),c.set(wt.downOrRightCells),_e(Le.start),ge(Le.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",function(){ze(),ke()}),t.on("TableSelectionClear",function(){v.get()&&(ac(ne),ac(me),v.set(!1)),m.clear(),p.clear()}))},ZH=function(t){return!!(t.nodeType===1&&(t.nodeName==="BR"||t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark"))},QH=function(t,r,o){r.delimiter||(r.delimiter="»");var c=function(m){var p=m||[],C=nt(p,function(k,R){return Pu.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":R,"tab-index":-1,"aria-level":R+1},innerHtml:k.name},action:function(B){t.focus(),t.selection.select(k.element),t.nodeChanged()},buttonBehaviours:vt([Uc.button(o.isDisabled),ei()])})}),S={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+r.delimiter+" "}};return Hn(C.slice(1),function(k,R){var B=k;return B.push(S),B.push(R),B},[C[0]])},v=function(m){for(var p=[],C=m.length;C-- >0;){var S=m[C];if(S.nodeType===1&&!ZH(S)){var k=t.fire("ResolveName",{name:S.nodeName.toLowerCase(),target:S});if(k.isDefaultPrevented()||p.push({name:k.name,element:S}),k.isPropagationStopped())break}}return p};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:vt([sn.config({mode:"flow",selector:"div[role=button]"}),Zt.config({disabled:o.isDisabled}),ei(),yo.config({}),On.config({}),Fn("elementPathEvents",[Ma(function(m,p){t.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return sn.focusIn(m)}),t.on("NodeChange",function(C){var S=v(C.parents);S.length>0?On.set(m,c(S)):On.set(m,[])})})])]),components:[]}},aw;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(aw||(aw={}));var e9=function(t,r,o,c,v){var m={};return m.height=cB(c+r.top,bA(t),m3(t)),o===aw.Both&&(m.width=cB(v+r.left,pA(t),d3(t))),m},_F=function(t,r,o){var c=re.fromDom(t.getContainer()),v=e9(t,r,o,Oo(c),ji(c));Gr(v,function(m,p){return pn(c,p,U6(m))}),GA(t)},t9=function(t){var r=!t.hasPlugin("autoresize"),o=t.getParam("resize",r);return o===!1?aw.None:o==="both"?aw.Both:aw.Vertical},pB=function(t,r,o,c){var v=20,m=na(o*v,c*v);return _F(t,m,r),D.some(!0)},n9=function(t,r){var o=t9(t);return o===aw.None?D.none():D.some(Ff("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:r.translate("Resize")},behaviours:[rw.config({mode:"mouse",repositionTarget:!1,onDrag:function(c,v,m){return _F(t,m,o)},blockerClass:"tox-blocker"}),sn.config({mode:"special",onLeft:function(){return pB(t,o,-1,0)},onRight:function(){return pB(t,o,1,0)},onUp:function(){return pB(t,o,0,-1)},onDown:function(){return pB(t,o,0,1)}}),yo.config({}),bn.config({})]},r.icons))},r9=function(t,r){var o,c=function(v,m,p){return On.set(v,[fv(r.translate(["{0} "+p,m[p]]))])};return Pu.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:vt([Uc.button(r.isDisabled),ei(),yo.config({}),On.config({}),yt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Fn("wordcount-events",[Rc(function(v){var m=yt.getValue(v),p=m.mode==="words"?"characters":"words";yt.setValue(v,{mode:p,count:m.count}),c(v,m.count,p)}),Ma(function(v){t.on("wordCountUpdate",function(m){var p=yt.getValue(v).mode;yt.setValue(v,{mode:p,count:m.wordCount}),c(v,m.wordCount,p)})})])]),eventOrder:(o={},o[$s()]=["disabling","alloy.base.behaviour","wordcount-events"],o)})},a9=function(t,r){var o=function(){var m=Hc.translate(["Powered by {0}","Tiny"]),p='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+m+'">'+m+"</a>";return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:p}}},c=function(){var m=[];return t.getParam("elementpath",!0,"boolean")&&m.push(QH(t,{},r)),t.hasPlugin("wordcount")&&m.push(r9(t,r)),t.getParam("branding",!0,"boolean")&&m.push(o()),m.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:m}]:[]},v=function(){var m=c(),p=n9(t,r);return m.concat(p.toArray())};return{dom:{tag:"div",classes:["tox-statusbar"]},components:v()}},o9=function(t){var r,o=t.inline,c=o?UL:$L,v=nx(t)?S6:eT,m=D.none(),p=Qt(),C=p.browser.isIE(),S=C?["tox-platform-ie"]:[],k=p.deviceType.isTouch(),R="tox-platform-touch",B=k?[R]:[],L=SA(t),U=h2(t),K=Hc.isRtl()?{attributes:{dir:"rtl"}}:{},ne={attributes:(r={},r[p1]=L?Rf.BottomToTop:Rf.TopToBottom,r)},me=function(){return m.bind(Mo.getHeader)},Z=function(){return v.isDocked(me)},pe=function(){pn(Gc.element,"width",document.body.clientWidth+"px")},_e=function(){var ns=Lr(Hr(),U)&&ja(U,"display")==="grid",Ub={dom:ue({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(S).concat(B)},K),behaviours:vt([Ru.config({useFixed:function(){return Z()}})])},dT={dom:{styles:{width:document.body.clientWidth+"px"}},events:ga([We(zs(),pe)])};return $e(Ub,ns?dT:{})},ze=bo(_e()),ge=function(){return In.value(ze)},ke=$r({dom:{tag:"div",classes:["tox-anchorbar"]}}),Le=function(){return m.bind(function(ns){return ke.getOpt(ns)}).getOrDie("Could not find a anchor bar element")},wt=function(){return m.bind(function(ns){return Mo.getToolbar(ns)}).getOrDie("Could not find more toolbar element")},Ue=function(){return m.bind(function(ns){return Mo.getThrobber(ns)}).getOrDie("Could not find throbber element")},St=mp(ze,t,Le),Ge=Mo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:St,onEscape:function(){t.focus()}}),Ie=g2(t),bt=Mo.parts.toolbar(ue({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ge,providers:St.shared.providers,onEscape:function(){t.focus()},type:Ie,lazyToolbar:wt,lazyHeader:function(){return me().getOrDie("Could not find header element")}},ne)),Vt=Mo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:St.shared.providers,onEscape:function(){t.focus()},type:Ie}),je=Mo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),It=Mo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),Kt=Mo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:St}),gr=t.getParam("statusbar",!0,"boolean"),Yr=gr&&!o?D.some(a9(t,St.shared.providers)):D.none(),Xa={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[je,It]},Kf=ex(t),rf=h3(t),hI=g3(t),pI=function(){return Kf?[Vt]:rf?[bt]:[]},yB=Mo.parts.header({dom:ue({tag:"div",classes:["tox-editor-header"]},ne),components:jt([hI?[Ge]:[],pI(),tx(t)?[]:[ke.asSpec()]]),sticky:nx(t),editor:t,sharedBackstage:St.shared}),bI=jt([L?[]:[yB],o?[]:[Xa],L?[yB]:[]]),wO={dom:{tag:"div",classes:["tox-editor-container"]},components:bI},wB=jt([[wO],o?[]:Yr.toArray(),[Kt]]),CO=b3(t),CB=ue(ue({role:"application"},Hc.isRtl()?{dir:"rtl"}:{}),CO?{"aria-hidden":"true"}:{}),Zv=bo(Mo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(o?["tox-tinymce-inline"]:[]).concat(L?["tox-tinymce--toolbar-bottom"]:[]).concat(B).concat(S),styles:ue({visibility:"hidden"},CO?{opacity:"0",border:"0"}:{}),attributes:CB},components:wB,behaviours:vt([ei(),Zt.config({disableClass:"tox-tinymce--disabled"}),sn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));m=D.some(Zv),t.shortcuts.add("alt+F9","focus menubar",function(){Mo.focusMenubar(Zv)}),t.shortcuts.add("alt+F10","focus toolbar",function(){Mo.focusToolbar(Zv)}),t.addCommand("ToggleToolbarDrawer",function(){Mo.toggleToolbarDrawer(Zv)}),t.addQueryStateHandler("ToggleToolbarDrawer",function(){return Mo.isToolbarDrawerToggled(Zv)});var SO=bD(Zv),Gc=bD(ze);n6(t,SO,Gc);var yI=function(){var ns={broadcastAll:Gc.broadcast,broadcastOn:Gc.broadcastOn,register:at};return{channels:ns}},wI=function(){var ns=U6(IL(t)),Ub=U6(FL(t));return t.inline||(Rs("div","width",Ub)&&pn(Zv.element,"width",Ub),Rs("div","height",ns)?pn(Zv.element,"height",ns):pn(Zv.element,"height","200px")),ns},CI=function(){v.setup(t,St.shared,me),H7(t,St),lH(t,ge,St),ie(t),Ee(t,Ue,St.shared),kr(S5(t),function(Kc,Xf){t.ui.registry.addGroupToolbarButton(Xf,Kc)});var ns=t.ui.registry.getAll(),Ub=ns.buttons,dT=ns.menuItems,SI=ns.contextToolbars,mT=ns.sidebars,xI=CA(t),Rt={menuItems:dT,menus:A5(t),menubar:D5(t),toolbar:xI.getOrThunk(function(){return y3(t)}),allowToolbarGroups:Ie===Vc.floating,buttons:Ub,sidebar:mT};m7(t,SI,ze,{backstage:St}),JH(t,ze);var Xn=t.getElement(),ea=wI(),Co={mothership:SO,uiMothership:Gc,outerContainer:Zv},qc={targetNode:Xn,height:ea};return c.render(t,Co,Rt,St,qc)};return{mothership:SO,uiMothership:Gc,backstage:St,renderUI:CI,getUi:yI}},i9=function(t,r){var o=D.from(Da(t,"id")).fold(function(){var c=Nt("dialog-describe");return Mn(r,"id",c),c},Lt);Mn(t,"aria-describedby",o)},u9=function(t,r){var o=La(t,"id").fold(function(){var c=Nt("dialog-label");return Mn(r,"id",c),c},Lt);Mn(t,"aria-labelledby",o)},s9=ye([He("lazySink"),Br("dragBlockClass"),ma("getBounds",Ai),he("useTabstopAt",Tt),he("eventOrder",{}),Jo("modalBehaviours",[sn]),oa("onExecute"),mv("onEscape")]),aI={sketch:Lt},c9=ye([zc({name:"draghandle",overrides:function(t,r){return{behaviours:vt([rw.config({mode:"mouse",getTarget:function(o){return Hp(o,'[role="dialog"]').getOr(o)},blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])}}}),pi({schema:[He("dom")],name:"title"}),pi({factory:aI,schema:[He("dom")],name:"close"}),pi({factory:aI,schema:[He("dom")],name:"body"}),zc({factory:aI,schema:[He("dom")],name:"footer"}),Hs({factory:{sketch:function(t,r){return ue(ue({},t),{dom:r.dom,components:r.components})}},schema:[he("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),he("components",[])],name:"blocker"})]),l9=function(t,r,o,c){var v,m=Qa(),p=function(K){m.set(K);var ne=t.lazySink(K).getOrDie(),me=c.blocker(),Z=ne.getSystem().build(ue(ue({},me),{components:me.components.concat([Fs(K)]),behaviours:vt([bn.config({}),Fn("dialog-blocker-events",[Tf(Qs(),function(){sn.focusIn(K)})])])}));Zi(ne,Z),sn.focusIn(K)},C=function(K){m.clear(),Fa(K.element).each(function(ne){K.getSystem().getByDom(ne).each(function(me){ac(me)})})},S=function(K){return Gl(K,t,"body")},k=function(K){return Gl(K,t,"footer")},R=function(K,ne){_t.block(K,ne)},B=function(K){_t.unblock(K)},L=Nt("modal-events"),U=ue(ue({},t.eventOrder),(v={},v[ds()]=[L].concat(t.eventOrder["alloy.system.attached"]||[]),v));return{uid:t.uid,dom:t.dom,components:r,apis:{show:p,hide:C,getBody:S,getFooter:k,setIdle:B,setBusy:R},eventOrder:U,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Zo(t.modalBehaviours,[On.config({}),sn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),_t.config({getRoot:m.get}),Fn(L,[Ma(function(K){u9(K.element,Gl(K,t,"title").element),i9(K.element,Gl(K,t,"body").element)})])])}},Fi=Bu({name:"ModalDialog",configFields:s9(),partFields:c9(),factory:l9,apis:{show:function(t,r){t.show(r)},hide:function(t,r){t.hide(r)},getBody:function(t,r){return t.getBody(r)},getFooter:function(t,r){return t.getFooter(r)},setBusy:function(t,r,o){t.setBusy(r,o)},setIdle:function(t,r){t.setIdle(r)}}}),f9=Yt([xn("type"),xn("name")].concat(Kh)),v9=si,BF=[Lo("name","name",ir(function(){return Nt("button-name")}),io),da("icon"),Ps("align","end",["start","end"]),aa("primary",!1),aa("disabled",!1)],MF=gt(gt([],BF,!0),[xn("text")],!1),oI=gt([Ms("type",["submit","cancel","custom"])],MF,!0),d9=gt([Ms("type",["menu"]),da("text"),da("tooltip"),da("icon"),Xi("items",f9)],BF,!0),m9=Zs("type",{submit:oI,cancel:oI,custom:oI,menu:d9}),g9=[xn("type"),xn("text"),Ms("level",["info","warn","error","success"]),xn("icon"),he("url","")],h9=Yt(g9),p9=function(t){return[xn("type"),t]},b9=[xn("type"),xn("text"),aa("disabled",!1),aa("primary",!1),Lo("name","name",ir(function(){return Nt("button-name")}),io),da("icon"),aa("borderless",!1)],y9=Yt(b9),w9=[xn("type"),xn("name"),xn("label"),aa("disabled",!1)],C9=Yt(w9),S9=si,iI=[xn("type"),xn("name")],Jv=iI.concat([da("label")]),x9=Jv.concat([he("columns","auto")]),T9=Yt(x9),k9=Kb([xn("value"),xn("text"),xn("icon")]),E9=Jv,O9=Yt(E9),A9=io,D9=Jv,R9=Yt(D9),_9=io,B9=iI.concat([Sm("tag","textarea"),xn("scriptId"),xn("scriptUrl"),qu("settings",void 0)]),M9=iI.concat([Sm("tag","textarea"),fu("init")]),P9=wm(function(t){return Ha("customeditor.old",ls(M9),t).orThunk(function(){return Ha("customeditor.new",ls(B9),t)})}),N9=io,$9=Jv,z9=Yt($9),I9=ST(),F9=function(t){return[xn("type"),bf("columns"),t]},L9=[xn("type"),xn("html"),Ps("presets","presentation",["presentation","document"])],H9=Yt(L9),V9=Jv.concat([aa("sandboxed",!0)]),U9=Yt(V9),W9=io,j9=Jv.concat([Gu("currentState",Yt([He("blob"),xn("url")]))]),G9=Yt(j9),q9=Jv.concat([da("inputMode"),da("placeholder"),aa("maximized",!1),aa("disabled",!1)]),K9=Yt(q9),X9=io,Y9=function(t){return[xn("type"),xn("label"),t]},J9=[xn("text"),xn("value")],Z9=[xn("text"),Xi("items",xT("items",function(){return PF}))],PF=Ig([Yt(J9),Yt(Z9)]),Q9=Jv.concat([Xi("items",PF),aa("disabled",!1)]),eV=Yt(Q9),tV=io,nV=Jv.concat([kc("items",[xn("text"),xn("value")]),ol("size",1),aa("disabled",!1)]),rV=Yt(nV),aV=io,oV=Jv.concat([aa("constrain",!0),aa("disabled",!1)]),iV=Yt(oV),NF=Yt([xn("width"),xn("height")]),uV=[xn("type"),Xi("header",io),Xi("cells",pf(io))],sV=Yt(uV),cV=Jv.concat([da("placeholder"),aa("maximized",!1),aa("disabled",!1)]),lV=Yt(cV),fV=io,vV=Jv.concat([Ps("filetype","file",["image","media","file"]),he("disabled",!1)]),dV=Yt(vV),mV=Yt([xn("value"),he("meta",{})]),uI=function(t){return Lo("items","items",En(),pf(wm(function(r){return Ha("Checking item of "+t,sI,r).fold(function(o){return In.error(ev(o))},function(o){return In.value(o)})})))},sI=sw(function(){return Ep("type",{alertbanner:h9,bar:Yt(p9(uI("bar"))),button:y9,checkbox:C9,colorinput:O9,colorpicker:R9,dropzone:z9,grid:Yt(F9(uI("grid"))),iframe:U9,input:K9,listbox:eV,selectbox:rV,sizeinput:iV,textarea:lV,urlinput:dV,customeditor:P9,htmlpanel:H9,imagetools:G9,collection:T9,label:Yt(Y9(uI("label"))),table:sV,panel:$F})}),gV=[xn("type"),he("classes",[]),Xi("items",sI)],$F=Yt(gV),hV=[Lo("name","name",ir(function(){return Nt("tab-name")}),io),xn("title"),Xi("items",sI)],pV=[xn("type"),kc("tabs",hV)],bV=Yt(pV),yV=MF,wV=m9,CV=Yt([xn("title"),Gu("body",Ep("type",{panel:$F,tabpanel:bV})),Sm("size","normal"),Xi("buttons",wV),he("initialData",{}),ma("onAction",at),ma("onChange",at),ma("onSubmit",at),ma("onClose",at),ma("onCancel",at),he("onTabChange",at)]),SV=function(t){return Ha("dialog",CV,t)},xV=Yt(gt([Ms("type",["cancel","custom"])],yV,!0)),TV=Yt([xn("title"),xn("url"),rd("height"),rd("width"),fs("buttons",xV),ma("onAction",at),ma("onCancel",at),ma("onClose",at),ma("onMessage",at)]),kV=function(t){return Ha("dialog",TV,t)},cI=function(t){return yr(t)?[t].concat(Jr($o(t),cI)):ar(t)?Jr(t,cI):[]},EV=function(t){return Xt(t.type)&&Xt(t.name)},OV={checkbox:S9,colorinput:A9,colorpicker:_9,dropzone:I9,input:X9,iframe:W9,sizeinput:NF,selectbox:aV,listbox:tV,size:NF,textarea:fV,urlinput:mV,customeditor:N9,collection:k9,togglemenuitem:v9},AV=function(t){return D.from(OV[t.type])},DV=function(t){return tn(cI(t),EV)},RV=function(t){var r=DV(t),o=Jr(r,function(c){return AV(c).fold(function(){return[]},function(v){return[Gu(c.name,v)]})});return Yt(o)},zF=function(t){var r=Tc(SV(t)),o=RV(t),c=t.initialData;return{internalDialog:r,dataValidator:o,initialData:c}},yO={open:function(t,r){var o=zF(r);return t(o.internalDialog,o.initialData,o.dataValidator)},openUrl:function(t,r){var o=Tc(kV(r));return t(o)},redial:function(t){return zF(t)}},IF=function(t){var r=[],o={};return Gr(t,function(c,v){c.fold(function(){r.push(v)},function(m){o[v]=m})}),r.length>0?In.error(r):In.value(o)},_V=function(t,r){var o=$r(Db.sketch(function(c){return{dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:nt(t.items,function(v){return YE(c,v,r)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[o.asSpec()]}],behaviours:vt([sn.config({mode:"acyclic",useTabstopAt:Rn(Rb)}),Wf.memento(o),sp.memento(o,{postprocess:function(c){return IF(c).fold(function(v){return console.error(v),{}},Lt)}})])}},BV=function(t,r){return{uid:t.uid,dom:t.dom,components:t.components,events:Fh(t.action),behaviours:Zo(t.tabButtonBehaviours,[bn.config({}),sn.config({mode:"execution",useSpace:!0,useEnter:!0}),yt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}},MV=Cs({name:"TabButton",configFields:[he("uid",void 0),He("value"),Lo("dom","dom",Di(function(){return{attributes:{role:"tab",id:Nt("aria"),"aria-selected":"false"}}}),xc()),Br("action"),he("domModification",{}),Jo("tabButtonBehaviours",[bn,sn,yt]),He("view")],factory:BV}),PV=ye([He("tabs"),He("dom"),he("clickToDismiss",!1),Jo("tabbarBehaviours",[Mr,sn]),wd(["tabClass","selectedClass"])]),NV=gl({factory:MV,name:"tabs",unit:"tab",overrides:function(t){var r=function(c,v){Mr.dehighlight(c,v),un(c,_i(),{tabbar:c,button:v})},o=function(c,v){Mr.highlight(c,v),un(c,pw(),{tabbar:c,button:v})};return{action:function(c){var v=c.getSystem().getByUid(t.uid).getOrDie(),m=Mr.isHighlighted(v,c),p=function(){return m&&t.clickToDismiss?r:m?at:o}();p(v,c)},domModification:{classes:[t.markers.tabClass]}}}}),$V=ye([NV]),zV=function(t,r,o,c){return{uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Zo(t.tabbarBehaviours,[Mr.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(v,m){Mn(m.element,"aria-selected","true")},onDehighlight:function(v,m){Mn(m.element,"aria-selected","false")}}),sn.config({mode:"flow",getInitial:function(v){return Mr.getHighlighted(v).map(function(m){return m.element})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}},FF=Bu({name:"Tabbar",configFields:PV(),partFields:$V(),factory:zV}),IV=function(t,r){return{uid:t.uid,dom:t.dom,behaviours:Zo(t.tabviewBehaviours,[On.config({})]),domModification:{attributes:{role:"tabpanel"}}}},FV=Cs({name:"Tabview",configFields:[Jo("tabviewBehaviours",[On])],factory:IV}),LV=ye([he("selectFirst",!0),Yn("onChangeTab"),Yn("onDismissTab"),he("tabs",[]),Jo("tabSectionBehaviours",[])]),HV=pi({factory:FF,schema:[He("dom"),_l("markers",[He("tabClass"),He("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),VV=pi({factory:FV,name:"tabview"}),UV=ye([HV,VV]),WV=function(t,r,o,c){var v=function(p){var C=yt.getValue(p);Qr(p,t,"tabview").each(function(S){var k=lr(t.tabs,function(R){return R.value===C});k.each(function(R){var B=R.view();La(p.element,"id").each(function(L){Mn(S.element,"aria-labelledby",L)}),On.set(S,B),t.onChangeTab(S,p,B)})})},m=function(p,C){Qr(p,t,"tabbar").each(function(S){C(S).each(xf)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:zd(t.tabSectionBehaviours),events:ga(jt([t.selectFirst?[Ma(function(p,C){m(p,Mr.getFirst)})]:[],[We(pw(),function(p,C){var S=C.event.button;v(S)}),We(_i(),function(p,C){var S=C.event.button;t.onDismissTab(p,S)})]])),apis:{getViewItems:function(p){return Qr(p,t,"tabview").map(function(C){return On.contents(C)}).getOr([])},showTab:function(p,C){var S=function(k){var R=Mr.getCandidates(k),B=lr(R,function(L){return yt.getValue(L)===C});return B.filter(function(L){return!Mr.isHighlighted(k,L)})};m(p,S)}}}},vT=Bu({name:"TabSection",configFields:LV(),partFields:UV(),factory:WV,apis:{getViewItems:function(t,r){return t.getViewItems(r)},showTab:function(t,r,o){t.showTab(r,o)}}}),jV=function(t,r,o){return nt(t,function(c,v){On.set(o,t[v].view());var m=r.dom.getBoundingClientRect();return On.set(o,[]),m.height})},GV=function(t){return To(nu(t,function(r,o){return r>o?-1:r<o?1:0}))},qV=function(t,r,o){var c=Ne(t).dom,v=Hp(t,".tox-dialog-wrap").getOr(t),m=ja(v,"position")==="fixed",p;m?p=Math.max(c.clientHeight,window.innerHeight):p=Math.max(c.offsetHeight,c.scrollHeight);var C=Oo(r),S=r.dom.offsetLeft>=o.dom.offsetLeft+ji(o),k=S?Math.max(Oo(o),C):C,R=parseInt(ja(t,"margin-top"),10)||0,B=parseInt(ja(t,"margin-bottom"),10)||0,L=Oo(t)+R+B,U=L-k;return p-U},KV=function(t,r){To(t).each(function(o){return vT.showTab(r,o.value)})},LF=function(t,r){pn(t,"height",r+"px"),Qt().browser.isIE()?_r(t,"flex-basis"):pn(t,"flex-basis",r+"px")},bB=function(t,r,o){Hp(t,'[role="dialog"]').each(function(c){_o(c,'[role="tablist"]').each(function(v){o.get().map(function(m){return pn(r,"height","0"),pn(r,"flex-basis","0"),Math.min(m,qV(c,r,v))}).each(function(m){LF(r,m)})})})},lI=function(t){return _o(t,'[role="tabpanel"]')},XV=function(t){var r=function(){var c=Qa(),v=[Ma(function(p){var C=p.element;lI(C).each(function(S){pn(S,"visibility","hidden"),p.getSystem().getByDom(S).toOptional().each(function(k){var R=jV(t,S,k),B=GV(R);B.fold(c.clear,c.set)}),bB(C,S,c),_r(S,"visibility"),KV(t,p),em.requestAnimationFrame(function(){bB(C,S,c)})})}),We(zs(),function(p){var C=p.element;lI(C).each(function(S){bB(C,S,c)})}),We(dx,function(p,C){var S=p.element;lI(S).each(function(k){var R=bs(Cn(k));pn(k,"visibility","hidden");var B=go(k,"height").map(function(K){return parseInt(K,10)});_r(k,"height"),_r(k,"flex-basis");var L=k.dom.getBoundingClientRect().height,U=B.forall(function(K){return L>K});U?(c.set(L),bB(S,k,c)):B.each(function(K){LF(k,K)}),_r(k,"visibility"),R.each(Ll)})})],m=!1;return{extraEvents:v,selectFirst:m}}(),o=function(){var c=[],v=!0;return{extraEvents:c,selectFirst:v}}();return{smartTabHeight:r,naiveTabHeight:o}},HF="send-data-to-section",VF="send-data-to-view",YV=function(t,r){var o=nn({}),c=function(S){var k=yt.getValue(S),R=IF(k).getOr({}),B=o.get(),L=$e(B,R);o.set(L)},v=function(S){var k=o.get();yt.setValue(S,k)},m=nn(null),p=nt(t.tabs,function(S){return{value:S.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:r.shared.providers.translate(S.title)},view:function(){return[Db.sketch(function(k){return{dom:{tag:"div",classes:["tox-form"]},components:nt(S.items,function(R){return YE(k,R,r)}),formBehaviours:vt([sn.config({mode:"acyclic",useTabstopAt:Rn(Rb)}),Fn("TabView.form.events",[Ma(v),ms(c)]),ps.config({channels:wf([{key:HF,value:{onReceive:c}},{key:VF,value:{onReceive:v}}])})])}})]}}}),C=XV(p).smartTabHeight;return vT.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(S,k,R){var B=yt.getValue(k);un(S,SD,{name:B,oldName:m.get()}),m.set(B)},tabs:p,components:[vT.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[FF.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:vt([yo.config({})])}),vT.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:C.selectFirst,tabSectionBehaviours:vt([Fn("tabpanel",C.extraEvents),sn.config({mode:"acyclic"}),Jn.config({find:function(S){return To(vT.getViewItems(S))}}),yt.config({store:{mode:"manual",getValue:function(S){return S.getSystem().broadcastOn([HF],{}),o.get()},setValue:function(S,k){o.set(k),S.getSystem().broadcastOn([VF],{})}}})])})},fI=Nt("update-dialog"),UF=Nt("update-title"),WF=Nt("update-body"),jF=Nt("update-footer"),GF=Nt("body-send-message"),qF=function(t,r,o,c){var v=function(C){switch(C.body.type){case"tabpanel":return[YV(C.body,o)];default:return[_V(C.body,o)]}},m=function(C,S){return D.some({isTabPanel:function(){return S.body.type==="tabpanel"}})},p={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:ue(ue({},r.map(function(C){return{id:C}}).getOr({})),c?p:{})},components:[],behaviours:vt([Wf.childAt(0),xl.config({channel:WF,updateState:m,renderComponents:v,initialData:t})])}},JV=function(t,r,o,c){return qF(t,D.some(r),o,c)},ZV=function(t,r){var o=qF(t,D.none(),r,!1);return Fi.parts.body(o)},QV=function(t){var r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[SR({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:vt([yo.config({}),bn.config({})])})]}],behaviours:vt([sn.config({mode:"acyclic",useTabstopAt:Rn(Rb)})])};return Fi.parts.body(r)},eU=T3.deviceType.isTouch(),KF=function(t,r){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}},XF=function(t,r){return Fi.parts.close(Pu.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:vt([yo.config({})])}))},YF=function(){return Fi.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},JF=function(t,r){return Fi.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Bn("<p>"+r.translate(t)+"</p>")}]}]})},ZF=function(t){return Fi.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},QF=function(t,r){return[Nu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Nu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})]},vI=function(t){var r,o="tox-dialog",c=o+"-wrap",v=c+"__backdrop",m=o+"__disable-scroll";return Fi.sketch({lazySink:t.lazySink,onEscape:function(p){return t.onEscape(p),D.some(!0)},useTabstopAt:function(p){return!Rb(p)},dom:{tag:"div",classes:[o].concat(t.extraClasses),styles:ue({position:"relative"},t.extraStyles)},components:gt([t.header,t.body],t.footer.toArray(),!0),parts:{blocker:{dom:Bn('<div class="'+c+'"></div>'),components:[{dom:{tag:"div",classes:eU?[v,v+"--opaque"]:[v]}}]}},dragBlockClass:c,modalBehaviours:vt(gt([bn.config({}),Fn("dialog-events",t.dialogEvents.concat([Tf(Qs(),function(p,C){sn.focusIn(p)})])),Fn("scroll-lock",[Ma(function(){vi(Hr(),m)}),ms(function(){Ro(Hr(),m)})])],t.extraBehaviours,!0)),eventOrder:ue((r={},r[$s()]=["dialog-events"],r[ds()]=["scroll-lock","dialog-events","alloy.base.behaviour"],r[Am()]=["alloy.base.behaviour","dialog-events","scroll-lock"],r),t.eventOrder)})},e8=function(t){return Pu.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[Ff("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:function(r){er(r,Wc)}})},t8=function(t,r,o){var c=function(v){return[fv(o.translate(v.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:ue({},r.map(function(v){return{id:v}}).getOr({}))},components:c(t),behaviours:vt([xl.config({channel:UF,renderComponents:c})])}},n8=function(){return{dom:Bn('<div class="tox-dialog__draghandle"></div>')}},tU=function(t,r,o){return Nu.sketch({dom:Bn('<div class="tox-dialog__header"></div>'),components:[t8(t,D.some(r),o),n8(),e8(o)],containerBehaviours:vt([rw.config({mode:"mouse",blockerClass:"blocker",getTarget:function(c){return du(c,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})},nU=function(t,r){var o=Fi.parts.title(t8(t,D.none(),r)),c=Fi.parts.draghandle(n8()),v=Fi.parts.close(e8(r)),m=[o].concat(t.draggable?[c]:[]).concat([v]);return Nu.sketch({dom:Bn('<div class="tox-dialog__header"></div>'),components:m})},r8=function(t,r){return nU({title:r.shared.providers.translate(t),draggable:r.dialog.isDraggableModal()},r.shared.providers)},a8=function(t,r,o){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":o.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:r,components:[{dom:Bn('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},o8=function(t,r,o){return{onClose:function(){return o.closeWindow()},onBlock:function(c){Fi.setBusy(t(),function(v,m){return a8(c.message,m,r)})},onUnblock:function(){Fi.setIdle(t())}}},i8=function(t,r,o,c){var v,m=function(p,C){return D.some(C)};return bo(vI(ue(ue({},t),{lazySink:c.shared.getSink,extraBehaviours:gt([xl.config({channel:fI,updateState:m,initialData:r}),sp.memory({})],t.extraBehaviours,!0),onEscape:function(p){er(p,Wc)},dialogEvents:o,eventOrder:(v={},v[ec()]=[xl.name(),ps.name()],v[ds()]=["scroll-lock",xl.name(),"messages","dialog-events","alloy.base.behaviour"],v[Am()]=["alloy.base.behaviour","dialog-events","messages",xl.name(),"scroll-lock"],v)})))},u8=function(t){var r=function(o){var c=nt(o.items,function(v){var m=nn(!1);return ue(ue({},v),{storage:m})});return ue(ue({},o),{items:c})};return nt(t,function(o){return o.type==="menu"?r(o):o})},s8=function(t){return Hn(t,function(r,o){if(o.type==="menu"){var c=o;return Hn(c.items,function(v,m){return v[m.name]=m.storage,v},r)}return r},{})},c8=function(t,r){return[ov(Qs(),TN),t(dc,function(o,c){r.onClose(),c.onClose()}),t(Wc,function(o,c,v,m){c.onCancel(o),er(m,dc)}),We(xb,function(o,c){return r.onUnblock()}),We(vx,function(o,c){return r.onBlock(c.event)})]},rU=function(t,r){var o=function(v,m){return We(v,function(p,C){c(p,function(S,k){m(t(),S,C.event,p)})})},c=function(v,m){xl.getState(v).get().each(function(p){m(p,v)})};return gt(gt([],c8(o,r),!0),[o(Lv,function(v,m,p){m.onAction(v,{name:p.name})})],!1)},aU=function(t,r,o){var c=function(m,p){return We(m,function(C,S){v(C,function(k,R){p(t(),k,S.event,C)})})},v=function(m,p){xl.getState(m).get().each(function(C){p(C.internalDialog,m)})};return gt(gt([],c8(c,r),!0),[c(Sb,function(m,p){return p.onSubmit(m)}),c(vc,function(m,p,C){p.onChange(m,{name:C.name})}),c(Lv,function(m,p,C,S){var k=function(){return sn.focusIn(S)},R=function(U){return wp(U,"disabled")||La(U,"aria-disabled").exists(function(K){return K==="true"})},B=Cn(S.element),L=bs(B);p.onAction(m,{name:C.name,value:C.value}),bs(B).fold(k,function(U){R(U)||L.exists(function(K){return Vu(U,K)&&R(K)})?k():o().toOptional().filter(function(K){return!Vu(K.element,U)}).each(k)})}),c(SD,function(m,p,C){p.onTabChange(m,{newTabName:C.name,oldTabName:C.oldName})}),ms(function(m){var p=t();yt.setValue(m,p.getData())})],!1)},dI={initUrlDialog:rU,initDialog:aU},oU=function(t,r){return Pb(t,t.type,r)},iU=function(t,r,o){return lr(r,function(c){return c.name===o}).bind(function(c){return c.memento.getOpt(t)})},uU=function(t,r){var o=r.map(function(C){return C.footerButtons}).getOr([]),c=Fr(o,function(C){return C.align==="start"}),v=function(C,S){return Nu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+C]},components:nt(S,function(k){return k.memento.asSpec()})})},m=v("start",c.pass),p=v("end",c.fail);return[m,p]},l8=function(t,r){var o=function(c,v){var m=nt(v.buttons,function(C){var S=$r(oU(C,r));return{name:C.name,align:C.align,memento:S}}),p=function(C,S){return iU(C,m,S)};return D.some({lookupByName:p,footerButtons:m})};return{dom:Bn('<div class="tox-dialog__footer"></div>'),components:[],behaviours:vt([xl.config({channel:jF,initialData:t,updateState:o,renderComponents:uU})])}},sU=function(t,r){return l8(t,r)},f8=function(t,r){return Fi.parts.footer(l8(t,r))},mI=function(t,r){var o=t.getRoot();if(o.getSystem().isConnected()){var c=Jn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Db.getField(c,r).fold(function(){var v=t.getFooter(),m=xl.getState(v);return m.get().bind(function(p){return p.lookupByName(c,r)})},function(v){return D.some(v)})}else return D.none()},cU=function(t,r){var o=t.getRoot();return xl.getState(o).get().map(function(c){return Tc(Ha("data",c.dataValidator,r))}).getOr(r)},v8=function(t,r,o){var c=function(ne){var me=t.getRoot();me.getSystem().isConnected()&&ne(me)},v=function(){var ne=t.getRoot(),me=ne.getSystem().isConnected()?t.getFormWrapper():ne,Z=yt.getValue(me),pe=kr(o,function(_e){return _e.get()});return ue(ue({},Z),pe)},m=function(ne){c(function(me){var Z=K.getData(),pe=ue(ue({},Z),ne),_e=cU(t,pe),ze=t.getFormWrapper();yt.setValue(ze,_e),Gr(o,function(ge,ke){hr(pe,ke)&&ge.set(pe[ke])})})},p=function(ne){mI(t,ne).each(Zt.disable)},C=function(ne){mI(t,ne).each(Zt.enable)},S=function(ne){mI(t,ne).each(bn.focus)},k=function(ne){if(!Xt(ne))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(function(me){un(me,vx,{message:ne})})},R=function(){c(function(ne){er(ne,xb)})},B=function(ne){c(function(me){var Z=t.getBody(),pe=xl.getState(Z);pe.get().exists(function(_e){return _e.isTabPanel()})&&Jn.getCurrent(Z).each(function(_e){vT.showTab(_e,ne)})})},L=function(ne){c(function(me){var Z=r(ne);me.getSystem().broadcastOn([fI],Z),me.getSystem().broadcastOn([UF],Z.internalDialog),me.getSystem().broadcastOn([WF],Z.internalDialog),me.getSystem().broadcastOn([jF],Z.internalDialog),K.setData(Z.initialData)})},U=function(){c(function(ne){er(ne,dc)})},K={getData:v,setData:m,disable:p,enable:C,focus:S,block:k,unblock:R,showTab:B,redial:L,close:U};return K},lU=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},fU=function(t,r,o){var c=r8(t.internalDialog.title,o),v=ZV({body:t.internalDialog.body},o),m=u8(t.internalDialog.buttons),p=s8(m),C=f8({buttons:m},o),S=dI.initDialog(function(){return U},o8(function(){return B},o.shared.providers,r),o.shared.getSink),k=lU(t.internalDialog.size),R={header:c,body:v,footer:D.some(C),extraClasses:k,extraBehaviours:[],extraStyles:{}},B=i8(R,t,S,o),L=function(){var K=function(){var ne=Fi.getBody(B);return Jn.getCurrent(ne).getOr(ne)};return{getRoot:ye(B),getBody:function(){return Fi.getBody(B)},getFooter:function(){return Fi.getFooter(B)},getFormWrapper:K}}(),U=v8(L,r.redial,p);return{dialog:B,instanceApi:U}},vU=function(t,r,o,c){var v,m,p=Nt("dialog-label"),C=Nt("dialog-content"),S=function(Z,pe){return D.some(pe)},k=$r(tU({title:t.internalDialog.title,draggable:!0},p,o.shared.providers)),R=$r(JV({body:t.internalDialog.body},C,o,c)),B=u8(t.internalDialog.buttons),L=s8(B),U=$r(sU({buttons:B},o)),K=dI.initDialog(function(){return me},{onBlock:function(Z){_t.block(ne,function(pe,_e){return a8(Z.message,_e,o.shared.providers)})},onUnblock:function(){_t.unblock(ne)},onClose:function(){return r.closeWindow()}},o.shared.getSink),ne=bo({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(v={role:"dialog"},v["aria-labelledby"]=p,v["aria-describedby"]=C,v)},eventOrder:(m={},m[ec()]=[xl.name(),ps.name()],m[$s()]=["execute-on-form"],m[ds()]=["reflecting","execute-on-form"],m),behaviours:vt([sn.config({mode:"cyclic",onEscape:function(Z){return er(Z,dc),D.some(!0)},useTabstopAt:function(Z){return!Rb(Z)&&(wn(Z)!=="button"||Da(Z,"disabled")!=="disabled")}}),xl.config({channel:fI,updateState:S,initialData:t}),bn.config({}),Fn("execute-on-form",K.concat([Tf(Qs(),function(Z,pe){sn.focusIn(Z)})])),_t.config({getRoot:function(){return D.some(ne)}}),On.config({}),sp.memory({})]),components:[k.asSpec(),R.asSpec(),U.asSpec()]}),me=v8({getRoot:ye(ne),getFooter:function(){return U.get(ne)},getBody:function(){return R.get(ne)},getFormWrapper:function(){var Z=R.get(ne);return Jn.getCurrent(Z).getOr(Z)}},r.redial,L);return{dialog:ne,instanceApi:me}},gI=tinymce.util.Tools.resolve("tinymce.util.URI"),dU=function(t){var r=function(p){t.getSystem().isConnected()&&p(t)},o=function(p){if(!Xt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(function(C){un(C,vx,{message:p})})},c=function(){r(function(p){er(p,xb)})},v=function(){r(function(p){er(p,dc)})},m=function(p){r(function(C){C.getSystem().broadcastOn([GF],p)})};return{block:o,unblock:c,close:v,sendMessage:m}},mU=["insertContent","setContent","execCommand","close","block","unblock"],d8=function(t){return yr(t)&&mU.indexOf(t.mceAction)!==-1},gU=function(t){return!d8(t)&&yr(t)&&hr(t,"mceAction")},hU=function(t,r,o){switch(o.mceAction){case"insertContent":t.insertContent(o.content);break;case"setContent":t.setContent(o.content);break;case"execCommand":var c=no(o.ui)?o.ui:!1;t.execCommand(o.cmd,c,o.value);break;case"close":r.close();break;case"block":r.block(o.message);break;case"unblock":r.unblock();break}},pU=function(t,r,o,c){var v,m=r8(t.title,c),p=QV(t),C=t.buttons.bind(function(pe){return pe.length===0?D.none():D.some(f8({buttons:pe},c))}),S=dI.initUrlDialog(function(){return Z},o8(function(){return me},c.shared.providers,r)),k=ue(ue({},t.height.fold(function(){return{}},function(pe){return{height:pe+"px","max-height":pe+"px"}})),t.width.fold(function(){return{}},function(pe){return{width:pe+"px","max-width":pe+"px"}})),R=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new gI(t.url,{base_uri:new gI(window.location.href)}),L=B.protocol+"://"+B.host+(B.port?":"+B.port:""),U=kd(),K=[Fn("messages",[Ma(function(){var pe=co(re.fromDom(window),"message",function(_e){if(B.isSameOrigin(new gI(_e.raw.origin))){var ze=_e.raw.data;d8(ze)?hU(o,Z,ze):gU(ze)&&t.onMessage(Z,ze)}});U.set(pe)}),ms(U.clear)]),ps.config({channels:(v={},v[GF]={onReceive:function(pe,_e){_o(pe.element,"iframe").each(function(ze){var ge=ze.dom.contentWindow;ge.postMessage(_e,L)})}},v)})],ne={header:m,body:p,footer:C,extraClasses:R,extraBehaviours:K,extraStyles:k},me=i8(ne,t,S,c),Z=dU(me);return{dialog:me,instanceApi:Z}},bU=function(t){var r=t.backstage.shared,o=function(c,v){var m=function(){Fi.hide(k),v()},p=$r(Pb({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:D.none()},"cancel",t.backstage)),C=YF(),S=XF(m,r.providers),k=bo(vI({lazySink:function(){return r.getSink()},header:KF(C,S),body:JF(c,r.providers),footer:D.some(ZF(QF([],[p.asSpec()]))),onEscape:m,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[We(Wc,m)],eventOrder:{}}));Fi.show(k);var R=p.get(k);bn.focus(R)};return{open:o}},yU=function(t){var r=t.backstage.shared,o=function(c,v){var m=function(L){Fi.hide(R),v(L)},p=$r(Pb({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:D.none()},"submit",t.backstage)),C=Pb({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:D.none()},"cancel",t.backstage),S=YF(),k=XF(function(){return m(!1)},r.providers),R=bo(vI({lazySink:function(){return r.getSink()},header:KF(S,k),body:JF(c,r.providers),footer:D.some(ZF(QF([],[C,p.asSpec()]))),onEscape:function(){return m(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[We(Wc,function(){return m(!1)}),We(Sb,function(){return m(!0)})],eventOrder:{}}));Fi.show(R);var B=p.get(R);bn.focus(B)};return{open:o}},wU=function(t,r){return Tc(Ha("data",r,t))},CU=function(t){return O2(t,".tox-alert-dialog")||O2(t,".tox-confirm-dialog")},SU=function(t,r,o){return r&&o?[]:[eu.config({contextual:{lazyContext:function(){return D.some(ho(re.fromDom(t.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},xU=function(t){var r=t.backstage,o=t.editor,c=nx(o),v=bU(t),m=yU(t),p=function(K,ne,me){return ne!==void 0&&ne.inline==="toolbar"?R(K,r.shared.anchors.inlineDialog(),me,ne.ariaAttrs):ne!==void 0&&ne.inline==="cursor"?R(K,r.shared.anchors.cursor(),me,ne.ariaAttrs):k(K,me)},C=function(K,ne){return S(K,ne)},S=function(K,ne){var me=function(Z){var pe=pU(Z,{closeWindow:function(){Fi.hide(pe.dialog),ne(pe.instanceApi)}},o,r);return Fi.show(pe.dialog),pe.instanceApi};return yO.openUrl(me,K)},k=function(K,ne){var me=function(Z,pe,_e){var ze=pe,ge={dataValidator:_e,initialData:ze,internalDialog:Z},ke=fU(ge,{redial:yO.redial,closeWindow:function(){Fi.hide(ke.dialog),ne(ke.instanceApi)}},r);return Fi.show(ke.dialog),ke.instanceApi.setData(ze),ke.instanceApi};return yO.open(me,K)},R=function(K,ne,me,Z){var pe=function(_e,ze,ge){var ke=wU(ze,ge),Le=Qa(),wt=r.shared.header.isPositionedAtTop(),Ue={dataValidator:ge,initialData:ke,internalDialog:_e},St=function(){return Le.on(function(bt){Ir.reposition(bt),eu.refresh(bt)})},Ge=vU(Ue,{redial:yO.redial,closeWindow:function(){Le.on(Ir.hide),o.off("ResizeEditor",St),Le.clear(),me(Ge.instanceApi)}},r,Z),Ie=bo(Ir.sketch(ue(ue({lazySink:r.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},wt?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:vt(gt([Fn("window-manager-inline-events",[We(Ac(),function(bt,Vt){er(Ge.dialog,Wc)})])],SU(o,c,wt),!0)),isExtraPart:function(bt,Vt){return CU(Vt)}})));return Le.set(Ie),Ir.showWithin(Ie,Fs(Ge.dialog),{anchor:ne},D.some(Hr())),(!c||!wt)&&(eu.refresh(Ie),o.on("ResizeEditor",St)),Ge.instanceApi.setData(ke),sn.focusIn(Ge.dialog),Ge.instanceApi};return yO.open(pe,K)},B=function(K,ne){m.open(K,function(me){ne(me)})},L=function(K,ne){v.open(K,function(){ne()})},U=function(K){K.close()};return{open:p,openUrl:C,alert:L,close:U,confirm:B}};function TU(){vo.add("silver",function(t){var r=o9(t),o=r.uiMothership,c=r.backstage,v=r.renderUI,m=r.getUi;BM.register(t,c.shared);var p=xU({editor:t,backstage:c});return{renderUI:v,getWindowManagerImpl:ye(p),getNotificationManagerImpl:function(){return RB(t,{backstage:c},o)},ui:m()}})}TU()})();const Rg=new SquidexFormField,$U=document.getElementById("editor"),xO=new BU(Rg);let Tl,xB;const zU={content_css:"/skins/tinymce/content/default/content.min.css",convert_fonts_to_spans:!0,convert_urls:!1,paste_data_images:!0,plugins:"code image media link lists advlist paste table",min_height:400,max_height:800,removed_menuitems:"newdocument",resize:!0,skin:!1,toolbar:"undo redo | styleselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | link image media",images_upload_handler:async(cn,Ot,An)=>{const Ln=new File([cn.blob()],cn.filename(),{lastModified:new Date().getTime()}),Xt=await xO.upload(Ln);Xt!=null?Ot(xO.assetUrl(Xt)):An("Failed")},setup:cn=>{cn.ui.registry.addButton("assets",{onAction:IU,icon:"gallery",text:"",tooltip:"Insert Assets"}),cn.ui.registry.addButton("contents",{onAction:FU,icon:"duplicate",text:"",tooltip:"Insert Contents"}),cn.on("init",()=>{Tl=cn,p8(),b8()}),cn.on("change",()=>{EI()}),cn.on("paste",Ot=>{let An=!1;if(Ot.clipboardData)for(let Ln=0;Ln<Ot.clipboardData.items.length;Ln++){const Xt=Ot.clipboardData.items[Ln].getAsFile();Xt&&(g8(Xt),An=!0)}if(!An)EI();else return!1}),cn.on("drop",Ot=>{let An=!1;if(Ot.dataTransfer)for(let Ln=0;Ln<Ot.dataTransfer.files.length;Ln++){const Xt=Ot.dataTransfer.files.item(Ln);Xt&&(g8(Xt),An=!0)}return An||EI(),!1}),cn.on("blur",()=>{Rg.touched()})},target:$U};NU.init(zU);function EI(){if(!Tl)return;const cn=Tl.getContent();xB!=cn&&(xB=cn,Rg.valueChanged(cn))}function p8(){const cn=Rg.getValue();!Tl||!Tl.initialized||xB!==cn&&(xB=cn,Tl.setContent(cn||""))}function b8(){Tl&&Tl.initialized&&Tl.setMode(Rg.isDisabled()?"readonly":"design")}Rg.onDisabled(()=>{b8()});Rg.onValueChanged(()=>{p8()});function g8(cn){if(!Tl)return;const Ot=`[Uploading file...${new Date}]`;Tl.execCommand("mceInsertContent",!1,Ot);const An=Xt=>{const yr=Tl.getContent().replace(Ot,Xt);Tl.setContent(yr)},Ln=xO.upload(cn);Ln!=null?An(y8(Ln)):An("FAILED")}function IU(){Rg.pickAssets(cn=>{const Ot=LU(cn);Ot.length>0&&Tl.execCommand("mceInsertContent",!1,Ot)})}function FU(){Rg.pickContents([],cn=>{const Ot=HU(cn);Ot.length>0&&Tl.execCommand("mceInsertContent",!1,Ot)})}function LU(cn){let Ot="";for(const An of cn)Ot+=y8(An);return Ot}function HU(cn){let Ot="";for(const An of cn)Ot+=VU(An);return Ot}function VU(cn){const Ot=Rg.getLanguage();let An=cn.referenceFields.map(Ln=>cn.data[Ln.name]).map(Ln=>Ln?Ln[Ot]||(Ln==null?void 0:Ln.iv):void 0).filter(Ln=>!!Ln).join(", ");return An||(An="Content"),`<a href="${xO.contentUrl(cn)}}" alt="${An}">${An}</a>`}function y8(cn){let Ot=cn.fileName;const An=Ot.lastIndexOf(".");An>0&&(Ot=Ot.substring(0,An));const Ln=xO.assetUrl(cn);return cn.type==="Image"||cn.mimeType==="image/svg+xml"||cn.fileName.endsWith(".svg")?`<img src="${Ln}" alt="${Ot}" />`:cn.type==="Video"?`<video src="${Ln}" />`:`<a href="${Ln}" alt="${Ot}">${Ot}</a>`}
